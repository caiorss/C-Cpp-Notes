<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-03-06 Wed 14:29 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CPP / C++ Review</title>
<meta name="generator" content="Org mode" />
<meta name="description" content="cpp c++ interactive scripting with C++ on CERN's ROOT REPL or CLING."
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
<link href="theme/org-nav-theme.css" rel="stylesheet">
<script src="theme/org-nav-theme.js"></script>
<link rel="icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">CPP / C++ Review</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org472a016">1. C++ CPP CERN - Root Cling Interpreter and tools</a>
<ul>
<li><a href="#orgda9f526">1.1. Overview</a></li>
<li><a href="#org6a1e22f">1.2. Installation and configuration</a>
<ul>
<li><a href="#orgaacbf11">1.2.1. Install from source</a></li>
<li><a href="#org8c168d6">1.2.2. Install from Docker</a></li>
<li><a href="#org6523046">1.2.3. Configuration</a></li>
</ul>
</li>
<li><a href="#orgc475649">1.3. Command Sumamry</a></li>
<li><a href="#org5a3110a">1.4. Playing with Root REPL</a>
<ul>
<li><a href="#org1aec1fe">1.4.1. Start root interpreter</a></li>
<li><a href="#orgd53c877">1.4.2. Run shell command:</a></li>
<li><a href="#orga777e81">1.4.3. Show Math constants</a></li>
<li><a href="#org8dfaf34">1.4.4. Print to stdout</a></li>
<li><a href="#orga8facfa">1.4.5. Paste multiline</a></li>
<li><a href="#orgb7d3509">1.4.6. Playing with STL Vectors</a></li>
<li><a href="#org9f7bad1">1.4.7. Playing with Deque - Double Ended Queue STL Container</a></li>
<li><a href="#orgd0809be">1.4.8. Playing with STL Maps</a></li>
<li><a href="#org924160e">1.4.9. Playing with classes</a></li>
<li><a href="#org2394c6d">1.4.10. Playing with higher order functions and C++11 lambdas</a></li>
<li><a href="#orge06f54d">1.4.11. Playing with STL algorithms</a></li>
<li><a href="#orgd46298a">1.4.12. Show a file</a></li>
<li><a href="#orga8da8c0">1.4.13. Using boost libraries</a></li>
<li><a href="#org7382e2b">1.4.14. Playing with GNU Scientific library shared library</a></li>
<li><a href="#org142ce54">1.4.15. Testing Unix System-Calls and APIs</a></li>
<li><a href="#org02aaced">1.4.16. Run a script with shared library</a></li>
</ul>
</li>
<li><a href="#org3b534ba">1.5. C++ Script Examples</a>
<ul>
<li><a href="#orgf3e0488">1.5.1. Example: Run a Ublas - Boost Library Linear Algebra C++ script</a></li>
<li><a href="#org288d320">1.5.2. Example: GNU Scientific Library C++ Wrapper Script</a></li>
</ul>
</li>
<li><a href="#org4eb2742">1.6. Load Python3 (CPython) C-API in the REPL</a></li>
<li><a href="#orgc0e6548">1.7. Basic Commands</a>
<ul>
<li><a href="#orga2fc573">1.7.1. Show Help</a></li>
</ul>
</li>
<li><a href="#orgf2054d1">1.8. References and Bookmarks</a></li>
</ul>
</li>
</ul>
</div>
</div>
<ul class="org-ul">
<li><a href='index.html'>Index</a></li>
</ul>

<div id="outline-container-org472a016" class="outline-2">
<h2 id="org472a016"><span class="section-number-2">1</span> C++ CPP CERN - Root Cling Interpreter and tools</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orgda9f526" class="outline-3">
<h3 id="orgda9f526"><span class="section-number-3">1.1</span> Overview</h3>
<div class="outline-text-3" id="text-1-1">
<p>
<a href="https://en.wikipedia.org/wiki/CERN">CERN</a>'s (European Organization for Nuclear Research) <a href="https://en.wikipedia.org/wiki/ROOT">Root Framework</a>
allows one to explore and play with C++ interactively through an
interactive C++ interpreter where the user can type and evaluate
expressions and commands in a similar way to Python's REPL. 
</p>

<p>
The Root interpreter, also known as CLING, currently can interpret
C++14 and supports mostly U-nix like operating system like Linux or
MacOSX and Windows support is still experimental.
</p>

<p>
Among other things, ROOT has the following features: 
</p>
<ul class="org-ul">
<li>Run C++ code as scripts</li>
<li>Evaluate C++ code interactively</li>
<li>Load C libraries such as OpenGL, GNU scientific libraries</li>
<li>Load header only libraries such as Boost-Libraries</li>
<li>Data analysis tools and statistical libraries</li>
<li>Plotting tools</li>
</ul>

<p>
Possible Use-cases: 
</p>
<ul class="org-ul">
<li>Learn C++ faster.</li>
<li>Exploratory design</li>
<li>Fast C++ prototyping</li>
<li>Explore and play with a wide range of C++ libraries</li>
<li>Test new ideas faster.</li>
<li>Learn about operating system APIs.</li>
</ul>

<p>
Note: 
</p>
<ul class="org-ul">
<li>CLING is the ROOT's C++ interpreter distributed in a standalone way
without ROOT's additional plotting and statistical libraries.</li>
</ul>

<p>
GIT Repository: 
</p>
<ul class="org-ul">
<li><a href="http://github.com/root-project/root.git">http://github.com/root-project/root.git</a></li>
</ul>

<p>
ROOT Forum: 
</p>
<ul class="org-ul">
<li><a href="https://root-forum.cern.ch/">https://root-forum.cern.ch/</a></li>
</ul>

<p>
Download: 
</p>
<ul class="org-ul">
<li><a href="https://root.cern.ch/downloading-root">https://root.cern.ch/downloading-root</a> - ROOT framework.</li>
<li><a href="https://root.cern.ch/downloading-root">https://root.cern.ch/downloading-root</a> - CLING - only the C++ interpreter
without ROOT's GUIs, plotting and statistical libraries. CLING can
also be embedded on applications.</li>
</ul>

<p>
Demonstration Videos: 
</p>

<ul class="org-ul">
<li><a href="https://youtu.be/s9PTrWOnDy8?list=PLTG3YvUaExuuISUOLwQDUVdvXgEi1Ez2J&amp;t=503">Intro to ROOT Tutorial Lesson 0 - Getting Started</a></li>
<li><a href="https://www.youtube.com/watch?v=eoIuqLNvzFs">Cling Interactive OpenGL Demo</a></li>
<li><a href="https://www.youtube.com/watch?v=Lbi7MLS03Yc">Cling â€” An Interactive C++ Interpreter</a> - by Dmitri Nesteruk.</li>
<li><a href="https://www.youtube.com/watch?v=PLF5Y5BXD_g">Cling on Ubuntu on Windows</a> - by Dmitri Nesteruk.</li>
<li><a href="https://www.youtube.com/watch?v=1IGTHusaJ18">cling C++ interpreter testdrive</a></li>
</ul>

<p>
Technical Explanations and talks: 
</p>

<ul class="org-ul">
<li>Boostcon: <a href="https://www.youtube.com/watch?v=K2KqEV866Ro">Vassil Vassilev: Interactive, Introspected C++ at CERN - YouTube</a>
<ul class="org-ul">
<li>"CERN is the world's biggest particle physics laboratory. It has
to process about 15 PB/year in order to make such scientific
breakthroughs. The ROOT Framework's unique abilities enable
physicists to analyse that data with high efficiency,
computationally and storage-wise. In the core of ROOT's newest
version is Cling &#x2013; an interactive C++ interpreter, that targets
support of C++11. Cling replaces a previous C++ interpreter that
is traditionally the main user interface to ROOT. Cling is built
on LLVM/Clang compiler infrastructure. The interpreter is not
only used by ROOT to serialize, deserialize and manipulate the
C++ OO representation of data, but to help novices learn and
understand C++ faster."</li>
</ul></li>

<li>GoogleTechTalks: <a href="https://www.youtube.com/watch?v=f9Xfh8pv3Fs">Introducing cling, a C++ Interpreter Based on clang/LLVM - YouTube</a>
<ul class="org-ul">
<li>Presented by Axel Naumann, CERN. "At CERN, 50 million lines of
C++ code are being used by about 10 thousand physicist. Many of
them are not programming experts. To make writing C++ more
accessible, ROOT (<a href="http://root.cern.ch">http://root.cern.ch</a>), one of the core tools at
CERN, has been using the CINT C++ interpreter for more than 15
years. CINT also opens up a whole new world of dynamic
programming: plug-ins, signal/slot, runtime evaluation,
reflection. In particular, the latter is fundamental to CERN and
its petabytes of Large Hadron Collider data per year, which are
created, serialized, and analyzed as C++ objects &#x2026;"</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org6a1e22f" class="outline-3">
<h3 id="org6a1e22f"><span class="section-number-3">1.2</span> Installation and configuration</h3>
<div class="outline-text-3" id="text-1-2">
</div>
<div id="outline-container-orgaacbf11" class="outline-4">
<h4 id="orgaacbf11"><span class="section-number-4">1.2.1</span> Install from source</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
Compilation Instructions: 
</p>
<ul class="org-ul">
<li><a href="https://root.cern.ch/building-root">Building ROOT | ROOT a Data analysis Framework</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-shel"># Clone the repository 
$ git clone http://github.com/root-project/root.git

# Create build directory for compiling 
$ mkdir -p root/build &amp;&amp; cd root/build

# Install program at $HOME/opt/cern-root or ~/opt/cern-root
$ cmake .. -Dcxx=17 -Dgviz=OFF -Dhdfs=OFF -Dkrb5=OFF -Dladp=OFF -Dmysql=OFF  -Dodbc=OFF \
  -Doracle=OFF -Dpgsql=OFF -Dx11=OFF -Dpython=OFF -Dbounjour=OFF \
  -DCMAKE_INSTALL_PREFIX=$HOME/opt/cern-root

# Compile with -jN where N is the number of processor cores.
$ make -j4 &amp;&amp; make install

# Run ROOT REPL:
$ /home/archbox/opt/cern-root/bin/root.exe 
   ------------------------------------------------------------
  | Welcome to ROOT 6.14/04                http://root.cern.ch |
  |                               (c) 1995-2018, The ROOT Team |
  | Built for linuxx8664gcc                                    |
  | From tags/v6-14-04@v6-14-04, Aug 23 2018, 17:00:44         |
  | Try '.help', '.demo', '.license', '.credits', '.quit'/'.q' |
   ------------------------------------------------------------
</pre>
</div>
</div>
</div>

<div id="outline-container-org8c168d6" class="outline-4">
<h4 id="org8c168d6"><span class="section-number-4">1.2.2</span> Install from Docker</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
Docker Image: 
</p>
<ul class="org-ul">
<li>DockerFile: <a href="https://github.com/mazurov/cern-root">https://github.com/mazurov/cern-root</a></li>
<li>DockerHub:  <a href="https://hub.docker.com/r/mazurov/cern-root">https://hub.docker.com/r/mazurov/cern-root</a></li>
</ul>

<p>
<b>Pull docker Image:</b>
</p>

<div class="org-src-container">
<pre class="src src-sh">$ docker pull mazurov/cern-root
</pre>
</div>

<p>
<b>Run Shell:</b>
</p>

<div class="org-src-container">
<pre class="src src-sh">$ docker run -t -i -a stdout -a stdin mazurov/cern-root

[root@4b6810a8ca0b /]# ls /opt/root/bin/    
genreflex           rmkdepend     rooteventselector  setenvwrap.csh
hadd                root          rootls             setxrd.csh
hist2workspace      root-config   rootmkdir          setxrd.sh
memprobe            root.exe      rootmv             ssh2rpd
pq2                 rootbrowse    rootn.exe          thisroot.csh
prepareHistFactory  rootcint      rootnb.exe         thisroot.sh
proofd              rootcling     rootprint          xpdtest
proofexecv          rootcp        rootrm
proofserv           rootd         roots
proofserv.exe       rootdrawtree  roots.exe
[root@4b6810a8ca0b /]# 
[root@4b6810a8ca0b /]# 

</pre>
</div>


<p>
<b>Run ROOT REPL:</b>
</p>

<div class="org-src-container">
<pre class="src src-sh">$ docker run -t -i -a stdout -a stdin --entrypoint <span class="org-string">"root.exe"</span> mazurov/cern-root 
</pre>
</div>

<p>
Session:
</p>

<div class="org-src-container">
<pre class="src src-sh">  ------------------------------------------------------------
  | Welcome to ROOT 6.09/02                http://root.cern.ch |
  |                               (c) 1995-2016, The ROOT Team |
  | Built for linuxx8664gcc                                    |
  | From tag v6-09-02, 8 March 2017                            |
  | Try <span class="org-string">'.help'</span>, <span class="org-string">'.demo'</span>, <span class="org-string">'.license'</span>, <span class="org-string">'.credits'</span>, <span class="org-string">'.quit'</span>/<span class="org-string">'.q'</span> |
   ------------------------------------------------------------

root [0] 
root [0] .q
(base) 

root [0] std::cout &lt;&lt; <span class="org-string">"Hello world C++11"</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-sh-heredoc">Hello world C++11</span>
<span class="org-sh-heredoc">root [1] </span>
</pre>
</div>

<p>
<b>Mount disk directory on docker image</b>
</p>

<div class="org-src-container">
<pre class="src src-sh">$ docker run -it --rm -w /user -v $(<span class="org-sh-quoted-exec">pwd</span>):/user --entrypoint=<span class="org-string">"root.exe"</span> mazurov/cern-root
</pre>
</div>

<p>
Commands:
</p>
<ul class="org-ul">
<li>-w /user
<ul class="org-ul">
<li>Set Docker current directory to user</li>
</ul></li>
<li>-v $(pwd):/user
<ul class="org-ul">
<li>Mount current disk directory into the directory /user in the Docker image.</li>
</ul></li>
<li>&#x2013;entrypoint="/opt/root/bin/root.exe"
<ul class="org-ul">
<li>Set entry point to ROOT REPL.</li>
</ul></li>
</ul>

<p>
Session Example: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ docker run -it --rm -w /user -v $(<span class="org-sh-quoted-exec">pwd</span>):/user --entrypoint=<span class="org-string">"root.exe"</span> mazurov/cern-root

 root [5] .! ls
 arraysFun.cpp                      object-lifecycle.cpp
 assert.cpp                         operator-overload1.bin
 basic-io.cpp                       operator-overload1.cpp
 boost                              operator-overload2.bin
 cpp-functor.cpp                            operator-overload2.cpp
 ... ...    ... ...    ... ...    ... ...    ... ...    ... ... 

 <span class="org-comment-delimiter"># </span><span class="org-comment">Load File and run function main()</span>
 root [6] .L numeric-limits.cpp 
 root [7] 
 root [7] main()
 Numeric limits for type: bool
 ------------------------------------------------------------
                          Type:                     bool
                    Is integer:                     true
                     Is signed:                    false
           Number of digits 10:                        0
       Max Number of digits 10:                        0
                       Min Abs:                        0
                           Min:                        0
                           Max:                        1
                 Size<span class="org-keyword"> in</span> bytes:                        1
                  Size<span class="org-keyword"> in</span> bits:                        8
 ...    ...    ...    ...    ...    ...    ...    ... 
</pre>
</div>

<p>
Bash Function for usage simplification: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-keyword">function</span> <span class="org-function-name">docker-run</span>(){
   <span class="org-variable-name">DIMAGE</span>=<span class="org-string">"$1"</span>
   <span class="org-keyword">if</span> [ -n <span class="org-string">"$2"</span> ] ; <span class="org-keyword">then</span> 
      <span class="org-variable-name">ENTRYPOINT</span>=<span class="org-string">"$2"</span>
   <span class="org-keyword">else</span> 
      <span class="org-variable-name">ENTRYPOINT</span>=<span class="org-string">"/bin/sh"</span>
   <span class="org-keyword">fi</span> 
   docker run -it --rm -w /user -v $(<span class="org-sh-quoted-exec">pwd</span>):/user --entrypoint $<span class="org-variable-name">ENTRYPOINT</span> $<span class="org-variable-name">DIMAGE</span> 
}

<span class="org-comment-delimiter"># </span><span class="org-comment">Run shell (default entry-point)</span>
$ docker-run mazurov/cern-root

<span class="org-comment-delimiter"># </span><span class="org-comment">Run root.exe entry-point of Docker image (mazurov/cern-root)</span>
$ docker-run mazurov/cern-root root.exe
</pre>
</div>
</div>
</div>


<div id="outline-container-org6523046" class="outline-4">
<h4 id="org6523046"><span class="section-number-4">1.2.3</span> Configuration</h4>
<div class="outline-text-4" id="text-1-2-3">
<p>
Set environment variables: 
</p>

<ul class="org-ul">
<li>Add this piece of code to any of those configuration files:
~/.profile, <code>~/.bash_profile</code> or ~/.bashrc.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Set root directory (ROOTSYS) to the path where it was installed </span>
<span class="org-builtin">export</span> <span class="org-variable-name">ROOTSYS</span>=$<span class="org-variable-name">HOME</span>/opt/root 
<span class="org-comment-delimiter"># </span><span class="org-comment">DO NOT change those variables below </span>
<span class="org-builtin">export</span> <span class="org-variable-name">LD_LIBRARY_PATH</span>=$<span class="org-variable-name">LD_LIBRARY_PATH</span>:$<span class="org-variable-name">ROOTSYS</span>/lib 
<span class="org-builtin">export</span> <span class="org-variable-name">PATH</span>=$<span class="org-variable-name">PATH</span>:$<span class="org-variable-name">ROOTSYS</span>/bin
<span class="org-builtin">alias</span> cern-root=<span class="org-string">"$ROOTSYS/bin/root -l"</span>
</pre>
</div>

<p>
Questions about configuration files: 
</p>

<ul class="org-ul">
<li><a href="http://insectnation.org/articles/basic-root.html">Basic ROOT start-up guide | Insectnation</a></li>
<li><a href="https://root.cern.ch/root/roottalk/roottalk00/3018.html">RootTalk: Re: ROOT .rootrc, etc.</a></li>
<li><a href="https://root-forum.cern.ch/t/setting-include-path-in-rootrc-file/6245">Setting .include path in .rootrc file? - ROOT - ROOT Forum</a></li>
<li></li>
</ul>

<p>
Current install: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ which root
/home/archbox/opt/root/bin/root

$ pwd
/home/archbox/opt/root

archbox@localhost 16:10 ~/opt/root
$ tree -L 1 .
<span class="org-builtin">.</span>
&#9500;&#9472;&#9472; aclocal
&#9500;&#9472;&#9472; bin
&#9500;&#9472;&#9472; cmake
&#9500;&#9472;&#9472; config
&#9500;&#9472;&#9472; emacs
&#9500;&#9472;&#9472; etc
&#9500;&#9472;&#9472; fonts
&#9500;&#9472;&#9472; geom
&#9500;&#9472;&#9472; icons
&#9500;&#9472;&#9472; include
&#9500;&#9472;&#9472; lib
&#9500;&#9472;&#9472; LICENSE
&#9500;&#9472;&#9472; macros
&#9500;&#9472;&#9472; man
&#9500;&#9472;&#9472; README
&#9500;&#9472;&#9472; test
&#9500;&#9472;&#9472; tmva
&#9492;&#9472;&#9472; tutorials

17 directories, 1 file

</pre>
</div>

<p>
Show tools available: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ tree -L 1 bin/
bin/
&#9500;&#9472;&#9472; g2root
&#9500;&#9472;&#9472; genreflex
&#9500;&#9472;&#9472; h2root
&#9500;&#9472;&#9472; hadd
&#9500;&#9472;&#9472; hist2workspace
&#9500;&#9472;&#9472; memprobe
&#9500;&#9472;&#9472; pq2
&#9500;&#9472;&#9472; prepareHistFactory
&#9500;&#9472;&#9472; proofd
&#9500;&#9472;&#9472; proofexecv
&#9500;&#9472;&#9472; proofserv
&#9500;&#9472;&#9472; proofserv.exe
&#9500;&#9472;&#9472; rmkdepend
&#9500;&#9472;&#9472; root
&#9500;&#9472;&#9472; rootbrowse
&#9500;&#9472;&#9472; rootcint
&#9500;&#9472;&#9472; rootcling
&#9500;&#9472;&#9472; root-config
&#9500;&#9472;&#9472; rootcp
&#9500;&#9472;&#9472; rootd
&#9500;&#9472;&#9472; rootdrawtree
&#9500;&#9472;&#9472; rooteventselector
&#9500;&#9472;&#9472; root.exe
&#9500;&#9472;&#9472; rootls
&#9500;&#9472;&#9472; rootmkdir
&#9500;&#9472;&#9472; rootmv
&#9500;&#9472;&#9472; rootnb.exe
&#9500;&#9472;&#9472; rootn.exe
&#9500;&#9472;&#9472; rootprint
&#9500;&#9472;&#9472; rootrm
&#9500;&#9472;&#9472; roots
&#9500;&#9472;&#9472; roots.exe
&#9500;&#9472;&#9472; rootslimtree
&#9500;&#9472;&#9472; setenvwrap.csh
&#9500;&#9472;&#9472; setxrd.csh
&#9500;&#9472;&#9472; setxrd.sh
&#9500;&#9472;&#9472; ssh2rpd
&#9500;&#9472;&#9472; thisroot.csh
&#9500;&#9472;&#9472; thisroot.sh
&#9500;&#9472;&#9472; xpdtest
&#9492;&#9472;&#9472; xproofd

0 directories, 41 files

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc475649" class="outline-3">
<h3 id="orgc475649"><span class="section-number-3">1.3</span> Command Sumamry</h3>
<div class="outline-text-3" id="text-1-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">REPL Command</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">.?</td>
<td class="org-left">Show help</td>
</tr>

<tr>
<td class="org-left">.q</td>
<td class="org-left">Exit ROOT shell</td>
</tr>

<tr>
<td class="org-left">.L file.cpp</td>
<td class="org-left">Load file.cpp, so it loads all the file's classes and functions</td>
</tr>

<tr>
<td class="org-left">.x script.cxx</td>
<td class="org-left">Load and execute ROOT script or C++ ordinary source code. The entry point is void script()</td>
</tr>

<tr>
<td class="org-left">.include</td>
<td class="org-left">Show include path</td>
</tr>

<tr>
<td class="org-left">.I &lt;include path&gt;</td>
<td class="org-left">Add include path to search for header files (*.h), for instance .I <i>usr/include/qt5</i></td>
</tr>

<tr>
<td class="org-left">.! &lt;shell command&gt;</td>
<td class="org-left">Run shell command such as ls on Unix.</td>
</tr>

<tr>
<td class="org-left">.class TFile</td>
<td class="org-left">Show all methods and fields of the class TFile</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Documentation: 
</p>
<ul class="org-ul">
<li>Source Code Documentation: <a href="https://root.cern/doc/v612/files.html">https://root.cern/doc/v612/files.html</a></li>
<li></li>
</ul>

<p>
GSystem object: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">gSystem-&gt;AddLinkedLibs <span class="org-rainbow-delimiters-depth-1">(</span>...<span class="org-rainbow-delimiters-depth-1">)</span> 
gSystem-&gt;AddIncludePath<span class="org-rainbow-delimiters-depth-1">(</span>...<span class="org-rainbow-delimiters-depth-1">)</span>

gROOT-&gt;GetListOfClasses<span class="org-rainbow-delimiters-depth-1">()</span>
gROOT-&gt;GetListOfColors<span class="org-rainbow-delimiters-depth-1">()</span>
gROOT-&gt;GetListOfTypes<span class="org-rainbow-delimiters-depth-1">()</span>
gROOT-&gt;GetListOfGlobals<span class="org-rainbow-delimiters-depth-1">()</span>
gROOT-&gt;GetListOfGlobalFunctions<span class="org-rainbow-delimiters-depth-1">()</span>
gROOT-&gt;GetListOfFiles<span class="org-rainbow-delimiters-depth-1">()</span>
gROOT-&gt;GetListOfMappedFiles<span class="org-rainbow-delimiters-depth-1">()</span>
gROOT-&gt;GetListOfSockets<span class="org-rainbow-delimiters-depth-1">()</span>
gROOT-&gt;GetListOfCanvases<span class="org-rainbow-delimiters-depth-1">()</span>
gROOT-&gt;GetListOfStyles<span class="org-rainbow-delimiters-depth-1">()</span>
gROOT-&gt;GetListOfFunctions<span class="org-rainbow-delimiters-depth-1">()</span>
gROOT-&gt;GetListOfSpecials<span class="org-rainbow-delimiters-depth-1">()</span>
gROOT-&gt;GetListOfGeometries<span class="org-rainbow-delimiters-depth-1">()</span>
gROOT-&gt;GetListOfBrowsers<span class="org-rainbow-delimiters-depth-1">()</span>
gROOT-&gt;GetListOfMessageHandlers<span class="org-rainbow-delimiters-depth-1">()</span>
</pre>
</div>

<p>
Get Version: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>20<span class="org-rainbow-delimiters-depth-1">]</span> gROOT-&gt;GetVersion<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"6.14/04"</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>21<span class="org-rainbow-delimiters-depth-1">]</span>
</pre>
</div>

<p>
Get and Set Prompt: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">TRint</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>gROOT-&gt;GetApplication<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>-&gt;GetPrompt<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"root [1] "</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">TRint</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>gROOT-&gt;GetApplication<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>-&gt;SetPrompt<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"&gt;&gt; "</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"root [%d] "</span>
&gt;&gt;
&gt;&gt;
</pre>
</div>

<p>
Change and check current working directory.
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>30<span class="org-rainbow-delimiters-depth-1">]</span> gSystem-&gt;cd<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/home/archbox"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>31<span class="org-rainbow-delimiters-depth-1">]</span> gSystem-&gt;pwd<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"/home/archbox"</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>32<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>32<span class="org-rainbow-delimiters-depth-1">]</span> 
</pre>
</div>

<p>
Get environment variables: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>32<span class="org-rainbow-delimiters-depth-1">]</span> gSystem-&gt;Getenv<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"HOME"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"/home/archbox"</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>33<span class="org-rainbow-delimiters-depth-1">]</span> gSystem-&gt;Getenv<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"PATH"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"/usr/lib64/qt-3.3/bin:/usr/local/bin:/usr/bin:/bin:..."</span>
</pre>
</div>

<p>
Add Include Path: 
</p>

<p>
&#x2013; Ref: <a href="https://root-forum.cern.ch/t/setting-include-path-in-rootrc-file/6245">Setting .include path in .rootrc file? - ROOT - ROOT Forum</a>
</p>

<div class="org-src-container">
<pre class="src src-cpp">gSystem-&gt;SetIncludePath<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" -Imyincludepath1 "</span><span class="org-rainbow-delimiters-depth-1">)</span>;
gSystem-&gt;SetIncludePath<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" -Imyincludepath2 "</span><span class="org-rainbow-delimiters-depth-1">)</span>;
...
</pre>
</div>

<p>
Eval String: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> gROOT-&gt;ProcessLine<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"std::cout &lt;&lt; \"Hello world\" &lt;&lt; std::endl;"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
Hello <span class="org-type">world</span>
<span class="org-variable-name">root</span> <span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> 

root <span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span> gROOT-&gt;ProcessLine<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"cos(M_PI)"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -1.0000000

root <span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span> gROOT-&gt;ProcessLine<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"cos(2 * M_PI)"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.0000000
root <span class="org-rainbow-delimiters-depth-1">[</span>4<span class="org-rainbow-delimiters-depth-1">]</span> 
</pre>
</div>

<p>
Print configuration: 
</p>

<ul class="org-ul">
<li>Command: gEnv-&gt;Print()</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">Root <span class="org-rainbow-delimiters-depth-1">[</span>5<span class="org-rainbow-delimiters-depth-1">]</span> gEnv-&gt;Print<span class="org-rainbow-delimiters-depth-1">()</span>
Unix.*.Root.UseTTFonts:   <span class="org-constant">true</span>                           <span class="org-rainbow-delimiters-depth-1">[</span>Global<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">WinNT.UseNetAPI</span>:          <span class="org-constant">true</span>                           <span class="org-rainbow-delimiters-depth-1">[</span>Global<span class="org-rainbow-delimiters-depth-1">]</span>
Unix.*.Root.UseThreads:   <span class="org-constant">false</span>                          <span class="org-rainbow-delimiters-depth-1">[</span>Global<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">Root.CompressionAlgorithm</span>: 0                              <span class="org-rainbow-delimiters-depth-1">[</span>Global<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">Root.ShowPath</span>:            <span class="org-constant">false</span>                          <span class="org-rainbow-delimiters-depth-1">[</span>Global<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">Root.TMemStat</span>:            0                              <span class="org-rainbow-delimiters-depth-1">[</span>Global<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">Root.TMemStat.buffersize</span>: 100000                         <span class="org-rainbow-delimiters-depth-1">[</span>Global<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">Root.TMemStat.maxcalls</span>:   5000000                        <span class="org-rainbow-delimiters-depth-1">[</span>Global<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">Root.TMemStat.system</span>:                                    <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">Global</span><span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">Root.MemStat</span>:             0                              <span class="org-rainbow-delimiters-depth-1">[</span>Global<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">Root.MemStat.size</span>:        -1                             <span class="org-rainbow-delimiters-depth-1">[</span>Global<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">Root.MemStat.cnt</span>:         -1                             <span class="org-rainbow-delimiters-depth-1">[</span>Global<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">Root.ObjectStat</span>:          0                              <span class="org-rainbow-delimiters-depth-1">[</span>Global<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-function-name">Root.MemCheck</span>:            0                              <span class="org-rainbow-delimiters-depth-1">[</span>Global<span class="org-rainbow-delimiters-depth-1">]</span>

</pre>
</div>
</div>
</div>

<div id="outline-container-org5a3110a" class="outline-3">
<h3 id="org5a3110a"><span class="section-number-3">1.4</span> Playing with Root REPL</h3>
<div class="outline-text-3" id="text-1-4">
</div>
<div id="outline-container-org1aec1fe" class="outline-4">
<h4 id="org1aec1fe"><span class="section-number-4">1.4.1</span> Start root interpreter</h4>
<div class="outline-text-4" id="text-1-4-1">
<div class="org-src-container">
<pre class="src src-sh">$ $<span class="org-variable-name">HOME</span>/opt/root/bin/root 
ERROR<span class="org-keyword"> in</span> cling::CIFactory::createCI(): cannot extract standard library include paths!
<span class="org-function-name">Invoking</span>:
  <span class="org-variable-name">LC_ALL</span>=C ccache  -O3 -DNDEBUG -xc++ -E -v /dev/null 2&gt;&amp;1 &gt;/dev/null | awk <span class="org-string">'/^#include &lt;/,/^End of search/{if (!/^#include &lt;/ &amp;&amp; !/^End of search/){ print }}'</span> | <span class="org-variable-name">GREP_OPTIONS</span>= grep -E <span class="org-string">"(c|g)\+\+"</span>
Results was:
With exit code 256
   ------------------------------------------------------------
  | Welcome to ROOT 6.14/04                http://root.cern.ch |
  |                               (c) 1995-2018, The ROOT Team |
  | Built for linuxx8664gcc                                    |
  | From tags/v6-14-04@v6-14-04, Aug 23 2018, 17:00:44         |
  | Try <span class="org-string">'.help'</span>, <span class="org-string">'.demo'</span>, <span class="org-string">'.license'</span>, <span class="org-string">'.credits'</span>, <span class="org-string">'.quit'</span>/<span class="org-string">'.q'</span> |
   ------------------------------------------------------------

root [0] 
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd53c877" class="outline-4">
<h4 id="orgd53c877"><span class="section-number-4">1.4.2</span> Run shell command:</h4>
<div class="outline-text-4" id="text-1-4-2">
<div class="org-src-container">
<pre class="src src-sh">root [66] .! ls
a.out            clang1.cpp     clang-start.bin   myclass.cpp       testclang.bin
cashFlowApp.cpp  clangcpp1.bin  clang-start.cpp   myclass.hpp       testclang.cpp
cashflow.cpp     clangcpp1.cpp  diagnostics.bin   numLimits.cpp     testcl.bin
cashflow.h       clanger.bin    diagnostics.cpp   printHeaders.cpp  testcl.cpp
cashflow.so      clanger.c      dump-classes.cpp  source-info.bin
clang1.bin       clanger.cpp    libcashflow.cpp   source-info.cpp
root [67]

root [67] .! pwd
/home/archbox/shared/reflection-root
root [68] 
</pre>
</div>
</div>
</div>
<div id="outline-container-orga777e81" class="outline-4">
<h4 id="orga777e81"><span class="section-number-4">1.4.3</span> Show Math constants</h4>
<div class="outline-text-4" id="text-1-4-3">
<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>5<span class="org-rainbow-delimiters-depth-1">]</span> M_PI
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 3.1415927
root <span class="org-rainbow-delimiters-depth-1">[</span>6<span class="org-rainbow-delimiters-depth-1">]</span> M_E
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 2.7182818
root <span class="org-rainbow-delimiters-depth-1">[</span>7<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>7<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-comment-delimiter">// </span><span class="org-comment">Predefined math constants in the header cmath</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>8<span class="org-rainbow-delimiters-depth-1">]</span> M_E
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 2.7182818
root <span class="org-rainbow-delimiters-depth-1">[</span>9<span class="org-rainbow-delimiters-depth-1">]</span> M_PI
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 3.1415927
root <span class="org-rainbow-delimiters-depth-1">[</span>10<span class="org-rainbow-delimiters-depth-1">]</span> M_LOG10E <span class="org-comment-delimiter">// </span><span class="org-comment">Logarithm to base 2 of E</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.43429448
root <span class="org-rainbow-delimiters-depth-1">[</span>11<span class="org-rainbow-delimiters-depth-1">]</span> M_LN10 <span class="org-comment-delimiter">// </span><span class="org-comment">Natural log of 10</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 2.3025851
root <span class="org-rainbow-delimiters-depth-1">[</span>12<span class="org-rainbow-delimiters-depth-1">]</span> M_PI_4 <span class="org-comment-delimiter">// </span><span class="org-comment">PI divided by 4 or PI/4</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.78539816
root <span class="org-rainbow-delimiters-depth-1">[</span>13<span class="org-rainbow-delimiters-depth-1">]</span> M_2_PI <span class="org-comment-delimiter">// </span><span class="org-comment">2 * PI or 360 deg</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.63661977
root <span class="org-rainbow-delimiters-depth-1">[</span>14<span class="org-rainbow-delimiters-depth-1">]</span> M_SQRT2 <span class="org-comment-delimiter">// </span><span class="org-comment">Square root of 2</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.4142136
root <span class="org-rainbow-delimiters-depth-1">[</span>15<span class="org-rainbow-delimiters-depth-1">]</span> M_SQRT1_2
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.70710678
root <span class="org-rainbow-delimiters-depth-1">[</span>16<span class="org-rainbow-delimiters-depth-1">]</span> 
</pre>
</div>
</div>
</div>
<div id="outline-container-org8dfaf34" class="outline-4">
<h4 id="org8dfaf34"><span class="section-number-4">1.4.4</span> Print to stdout</h4>
<div class="outline-text-4" id="text-1-4-4">
<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>20<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Hello world"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
Hello <span class="org-type">world</span>
<span class="org-variable-name">root</span> <span class="org-rainbow-delimiters-depth-1">[</span>21<span class="org-rainbow-delimiters-depth-1">]</span> 

root <span class="org-rainbow-delimiters-depth-1">[</span>21<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0 ; i &lt; 10; i++<span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"i = "</span> &lt;&lt; i &lt;&lt; <span class="org-constant">std</span>::endl; <span class="org-rainbow-delimiters-depth-1">}</span>
i = 0
i = 1
i = 2
i = 3
i = 4
i = 5
i = 6
i = 7
i = 8
i = 9

</pre>
</div>
</div>
</div>
<div id="outline-container-orga8facfa" class="outline-4">
<h4 id="orga8facfa"><span class="section-number-4">1.4.5</span> Paste multiline</h4>
<div class="outline-text-4" id="text-1-4-5">
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">To paste a multi line code, paste the code between brackets</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">To paste a multi line code, paste the code between brackets</span>
  <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">auto</span> <span class="org-variable-name">func</span> = <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span>
      <span class="org-keyword">return</span> x * x - 4 * x + 10;
  <span class="org-rainbow-delimiters-depth-2">}</span>;
  <span class="org-rainbow-delimiters-depth-1">}</span>

  root <span class="org-rainbow-delimiters-depth-1">[</span>38<span class="org-rainbow-delimiters-depth-1">]</span> func<span class="org-rainbow-delimiters-depth-1">(</span>4.0<span class="org-rainbow-delimiters-depth-1">)</span>
  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 10.000000
  root <span class="org-rainbow-delimiters-depth-1">[</span>39<span class="org-rainbow-delimiters-depth-1">]</span> 
  root <span class="org-rainbow-delimiters-depth-1">[</span>39<span class="org-rainbow-delimiters-depth-1">]</span> func<span class="org-rainbow-delimiters-depth-1">(</span>0<span class="org-rainbow-delimiters-depth-1">)</span>
  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 10.000000
  root <span class="org-rainbow-delimiters-depth-1">[</span>40<span class="org-rainbow-delimiters-depth-1">]</span> func<span class="org-rainbow-delimiters-depth-1">(</span>3<span class="org-rainbow-delimiters-depth-1">)</span>
  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 7.0000000
  root <span class="org-rainbow-delimiters-depth-1">[</span>41<span class="org-rainbow-delimiters-depth-1">]</span> func<span class="org-rainbow-delimiters-depth-1">(</span>5<span class="org-rainbow-delimiters-depth-1">)</span>
  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 15.000000
  root <span class="org-rainbow-delimiters-depth-1">[</span>42<span class="org-rainbow-delimiters-depth-1">]</span> func<span class="org-rainbow-delimiters-depth-1">(</span>10<span class="org-rainbow-delimiters-depth-1">)</span>
  <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 70.000000
  root <span class="org-rainbow-delimiters-depth-1">[</span>43<span class="org-rainbow-delimiters-depth-1">]</span> 

</pre>
</div>
</div>
</div>
<div id="outline-container-orgb7d3509" class="outline-4">
<h4 id="orgb7d3509"><span class="section-number-4">1.4.6</span> Playing with STL Vectors</h4>
<div class="outline-text-4" id="text-1-4-6">
<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>47<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> ys <span class="org-rainbow-delimiters-depth-1">{</span>10.0, 3.0, 5.0, 6.0, 10.0, 20.0<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 10.000000, 3.0000000, 5.0000000, 6.0000000, 10.000000, 20.000000 <span class="org-rainbow-delimiters-depth-1">}</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>48<span class="org-rainbow-delimiters-depth-1">]</span> 

root <span class="org-rainbow-delimiters-depth-1">[</span>48<span class="org-rainbow-delimiters-depth-1">]</span> ys.size<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 6
root <span class="org-rainbow-delimiters-depth-1">[</span>49<span class="org-rainbow-delimiters-depth-1">]</span> ys.max_size<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 2305843009213693951
root <span class="org-rainbow-delimiters-depth-1">[</span>50<span class="org-rainbow-delimiters-depth-1">]</span> ys<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 10.000000
root <span class="org-rainbow-delimiters-depth-1">[</span>51<span class="org-rainbow-delimiters-depth-1">]</span> ys<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 3.0000000
root <span class="org-rainbow-delimiters-depth-1">[</span>52<span class="org-rainbow-delimiters-depth-1">]</span> ys<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 5.0000000
root <span class="org-rainbow-delimiters-depth-1">[</span>53<span class="org-rainbow-delimiters-depth-1">]</span> ys.at<span class="org-rainbow-delimiters-depth-1">(</span>0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 10.000000
root <span class="org-rainbow-delimiters-depth-1">[</span>54<span class="org-rainbow-delimiters-depth-1">]</span> ys.at<span class="org-rainbow-delimiters-depth-1">(</span>1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 3.0000000
root <span class="org-rainbow-delimiters-depth-1">[</span>55<span class="org-rainbow-delimiters-depth-1">]</span> ys.at<span class="org-rainbow-delimiters-depth-1">(</span>2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 5.0000000
root <span class="org-rainbow-delimiters-depth-1">[</span>56<span class="org-rainbow-delimiters-depth-1">]</span> ys.at<span class="org-rainbow-delimiters-depth-1">(</span>100<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: <span class="org-constant">std</span>::out_of_range caught: <span class="org-constant">vector</span>::_M_range_check: __n <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">which</span> <span class="org-variable-name">is</span> 100<span class="org-rainbow-delimiters-depth-1">)</span> &gt;= <span class="org-keyword">this</span>-&gt;size<span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">which</span> <span class="org-variable-name">is</span> 6<span class="org-rainbow-delimiters-depth-1">)</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>57<span class="org-rainbow-delimiters-depth-1">]</span> 

root <span class="org-rainbow-delimiters-depth-1">[</span>58<span class="org-rainbow-delimiters-depth-1">]</span> ys.push_back<span class="org-rainbow-delimiters-depth-1">(</span>5<span class="org-rainbow-delimiters-depth-1">)</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>59<span class="org-rainbow-delimiters-depth-1">]</span> ys
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 10.000000, 3.0000000, 5.0000000, 6.0000000, 10.000000, 20.000000, 5.0000000 <span class="org-rainbow-delimiters-depth-1">}</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>60<span class="org-rainbow-delimiters-depth-1">]</span> 

</pre>
</div>
</div>
</div>
<div id="outline-container-org9f7bad1" class="outline-4">
<h4 id="org9f7bad1"><span class="section-number-4">1.4.7</span> Playing with Deque - Double Ended Queue STL Container</h4>
<div class="outline-text-4" id="text-1-4-7">
<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>71<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> d;
root <span class="org-rainbow-delimiters-depth-1">[</span>72<span class="org-rainbow-delimiters-depth-1">]</span> d
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{}</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>73<span class="org-rainbow-delimiters-depth-1">]</span> d. <span class="org-comment-delimiter">// </span><span class="org-comment">Type tab to complete </span>
assign
at
back
begin
cbegin
cend
clear
crbegin
crend
... ... 

root <span class="org-rainbow-delimiters-depth-1">[</span>73<span class="org-rainbow-delimiters-depth-1">]</span> d.push_back<span class="org-rainbow-delimiters-depth-1">(</span>10.0<span class="org-rainbow-delimiters-depth-1">)</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>74<span class="org-rainbow-delimiters-depth-1">]</span> d.push_back<span class="org-rainbow-delimiters-depth-1">(</span>3.0<span class="org-rainbow-delimiters-depth-1">)</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>75<span class="org-rainbow-delimiters-depth-1">]</span> d.push_back<span class="org-rainbow-delimiters-depth-1">(</span>5.0<span class="org-rainbow-delimiters-depth-1">)</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>76<span class="org-rainbow-delimiters-depth-1">]</span> d
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 10.000000, 3.0000000, 5.0000000 <span class="org-rainbow-delimiters-depth-1">}</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>77<span class="org-rainbow-delimiters-depth-1">]</span> 

root <span class="org-rainbow-delimiters-depth-1">[</span>83<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-1">(</span>2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">basic_ostream</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>, <span class="org-constant">std</span>::<span class="org-type">char_traits</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fe94fd0ae20
root <span class="org-rainbow-delimiters-depth-1">[</span>84<span class="org-rainbow-delimiters-depth-1">]</span> 

<span class="org-comment-delimiter">// </span><span class="org-comment">C++ 11 For-range based loop </span>
root <span class="org-rainbow-delimiters-depth-1">[</span>89<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: d<span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-constant">std</span>::cout &lt;&lt; x &lt;&lt; <span class="org-constant">std</span>::endl; <span class="org-rainbow-delimiters-depth-1">}</span>
10.00
6.00
10.00
3.00
5.00
root <span class="org-rainbow-delimiters-depth-1">[</span>90<span class="org-rainbow-delimiters-depth-1">]</span> 


root <span class="org-rainbow-delimiters-depth-1">[</span>88<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: d<span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; x &lt;&lt; <span class="org-constant">std</span>::end   
     10.00
      6.00
     10.00
      3.00
      5.00
root <span class="org-rainbow-delimiters-depth-2">[</span>89<span class="org-rainbow-delimiters-depth-2">]</span> 

<span class="org-comment-delimiter">// </span><span class="org-comment">Clear </span>
root <span class="org-rainbow-delimiters-depth-2">[</span>97<span class="org-rainbow-delimiters-depth-2">]</span> d.clear<span class="org-rainbow-delimiters-depth-2">()</span>
root <span class="org-rainbow-delimiters-depth-2">[</span>98<span class="org-rainbow-delimiters-depth-2">]</span> d
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{}</span>
root <span class="org-rainbow-delimiters-depth-2">[</span>99<span class="org-rainbow-delimiters-depth-2">]</span> 


</pre>
</div>
</div>
</div>
<div id="outline-container-orgd0809be" class="outline-4">
<h4 id="orgd0809be"><span class="section-number-4">1.4.8</span> Playing with STL Maps</h4>
<div class="outline-text-4" id="text-1-4-8">
<p>
STL Map (dictionary, hash map) container: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">
<span class="org-comment-delimiter">// </span><span class="org-comment">Create a map container with uniform initialization </span>
root <span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> constants <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"pi"</span>, 3.1415<span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"earth_gravity"</span>, 9.81<span class="org-rainbow-delimiters-depth-2">}</span>,<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-2">)</span> 
        <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-string">"earth_gravity"</span> =&gt; 9.8100000, <span class="org-string">"pi"</span> =&gt; 3.1415000, <span class="org-string">"sqrt_2"</span> =&gt; 1.4170000 <span class="org-rainbow-delimiters-depth-2">}</span>
root <span class="org-rainbow-delimiters-depth-2">[</span>2<span class="org-rainbow-delimiters-depth-2">]</span> 
root <span class="org-rainbow-delimiters-depth-2">[</span>2<span class="org-rainbow-delimiters-depth-2">]</span> 

root <span class="org-rainbow-delimiters-depth-2">[</span>5<span class="org-rainbow-delimiters-depth-2">]</span> constants<span class="org-rainbow-delimiters-depth-2">[</span><span class="org-string">"earth_gravity"</span><span class="org-rainbow-delimiters-depth-2">]</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">)</span> 9.8100000
root <span class="org-rainbow-delimiters-depth-2">[</span>6<span class="org-rainbow-delimiters-depth-2">]</span> 
root <span class="org-rainbow-delimiters-depth-2">[</span>6<span class="org-rainbow-delimiters-depth-2">]</span> constants.at<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"earth_gravity"</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">)</span> 9.8100000

<span class="org-comment-delimiter">// </span><span class="org-comment">Generate exception </span>
root <span class="org-rainbow-delimiters-depth-2">[</span>7<span class="org-rainbow-delimiters-depth-2">]</span> constants.at<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"pi"</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">)</span> 3.1415000
root <span class="org-rainbow-delimiters-depth-2">[</span>8<span class="org-rainbow-delimiters-depth-2">]</span> constants.at<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"pix"</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>: <span class="org-constant">std</span>::out_of_range caught: <span class="org-constant">map</span>::at
root <span class="org-rainbow-delimiters-depth-2">[</span>9<span class="org-rainbow-delimiters-depth-2">]</span> 

root <span class="org-rainbow-delimiters-depth-2">[</span>9<span class="org-rainbow-delimiters-depth-2">]</span> constants.size<span class="org-rainbow-delimiters-depth-2">()</span>
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-2">)</span> 4
root <span class="org-rainbow-delimiters-depth-2">[</span>10<span class="org-rainbow-delimiters-depth-2">]</span> 
root <span class="org-rainbow-delimiters-depth-2">[</span>10<span class="org-rainbow-delimiters-depth-2">]</span> 

root <span class="org-rainbow-delimiters-depth-2">[</span>11<span class="org-rainbow-delimiters-depth-2">]</span> constants.clear<span class="org-rainbow-delimiters-depth-2">()</span>
root <span class="org-rainbow-delimiters-depth-2">[</span>12<span class="org-rainbow-delimiters-depth-2">]</span> 
root <span class="org-rainbow-delimiters-depth-2">[</span>12<span class="org-rainbow-delimiters-depth-2">]</span> constants
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{}</span>
root <span class="org-rainbow-delimiters-depth-2">[</span>13<span class="org-rainbow-delimiters-depth-2">]</span> 

root <span class="org-rainbow-delimiters-depth-2">[</span>15<span class="org-rainbow-delimiters-depth-2">]</span> constants.insert<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::pair<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span><span class="org-string">"pi"</span>, 3.1415<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
root <span class="org-rainbow-delimiters-depth-2">[</span>17<span class="org-rainbow-delimiters-depth-2">]</span> constants.insert<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::pair<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span><span class="org-string">"x"</span>, 10.0<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>

root <span class="org-rainbow-delimiters-depth-2">[</span>18<span class="org-rainbow-delimiters-depth-2">]</span> constants
<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-string">"pi"</span> =&gt; 3.1415000, <span class="org-string">"x"</span> =&gt; 10.000000 <span class="org-rainbow-delimiters-depth-2">}</span>
root <span class="org-rainbow-delimiters-depth-2">[</span>19<span class="org-rainbow-delimiters-depth-2">]</span> 

<span class="org-rainbow-delimiters-depth-2">{</span>
<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: constants<span class="org-rainbow-delimiters-depth-3">){</span>
        cout &lt;&lt; <span class="org-string">"key   = "</span> &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-4">(</span>4<span class="org-rainbow-delimiters-depth-4">)</span> &lt;&lt; x.first &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-4">(</span>10<span class="org-rainbow-delimiters-depth-4">)</span>
             &lt;&lt; <span class="org-string">"value = "</span> &lt;&lt; x.second &lt;&lt; endl;
    <span class="org-rainbow-delimiters-depth-3">}</span>
<span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Output </span>
key   =   pi  value = 3.1415
key   =    x  value = 10

</pre>
</div>
</div>
</div>
<div id="outline-container-org924160e" class="outline-4">
<h4 id="org924160e"><span class="section-number-4">1.4.9</span> Playing with classes</h4>
<div class="outline-text-4" id="text-1-4-9">
</div>
<ol class="org-ol">
<li><a id="org0b1c613"></a>CashFlow class<br />
<div class="outline-text-5" id="text-1-4-9-1">
<p>
ROOT Cling can also play with C++ classes as they were ordinary
scripts. 
</p>

<p>
File: CashFlow.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">initializer_list</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">setw, setpreicision ...</span>

<span class="org-keyword">class</span> <span class="org-type">CashFlow</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
   <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">m_pmt</span>;
<span class="org-function-name">public</span>:
    <span class="org-comment-delimiter">// </span><span class="org-comment">Default constructor - doesn't</span>
    <span class="org-function-name">CashFlow</span><span class="org-rainbow-delimiters-depth-2">(){}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Overloaded contructor with vector</span>
    <span class="org-function-name">CashFlow</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-variable-name">pmt</span><span class="org-rainbow-delimiters-depth-2">){</span>
        m_pmt.insert<span class="org-rainbow-delimiters-depth-3">(</span>m_pmt.begin<span class="org-rainbow-delimiters-depth-4">()</span>, pmt.begin<span class="org-rainbow-delimiters-depth-4">()</span>, pmt.end<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Overloaded constructor with initializer list</span>
    <span class="org-function-name">CashFlow</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">initializer_list</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-variable-name">pmt</span><span class="org-rainbow-delimiters-depth-2">){</span>
        m_pmt.insert<span class="org-rainbow-delimiters-depth-3">(</span>m_pmt.begin<span class="org-rainbow-delimiters-depth-4">()</span>, pmt.begin<span class="org-rainbow-delimiters-depth-4">()</span>, pmt.end<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">CashFlow</span>&amp; <span class="org-function-name">add</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span>
        m_pmt.push_back<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">return</span> *<span class="org-keyword">this</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">void</span> <span class="org-function-name">show</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-type">int</span> <span class="org-variable-name">i</span> = 0;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: m_pmt<span class="org-rainbow-delimiters-depth-3">){</span>
            <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-4">(</span>10<span class="org-rainbow-delimiters-depth-4">)</span> &lt;&lt; i
                      &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-4">(</span>10<span class="org-rainbow-delimiters-depth-4">)</span> &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-4">(</span>3<span class="org-rainbow-delimiters-depth-4">)</span> &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; x
                      &lt;&lt; <span class="org-constant">std</span>::endl;
            ++i;
        <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>


<p>
In the ROOT shell: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> .L CashFlow.cpp 

root <span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> CashFlow clf;

root <span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span> clf.show<span class="org-rainbow-delimiters-depth-1">()</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span> clf.add<span class="org-rainbow-delimiters-depth-1">(</span>-30<span class="org-rainbow-delimiters-depth-1">)</span>.add<span class="org-rainbow-delimiters-depth-1">(</span>20<span class="org-rainbow-delimiters-depth-1">)</span>.add<span class="org-rainbow-delimiters-depth-1">(</span>4<span class="org-rainbow-delimiters-depth-1">)</span>.add<span class="org-rainbow-delimiters-depth-1">(</span>5<span class="org-rainbow-delimiters-depth-1">)</span>.add<span class="org-rainbow-delimiters-depth-1">(</span>25<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">CashFlow</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fa4df246010
root <span class="org-rainbow-delimiters-depth-1">[</span>4<span class="org-rainbow-delimiters-depth-1">]</span> clf.show<span class="org-rainbow-delimiters-depth-1">()</span>
         0   -30.000
         1    20.000
         2     4.000
         3     5.000
         4    25.000

root <span class="org-rainbow-delimiters-depth-1">[</span>6<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>6<span class="org-rainbow-delimiters-depth-1">]</span> CashFlow clf2 <span class="org-rainbow-delimiters-depth-1">{</span>-30.0, 20.0, 3.0, 5.0, 25.0<span class="org-rainbow-delimiters-depth-1">}</span> ;
root <span class="org-rainbow-delimiters-depth-1">[</span>7<span class="org-rainbow-delimiters-depth-1">]</span> clf2.show<span class="org-rainbow-delimiters-depth-1">()</span>
         0   -30.000
         1    20.000
         2     3.000
         3     5.000
         4    25.000
root <span class="org-rainbow-delimiters-depth-1">[</span>8<span class="org-rainbow-delimiters-depth-1">]</span> 

</pre>
</div>
</div>
</li>
<li><a id="org4e5e8e4"></a>Linear function class<br />
<div class="outline-text-5" id="text-1-4-9-2">
<p>
ROOT Session:
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> .L linfun.cpp 
root <span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> LinearFunction lfun1<span class="org-rainbow-delimiters-depth-1">(</span>3.0, 4.0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">LinearFunction</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fac4d729010
root <span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span> lfun1
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">LinearFunction</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fac4d729010
root <span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">std</span>::cout &lt;&lt; lfun1 &lt;&lt; <span class="org-constant">std</span>::endl;
y<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 3.000 * x + 4.000
root <span class="org-rainbow-delimiters-depth-1">[</span>4<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>4<span class="org-rainbow-delimiters-depth-1">]</span> lfun1<span class="org-rainbow-delimiters-depth-1">(</span>3.0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 13.000000
root <span class="org-rainbow-delimiters-depth-1">[</span>5<span class="org-rainbow-delimiters-depth-1">]</span> lfun1<span class="org-rainbow-delimiters-depth-1">(</span>0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 4.0000000
root <span class="org-rainbow-delimiters-depth-1">[</span>6<span class="org-rainbow-delimiters-depth-1">]</span> lfun1<span class="org-rainbow-delimiters-depth-1">(</span>5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 19.000000
root <span class="org-rainbow-delimiters-depth-1">[</span>7<span class="org-rainbow-delimiters-depth-1">]</span> lfun1<span class="org-rainbow-delimiters-depth-1">(</span>10<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 34.000000
root <span class="org-rainbow-delimiters-depth-1">[</span>8<span class="org-rainbow-delimiters-depth-1">]</span> lfun1.setCoeffs<span class="org-rainbow-delimiters-depth-1">(</span>5.0, 10.0<span class="org-rainbow-delimiters-depth-1">)</span>;
root <span class="org-rainbow-delimiters-depth-1">[</span>9<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>9<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">std</span>::cout &lt;&lt; lfun1 &lt;&lt; <span class="org-constant">std</span>::endl;
y<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 5.000 * x + 10.000
root <span class="org-rainbow-delimiters-depth-1">[</span>10<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>10<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> xs<span class="org-rainbow-delimiters-depth-1">{</span>3.0, 4.0, 5.0, 6.0, 5.0<span class="org-rainbow-delimiters-depth-1">}</span>;
root <span class="org-rainbow-delimiters-depth-1">[</span>11<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>11<span class="org-rainbow-delimiters-depth-1">]</span> xs
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 3.0000000, 4.0000000, 5.0000000, 6.0000000, 5.0000000 <span class="org-rainbow-delimiters-depth-1">}</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>12<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>12<span class="org-rainbow-delimiters-depth-1">]</span> lfun1<span class="org-rainbow-delimiters-depth-1">(</span>xs<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 25.000000, 30.000000, 35.000000, 40.000000, 35.000000 <span class="org-rainbow-delimiters-depth-1">}</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>13<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>13<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> lfun2 = <span class="org-constant">LinearFunction</span>::fromPoints<span class="org-rainbow-delimiters-depth-1">(</span>2, 9, 8 , 21<span class="org-rainbow-delimiters-depth-1">)</span>;
root <span class="org-rainbow-delimiters-depth-1">[</span>14<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">std</span>::cout &lt;&lt; lfun2 &lt;&lt; <span class="org-constant">std</span>::endl;
y<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 2.000 * x + 5.000
root <span class="org-rainbow-delimiters-depth-1">[</span>15<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>15<span class="org-rainbow-delimiters-depth-1">]</span> lfun2<span class="org-rainbow-delimiters-depth-1">(</span>3.0<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 11.000000
root <span class="org-rainbow-delimiters-depth-1">[</span>16<span class="org-rainbow-delimiters-depth-1">]</span> lfun2<span class="org-rainbow-delimiters-depth-1">(</span>4.0<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 13.000000
root <span class="org-rainbow-delimiters-depth-1">[</span>17<span class="org-rainbow-delimiters-depth-1">]</span> lfun2<span class="org-rainbow-delimiters-depth-1">(</span>5.0<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 15.000000
root <span class="org-rainbow-delimiters-depth-1">[</span>18<span class="org-rainbow-delimiters-depth-1">]</span> 

</pre>
</div>

<p>
File: linfun.cpp
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">LinearFunction</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
    <span class="org-function-name">LinearFunction</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">a</span>, <span class="org-type">double</span> <span class="org-variable-name">b</span><span class="org-rainbow-delimiters-depth-2">)</span>: A<span class="org-rainbow-delimiters-depth-2">(</span>a<span class="org-rainbow-delimiters-depth-2">)</span>, B<span class="org-rainbow-delimiters-depth-2">(</span>b<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{}</span>

    <span class="org-comment-delimiter">/* </span><span class="org-comment">Named constructor, aka static factory method*/</span>
    <span class="org-keyword">static</span> <span class="org-type">LinearFunction</span> <span class="org-function-name">fromCoeffs</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">a</span>, <span class="org-type">double</span> <span class="org-variable-name">b</span><span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-keyword">return</span> LinearFunction<span class="org-rainbow-delimiters-depth-3">(</span>a, b<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>   
    <span class="org-comment-delimiter">/* </span><span class="org-comment">Named constructor, aka static factory method*/</span>
    <span class="org-keyword">static</span> <span class="org-type">LinearFunction</span> <span class="org-function-name">fromPoints</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x1</span>, <span class="org-type">double</span> <span class="org-variable-name">y1</span>, <span class="org-type">double</span> <span class="org-variable-name">x2</span>, <span class="org-type">double</span> <span class="org-variable-name">y2</span><span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-type">double</span> <span class="org-variable-name">a</span> = <span class="org-rainbow-delimiters-depth-3">(</span>y2 - y1<span class="org-rainbow-delimiters-depth-3">)</span>/<span class="org-rainbow-delimiters-depth-3">(</span>x2 - x1<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">double</span> <span class="org-variable-name">b</span> = y1 - a * x1;
        <span class="org-keyword">return</span> LinearFunction<span class="org-rainbow-delimiters-depth-3">(</span>a, b<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">double</span> <span class="org-function-name">eval</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-keyword">return</span> A * x + B;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Function-call-operator overload</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Using the New C++11 return type</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">It could also be:</span>
    <span class="org-comment-delimiter">//  </span><span class="org-comment">&gt;&gt; double operator()(double x){ ... </span>
    <span class="org-keyword">auto</span> <span class="org-keyword">operator</span><span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">return</span> A * x + B;
    <span class="org-rainbow-delimiters-depth-2">}</span>   
    <span class="org-comment-delimiter">// </span><span class="org-comment">Function-call-operator overload</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-keyword">operator</span><span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>&amp; <span class="org-variable-name">xs</span><span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-variable-name">res</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: xs<span class="org-rainbow-delimiters-depth-3">){</span>
            res.push_back<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-type">A</span> * <span class="org-variable-name">x</span> + B<span class="org-rainbow-delimiters-depth-4">)</span>;
        <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-keyword">return</span> res;
    <span class="org-rainbow-delimiters-depth-2">}</span>   
    <span class="org-type">void</span> <span class="org-function-name">setCoeffs</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">A</span>, <span class="org-type">double</span> <span class="org-variable-name">B</span><span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-keyword">this</span>-&gt;A = A;
        <span class="org-keyword">this</span>-&gt;B = B;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">void</span> <span class="org-function-name">setA</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-2">){</span>
        A = a;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">void</span> <span class="org-function-name">setB</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">b</span><span class="org-rainbow-delimiters-depth-2">){</span>
        B = b;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">The stream insertion operator (&lt;&lt;) is not a method </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">(member function) of this class. It is a overload of </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">the operator (&lt;&lt;) for the class std::ostream which is</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">a generic output stream.</span>
    <span class="org-keyword">friend</span> <span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">&lt;&lt;</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span> &amp;<span class="org-variable-name">os</span>, <span class="org-keyword">const</span> <span class="org-type">LinearFunction</span>&amp; <span class="org-variable-name">lfun</span><span class="org-rainbow-delimiters-depth-2">){</span>
        os.precision<span class="org-rainbow-delimiters-depth-3">(</span>3<span class="org-rainbow-delimiters-depth-3">)</span>;
        os.setf<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::<span class="org-constant">ios</span>::fixed<span class="org-rainbow-delimiters-depth-3">)</span>;
        os &lt;&lt; <span class="org-string">"y(x) = "</span> &lt;&lt; lfun.A &lt;&lt; <span class="org-string">" * x"</span> &lt;&lt; <span class="org-string">" + "</span> &lt;&lt; lfun.B;
        <span class="org-keyword">return</span> os;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-function-name">private</span>:
    <span class="org-type">double</span> <span class="org-variable-name">A</span>;
    <span class="org-type">double</span> <span class="org-variable-name">B</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>; <span class="org-comment-delimiter">//</span><span class="org-comment">---- End of object LinearFunction --- //</span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">Makes the vector printable, similar to implementing vector.toString in Java */</span>
<span class="org-function-name">std</span>::ostream&amp; <span class="org-keyword">operator</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span> &amp;<span class="org-variable-name">os</span>, <span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>&amp; <span class="org-variable-name">xs</span><span class="org-rainbow-delimiters-depth-1">){</span>
    os &lt;&lt; <span class="org-string">"["</span> &lt;&lt; xs.size<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"]("</span> ;
    copy<span class="org-rainbow-delimiters-depth-2">(</span>xs.begin<span class="org-rainbow-delimiters-depth-3">()</span>, xs.end<span class="org-rainbow-delimiters-depth-3">()</span>, <span class="org-constant">std</span>::ostream_iterator<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span>os, <span class="org-string">" "</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    os &lt;&lt; <span class="org-string">")"</span>;
    <span class="org-keyword">return</span> os;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-org2394c6d" class="outline-4">
<h4 id="org2394c6d"><span class="section-number-4">1.4.10</span> Playing with higher order functions and C++11 lambdas</h4>
<div class="outline-text-4" id="text-1-4-10">
<p>
To load the following code, just copy and then paste it in the ROOT
REPL. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Type synonym to avoid repeating it.</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Equivalent to typedef std::function&lt;double (double)&gt; MathFun </span>
<span class="org-keyword">using</span> <span class="org-type">MathFun</span> = <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>;

<span class="org-comment-delimiter">/** </span><span class="org-comment">Higher order function to tabulate ordinary function </span>
<span class="org-comment">  * The first parameter can be a ordinary lambda function or </span>
<span class="org-comment">  * a any function object implementing  double operator()(double x)</span>
<span class="org-comment">  * or  operator()(double) =&gt; double Using Scala's notation.</span>
<span class="org-comment">  */</span>
<span class="org-type">void</span> <span class="org-function-name">tabulate</span><span class="org-rainbow-delimiters-depth-1">(</span>
    <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">fn</span>,
    <span class="org-type">double</span> <span class="org-variable-name">start</span>,
    <span class="org-type">double</span> <span class="org-variable-name">stop</span>,
    <span class="org-type">double</span> <span class="org-variable-name">step</span>,
    <span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span> = <span class="org-constant">std</span>::cout
    <span class="org-rainbow-delimiters-depth-1">){</span>      
    os.precision<span class="org-rainbow-delimiters-depth-2">(</span>3<span class="org-rainbow-delimiters-depth-2">)</span>;
    os.flags<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-constant">ios</span>::fixed<span class="org-rainbow-delimiters-depth-2">)</span>;
    os &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"Input"</span> &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"Output"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-type">double</span> <span class="org-variable-name">x</span> = start;
    <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span>x &lt;= stop<span class="org-rainbow-delimiters-depth-2">){</span>
        os &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; x &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; fn<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        x = x + step;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>40<span class="org-rainbow-delimiters-depth-1">]</span> tabulate<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> sqrt<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>;<span class="org-rainbow-delimiters-depth-2">}</span>, -4.0, 9.0, 1.0<span class="org-rainbow-delimiters-depth-1">)</span>
     <span class="org-type">Input</span>    <span class="org-variable-name">Output</span>
    -4.000      -nan
    -3.000      -nan
    -2.000      -nan
    -1.000      -nan
     0.000     0.000
     1.000     1.000
     2.000     1.414
     3.000     1.732
     4.000     2.000
     5.000     2.236
     6.000     2.449
     7.000     2.646
     8.000     2.828
     9.000     3.000
root <span class="org-rainbow-delimiters-depth-1">[</span>41<span class="org-rainbow-delimiters-depth-1">]</span> 

MathFun makeLinFun<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">a</span>, <span class="org-type">double</span> <span class="org-variable-name">b</span><span class="org-rainbow-delimiters-depth-1">)</span>  <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">[=] means -&gt; capture a and b by value </span>
    <span class="org-keyword">return</span> <span class="org-rainbow-delimiters-depth-2">[</span>=<span class="org-rainbow-delimiters-depth-2">](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span><span class="org-keyword">return</span> a * x + b; <span class="org-rainbow-delimiters-depth-2">}</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>70<span class="org-rainbow-delimiters-depth-1">]</span> tabulate<span class="org-rainbow-delimiters-depth-1">(</span>makeLinFun<span class="org-rainbow-delimiters-depth-2">(</span>10.0, 5.0<span class="org-rainbow-delimiters-depth-2">)</span>, -5, 5, 1<span class="org-rainbow-delimiters-depth-1">)</span>
     <span class="org-type">Input</span>    <span class="org-variable-name">Output</span>
    -5.000   -45.000
    -4.000   -35.000
    -3.000   -25.000
    -2.000   -15.000
    -1.000    -5.000
     0.000     5.000
     1.000    15.000
     2.000    25.000
     3.000    35.000
     4.000    45.000
     5.000    55.000
root <span class="org-rainbow-delimiters-depth-1">[</span>71<span class="org-rainbow-delimiters-depth-1">]</span> 

</pre>
</div>
</div>
</div>

<div id="outline-container-orge06f54d" class="outline-4">
<h4 id="orge06f54d"><span class="section-number-4">1.4.11</span> Playing with STL algorithms</h4>
<div class="outline-text-4" id="text-1-4-11">
<p>
Required headers: &lt;iostram&gt; and &lt;algorithm&gt; (<code>std::for_each</code>)
</p>

<ul class="org-ul">
<li>C Arrays</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-type">double</span> xs <span class="org-rainbow-delimiters-depth-1">[]</span> = <span class="org-rainbow-delimiters-depth-1">{</span>10.0, 5.0, 6.0, 3.0<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">[</span>4<span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 10.000000, 5.0000000, 6.0000000, 3.0000000 <span class="org-rainbow-delimiters-depth-1">}</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xs, xs + 4, <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-constant">std</span>::cout &lt;&lt; sqrt<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-string">" "</span> &lt;&lt; <span class="org-string">'\n'</span> &lt;&lt; <span class="org-constant">std</span>::flush;<span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-rainbow-delimiters-depth-1">)</span>;
3.16228 
2.23607 
2.44949 
1.73205 
root <span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span> 
</pre>
</div>

<ul class="org-ul">
<li>C++ Vectors</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> vec <span class="org-rainbow-delimiters-depth-1">{</span> 10.0, 3.0, 5.0, 2.0, -6.0<span class="org-rainbow-delimiters-depth-1">}</span> ;
root <span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> xs

root <span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>vec.begin<span class="org-rainbow-delimiters-depth-2">()</span>, vec.end<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-constant">std</span>::cout &lt;&lt; sqrt<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;<span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>
3.16228
1.73205
2.23607
1.41421
-nan
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>lambda<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> @0x1a42030

root <span class="org-rainbow-delimiters-depth-1">[</span>4<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>vec.begin<span class="org-rainbow-delimiters-depth-2">()</span>, vec.end<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-constant">std</span>::cout &lt;&lt; sqrt<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;<span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>;
3.16228
1.73205
2.23607
1.41421
-nan

</pre>
</div>
</div>
</div>

<div id="outline-container-orgd46298a" class="outline-4">
<h4 id="orgd46298a"><span class="section-number-4">1.4.12</span> Show a file</h4>
<div class="outline-text-4" id="text-1-4-12">
<p>
Paste the following code in the ROOT interpreter.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Headers:  &lt;iostream&gt;, &lt;fstream&gt;,  &lt;stdlib.h&gt;</span>
<span class="org-type">void</span> <span class="org-variable-name">showFile</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">char</span>* file<span class="org-rainbow-delimiters-depth-2">){</span>
  <span class="org-constant">std</span>::<span class="org-type">ifstream</span> <span class="org-variable-name">fin</span>;
  <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">line</span>;
  fin.open<span class="org-rainbow-delimiters-depth-3">(</span>file<span class="org-rainbow-delimiters-depth-3">)</span>;
  <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span>fin.fail<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">){</span>
    <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"Error: file "</span> &lt;&lt; file &lt;&lt; <span class="org-string">" cannot be opened."</span>;
    exit<span class="org-rainbow-delimiters-depth-4">(</span>-1<span class="org-rainbow-delimiters-depth-4">)</span>;
  <span class="org-rainbow-delimiters-depth-3">}</span>
  <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-negation-char">!</span>fin.eof<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">){</span>
    <span class="org-constant">std</span>::getline<span class="org-rainbow-delimiters-depth-4">(</span>fin, line<span class="org-rainbow-delimiters-depth-4">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; line &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-3">}</span>
  fin.close<span class="org-rainbow-delimiters-depth-3">()</span>;
<span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Run: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>24<span class="org-rainbow-delimiters-depth-1">]</span> showFile<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/etc/protocols"</span><span class="org-rainbow-delimiters-depth-1">)</span>
# /etc/protocols:
<span class="org-preprocessor"># $Id</span>: protocols,v 1.12 2016/07/08 12:27 ovasik Exp $
#
<span class="org-preprocessor"># Internet</span> <span class="org-rainbow-delimiters-depth-1">(</span>IP<span class="org-rainbow-delimiters-depth-1">)</span> protocols
#
<span class="org-preprocessor">#   from</span>: @<span class="org-rainbow-delimiters-depth-1">(</span>#<span class="org-rainbow-delimiters-depth-1">)</span>protocols 5.1 <span class="org-rainbow-delimiters-depth-1">(</span>Berkeley<span class="org-rainbow-delimiters-depth-1">)</span> 4/17/89
#
<span class="org-preprocessor"># Updated</span> <span class="org-keyword">for</span> NetBSD based on RFC 1340, <span class="org-type">Assigned</span> <span class="org-variable-name">Numbers</span> <span class="org-rainbow-delimiters-depth-1">(</span>July 1992<span class="org-rainbow-delimiters-depth-1">)</span>.
<span class="org-preprocessor"># Last</span> IANA update included dated 2011-05-03
#
<span class="org-preprocessor"># See</span> also http:<span class="org-comment-delimiter">//</span><span class="org-comment">www.iana.org/assignments/protocol-numbers</span>

ip  0   IP      # internet protocol, pseudo protocol <span class="org-type">number</span>
<span class="org-variable-name">hopopt</span>  0   HOPOPT      # hop-by-hop options <span class="org-keyword">for</span> ipv6
icmp    1   ICMP        # internet control message protocol
igmp    2   IGMP        # internet group management protocol
ggp 3   GGP     # gateway-gateway protocol
ipv4    4   IPv4        # IPv4 encapsulation
 ... ...  ... ...  ... ...  ... ...  ... ...  ... ... 
</pre>
</div>
</div>
</div>

<div id="outline-container-orga8da8c0" class="outline-4">
<h4 id="orga8da8c0"><span class="section-number-4">1.4.13</span> Using boost libraries</h4>
<div class="outline-text-4" id="text-1-4-13">
<p>
It assumes that the boost libraries are already installed. 
</p>

<ul class="org-ul">
<li>Example: Using Boost special math functions
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_68_0/libs/math/doc/html/math_toolkit/sf_erf/error_function.html">Error Functions - 1.68.0</a></li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> #<span class="org-type">include</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span>boost/math/special_functions/erf.hpp<span class="org-rainbow-delimiters-depth-1">&gt;</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">boost</span>::<span class="org-constant">math</span>::erf

root <span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">boost</span>::<span class="org-constant">math</span>::erf<span class="org-rainbow-delimiters-depth-1">(</span>0.1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.11246292
root <span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">boost</span>::<span class="org-constant">math</span>::erf<span class="org-rainbow-delimiters-depth-1">(</span>2.0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.99532227
root <span class="org-rainbow-delimiters-depth-1">[</span>4<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">boost</span>::<span class="org-constant">math</span>::erf<span class="org-rainbow-delimiters-depth-1">(</span>3.0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.99997791

root <span class="org-rainbow-delimiters-depth-1">[</span>9<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">using</span> <span class="org-constant">boost</span>::<span class="org-constant">math</span>::erf;
root <span class="org-rainbow-delimiters-depth-1">[</span>10<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>10<span class="org-rainbow-delimiters-depth-1">]</span> erf<span class="org-rainbow-delimiters-depth-1">(</span>1.2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.91031398
root <span class="org-rainbow-delimiters-depth-1">[</span>11<span class="org-rainbow-delimiters-depth-1">]</span> erf<span class="org-rainbow-delimiters-depth-1">(</span>4.5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.0000000
root <span class="org-rainbow-delimiters-depth-1">[</span>12<span class="org-rainbow-delimiters-depth-1">]</span> 

</pre>
</div>
</div>
</div>

<div id="outline-container-org7382e2b" class="outline-4">
<h4 id="org7382e2b"><span class="section-number-4">1.4.14</span> Playing with GNU Scientific library shared library</h4>
<div class="outline-text-4" id="text-1-4-14">
<p>
Note: the command #pragma cling load("/lib64/libgslcblas.so.0") is
used to load the symbols from the shared library libgslcblas.so.
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> #pragma cling load<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/lib64/libgslcblas.so.0"</span><span class="org-rainbow-delimiters-depth-1">)</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span> #pragma cling load<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/lib64/libgsl.so"</span><span class="org-rainbow-delimiters-depth-1">)</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span> #<span class="org-type">include</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span>gsl/gsl_errno.h<span class="org-rainbow-delimiters-depth-1">&gt;</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>4<span class="org-rainbow-delimiters-depth-1">]</span> #<span class="org-type">include</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span>gsl/gsl_sf_bessel.h<span class="org-rainbow-delimiters-depth-1">&gt;</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>5<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>5<span class="org-rainbow-delimiters-depth-1">]</span> gsl_sf_bessel_J0<span class="org-rainbow-delimiters-depth-1">(</span>4.0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -0.39714981
root <span class="org-rainbow-delimiters-depth-1">[</span>6<span class="org-rainbow-delimiters-depth-1">]</span> gsl_sf_bessel_J0<span class="org-rainbow-delimiters-depth-1">(</span>5.0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -0.17759677
root <span class="org-rainbow-delimiters-depth-1">[</span>7<span class="org-rainbow-delimiters-depth-1">]</span> 

<span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-type">double</span> <span class="org-variable-name">x</span> = 5.0;
  <span class="org-type">double</span> <span class="org-variable-name">expected</span> = -0.17759677131433830434739701;

  <span class="org-type">double</span> <span class="org-variable-name">y</span> = gsl_sf_bessel_J0 <span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>;

  printf <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"J0(5.0) = %.18f\n"</span>, y<span class="org-rainbow-delimiters-depth-2">)</span>;
  printf <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"exact   = %.18f\n"</span>, expected<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Output: </span>
J0<span class="org-rainbow-delimiters-depth-1">(</span>5.0<span class="org-rainbow-delimiters-depth-1">)</span> = -0.177596771314338264
exact   = -0.177596771314338292
root <span class="org-rainbow-delimiters-depth-1">[</span>14<span class="org-rainbow-delimiters-depth-1">]</span> 


</pre>
</div>

<p>
Complete script using (#prgram cling load) to load the shared
libraries command:
</p>

<ul class="org-ul">
<li><a href="https://root-forum.cern.ch/t/how-to-call-external-libraries/10845">How to call external libraries - ROOT - ROOT Forum</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">gsl/gsl_errno.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">gsl/gsl_sf_bessel.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#pragma</span> cling load<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/lib64/libgslcblas.so.0"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-preprocessor">#pragma</span> cling load<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/lib64/libgsl.so"</span><span class="org-rainbow-delimiters-depth-1">)</span>

gsl_sf_bessel_J0<span class="org-rainbow-delimiters-depth-1">(</span>4.0<span class="org-rainbow-delimiters-depth-1">)</span>;
gsl_sf_bessel_J0<span class="org-rainbow-delimiters-depth-1">(</span>5.0<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">double</span> <span class="org-variable-name">x</span> = 5.0;
<span class="org-type">double</span> <span class="org-variable-name">expected</span> = -0.17759677131433830434739701;

<span class="org-type">double</span> <span class="org-variable-name">y</span> = gsl_sf_bessel_J0 <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span>;

printf <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"J0(5.0) = %.18f\n"</span>, y<span class="org-rainbow-delimiters-depth-1">)</span>;
printf <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"exact   = %.18f\n"</span>, expected<span class="org-rainbow-delimiters-depth-1">)</span>;

</pre>
</div>

<p>
Complete script using gSystem-&gt;Load to add load libraries: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">gsl/gsl_errno.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">gsl/gsl_sf_bessel.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

gSystem-&gt;Load<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/lib64/libgslcblas.so.0"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
gSystem-&gt;Load<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/lib64/libgsl.so"</span><span class="org-rainbow-delimiters-depth-1">)</span>;

gsl_sf_bessel_J0<span class="org-rainbow-delimiters-depth-1">(</span>4.0<span class="org-rainbow-delimiters-depth-1">)</span>;
gsl_sf_bessel_J0<span class="org-rainbow-delimiters-depth-1">(</span>5.0<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">double</span> <span class="org-variable-name">x</span> = 5.0;
<span class="org-type">double</span> <span class="org-variable-name">expected</span> = -0.17759677131433830434739701;

<span class="org-type">double</span> <span class="org-variable-name">y</span> = gsl_sf_bessel_J0 <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span>;

printf <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"J0(5.0) = %.18f\n"</span>, y<span class="org-rainbow-delimiters-depth-1">)</span>;
printf <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"exact   = %.18f\n"</span>, expected<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Complete script using gSystem-&gt;AddLinkedLibs to load shared libraries: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">gsl/gsl_errno.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">gsl/gsl_sf_bessel.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

gSystem-&gt;AddLinkedLibs<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"-lgsl -lgslcblas"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">gSystem-&gt;AddLinkedLibs("-lgsl");</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">gSystem-&gt;AddLinkedLibs("-lgslcblas");</span>

gsl_sf_bessel_J0<span class="org-rainbow-delimiters-depth-1">(</span>4.0<span class="org-rainbow-delimiters-depth-1">)</span>;
gsl_sf_bessel_J0<span class="org-rainbow-delimiters-depth-1">(</span>5.0<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">double</span> <span class="org-variable-name">x</span> = 5.0;
<span class="org-type">double</span> <span class="org-variable-name">expected</span> = -0.17759677131433830434739701;

<span class="org-type">double</span> <span class="org-variable-name">y</span> = gsl_sf_bessel_J0 <span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span>;

printf <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"J0(5.0) = %.18f\n"</span>, y<span class="org-rainbow-delimiters-depth-1">)</span>;
printf <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"exact   = %.18f\n"</span>, expected<span class="org-rainbow-delimiters-depth-1">)</span>;

</pre>
</div>
</div>
</div>

<div id="outline-container-org142ce54" class="outline-4">
<h4 id="org142ce54"><span class="section-number-4">1.4.15</span> Testing Unix System-Calls and APIs</h4>
<div class="outline-text-4" id="text-1-4-15">
</div>
<ol class="org-ol">
<li><a id="org93aaa3e"></a>Get current directory - getcwd()<br />
<div class="outline-text-5" id="text-1-4-15-1">
<ul class="org-ul">
<li><a href="http://pubs.opengroup.org/onlinepubs/009695399/functions/getcwd.html">Unix Open Group - getcwd</a></li>
</ul>

<p>
Get current working directory of current process: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">unistd.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

root <span class="org-rainbow-delimiters-depth-1">[</span>10<span class="org-rainbow-delimiters-depth-1">]</span> getcwd<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">nullptr</span>, 0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"/home/archbox/shared/reflection-root"</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>11<span class="org-rainbow-delimiters-depth-1">]</span> 

root <span class="org-rainbow-delimiters-depth-1">[</span>7<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">std</span>::string current_dir = getcwd<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">nullptr</span>, 0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"/home/archbox/shared/reflection-root"</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>8<span class="org-rainbow-delimiters-depth-1">]</span> current_dir
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"/home/archbox/shared/reflection-root"</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>9<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Current directory = "</span> &lt;&lt; current_dir &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-type">Current</span> <span class="org-variable-name">directory</span> = /home/archbox/shared/reflection-root

</pre>
</div>

<p>
Set current working directory of current process: 
</p>

<ul class="org-ul">
<li><a href="https://linux.die.net/man/2/chdir">chdir(2): change working directory - Linux man page</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">oot <span class="org-rainbow-delimiters-depth-1">[</span>15<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>15<span class="org-rainbow-delimiters-depth-1">]</span> getcwd<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">nullptr</span>, 0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"/etc"</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>16<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>16<span class="org-rainbow-delimiters-depth-1">]</span> chdir<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/usr/include"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 0
root <span class="org-rainbow-delimiters-depth-1">[</span>17<span class="org-rainbow-delimiters-depth-1">]</span> getcwd<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">nullptr</span>, 0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"/usr/include"</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>18<span class="org-rainbow-delimiters-depth-1">]</span> chdir<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/usr/includeError"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> -1
root <span class="org-rainbow-delimiters-depth-1">[</span>19<span class="org-rainbow-delimiters-depth-1">]</span> getcwd<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">nullptr</span>, 0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"/usr/include"</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>20<span class="org-rainbow-delimiters-depth-1">]</span> 

</pre>
</div>
</div>
</li>
<li><a id="org981c629"></a>Create a directory - mkdir<br />
<div class="outline-text-5" id="text-1-4-15-2">
<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="http://pubs.opengroup.org/onlinepubs/009695399/functions/mkdir.html">Open Group Base Specification Issue 6 - mkdir</a></li>
<li><a href="https://linux.die.net/man/3/mkdir">mkdir(3): make directory - Linux man page</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>9<span class="org-rainbow-delimiters-depth-1">]</span> #<span class="org-type">include</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span>stdlib.h<span class="org-rainbow-delimiters-depth-1">&gt;</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>10<span class="org-rainbow-delimiters-depth-1">]</span> #<span class="org-type">include</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span>limits.h<span class="org-rainbow-delimiters-depth-1">&gt;</span>  
root <span class="org-rainbow-delimiters-depth-1">[</span>11<span class="org-rainbow-delimiters-depth-1">]</span> #<span class="org-type">include</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span>unistd.h<span class="org-rainbow-delimiters-depth-1">&gt;</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>12<span class="org-rainbow-delimiters-depth-1">]</span> #<span class="org-type">include</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span>sys/stat.h<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>13<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>14<span class="org-rainbow-delimiters-depth-1">]</span> mkdir<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/home/archbox/Desktop/mydir"</span>, 0777<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 0
root <span class="org-rainbow-delimiters-depth-1">[</span>15<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>15<span class="org-rainbow-delimiters-depth-1">]</span> mkdir<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/home/archbox/Desktop/mydir"</span>, 0777<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> -1
root <span class="org-rainbow-delimiters-depth-1">[</span>16<span class="org-rainbow-delimiters-depth-1">]</span> 
</pre>
</div>
</div>
</li>

<li><a id="org695251c"></a>List directory - opendir<br />
<div class="outline-text-5" id="text-1-4-15-3">
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">#include &lt;string&gt;</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sys/types.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">dirent.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>  <span class="org-comment-delimiter">// </span><span class="org-comment">Get function opendir</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">errno.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">void</span> <span class="org-function-name">listDirectory</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">path</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-type">DIR</span> *<span class="org-variable-name">dir</span>;
    <span class="org-keyword">struct</span> <span class="org-type">dirent</span> *<span class="org-variable-name">dp</span>;
    dir = opendir<span class="org-rainbow-delimiters-depth-2">(</span>path.c_str<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span> ;
    <span class="org-comment-delimiter">// </span><span class="org-comment">To determine the cause of error - It is necessary to check the error code.</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span>dir == <span class="org-constant">NULL</span><span class="org-rainbow-delimiters-depth-2">)</span>
     <span class="org-keyword">throw</span> <span class="org-constant">std</span>::runtime_error<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Error: Cannot read directory"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>dp = readdir<span class="org-rainbow-delimiters-depth-4">(</span>dir<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> != <span class="org-constant">NULL</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; dp-&gt;d_name &lt;&lt; <span class="org-constant">std</span>::endl ;
    <span class="org-rainbow-delimiters-depth-2">}</span>;
    closedir<span class="org-rainbow-delimiters-depth-2">(</span>dir<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Running in root REPL: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>37<span class="org-rainbow-delimiters-depth-1">]</span> listDirectory<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/"</span><span class="org-rainbow-delimiters-depth-1">)</span>
etc
tmp
sbin
sys
<span class="org-type">opt</span>
<span class="org-variable-name">media</span>
.
boot
.local
.autorelabel
home
var
dev
.. ... ... 

root <span class="org-rainbow-delimiters-depth-1">[</span>39<span class="org-rainbow-delimiters-depth-1">]</span> listDirectory<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/boot/grub"</span><span class="org-rainbow-delimiters-depth-1">)</span>
.
splash.xpm.gz
..
root <span class="org-rainbow-delimiters-depth-1">[</span>40<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>40<span class="org-rainbow-delimiters-depth-1">]</span> 

root <span class="org-rainbow-delimiters-depth-1">[</span>40<span class="org-rainbow-delimiters-depth-1">]</span> listDirectory<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/boot/grub/dsafa"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: <span class="org-constant">std</span>::runtime_error caught: Error: Cannot read directory
root <span class="org-rainbow-delimiters-depth-1">[</span>41<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>41<span class="org-rainbow-delimiters-depth-1">]</span> 
</pre>
</div>
</div>
</li>

<li><a id="orgc3b233f"></a>Read process output with popen<br />
<div class="outline-text-5" id="text-1-4-15-4">
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Copy and paste this code in the ROOT REPL</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-type">FILE</span>* <span class="org-variable-name">fp</span> = popen<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"ls -l /"</span>, <span class="org-string">"r"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-type">char</span> <span class="org-variable-name">ch</span>;
        <span class="org-constant">std</span>::<span class="org-type">stringstream</span> <span class="org-variable-name">ss</span>;
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>fp<span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"Error: could not open process output."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>ch = fgetc<span class="org-rainbow-delimiters-depth-4">(</span>fp<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> != EOF<span class="org-rainbow-delimiters-depth-2">){</span>
                ss &lt;&lt; ch;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        pclose<span class="org-rainbow-delimiters-depth-2">(</span>fp<span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Output = "</span> &lt;&lt; <span class="org-string">'\n'</span> &lt;&lt; ss.str<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::flush; 
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Ouptut: </span>

</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">Output = 
total 64
lrwxrwxrwx.   1 root root     7 Feb 10  2017 bin -&gt; usr/bin
dr-xr-xr-x.   7 root root  4096 Jul 15 15:58 boot
drwxr-xr-x   23 root root  4220 Sep  8 17:47 dev
drwxr-xr-x. 169 root root 12288 Sep 10 03:27 etc
drwxr-xr-x.   5 root root  4096 Mar  2  2018 home
lrwxrwxrwx.   1 root root     7 Feb 10  2017 lib -&gt; usr/lib
lrwxrwxrwx.   1 root root     9 Feb 10  2017 lib64 -&gt; usr/lib64
drwx------.   2 root root 16384 Sep 17  2017 lost+found
drwxr-xr-x.   2 root root  4096 Feb 10  2017 media
drwxr-xr-x.   2 root root  4096 Feb 10  2017 mnt
 ... .... ... .... ... .... ... .... ... .... 
</pre>
</div>

<p>
This unnamed script can be encapsulate into a function: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::string getProcessOutput<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">command</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-type">FILE</span>* <span class="org-variable-name">fp</span> = popen<span class="org-rainbow-delimiters-depth-2">(</span>command.c_str<span class="org-rainbow-delimiters-depth-3">()</span>, <span class="org-string">"r"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-type">char</span> <span class="org-variable-name">ch</span>;
        <span class="org-constant">std</span>::<span class="org-type">stringstream</span> <span class="org-variable-name">ss</span>;
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>fp<span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"Error: could not open process output."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>ch = fgetc<span class="org-rainbow-delimiters-depth-4">(</span>fp<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span> != EOF<span class="org-rainbow-delimiters-depth-2">){</span>
                ss &lt;&lt; ch;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        pclose<span class="org-rainbow-delimiters-depth-2">(</span>fp<span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-keyword">return</span> ss.str<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>14<span class="org-rainbow-delimiters-depth-1">]</span> getProcessOutput<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"date"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-warning">"</span><span class="org-string">Mon Sep 10 16:46:06 -03 2018</span>
<span class="org-string">"</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>15<span class="org-rainbow-delimiters-depth-1">]</span> getProcessOutput<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"uname -a"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-warning">"</span><span class="org-string">Linux localhost.localdomain 4.16.11-100.fc26.x86_64 #1 SMP Tue May 22 20:02:12 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux</span>
<span class="org-string">"</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>16<span class="org-rainbow-delimiters-depth-1">]</span> 

</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-org02aaced" class="outline-4">
<h4 id="org02aaced"><span class="section-number-4">1.4.16</span> Run a script with shared library</h4>
</div>
</div>
<div id="outline-container-org3b534ba" class="outline-3">
<h3 id="org3b534ba"><span class="section-number-3">1.5</span> C++ Script Examples</h3>
<div class="outline-text-3" id="text-1-5">
</div>
<div id="outline-container-orgf3e0488" class="outline-4">
<h4 id="orgf3e0488"><span class="section-number-4">1.5.1</span> Example: Run a Ublas - Boost Library Linear Algebra C++ script</h4>
<div class="outline-text-4" id="text-1-5-1">
<p>
File: ublas.C 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Headers for vectors </span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/numeric/ublas/vector.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/numeric/ublas/io.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Headers for Matrix </span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/numeric/ublas/matrix.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">namespace</span> <span class="org-constant">ub</span> = <span class="org-constant">boost</span>::<span class="org-constant">numeric</span>::ublas;

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">void</span> <span class="org-function-name">printVal</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-variable-name">name</span>, <span class="org-keyword">const</span> <span class="org-type">T</span> &amp;<span class="org-variable-name">value</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; name &lt;&lt; <span class="org-string">" = "</span> &lt;&lt; value &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-function-name">printSection</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-variable-name">descr</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; descr &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; descr.size<span class="org-rainbow-delimiters-depth-3">()</span>; i++<span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">'-'</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-function-name">vecOperation1</span><span class="org-rainbow-delimiters-depth-1">(){</span>
    <span class="org-constant">ub</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">vec1</span><span class="org-rainbow-delimiters-depth-2">(</span>5, 1.0<span class="org-rainbow-delimiters-depth-2">)</span>;
    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"vec1"</span>, vec1<span class="org-rainbow-delimiters-depth-2">)</span>;
    vec1<span class="org-rainbow-delimiters-depth-2">[</span>1<span class="org-rainbow-delimiters-depth-2">]</span> = 2.4;
    vec1<span class="org-rainbow-delimiters-depth-2">[</span>2<span class="org-rainbow-delimiters-depth-2">]</span> = 3.5;
    vec1<span class="org-rainbow-delimiters-depth-2">[</span>3<span class="org-rainbow-delimiters-depth-2">]</span> = -5.0;
    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"vec1"</span>, vec1<span class="org-rainbow-delimiters-depth-2">)</span>; 
    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"sum(vec1)"</span>, sum<span class="org-rainbow-delimiters-depth-3">(</span>vec1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"norm_1(vec1)"</span>, norm_1<span class="org-rainbow-delimiters-depth-3">(</span>vec1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"norm_2(vec1)"</span>, norm_2<span class="org-rainbow-delimiters-depth-3">(</span>vec1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>; 
    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"norm_inf(vec1)"</span>, norm_inf<span class="org-rainbow-delimiters-depth-3">(</span>vec1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"index_norm_inf(vec1)"</span>, index_norm_inf<span class="org-rainbow-delimiters-depth-3">(</span>vec1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>; 
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-function-name">vecOperation2</span><span class="org-rainbow-delimiters-depth-1">(){</span>
    <span class="org-constant">ub</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">vec1</span><span class="org-rainbow-delimiters-depth-2">(</span>3, 2.2<span class="org-rainbow-delimiters-depth-2">)</span> ; vec1<span class="org-rainbow-delimiters-depth-2">[</span>2<span class="org-rainbow-delimiters-depth-2">]</span> = -5.1;
    <span class="org-constant">ub</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">vec2</span><span class="org-rainbow-delimiters-depth-2">(</span>3, -1.2<span class="org-rainbow-delimiters-depth-2">)</span>; vec2<span class="org-rainbow-delimiters-depth-2">[</span>2<span class="org-rainbow-delimiters-depth-2">]</span> = 1.1;

    <span class="org-type">double</span> <span class="org-variable-name">factor</span> = 2.5;

    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"vec1"</span>, vec1<span class="org-rainbow-delimiters-depth-2">)</span>;
    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"vec1.size()"</span>, vec1.size<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"vec2"</span>, vec2<span class="org-rainbow-delimiters-depth-2">)</span>;
    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"vec2.size()"</span>, vec2.size<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"inner_prod(vec1, vec2)"</span>, inner_prod<span class="org-rainbow-delimiters-depth-3">(</span>vec1, vec2<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"vec1 + vec2"</span>, vec1 + vec2<span class="org-rainbow-delimiters-depth-2">)</span>;
    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"vec1 - vec2"</span>, vec1 - vec2<span class="org-rainbow-delimiters-depth-2">)</span>;
    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"vec1 * factor"</span>, vec1 * factor<span class="org-rainbow-delimiters-depth-2">)</span>;
    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"vec1 / factor"</span>, vec1 / factor<span class="org-rainbow-delimiters-depth-2">)</span>;

<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-function-name">matrixOperation1</span><span class="org-rainbow-delimiters-depth-1">(){</span>
    <span class="org-constant">ub</span>::<span class="org-type">matrix</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">matrix1</span><span class="org-rainbow-delimiters-depth-2">(</span>3, 3, 2.5<span class="org-rainbow-delimiters-depth-2">)</span>;
    matrix1<span class="org-rainbow-delimiters-depth-2">(</span>0, 0<span class="org-rainbow-delimiters-depth-2">)</span> = matrix1<span class="org-rainbow-delimiters-depth-2">(</span>2, 2<span class="org-rainbow-delimiters-depth-2">)</span> = 1.0;
    matrix1<span class="org-rainbow-delimiters-depth-2">(</span>0, 2<span class="org-rainbow-delimiters-depth-2">)</span> = -3.5; matrix1<span class="org-rainbow-delimiters-depth-2">(</span>2, 0<span class="org-rainbow-delimiters-depth-2">)</span> = 5.9;

    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"matrix1     "</span>, matrix1<span class="org-rainbow-delimiters-depth-2">)</span>;
    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Num of rows "</span>, matrix1.size1<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Num of cols "</span>, matrix1.size2<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Transpose   "</span>, trans<span class="org-rainbow-delimiters-depth-3">(</span>matrix1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Real part   "</span>, real<span class="org-rainbow-delimiters-depth-3">(</span>matrix1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    matrix1.resize<span class="org-rainbow-delimiters-depth-2">(</span>4, 4<span class="org-rainbow-delimiters-depth-2">)</span>;
    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Matrix resized = matrix1.resize(4, 4)"</span>, matrix1<span class="org-rainbow-delimiters-depth-2">)</span>;

    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"identity_matrix&lt;double&gt;(3)"</span>, <span class="org-constant">ub</span>::identity_matrix<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span>3<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    printVal<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"zero_matrix&lt;double&gt;(3)"</span>, <span class="org-constant">ub</span>::zero_matrix<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span>3<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;

<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">SCRIPT Entry-point - must have the same name as the file.</span>
<span class="org-type">void</span> <span class="org-function-name">ublas</span><span class="org-rainbow-delimiters-depth-1">(){</span>
    printSection<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Running vecOperation1"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    vecOperation1<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl; 

    printSection<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Running vecOperation2"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    vecOperation2<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;

    printSection<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Running matrixOperation1"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    matrixOperation1<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Running in batch mode: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ $<span class="org-variable-name">HOME</span>/opt/root/bin/root -l -q ublas.C
ERROR<span class="org-keyword"> in</span> cling::CIFactory::createCI(): cannot extract standard library include paths!
<span class="org-function-name">Invoking</span>:
  <span class="org-variable-name">LC_ALL</span>=C ccache  -O3 -DNDEBUG -xc++ -E -v /dev/null 2&gt;&amp;1 &gt;/dev/null | awk <span class="org-string">'/^#include &lt;/,/^End of search/{if (!/^#include &lt;/ &amp;&amp; !/^End of search/){ print }}'</span> | <span class="org-variable-name">GREP_OPTIONS</span>= grep -E <span class="org-string">"(c|g)\+\+"</span>
Results was:
With exit code 256

Processing ublas.C...
Running vecOperation1
---------------------
vec1 = [5](1,1,1,1,1)
vec1 = [5](1,2.4,3.5,-5,1)
<span class="org-function-name">sum</span>(vec1) = 2.9
<span class="org-function-name">norm_1</span>(vec1) = 12.9
<span class="org-function-name">norm_2</span>(vec1) = 6.70895
<span class="org-function-name">norm_inf</span>(vec1) = 5
<span class="org-function-name">index_norm_inf</span>(vec1) = 3

Running vecOperation2
---------------------
vec1 = [3](2.2,2.2,-5.1)
<span class="org-function-name">vec1.size</span>() = 3
vec2 = [3](-1.2,-1.2,1.1)
<span class="org-function-name">vec2.size</span>() = 3
<span class="org-function-name">inner_prod</span>(vec1, vec2) = -10.89
vec1 + vec2 = [3](1,1,-4)
vec1 - vec2 = [3](3.4,3.4,-6.2)
vec1 * factor = [3](5.5,5.5,-12.75)
vec1 / factor = [3](0.88,0.88,-2.04)

Running matrixOperation1
------------------------
matrix1      = [3,3]((1,2.5,-3.5),(2.5,2.5,2.5),(5.9,2.5,1))
Num of rows  = 3
Num of cols  = 3
Transpose    = [3,3]((1,2.5,5.9),(2.5,2.5,2.5),(-3.5,2.5,1))
Real part    = [3,3]((1,2.5,-3.5),(2.5,2.5,2.5),(5.9,2.5,1))
Matrix resized = matrix1.resize(4, 4) = [4,4]((1,2.5,-3.5,2.93415e+59),(2.5,2.5,2.5,1.10542e+161),(5.9,2.5,1,9.83212e-72),(1.41746e+190,5.16752e+25,6.32283e+233,6.94321e-307))
identity_matrix&lt;double&gt;(3) = [3,3]((1,0,0),(0,1,0),(0,0,1))
zero_matrix&lt;double&gt;(3) = [3,3]((0,0,0),(0,0,0),(0,0,0))
</pre>
</div>
</div>
</div>
<div id="outline-container-org288d320" class="outline-4">
<h4 id="org288d320"><span class="section-number-4">1.5.2</span> Example: GNU Scientific Library C++ Wrapper Script</h4>
<div class="outline-text-4" id="text-1-5-2">
<p>
File: script1.C
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span>
<span class="org-comment"> *  Reference: </span>
<span class="org-comment"> *   + https://root-forum.cern.ch/t/loading-a-library-from-a-script/24306</span>
<span class="org-comment"> **/</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">ostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Install GNU Scientific Library on Fedora with:</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">$ sudo dnf install gsl-devel.x86_64</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">gsl/gsl_sf_bessel.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">gsl/gsl_errno.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">gsl/gsl_math.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">gsl/gsl_roots.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Load Shared libraries needed by the script</span>
<span class="org-preprocessor">#ifdef</span>  __CLING__
  R__LOAD_LIBRARY<span class="org-rainbow-delimiters-depth-1">(</span>/lib64/libgslcblas.so.0<span class="org-rainbow-delimiters-depth-1">)</span>;
  R__LOAD_LIBRARY<span class="org-rainbow-delimiters-depth-1">(</span>/lib64/libgsl.so<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-preprocessor">#endif</span> 

<span class="org-keyword">namespace</span> <span class="org-constant">GSL</span><span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-keyword">using</span> <span class="org-type">MFun</span> = <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>;

        <span class="org-type">double</span> <span class="org-function-name">wrapLambda</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">void</span>* <span class="org-variable-name">param</span><span class="org-rainbow-delimiters-depth-2">){</span>
                <span class="org-keyword">auto</span> <span class="org-variable-name">fp</span> = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">MFun</span>*<span class="org-rainbow-delimiters-depth-3">&gt;(</span>param<span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-keyword">return</span> fp-&gt;<span class="org-keyword">operator</span><span class="org-rainbow-delimiters-depth-3">()(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-comment-delimiter">/**  </span>
<span class="org-comment">  * Note: In order to to not throw the error:  &lt;ERROR: endpoints do not straddle y=0&gt;</span>
<span class="org-comment">  * mf(xa) * mf(xb) &lt; 0 the function must have opposite signals at the interval bounds.</span>
<span class="org-comment">  */</span>
        <span class="org-type">double</span> <span class="org-function-name">rootSolverBracket</span><span class="org-rainbow-delimiters-depth-2">(</span>
                <span class="org-comment-delimiter">// </span><span class="org-comment">gsl_root_fsolver_type* solvertype,</span>
                <span class="org-type">MFun</span>   <span class="org-variable-name">mf</span>,
                <span class="org-type">double</span> <span class="org-variable-name">xa</span>,
                <span class="org-type">double</span> <span class="org-variable-name">xb</span>,
                <span class="org-type">int</span>    <span class="org-variable-name">maxIteratiosn</span> = 100,
                <span class="org-type">double</span> <span class="org-variable-name">tol</span> = 1e-5
                <span class="org-rainbow-delimiters-depth-2">){</span>
                <span class="org-type">gsl_function</span> <span class="org-variable-name">fnt</span>;
                fnt.function = wrapLambda;
                fnt.params   = &amp;mf;

                <span class="org-type">gsl_root_fsolver</span> *<span class="org-variable-name">solver</span>;
                solver = gsl_root_fsolver_alloc<span class="org-rainbow-delimiters-depth-3">(</span>gsl_root_fsolver_bisection<span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-comment-delimiter">//</span><span class="org-comment">solver = gsl_root_fsolver_alloc(solvertype);  </span>
                <span class="org-comment-delimiter">// </span><span class="org-comment">dbgtrace("Setting solver");</span>
                gsl_root_fsolver_set<span class="org-rainbow-delimiters-depth-3">(</span>solver, &amp;fnt, xa, xb<span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-comment-delimiter">// </span><span class="org-comment">dbgtrace("Solver set OK");</span>
                <span class="org-comment-delimiter">// </span><span class="org-comment">gsl_root_fsolver_iterate(solver);</span>
                <span class="org-comment-delimiter">// </span><span class="org-comment">dbgtrace("Solver initial iteration OK");</span>
                <span class="org-type">int</span> <span class="org-variable-name">status</span> = GSL_CONTINUE;
                <span class="org-type">int</span>  <span class="org-variable-name">i</span> = 0;
                <span class="org-type">double</span> <span class="org-variable-name">root</span>;
                <span class="org-type">double</span> <span class="org-variable-name">xlo</span>, <span class="org-variable-name">xhi</span>;
                <span class="org-comment-delimiter">// </span><span class="org-comment">dbgtrace("In the solver loop");</span>
                <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-3">(</span>i &lt;= maxIteratiosn &amp;&amp; status == GSL_CONTINUE<span class="org-rainbow-delimiters-depth-3">){</span>
                        <span class="org-comment-delimiter">// </span><span class="org-comment">dbgtrace("Iterating solver");</span>
                        status = gsl_root_fsolver_iterate<span class="org-rainbow-delimiters-depth-4">(</span>solver<span class="org-rainbow-delimiters-depth-4">)</span>;
                        <span class="org-comment-delimiter">// </span><span class="org-comment">disp(status);</span>
                        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-4">(</span>status != GSL_SUCCESS<span class="org-rainbow-delimiters-depth-4">)</span>
                                <span class="org-keyword">break</span>;
                        root = gsl_root_fsolver_root<span class="org-rainbow-delimiters-depth-4">(</span>solver<span class="org-rainbow-delimiters-depth-4">)</span>;
                        <span class="org-comment-delimiter">// </span><span class="org-comment">disp(root);</span>
                        xlo = gsl_root_fsolver_x_lower<span class="org-rainbow-delimiters-depth-4">(</span>solver<span class="org-rainbow-delimiters-depth-4">)</span>;
                        xhi = gsl_root_fsolver_x_upper<span class="org-rainbow-delimiters-depth-4">(</span>solver<span class="org-rainbow-delimiters-depth-4">)</span>;
                        status = gsl_root_test_interval<span class="org-rainbow-delimiters-depth-4">(</span>xlo, xhi, 0, tol<span class="org-rainbow-delimiters-depth-4">)</span>;
                        <span class="org-comment-delimiter">// </span><span class="org-comment">if(status == GSL_SUCCESS)</span>
                        <span class="org-comment-delimiter">//  </span><span class="org-comment">std::cerr &lt;&lt; "Converged" &lt;&lt; std::endl;          </span>
                        i++;
                <span class="org-rainbow-delimiters-depth-3">}</span>
                gsl_root_fsolver_free<span class="org-rainbow-delimiters-depth-3">(</span>solver<span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span>status == GSL_SUCCESS<span class="org-rainbow-delimiters-depth-3">)</span>
                        <span class="org-keyword">return</span> root;
                <span class="org-keyword">else</span>
                        <span class="org-keyword">return</span> <span class="org-constant">std</span>::<span class="org-constant">numeric_limits</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>::signaling_NaN<span class="org-rainbow-delimiters-depth-3">()</span>;;   
                <span class="org-keyword">return</span> 0;
        <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">Equation "functor" - function-object */</span>
<span class="org-keyword">struct</span> <span class="org-type">EquationTest</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">double</span> <span class="org-variable-name">A</span>;
    <span class="org-type">double</span> <span class="org-variable-name">B</span>;
    <span class="org-function-name">EquationTest</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">a</span>, <span class="org-type">double</span> <span class="org-variable-name">b</span><span class="org-rainbow-delimiters-depth-2">)</span>: A<span class="org-rainbow-delimiters-depth-2">(</span>a<span class="org-rainbow-delimiters-depth-2">)</span>, B<span class="org-rainbow-delimiters-depth-2">(</span>b<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{}</span>;
    <span class="org-comment-delimiter">/* </span><span class="org-comment">Computes: A * x^2 - B * sin(x) */</span>
    <span class="org-type">double</span> <span class="org-keyword">operator</span><span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-keyword">return</span> A * x * x * x - B * sin<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">/** </span><span class="org-comment">Script entry-point should have the same name as the file. */</span>
<span class="org-type">void</span> <span class="org-function-name">script1</span><span class="org-rainbow-delimiters-depth-1">(){</span>

  <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>__cplusplus &gt;= 201703L<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Running C++17"</span> &lt;&lt; <span class="org-string">"\n"</span>;
  <span class="org-keyword">else</span> <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>__cplusplus &gt;= 201402L<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Running C++14"</span> &lt;&lt; <span class="org-string">"\n"</span>;
  <span class="org-keyword">else</span> <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>__cplusplus &gt;= 201103L<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Running C++11"</span> &lt;&lt; <span class="org-string">"\n"</span>;

  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Running a C++ script in the ROOT REPL. "</span> &lt;&lt; <span class="org-string">"\n"</span>;

  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" gsl_sf_bessel_J0(4.0) = "</span>
            &lt;&lt; gsl_sf_bessel_J0<span class="org-rainbow-delimiters-depth-2">(</span>4.0<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;

  <span class="org-type">double</span> <span class="org-variable-name">root</span> = <span class="org-constant">GSL</span>::rootSolverBracket<span class="org-rainbow-delimiters-depth-2">(</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">gsl_root_fsolver_bisection,</span>
        <span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">){</span> <span class="org-keyword">return</span> x * x - 25.0 ;<span class="org-rainbow-delimiters-depth-3">}</span>
        , -4, +10, 200
        <span class="org-rainbow-delimiters-depth-2">)</span>;
   <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Root of equation x^2 - 25.0 =  "</span> &lt;&lt; root &lt;&lt; <span class="org-string">"\n"</span>;      

   <span class="org-keyword">auto</span> <span class="org-variable-name">eqn</span> = EquationTest<span class="org-rainbow-delimiters-depth-2">(</span>1.0, 4.0<span class="org-rainbow-delimiters-depth-2">)</span>;  
   <span class="org-type">double</span> <span class="org-variable-name">root2</span> = <span class="org-constant">GSL</span>::rootSolverBracket<span class="org-rainbow-delimiters-depth-2">(</span>eqn, -10, +5, 200<span class="org-rainbow-delimiters-depth-2">)</span>;
   <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Root of equation x^3 - 4 * sin(x) =  "</span> &lt;&lt; root2 &lt;&lt; <span class="org-string">"\n"</span>; 

<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-comment-delimiter">//</span><span class="org-comment">--- End of script1 ---//</span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">Main was added to allow compiling the script */</span>
<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
        script1<span class="org-rainbow-delimiters-depth-2">()</span>;
        <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
To run the script in the ROOT/CLING REPL use: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ root 
&gt;&gt; .x script1.C
Running C++11
Running a C++ script<span class="org-keyword"> in</span> the ROOT REPL. 
 gsl_sf_bessel_J0(4.0) = -0.39715
Root of equation x^2 - 25.0 =  5.00001
Root of equation x^3 - 4 * sin(x) =  1.58732
&gt;&gt; 
</pre>
</div>

<p>
Load the script, play and prototype with it.
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; .L script1.C
&gt;&gt; 
&gt;&gt; script1<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Running</span> <span class="org-variable-name">C</span>++11
Running a C++ script in the ROOT REPL. 
 gsl_sf_bessel_J0<span class="org-rainbow-delimiters-depth-1">(</span>4.0<span class="org-rainbow-delimiters-depth-1">)</span> = -0.39715
Root of equation x^2 - 25.0 =  5.00001
Root of equation x^3 - 4 * sin<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> =  1.58732
&gt;&gt; 

&gt;&gt; <span class="org-constant">GSL</span>::
rootSolverBracket
wrapLambda
&gt;&gt; 
&gt;&gt; <span class="org-type">double</span> x = 1.58732
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.5873200
&gt;&gt; pow<span class="org-rainbow-delimiters-depth-1">(</span>x, 3<span class="org-rainbow-delimiters-depth-1">)</span> - 4 * sin<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -6.6632073e-05
&gt;&gt; 

&gt;&gt; <span class="org-constant">GSL</span>::rootSolverBracket<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> x * x * x - 4 * sin<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>;<span class="org-rainbow-delimiters-depth-2">}</span>, -10, 5, 200<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.5873218
&gt;&gt; 

</pre>
</div>

<p>
Run the script in batch mode: 
</p>

<ul class="org-ul">
<li>$ root -l -q script1.C</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ time cern-root -l -q script1.C

Processing script1.C...
Running C++11
Running a C++ script<span class="org-keyword"> in</span> the ROOT REPL. 
 gsl_sf_bessel_J0(4.0) = -0.39715
Root of equation x^2 - 25.0 =  5.00001
Root of equation x^3 - 4 * sin(x) =  1.58732

real    0m0.469s
user    0m0.335s
sys     0m0.096s
</pre>
</div>

<p>
Compile the script: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ clang++ -std=c++1z script1.C -o <span class="org-keyword">script1.bin</span>   -Wall -Wextra -g -lgsl -lgslcblas 

$ ./script1.bin 
Running C++17
Running a C++ script<span class="org-keyword"> in</span> the ROOT REPL. 
 gsl_sf_bessel_J0(4.0) = -0.39715
Root of equation x^2 - 25.0 =  5.00001
Root of equation x^3 - 4 * sin(x) =  1.58732

</pre>
</div>

<p>
How to extract the shared libraries needed to run the program?
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ldd script1.bin 
        linux-vdso.so.1 (0x00007ffe0f5b8000)
        libgsl.so.23 =&gt; /lib64/libgsl.so.23 (0x00007fcae26ca000)
        libgslcblas.so.0 =&gt; /lib64/libgslcblas.so.0 (0x00007fcae248b000)
        libstdc++.so.6 =&gt; /lib64/libstdc++.so.6 (0x00007fcae20f9000)
        libm.so.6 =&gt; /lib64/libm.so.6 (0x00007fcae1d65000)
        libgcc_s.so.1 =&gt; /lib64/libgcc_s.so.1 (0x00007fcae1b4d000)
        libc.so.6 =&gt; /lib64/libc.so.6 (0x00007fcae178e000)
        /lib64/ld-linux-x86-64.so.2 (0x00007fcae2b39000)

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4eb2742" class="outline-3">
<h3 id="org4eb2742"><span class="section-number-3">1.6</span> Load Python3 (CPython) C-API in the REPL</h3>
<div class="outline-text-3" id="text-1-6">
<p>
Install Python 3 development libraries: (Fedora Linux)
</p>

<div class="org-src-container">
<pre class="src src-sh">$ sudo dnf install python3-devel.x86_64
</pre>
</div>

<p>
Locate where is Python3 shared library: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ldd $(<span class="org-sh-quoted-exec">which</span> python3)
        linux-vdso.so.1 (0x00007fff82b64000)
        libpython3.6m.so.1.0 =&gt; /lib64/libpython3.6m.so.1.0 (0x00007fd1eb4a5000)
        libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007fd1eb286000)
        libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007fd1eb082000)
        libutil.so.1 =&gt; /lib64/libutil.so.1 (0x00007fd1eae7f000)
        libm.so.6 =&gt; /lib64/libm.so.6 (0x00007fd1eaaeb000)
        libc.so.6 =&gt; /lib64/libc.so.6 (0x00007fd1ea72c000)
        /lib64/ld-linux-x86-64.so.2 (0x00007fd1ebc04000)

 $ ldd $(<span class="org-sh-quoted-exec">which</span> python3) | grep python
         libpython3.6m.so.1.0 =&gt; /lib64/libpython3.6m.so.1.0 (0x00007ff0015ee000)
</pre>
</div>

<p>
Locate Python 3 header files: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ find /usr/include/ -name <span class="org-string">"Python.h"</span>
/usr/include/python3.6m/Python.h
</pre>
</div>

<p>
Start ROOT REPL: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cern-root
 ==&gt; Starting root configuration from: /home/archbox/.rootalias.C
Current dir = /home/archbox/Documents/projects/cpp-programming.cpp/src
(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;::__ostream_type &amp;) @0x7fb42fc7eec0
</pre>
</div>

<p>
Load the Python3 shared library and its header file: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; #include <span class="org-string">"python3.6m/Python.h"</span>
&gt;&gt; #pragma cling load<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/lib64/libpython3.6m.so.1.0"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Initialize Python3:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; Py_Initialize<span class="org-rainbow-delimiters-depth-1">()</span>;
</pre>
</div>

<p>
Python C-API Py_GetPath():
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; Py_GetPath<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">wchar_t</span> *<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fff9a144968

&gt;&gt; <span class="org-constant">std</span>::wcout &lt;&lt; <span class="org-string">"path = "</span> &lt;&lt; Py_GetPath<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; L<span class="org-string">"\n"</span>;
path = /usr/lib64/python36.zip:/usr/lib64/python3.6:/usr/lib64/python3.6:/usr/lib64/python3.6/lib-dynload
&gt;&gt; 
</pre>
</div>

<p>
Get Version: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; Py_GetVersion<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-warning">"</span><span class="org-string">3.6.7 (default, Nov 23 2018, 12:11:28) </span>
<span class="org-string">[GCC 8.2.1 20181105 (Red Hat 8.2.1-5)]"</span>
</pre>
</div>

<p>
Get Platform: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; Py_GetPlatform<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"linux"</span>
</pre>
</div>

<p>
Information about Python interpreter:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; Py_GetPrefix<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">wchar_t</span> *<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fff9a144968

&gt;&gt; <span class="org-constant">std</span>::wcout &lt;&lt; L<span class="org-string">" =&gt; Py_GetPrefix() = "</span> &lt;&lt; Py_GetPrefix<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; L<span class="org-string">"\n"</span>;
 =&gt; Py_GetPrefix<span class="org-rainbow-delimiters-depth-1">()</span> = /usr

&gt;&gt; Py_GetProgramFullPath<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">wchar_t</span> *<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fff9a144968

&gt;&gt; <span class="org-constant">std</span>::wcout &lt;&lt; L<span class="org-string">" =&gt; Py_GetProgramFullPath() = "</span> &lt;&lt; Py_GetProgramFullPath<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; L<span class="org-string">"\n"</span>;
 =&gt; Py_GetProgramFullPath<span class="org-rainbow-delimiters-depth-1">()</span> = /usr/bin/python3
</pre>
</div>

<p>
Get copyright banner: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; Py_GetCopyright<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-warning">"</span><span class="org-string">Copyright (c) 2001-2018 Python Software Foundation.</span>
<span class="org-string">All Rights Reserved.</span>

<span class="org-string">Copyright (c) 2000 BeOpen.com.</span>
<span class="org-string">All Rights Reserved.</span>

<span class="org-string">Copyright (c) 1995-2001 Corporation for National Research Initiatives.</span>
<span class="org-string">All Rights Reserved.</span>

<span class="org-string">Copyright (c) 1991-1995 Stichting Mathematisch Centrum, Amsterdam.</span>
<span class="org-string">All Rights Reserved."</span>
&gt;&gt; 
</pre>
</div>

<p>
Python C-API PyRun_SimpleString: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; PyRun_SimpleString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"print(' ==&gt;&gt; Hello world Python3')"</span><span class="org-rainbow-delimiters-depth-1">)</span>
 ==&gt;&gt; Hello world Python3
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 0
&gt;&gt; 

&gt;&gt; PyRun_SimpleString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"print(m.sin(m.pi))"</span><span class="org-rainbow-delimiters-depth-1">)</span>
1.2246467991473532e-16
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 0

&gt;&gt; PyRun_SimpleString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"print(m.cos(m.pi))"</span><span class="org-rainbow-delimiters-depth-1">)</span>
-1.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 0

&gt;&gt; PyRun_SimpleString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"print(m.exp(2.5))"</span><span class="org-rainbow-delimiters-depth-1">)</span>
12.182493960703473
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 0

&gt;&gt; PyRun_SimpleString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"print(wrong(2.5))"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Traceback</span> <span class="org-rainbow-delimiters-depth-1">(</span>most recent <span class="org-type">call</span> <span class="org-variable-name">last</span><span class="org-rainbow-delimiters-depth-1">)</span>:
  File <span class="org-string">"&lt;string&gt;"</span>, line 1, <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span>module<span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-function-name">NameError</span>: name <span class="org-warning">'</span>wrong<span class="org-warning">'</span> is <span class="org-keyword">not</span> defined
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> -1
</pre>
</div>

<p>
Creating primitive python float point object:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; PyObject* value = Py_BuildValue<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"f"</span>, 5.136<span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">PyObject</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7fb43059f240

&gt;&gt; PyObject_Print<span class="org-rainbow-delimiters-depth-1">(</span>value, stdout, 0<span class="org-rainbow-delimiters-depth-1">)</span>, <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
5.136
</pre>
</div>

<p>
Creating primitive python string object:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; PyObject* pystring = Py_BuildValue<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"s"</span>, <span class="org-string">" Python3-C++-REPL"</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; PyObject_Print<span class="org-rainbow-delimiters-depth-1">(</span>pystring, stdout, 0<span class="org-rainbow-delimiters-depth-1">)</span>, <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-warning">'</span> Python3-C++-REPL<span class="org-warning">'</span>
</pre>
</div>

<p>
Importing module sys: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; PyObject* msys = PyImport_ImportModule<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"sys"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">PyObject</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7fb430593ef8

&gt;&gt; PyObject* pyver = PyObject_GetAttrString<span class="org-rainbow-delimiters-depth-1">(</span>msys, <span class="org-string">"version"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">PyObject</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7fb4305970b0
&gt;&gt; 

&gt;&gt; PyObject_Print<span class="org-rainbow-delimiters-depth-1">(</span>pyver, stdout, 0<span class="org-rainbow-delimiters-depth-1">)</span>, <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-warning">'</span>3.6.7 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">default</span>, Nov 23 2018, 12:11:28<span class="org-rainbow-delimiters-depth-1">)</span> \n<span class="org-rainbow-delimiters-depth-1">[</span>GCC 8.2.1 20181105 <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Red</span> <span class="org-variable-name">Hat</span> 8.2.1-5<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">]</span><span class="org-warning">'</span>
&gt;&gt; 


</pre>
</div>

<p>
Importing module math:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Equivalen to: import math </span>
&gt;&gt; PyObject* m = PyImport_ImportModule<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"math"</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; m
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">PyObject</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7fb41b1b79f8
&gt;&gt; 

&gt;&gt; PyObject_Print<span class="org-rainbow-delimiters-depth-1">(</span>m, stdout, 0<span class="org-rainbow-delimiters-depth-1">)</span>, <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">&lt;</span>module <span class="org-warning">'</span>math<span class="org-warning">'</span> from <span class="org-warning">'</span>/usr/lib64/python3.6/lib-dynload/math.cpython-36m-x86_64-linux-gnu.so<span class="org-warning">'</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
</pre>
</div>

<p>
Get function sin from module <b>math</b>:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Get function sin from module math </span>
&gt;&gt; PyObject* py_sin = PyObject_GetAttrString<span class="org-rainbow-delimiters-depth-1">(</span>m, <span class="org-string">"sin"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">PyObject</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7fb41b1401f8

<span class="org-comment-delimiter">// </span><span class="org-comment">Print string representation of function 'sin'</span>
&gt;&gt; PyObject_Print<span class="org-rainbow-delimiters-depth-1">(</span>py_sin, stdout, 0<span class="org-rainbow-delimiters-depth-1">)</span>, <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">&lt;</span>built-in function sin<span class="org-rainbow-delimiters-depth-1">&gt;</span>
&gt;&gt; 
</pre>
</div>

<p>
Call funciton 'sin':
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; PyObject* args = Py_BuildValue<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"(f)"</span>, M_PI_2<span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; PyObject_Print<span class="org-rainbow-delimiters-depth-1">(</span>args, stdout, 0<span class="org-rainbow-delimiters-depth-1">)</span>, <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">(</span>1.5707963267948966,<span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; PyObject* result = PyEval_CallObject<span class="org-rainbow-delimiters-depth-1">(</span>py_sin, args<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">PyObject</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7fb43059f1e0

&gt;&gt; PyObject_Print<span class="org-rainbow-delimiters-depth-1">(</span>result, stdout, 0<span class="org-rainbow-delimiters-depth-1">)</span>, <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
1.0
</pre>
</div>


<p>
Creating a dictionary object or hash table object:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; PyObject* dc = PyDict_New<span class="org-rainbow-delimiters-depth-1">()</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Heal-allocated object.</span>
&gt;&gt; dc
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">PyObject</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7fb41b234558
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Print the string representation of the dictionary object</span>
&gt;&gt; PyObject_Print<span class="org-rainbow-delimiters-depth-1">(</span>dc, stdout, 0<span class="org-rainbow-delimiters-depth-1">)</span>, <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">{}</span>
&gt;&gt; 
</pre>
</div>

<p>
Exit Python and quit REPL:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; Py_Finalize<span class="org-rainbow-delimiters-depth-1">()</span>
&gt;&gt; .q
</pre>
</div>


<p>
<b>Python C-API Objects:</b>
</p>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">C-API Object</th>
<th scope="col" class="org-left">C-function Constructor</th>
<th scope="col" class="org-left">Python Object</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">PyObject</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Python ROOT object, all Python objects are an instance of PyObject</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">PyIntObject</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">PyLongObject</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">PyFloatObject</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">PyStringObject</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">PyDictObject</td>
<td class="org-left">PyDict_New</td>
<td class="org-left">Python dictionary {}</td>
</tr>

<tr>
<td class="org-left">PyTupleObject</td>
<td class="org-left">PyTuple_New</td>
<td class="org-left">Python tuple, example: (100, 200, "Location")</td>
</tr>

<tr>
<td class="org-left">PyListObject</td>
<td class="org-left">PyList_New</td>
<td class="org-left">Python list object, example: [100, 2000, 'x']</td>
</tr>

<tr>
<td class="org-left">PyVarObject</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">PyTypeObject</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">PyByteArrayObject</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">PyBytesObject</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">PySetObject</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">PyUnicodeObject</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>Note: The C-function "constructors" return a pointer to PyObject or
PyObject* pointer.</li>
</ul>


<p>
<b>References:</b>
</p>

<ul class="org-ul">
<li><a href="https://docs.python.org/3/extending/index.html">Extending and Embedding the Python Interpreter â€” Python 3.7.2 documentation</a></li>

<li><a href="https://docs.python.org/3/c-api/structures.html">Common Object Structures â€” Python 3.7.2 documentation</a></li>

<li><a href="https://docs.scipy.org/doc/numpy/reference/c-api.types-and-structures.html">Python Types and C-Structures â€” NumPy v1.15 Manual</a></li>

<li><a href="https://docs.python.org/2.3/api/stringObjects.html">7.3.1 String Objects</a></li>

<li><a href="https://docs.python.org/2/c-api/code.html">Code Objects â€” Python 2.7.15 documentation</a></li>

<li><a href="https://docs.python.org/2/c-api/veryhigh.html#c.PyRun_SimpleFileExFlags">The Very High Level Layer â€” Python 2.7.15 documentation</a></li>

<li><a href="https://stackoverflow.com/questions/3789881/create-and-call-python-function-from-string-via-c-api">Create and call python function from string via C API - Stack Overflow</a></li>

<li><a href="https://www6.software.ibm.com/developerworks/education/l-pythonscript/l-pythonscript-ltr.pdf">Embed Python scripting in C applications</a></li>

<li><a href="https://stackoverflow.com/questions/4922365/python-c-api-pyeval-callfunction">Python C API: PyEval_CallFunction? - Stack Overflow</a></li>

<li><a href="http://effbot.org/pyfaq/how-do-i-call-an-object-s-method-from-c.htm">How do I call an object's method fromÂ C?</a></li>
</ul>

<p>
Creating a native Python module: 
</p>
<ul class="org-ul">
<li><a href="https://docs.microsoft.com/en-us/visualstudio/python/working-with-c-cpp-python-in-visual-studio?view=vs-2017">Write C++ extensions for Python - Visual Studio | Microsoft Docs</a></li>
<li><a href="http://yizhang82.me/python-interop-capi">Calling C functions from Python - part 2 - writing CPython extensions using Python/C API | yizhang82â€™s blog</a></li>
</ul>

<p>
Python (CPython) debugging with GDB:
</p>
<ul class="org-ul">
<li><a href="https://devguide.python.org/gdb/">22. gdb Support â€” Python Developer's Guide</a></li>
<li><a href="https://docs.microsoft.com/en-us/visualstudio/python/debugging-mixed-mode-c-cpp-python-in-visual-studio?view=vs-2017">Mixed-mode debugging for Python - Visual Studio | Microsoft Docs</a></li>
</ul>

<p>
Reverse engineering: 
</p>
<ul class="org-ul">
<li><a href="https://recon.cx/2008/a/aaron_portnoy-ali_rizvi_santiago/slides.pdf">Reverse Engineering Dynamic Languages - A Focus on Python</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgc0e6548" class="outline-3">
<h3 id="orgc0e6548"><span class="section-number-3">1.7</span> Basic Commands</h3>
<div class="outline-text-3" id="text-1-7">
</div>
<div id="outline-container-orga2fc573" class="outline-4">
<h4 id="orga2fc573"><span class="section-number-4">1.7.1</span> Show Help</h4>
<div class="outline-text-4" id="text-1-7-1">
<ul class="org-ul">
<li>Command: .?</li>
</ul>

<div class="org-src-container">
<pre class="src src-text">Root [3] .?

 Cling (C/C++ interpreter) meta commands usage
 All commands must be preceded by a '.', except
 for the evaluation statement { }
 ==============================================================================
 Syntax: .Command [arg0 arg1 ... argN]

   .L &lt;filename&gt;                - Load the given file or library

   .(x|X) &lt;filename&gt;[args]      - Same as .L and runs a function with
                                  signature: ret_type filename(args)

   .&gt; &lt;filename&gt;                - Redirect command to a given file
      '&gt;' or '1&gt;'               - Redirects the stdout stream only
      '2&gt;'                      - Redirects the stderr stream only
      '&amp;&gt;' (or '2&gt;&amp;1')          - Redirects both stdout and stderr
      '&gt;&gt;'                      - Appends to the given file

   .undo [n]                    - Unloads the last 'n' inputs lines

   .U &lt;filename&gt;                - Unloads the given file

   .I [path]                    - Shows the include path. If a path is given -
                                  adds the path to the include paths

   .O &lt;level&gt;                   - Sets the optimization level (0-3)
                                  (not yet implemented)

   .class &lt;name&gt;                - Prints out class &lt;name&gt; in a CINT-like style

   .files                       - Prints out some CINT-like file statistics

   .fileEx                      - Prints out some file statistics

   .g                           - Prints out information about global variable
                                  'name' - if no name is given, print them all

   .@                           - Cancels and ignores the multiline input

   .rawInput [0|1]              - Toggle wrapping and printing the
                                  execution results of the input

   .dynamicExtensions [0|1]     - Toggles the use of the dynamic scopes and the
                                  late binding

   .printDebug [0|1]            - Toggles the printing of input's corresponding
                                  state changes

   .storeState &lt;filename&gt;       - Store the interpreter's state to a given file

   .compareState &lt;filename&gt;     - Compare the interpreter's state with the one
                                  saved in a given file

   .stats [name]                - Show stats for internal data structures
                                  'ast'  abstract syntax tree stats
                                  'asttree [filter]'  abstract syntax tree layout
                                  'decl' dump ast declarations
                                  'undo' show undo stack

   .help                        - Shows this information

   .q                           - Exit the program


</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf2054d1" class="outline-3">
<h3 id="orgf2054d1"><span class="section-number-3">1.8</span> References and Bookmarks</h3>
<div class="outline-text-3" id="text-1-8">
<p>
Download: 
</p>
<ul class="org-ul">
<li><a href="https://root.cern.ch/content/release-61404">https://root.cern.ch/content/release-61404</a></li>
</ul>

<p>
Documentation: 
</p>

<ul class="org-ul">
<li><a href="https://root.cern.ch/cint">CINT | ROOT a Data analysis Framework</a></li>
<li><a href="https://www.slac.stanford.edu/BFROOT/www/doc/tutorials/19Jun2000_Root_Tutorial/ROOT_Tutorial.html">ROOT Tutorial Stanford</a></li>
<li><a href="https://root.cern.ch/root/htmldoc/guides/users-guide/GettingStarted.html">Chapter: GettingStarted</a></li>
<li><a href="http://www.t2.ucsd.edu/twiki2/bin/view/UCSDTier2/AnalysisTutorial">AnalysisTutorial &lt; UCSDTier2 &lt; TWiki</a></li>
<li><a href="https://root.cern.ch/root/htmldoc/guides/users-guide/Cling.html">The C++ Interpreter Cling</a></li>
<li></li>
</ul>

<p>
Root Reflection Documentation: 
</p>
<ul class="org-ul">
<li><a href="https://root.cern/doc/v612/namespaceROOT.html">ROOT: ROOT Namespace Reference</a></li>
</ul>

<p>
Questions: 
</p>
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/37671030/how-do-you-load-a-library-with-cling">c++ - How do you load a library with cling? - Stack Overflow</a></li>
</ul>

<p>
Files: 
</p>

<ul class="org-ul">
<li><b>Scripting in the ROOT analysis Framework</b>
<ul class="org-ul">
<li>URL:  <a href="http://www.ftj.agh.edu.pl/~bold/scripts/wyklady/w5.pdf">http://www.ftj.agh.edu.pl/~bold/scripts/wyklady/w5.pdf</a></li>
</ul></li>

<li><b>Introduction to ROOT Practical Session</b>
<ul class="org-ul">
<li>URL:  <a href="http://ific.uv.es/~fiorini/ROOTTutorial/root_tutorial.pdf">http://ific.uv.es/~fiorini/ROOTTutorial/root_tutorial.pdf</a></li>
</ul></li>

<li><b>A Root Guide for Beginners - Root Data Analysis Framework</b>
<ul class="org-ul">
<li>URL:   <a href="http://web.mit.edu/root_v6.12/ROOT-Primer.pdf">http://web.mit.edu/root_v6.12/ROOT-Primer.pdf</a></li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2019-03-06 Wed 14:29</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
