<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-06-04 Fri 15:06 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CPP / C++ Notes - C++ Libraries Review</title>
<meta name="generator" content="Org mode" />
<meta name="description" content="cpp/c++ c++ libraries review and usage"
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
<link href="theme/org-nav-theme.css" rel="stylesheet">
<script src="theme/org-nav-theme.js"></script>
<link rel="icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">CPP / C++ Notes - C++ Libraries Review</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgad5c57b">1. C++ Libraries Review</a>
<ul>
<li><a href="#org3a5d050">1.1. GSL - Guideline Support Library (C++20)</a>
<ul>
<li><a href="#orgf716888">1.1.1. Overview</a></li>
<li><a href="#org9b3d778">1.1.2. Type: gsl::owner</a></li>
<li><a href="#org6d88af6">1.1.3. Type: gsl::finally</a></li>
<li><a href="#org804359e">1.1.4. Functions: narrow_cast and narrow</a></li>
<li><a href="#orgfc2b50a">1.1.5. Type: gsl::span (C++20)</a></li>
<li><a href="#org94b729a">1.1.6. gsl::span code example</a></li>
</ul>
</li>
<li><a href="#orgc13d1ac">1.2. mapbox variant</a></li>
<li><a href="#org17f101e">1.3. Range v3 (C++20)</a></li>
<li><a href="#orgca904a6">1.4. Printf replacements</a>
<ul>
<li><a href="#org2ac8092">1.4.1. fmtlib (fmt) - Better printf (C++20)</a></li>
<li><a href="#org784c375">1.4.2. tinyprintf</a></li>
</ul>
</li>
<li><a href="#orgb3d7907">1.5. Pretty Printing</a>
<ul>
<li><a href="#org9315eeb">1.5.1. cxx-prettyprint - STL container pretty print</a></li>
<li><a href="#orgefc6bde">1.5.2. pprint - Pretty print library for C++17</a></li>
</ul>
</li>
<li><a href="#orgca26299">1.6. Command Line Parsing</a>
<ul>
<li><a href="#org3b83b54">1.6.1. CLI11 Library</a></li>
<li><a href="#orgcb5dee8">1.6.2. Clipp library</a></li>
</ul>
</li>
<li><a href="#orge0b05de">1.7. Serialization</a>
<ul>
<li><a href="#org5c3f448">1.7.1. Cereal - Serialization library</a></li>
<li><a href="#org9b8d905">1.7.2. YAS - Yet Another Serialization Library</a></li>
</ul>
</li>
<li><a href="#org5738e25">1.8. Parsers</a>
<ul>
<li><a href="#org6a3347a">1.8.1. TinyXML2 - Lightweight XML parser</a></li>
<li><a href="#org9de0314">1.8.2. PugiXML - Lightweight XML parser</a></li>
<li><a href="#orga66d7dc">1.8.3. nlohmann JSON Parser Library</a></li>
<li><a href="#orgdf58452">1.8.4. cpptoml configuration parser</a></li>
</ul>
</li>
<li><a href="#org169a3d9">1.9. Unit Testing</a>
<ul>
<li><a href="#orgd8ca824">1.9.1. GTest - Unit Testing Framework</a></li>
<li><a href="#orgda6fe97">1.9.2. Catch2 - Unit Testing Framework</a></li>
<li><a href="#org43794d6">1.9.3. Doctest - Unit Testing Framewok</a></li>
</ul>
</li>
<li><a href="#org51fe81b">1.10. Google Benchmark</a></li>
<li><a href="#org4184ec3">1.11. Pistache - REST Http Web Server</a></li>
<li><a href="#org66851e2">1.12. Httplib - Http Client and Server Library</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgad5c57b" class="outline-2">
<h2 id="orgad5c57b"><span class="section-number-2">1</span> C++ Libraries Review</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org3a5d050" class="outline-3">
<h3 id="org3a5d050"><span class="section-number-3">1.1</span> GSL - Guideline Support Library (C++20)</h3>
<div class="outline-text-3" id="text-1-1">
</div>
<div id="outline-container-orgf716888" class="outline-4">
<h4 id="orgf716888"><span class="section-number-4">1.1.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
The <span class="underline">GSL - Guideline Support Library</span> (not confused with GNU Scientific
Library) contains implementations of some types and functions proposed
by the <span class="underline">C++ Core Guidelines</span> for helping to enhance the code quality,
reduce mistakes and make the intent clear. Note: some types of the C++
core guidelines such as std::span will be included in the C++20. 
</p>

<p>
<b>C++ Core Guidelines</b> - Created by ISO C++ Comitee 
</p>

<ul class="org-ul">
<li>Site: <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines">https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines</a></li>

<li>Repo: <a href="http://github.com/isocpp/CppCoreGuidelins">http://github.com/isocpp/CppCoreGuidelins</a></li>
</ul>

<p>
<b>Implementations of the GSL Library</b>
</p>

<ul class="org-ul">
<li>Microsft's Implementation of the GSL (Most used)
<ul class="org-ul">
<li>(First implementation of the Core Guideline Types)</li>
<li><a href="https://github.com/Microsft/GSL">https://github.com/Microsft/GSL</a></li>
</ul></li>

<li>GSL-Lite - Single-header file implementation of the Microsft GSL (License: MIT)
<ul class="org-ul">
<li><a href="https://github.com/martinmoene/gsl-lite">https://github.com/martinmoene/gsl-lite</a></li>
</ul></li>

<li>Martin Moene's GSL with Melanolib:
<ul class="org-ul">
<li><a href="https://github.com/mbasaglia/Meanolib">https://github.com/mbasaglia/Meanolib</a></li>
</ul></li>

<li>Vicente Botet Escriba's fork:
<ul class="org-ul">
<li><a href="http://github.com/viboes/GSL">http://github.com/viboes/GSL</a></li>
</ul></li>
</ul>

<p>
<b>Parts of GSL</b> 
</p>

<ul class="org-ul">
<li><span class="underline">Views</span>
<ul class="org-ul">
<li>span&lt;T&gt;</li>
<li>string_span&lt;T&gt;</li>
<li>(cw) zstring</li>
</ul></li>

<li><span class="underline">Owners/Containers</span>
<ul class="org-ul">
<li>owner&lt;T&gt;</li>
<li>unique_ptr&lt;T&gt; (for old compiler that does not support C++11)</li>
<li>shared_ptr&lt;T&gt; (old compilers)</li>
<li>dyn_array&lt;T&gt;</li>
<li>stack_array&lt;T&gt;</li>
</ul></li>

<li><span class="underline">Utilities</span>
<ul class="org-ul">
<li>not_null&lt;T&gt;</li>
<li>finally()</li>
</ul></li>

<li><span class="underline">Contract Support</span> (Macros)
<ul class="org-ul">
<li>Expect() =&gt; For pre-condition validation</li>
<li>Ensure() =&gt; For post-condition validation</li>
</ul></li>

<li><span class="underline">Type casting conversions</span>
<ul class="org-ul">
<li>narrow()</li>
<li>narrow_cast()</li>
</ul></li>

<li><span class="underline">Concepts</span>
<ul class="org-ul">
<li>String</li>
<li>Number</li>
<li>Sortable</li>
<li>Pointer</li>
</ul></li>
</ul>

<p>
<b>Papers</b> 
</p>

<ul class="org-ul">
<li><b>P0122R33 - span: bounds-safe views for sequences</b>
<ul class="org-ul">
<li><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0122r3.pdf">http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0122r3.pdf</a></li>
</ul></li>

<li><b>P0298R1 - A byte type definition</b>
<ul class="org-ul">
<li><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0298r1.pdf">http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0298r1.pdf</a></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org9b3d778" class="outline-4">
<h4 id="org9b3d778"><span class="section-number-4">1.1.2</span> Type: gsl::owner</h4>
<div class="outline-text-4" id="text-1-1-2">
<p>
The type gsl::owner is proposed in the section <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Ri-raw">I11</a> of the core guidelines:
</p>

<ul class="org-ul">
<li>"I.11: Never transfer ownership by a raw pointer (T*) or reference (T&amp;)"</li>
</ul>

<p>
Definition: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">template</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">T</span>, <span class="org-keyword">class</span> = <span class="org-constant">std</span>::<span class="org-type">enable_if_t</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-constant">is_pointer</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>::value<span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">using</span> <span class="org-type">owner</span> = T;
</pre>
</div>

<p>
The type <span class="underline">owner&lt;T&gt;</span> is just an alias for a pointer type for annotating
raw owning pointer APIs that cannot be modified. This type allows
distinguishing raw owning pointers from non-owning pointers, making
the intent of the code clear. 
</p>

<p>
See: 
</p>
<ul class="org-ul">
<li><a href="https://clang.llvm.org/extra/clang-tidy/checks/cppcoreguidelines-owning-memory.html">clang-tidy - cppcoreguidelines-owning-memory â€” Extra Clang Tools 10 documentation</a></li>
</ul>

<p>
Before: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">IBaseClass</span>*  <span class="org-function-name">factoryFunction</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">key</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>key == VALUE1<span class="org-rainbow-delimiters-depth-2">)</span>
   <span class="org-rainbow-delimiters-depth-2">{</span> 
     <span class="org-keyword">return</span> <span class="org-keyword">new</span> <span class="org-type">Implementation1</span><span class="org-rainbow-delimiters-depth-3">(</span>arg1, arg2, ...<span class="org-rainbow-delimiters-depth-3">)</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>
   <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>key == VALUE1<span class="org-rainbow-delimiters-depth-2">)</span>
   <span class="org-rainbow-delimiters-depth-2">{</span> 
     <span class="org-keyword">return</span> <span class="org-keyword">new</span> <span class="org-type">Implementation2</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>
   <span class="org-comment-delimiter">//  </span><span class="org-comment">... ... ... . </span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">Invalid input </span>
  <span class="org-keyword">return</span> <span class="org-constant">nullptr</span>; 
<span class="org-rainbow-delimiters-depth-1">}</span> 
</pre>
</div>

<p>
After: 
</p>
<ul class="org-ul">
<li>The annotation gsl::owner&lt;T&gt; makes clear that pointer returned by
factoryFunction owns memory and that it must release it later by
calling the delete operator.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">gls/pointer</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-function-name">gsl</span>::<span class="org-type">owner</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">IBaseClass</span>*<span class="org-rainbow-delimiters-depth-1">&gt;</span>  
factoryFunction<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">key</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>key == VALUE1<span class="org-rainbow-delimiters-depth-2">)</span>
   <span class="org-rainbow-delimiters-depth-2">{</span> 
     <span class="org-keyword">return</span> <span class="org-keyword">new</span> <span class="org-type">Implementation1</span><span class="org-rainbow-delimiters-depth-3">(</span>arg1, arg2, ...<span class="org-rainbow-delimiters-depth-3">)</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>
   <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>key == VALUE1<span class="org-rainbow-delimiters-depth-2">)</span>
   <span class="org-rainbow-delimiters-depth-2">{</span> 
     <span class="org-keyword">return</span> <span class="org-keyword">new</span> <span class="org-type">Implementation2</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>
   <span class="org-comment-delimiter">//  </span><span class="org-comment">... ... ... . </span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">Invalid input </span>
  <span class="org-keyword">return</span> <span class="org-constant">nullptr</span>; 
<span class="org-rainbow-delimiters-depth-1">}</span> 

<span class="org-comment-delimiter">//  </span><span class="org-comment">--------- Usage: ------------------// </span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span> 
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Choose the implementation: "</span>;
    <span class="org-type">int</span> <span class="org-variable-name">key</span>; 
    <span class="org-constant">std</span>::cin &gt;&gt; key; 

   <span class="org-constant">gsl</span>::<span class="org-type">owner</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">IBaseClass</span>*<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">object</span> = factoryFunction<span class="org-rainbow-delimiters-depth-2">(</span>key<span class="org-rainbow-delimiters-depth-2">)</span>; 

   object-&gt;InvokeVirtualMemberFunction<span class="org-rainbow-delimiters-depth-2">()</span>;
   <span class="org-comment-delimiter">// </span><span class="org-comment">... ... ... ..</span>

  <span class="org-keyword">delete</span> object;
 <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6d88af6" class="outline-4">
<h4 id="org6d88af6"><span class="section-number-4">1.1.3</span> Type: gsl::finally</h4>
<div class="outline-text-4" id="text-1-1-3">
<p>
The gsl::finally can register a callable object (lambda, functor or
function pointer) which is called when it goes out of scope. This
function is useful for exception-safe resource disposal or cleanup.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-type">int</span>* <span class="org-variable-name">arr</span> = <span class="org-keyword">new</span> <span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-2">[</span>10<span class="org-rainbow-delimiters-depth-2">]</span>; 

   <span class="org-comment-delimiter">// </span><span class="org-comment">RAII =&gt; Calls lambda when this object is out-of-scope </span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">and its destructor is called. </span>
   <span class="org-keyword">auto</span> <span class="org-variable-name">scope_guard</span> = <span class="org-constant">gsl</span>::finally<span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-rainbow-delimiters-depth-3">[</span>=<span class="org-rainbow-delimiters-depth-3">]</span>
                   <span class="org-rainbow-delimiters-depth-3">{</span> 
                      <span class="org-keyword">delete</span> <span class="org-rainbow-delimiters-depth-4">[]</span> arr;
                      <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Resource cleaned OK."</span><span class="org-rainbow-delimiters-depth-4">)</span>;
                   <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;

   <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">size_t</span> <span class="org-variable-name">i</span> = 0; i &lt; 10; i++<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-comment-delimiter">/** </span><span class="org-comment">set arrary */</span> <span class="org-rainbow-delimiters-depth-2">}</span>   
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">scope_guard called here. </span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org804359e" class="outline-4">
<h4 id="org804359e"><span class="section-number-4">1.1.4</span> Functions: narrow_cast and narrow</h4>
<div class="outline-text-4" id="text-1-1-4">
<p>
The functions narrow and narrow_cast are used in several sections of
the core guidelines, namely: 
</p>
<ul class="org-ul">
<li>ES.46: Avoid lossy (narrowing, truncating) arithmetic conversions</li>
<li>ES.49: If you must use a cast, use a named cast</li>
<li>P.4: Ideally, a program should be statically type safe</li>
</ul>

<p>
<b>Function: narrow_cast()</b>
</p>

<ul class="org-ul">
<li>The function narrow_cast is equivalent to a static_cast operator,
but it makes the clear and evident that a narrow cast is being
performed, a casting from type to another with <span class="underline">less bits</span>, therefore
with possible loss of <span class="underline">information</span>, loss of precision or
overflow/undeflow error.</li>
</ul>

<p>
Usage: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">gls/gls</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">Include all heders</span>

<span class="org-type">double</span> <span class="org-variable-name">xx</span> = 105e4;

<span class="org-comment-delimiter">// </span><span class="org-comment">Same as static_cast, but the intent is more clear.  Makes easier to</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">the reader spot that a loss of information or precision may happen.</span>
<span class="org-comment-delimiter">// </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Note: If an underflow/overflow happens in this case, it is</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">undefined behavihor. UB</span>
<span class="org-type">int</span> <span class="org-variable-name">nx</span> = <span class="org-constant">gsl</span>::narrow_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>xx<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
<b>Function: narrow()</b> 
</p>

<ul class="org-ul">
<li>The function <span class="underline">narrow&lt;T&gt;()</span> is similar to the <span class="underline">narrow_cast()</span>, but it
calls std::terminate or throws an exception if there is a loss of
information in the narrow cast.</li>

<li>The code in the next line throws a <b>gsl::narrowing_error</b> exception
that abnormaly terminates the program because the value 10.535e10
when casted to int, results in an overflow, there is not enough
bits to store the entire integer part of this number. This runtime
check makes easier to catch bugs like this.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">gls/gls</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">Include all heders</span>

<span class="org-type">double</span> <span class="org-variable-name">xx</span> = 10.535e10;
nx = <span class="org-constant">gsl</span>::narrow<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>xx<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfc2b50a" class="outline-4">
<h4 id="orgfc2b50a"><span class="section-number-4">1.1.5</span> Type: gsl::span (C++20)</h4>
<div class="outline-text-4" id="text-1-1-5">
<p>
The GSL class <b>gsl::span&lt;T&gt;</b> (former gsl::array_view) is a <span class="underline">non-owning</span>
representation or a <span class="underline">view</span> for a contiguous allocated sequence of
objects which can be a std::vector; std::array&lt;T, size_t&gt;;
zero-terminated C-string, a buffer represented by the tuple (pointer,
size) or (C-array, size). The gsl::span&lt;T&gt; view can also be used for
refactoring C-style functions that takes the tuple parameters
(pointer, size), representing a buffer, and making the function safe
against memory corruption, out-of-bound read/write and buffer
overflows, which can introduce security vulnerabilities.
</p>

<p>
C++20 std::span documentation (not gsl::span)
</p>

<ul class="org-ul">
<li><a href="https://en.cppreference.com/w/cpp/container/span">https://en.cppreference.com/w/cpp/container/span</a></li>
</ul>

<p>
Motivating Paper: 
</p>

<ul class="org-ul">
<li>P0122R3 - span: bounds-safe views for sequences of objects
<ul class="org-ul">
<li><a href="http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0122r3.pdf">http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0122r3.pdf</a></li>
</ul></li>
</ul>

<p>
Terminology: 
</p>

<ul class="org-ul">
<li>Non-owning: A gsl::span&lt;T&gt; object is not responsible for
the allocating or releasing the objects that it points to.</li>

<li>View: Object that encapsulates a reference type or points to
existing objects that it does not own.</li>

<li>Buffer: Any memory region represented by the pair (pointer, size),
pointer to beginning of the region and buffer size.</li>
</ul>

<p>
Summary: 
</p>

<ul class="org-ul">
<li>gsl::span&lt;T&gt; can refer to any container: std::vector;
std::array&lt;T, size_t&gt;; null-terminated character array; buffer,
represented by pointer + tuple.</li>

<li>gsl::span&lt;T&gt; does not allocate any memory and copying it does not
copy any element, gsl:span&lt;T&gt; is a <span class="underline">view</span>.</li>
</ul>

<p>
Use-cases for gsl::span&lt;T&gt;:
</p>

<ul class="org-ul">
<li>Provide range checking allowing to avoid buffer overrun (aka
buffer overflow):  terminates the program abnormally by
calling std::terminate or throwing an exception (fail-fast
approach). The range checking can be disabled for</li>

<li>Creating functions that can take std::vector, std::aray or a
buffer which can be presented by a C-style aray or the pair
(pointer, size).</li>

<li>Refactoring: Make C-style functions that take a buffer parameter
represented by the pair (pointer, size) safer against buffer
overflow vulnerabilities. The view object gsl::span&lt;T&gt; has built-in
array-bound checking, any out-of-bounds access can either throw
a gsl::fail_fast exception or a call std::terminate terminating
the program abnormally.</li>
</ul>


<p>
<b>Constructors</b> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">--------- Constructors for dynamic-size span  -----------// </span>
<span class="org-function-name">gls</span>::span<span class="org-rainbow-delimiters-depth-1">()</span>; 
<span class="org-function-name">gsL</span>::span<span class="org-rainbow-delimiters-depth-1">(</span>nullptr_t<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">noexcept</span>; 
<span class="org-function-name">gls</span>::span<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">pointer</span> <span class="org-variable-name">ptr</span>, <span class="org-type">index_type</span> <span class="org-variable-name">number_of_elements</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">gls</span>::span<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">pointer</span> <span class="org-variable-name">ptrFirstElement</span>, ptrLastElement<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-keyword">template</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">Container</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-constant">gls</span>::<span class="org-function-name">span</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Container</span>&amp; <span class="org-variable-name">container</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">--------- Constructors for fixed-size span ---------------//</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Array buffer of size N. i.e:  int array [10] = { 1, 2, ..., 10};</span>
<span class="org-keyword">template</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">size_t</span> <span class="org-variable-name">N</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-constant">gsl</span>::<span class="org-function-name">span</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">element_type</span> <span class="org-rainbow-delimiters-depth-2">(</span>&amp;<span class="org-variable-name">array</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">[</span>N<span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-keyword">template</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">size_t</span> <span class="org-variable-name">N</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-constant">gsl</span>::<span class="org-function-name">span</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Container</span>&amp; <span class="org-variable-name">container</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">template</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">size_t</span> <span class="org-variable-name">N</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-constant">gsl</span>::<span class="org-function-name">span</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Container</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">container</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
<b>Memeber Functions</b> 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">Return</th>
<th scope="col" class="org-left">Function</th>
<th scope="col" class="org-left">Description</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">Type</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">A</td>
<td class="org-left">index_type</td>
<td class="org-left">size() const</td>
<td class="org-left">Returns number of elements in the span</td>
</tr>

<tr>
<td class="org-left">B</td>
<td class="org-left">index_type</td>
<td class="org-left">size_bytes() const</td>
<td class="org-left">Returns the total size of sequence in bytes</td>
</tr>

<tr>
<td class="org-left">C</td>
<td class="org-left">TElement*</td>
<td class="org-left">data() const</td>
<td class="org-left">Returns pointer to first element of span.</td>
</tr>

<tr>
<td class="org-left">D</td>
<td class="org-left">bool</td>
<td class="org-left">empty() const</td>
<td class="org-left">Returns treu if the span is empty</td>
</tr>

<tr>
<td class="org-left">E</td>
<td class="org-left">TElement&amp;</td>
<td class="org-left">operator[](index_type idx) const</td>
<td class="org-left">Returns reference to idx-th element of span.</td>
</tr>

<tr>
<td class="org-left">F</td>
<td class="org-left">TElement&amp;</td>
<td class="org-left">at(index_type idx) const</td>
<td class="org-left">Returns reference to idx-th element of span.</td>
</tr>

<tr>
<td class="org-left">G</td>
<td class="org-left">gsl::span</td>
<td class="org-left">subspan(index_type offset, index_count n)</td>
<td class="org-left">Obtains a new span view from offset to  (offset + n) elements.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">H</td>
<td class="org-left">iterator</td>
<td class="org-left">being() const</td>
<td class="org-left">Returns iterator to beginning of span.</td>
</tr>

<tr>
<td class="org-left">I</td>
<td class="org-left">iterator</td>
<td class="org-left">end() const</td>
<td class="org-left">Returns iterator to end of span.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">J</td>
<td class="org-left">const_iterator</td>
<td class="org-left">cbegin() const</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">L</td>
<td class="org-left">cosnt_iterator</td>
<td class="org-left">cend() const</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>


<ul class="org-ul">
<li>Note: E =&gt; The behavior of the operator (operator[])(index_type )
is undefined if idx index is out of range.</li>

<li>Note: F =&gt; Throws an exception if the index idx is out of range.</li>
</ul>

<p>
<b>Dynamic-size gsl::span assignment</b> 
</p>

<ul class="org-ul">
<li>The variable sp of type gsl::span&lt;int&gt; can refere to fixed-size
array; std::vector&lt;int&gt;; std::array&lt;int, size_t&gt; and so on.</li>

<li>assert(&lt;PREDICATE&gt;) =&gt; Terminates the program abnormally by calling
std::abort if the predicate is false, then shows an error message
indicating the file and line where the assertion has failed.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">gsl</span>::<span class="org-type">span</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> sp;

<span class="org-comment-delimiter">//</span><span class="org-comment">--------- assign C-array to span -------------- // </span>
<span class="org-type">int</span> <span class="org-variable-name">carr</span> <span class="org-rainbow-delimiters-depth-1">[]</span> = <span class="org-rainbow-delimiters-depth-1">{</span>-15, 6, 10, 9, 200<span class="org-rainbow-delimiters-depth-1">}</span>;
sp = xs;                 <span class="org-comment-delimiter">// </span><span class="org-comment">sp refers to array xs </span>
assert<span class="org-rainbow-delimiters-depth-1">(</span>sp<span class="org-rainbow-delimiters-depth-2">[</span>2<span class="org-rainbow-delimiters-depth-2">]</span> == 10<span class="org-rainbow-delimiters-depth-1">)</span>; 
assert<span class="org-rainbow-delimiters-depth-1">(</span>sp<span class="org-rainbow-delimiters-depth-2">[</span>3<span class="org-rainbow-delimiters-depth-2">]</span> == 9<span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">(</span>sp.size<span class="org-rainbow-delimiters-depth-2">()</span> == 5<span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">()</span>

<span class="org-comment-delimiter">//</span><span class="org-comment">------ Assign fixed-size buffer (C-array) to span ---// </span>
<span class="org-type">int</span> <span class="org-variable-name">buffer</span><span class="org-rainbow-delimiters-depth-1">[</span>200<span class="org-rainbow-delimiters-depth-1">]</span> = <span class="org-rainbow-delimiters-depth-1">{</span>3, 5, 6, 10, 20<span class="org-rainbow-delimiters-depth-1">}</span>;
sp = buffer;
assert<span class="org-rainbow-delimiters-depth-1">(</span>sp.size<span class="org-rainbow-delimiters-depth-2">()</span> == 200<span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">(</span>sp<span class="org-rainbow-delimiters-depth-2">[</span>2<span class="org-rainbow-delimiters-depth-2">]</span> == 6<span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">(</span>sp<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> == 3<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">//</span><span class="org-comment">---- Assign to buffer defined by (pointer, size) tuple to span ---// </span>
<span class="org-type">int</span>* <span class="org-variable-name">p_buffer</span> = &amp;carr; 
<span class="org-keyword">auto</span> <span class="org-variable-name">buffer_size</span> = <span class="org-constant">gsl</span>::index<span class="org-rainbow-delimiters-depth-1">(</span>5<span class="org-rainbow-delimiters-depth-1">)</span>;
sp = <span class="org-constant">gsl</span>::make_span<span class="org-rainbow-delimiters-depth-1">(</span>p_buffer, buffer_size<span class="org-rainbow-delimiters-depth-1">)</span>; 
assert<span class="org-rainbow-delimiters-depth-1">(</span>sp.size<span class="org-rainbow-delimiters-depth-2">()</span> == 5<span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">(</span>sp<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> == -15<span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">(</span>sp<span class="org-rainbow-delimiters-depth-2">[</span>2<span class="org-rainbow-delimiters-depth-2">]</span> ==  10<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">//</span><span class="org-comment">------ assign std::vector cointainer to span -------// </span>
<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> xs = <span class="org-rainbow-delimiters-depth-1">{</span>1, 2, 3, 4, 5<span class="org-rainbow-delimiters-depth-1">}</span>;
sp = xs;                 <span class="org-comment-delimiter">// </span><span class="org-comment">sp refers to vector xs </span>
assert<span class="org-rainbow-delimiters-depth-1">(</span>sp<span class="org-rainbow-delimiters-depth-2">[</span>2<span class="org-rainbow-delimiters-depth-2">]</span> == 3<span class="org-rainbow-delimiters-depth-1">)</span>;
assrrt<span class="org-rainbow-delimiters-depth-1">(</span>sp.size<span class="org-rainbow-delimiters-depth-2">()</span> == 5<span class="org-rainbow-delimiters-depth-1">)</span>;  

<span class="org-comment-delimiter">//</span><span class="org-comment">------ assign std::array to span -------------------//</span>
<span class="org-function-name">std</span>::<span class="org-type">array</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>, 6<span class="org-rainbow-delimiters-depth-1">&gt;</span> arr = <span class="org-rainbow-delimiters-depth-1">{</span>10, 20, 30, 40, 50, 60<span class="org-rainbow-delimiters-depth-1">}</span>; 
sp = arr;  <span class="org-comment-delimiter">// </span><span class="org-comment">sp refers to std::array arr </span>
assert<span class="org-rainbow-delimiters-depth-1">(</span>sp<span class="org-rainbow-delimiters-depth-2">[</span>2<span class="org-rainbow-delimiters-depth-2">]</span> == 30<span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">(</span>sp.size<span class="org-rainbow-delimiters-depth-2">()</span> == 6<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
<b>Looping over gsl::span&lt;T&gt;</b> 
</p>

<p>
Dataset definition: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-variable-name">dataset</span> <span class="org-rainbow-delimiters-depth-1">[]</span> = <span class="org-rainbow-delimiters-depth-1">{</span>200, 100, -90, 89, 610, 53, 1365<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-function-name">std</span>::<span class="org-type">span</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> arrview;  
arrview = dataset; 
</pre>
</div>

<p>
Index-based loop: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">idx</span> = <span class="org-constant">gsl</span>::index<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span>; idx &lt; arr.size<span class="org-rainbow-delimiters-depth-2">()</span>; ++idx<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Element["</span> &lt;&lt; idx &lt;&lt; <span class="org-string">"] ="</span> &lt;&lt; arrview<span class="org-rainbow-delimiters-depth-2">[</span>idx<span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Iterator-based loop: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">it</span> = arrview.begin<span class="org-rainbow-delimiters-depth-2">()</span>; it != arrview.end<span class="org-rainbow-delimiters-depth-2">()</span>; ++it<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-constant">std</span>::cout &lt;&lt; *it &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Iterator-based loop using std::begin() and std::end() functions:  
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">it</span> = <span class="org-constant">std</span>::begin<span class="org-rainbow-delimiters-depth-2">(</span>arrview<span class="org-rainbow-delimiters-depth-2">)</span>; it != <span class="org-constant">std</span>::end<span class="org-rainbow-delimiters-depth-2">(</span>arrview<span class="org-rainbow-delimiters-depth-2">)</span>; ++it<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-constant">std</span>::cout &lt;&lt; *it &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Range-based loop: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>:  arrview<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-constant">std</span>::cout &lt;&lt; x &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Iteration with STL algorithms (header &lt;algorithm&gt;)
</p>

<div class="org-src-container">
<pre class="src src-cpp"> <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>arrview.begin<span class="org-rainbow-delimiters-depth-2">()</span>, arrview.end<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">int</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-2">)</span>
              <span class="org-rainbow-delimiters-depth-2">{</span>
                  <span class="org-constant">std</span>::cout &lt;&lt; n &lt;&lt; <span class="org-string">"\n"</span>;
              <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::sort<span class="org-rainbow-delimiters-depth-1">(</span>arrview.begin<span class="org-rainbow-delimiters-depth-2">()</span>, arrview.end<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
<b>Function with gsl::span argument</b>
</p>

<p>
A function that uses gsl::span&lt;T&gt; as argument can accept any buffer,
C-arrray or continguous container as input.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-function-name">sum_span_element</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">gsl</span>::<span class="org-type">span</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">int</span> <span class="org-variable-name">sum</span> = 0;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">x</span>: xs<span class="org-rainbow-delimiters-depth-2">){</span> sum += x; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">return</span> sum;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">gsl</span>::<span class="org-type">span</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> sp; 

<span class="org-comment-delimiter">// </span><span class="org-comment">------ Passing a C-array argument ------------------------------//</span>
<span class="org-type">int</span> <span class="org-variable-name">carr</span> <span class="org-rainbow-delimiters-depth-1">[]</span> = <span class="org-rainbow-delimiters-depth-1">{</span>-15, 6, 10, 9, 200<span class="org-rainbow-delimiters-depth-1">}</span>;
sp = carr;
assert<span class="org-rainbow-delimiters-depth-1">(</span>sum_span_element<span class="org-rainbow-delimiters-depth-2">(</span>carr<span class="org-rainbow-delimiters-depth-2">)</span> == 210<span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">(</span>sum_span_element<span class="org-rainbow-delimiters-depth-2">(</span>sp<span class="org-rainbow-delimiters-depth-2">)</span> == 210<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">----- Passing a buffer argument defined by (pointer, size) pair ---// </span>
<span class="org-type">int</span>* <span class="org-variable-name">buffer_ptr</span>  = carr; <span class="org-comment-delimiter">// </span><span class="org-comment">Address of carr[0]</span>
<span class="org-type">int</span>  <span class="org-variable-name">buffer_size</span> = 5; 
sp = <span class="org-constant">gsl</span>::make_span<span class="org-rainbow-delimiters-depth-1">(</span>buffer_ptr, buffer_size<span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">(</span> sum_span_element<span class="org-rainbow-delimiters-depth-2">(</span>sp<span class="org-rainbow-delimiters-depth-2">)</span> == 210 <span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">(</span> sum_span_element<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">gsl</span>::make_span<span class="org-rainbow-delimiters-depth-3">(</span>buffer_ptr, <span class="org-constant">gsl</span>::index<span class="org-rainbow-delimiters-depth-4">(</span>buffer_size<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> == 210 <span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">(</span> sum_span_element<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">{</span>buffer_ptr, <span class="org-constant">gsl</span>::index<span class="org-rainbow-delimiters-depth-4">(</span>buffer_size<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span> == 210 <span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">---- Passing a std::vector argument ------------------//</span>
<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> vec =  <span class="org-rainbow-delimiters-depth-1">{</span>10, 256, -15, 20, -8<span class="org-rainbow-delimiters-depth-1">}</span>; 
sp = vec; 
assert<span class="org-rainbow-delimiters-depth-1">(</span> sum_span_element<span class="org-rainbow-delimiters-depth-2">(</span>sp<span class="org-rainbow-delimiters-depth-2">)</span> == 263 <span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">(</span> sum_span_element<span class="org-rainbow-delimiters-depth-2">(</span>vec<span class="org-rainbow-delimiters-depth-2">)</span> == 263 <span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-org94b729a" class="outline-4">
<h4 id="org94b729a"><span class="section-number-4">1.1.6</span> gsl::span code example</h4>
<div class="outline-text-4" id="text-1-1-6">
<p>
File: CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.14)
<span class="org-function-name">project</span>(gls_experiment)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment"># See documentation at: https://cmake.org/cmake/help/latest/module/FetchContent.html</span>

<span class="org-comment">#========== Macros for automating Library Fetching =============#</span>
<span class="org-function-name">include</span>(FetchContent)

<span class="org-comment"># Download library archive (zip, *.tar.gz, ...) from URL</span>
<span class="org-keyword">macro</span>(Download_Library_Url NAME URL)
    <span class="org-function-name">FetchContent_Declare</span>(${<span class="org-variable-name">NAME</span>} URL  ${<span class="org-variable-name">URL</span>})
    <span class="org-function-name">FetchContent_GetProperties</span>(${<span class="org-variable-name">NAME</span>})
    <span class="org-function-name">message</span>( [DOWNLOAD LIB] <span class="org-string">" VAR1 = ${${</span><span class="org-variable-name">NAME</span><span class="org-string">}_SOURCE_DIR}"</span>)
    <span class="org-keyword">if</span>(NOT ${<span class="org-variable-name">NAME</span>}_POPULATED)
        <span class="org-function-name">FetchContent_Populate</span>(${<span class="org-variable-name">NAME</span>})
        <span class="org-function-name">add_subdirectory</span>(${${<span class="org-variable-name">NAME</span>}_SOURCE_DIR} ${${<span class="org-variable-name">NAME</span>}_BINARY_DIR})
    <span class="org-keyword">endif</span>()
<span class="org-keyword">endmacro</span>()

<span class="org-comment">#============== Library Download =========================#</span>

<span class="org-function-name">Download_Library_Url</span>( gsl
                      https://github.com/microsoft/GSL/archive/v2.0.0.zip
                     )

<span class="org-comment"># ========= Targets Settings ==========================#</span>

<span class="org-function-name">add_executable</span>(microsft_gsl  microsft_gsl.cpp)
<span class="org-function-name">target_link_libraries</span>(microsft_gsl GSL)
</pre>
</div>

<p>
File: gsl_span1.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">memory</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">array</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">algorithm</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">numeric</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">#define GSL_UNENFORCED_ON_CONTRACT_VIOLATION</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">#define GSL_TERMINATE_ON_CONTRACT_VIOLATION</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">GSL_THROW_ON_CONTRACT_VIOLATION</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">------ Headers from the GSL - Guideline Support Library ----------//</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------------------------------------------------//</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">#include &lt;gsl/gsl&gt; // For including everything</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">gsl/gsl</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">gsl/span</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">gsl/pointers</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">void</span> <span class="org-function-name">display_span</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">name</span>, <span class="org-constant">gsl</span>::<span class="org-type">span</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"  =&gt; "</span> &lt;&lt; name &lt;&lt; <span class="org-string">" = [ "</span>;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: xs<span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-constant">std</span>::cout &lt;&lt; x &lt;&lt; <span class="org-string">", "</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-constant">std</span>::cout &lt;&lt;  <span class="org-string">" ]\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">void</span> <span class="org-function-name">disp</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">label</span>, <span class="org-type">T</span>&amp;&amp; <span class="org-variable-name">value</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span>  &lt;&lt; <span class="org-string">"  =&gt;&gt; "</span>
              &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; label
              &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>4<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"="</span>
              &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>6<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; value
              &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">int</span> <span class="org-function-name">cstring_len</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">gsl</span>::<span class="org-type">not_null</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">ptr</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">int</span> <span class="org-variable-name">n</span> = 0;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">p</span> = ptr.get<span class="org-rainbow-delimiters-depth-3">()</span>; *p != <span class="org-string">'\0'</span>; ++p<span class="org-rainbow-delimiters-depth-2">)</span> n++;
    <span class="org-keyword">return</span> n;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>


    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n ==== EXPERIMENT 1 - gsl::span variable =====================\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Variable span, non owning view that can refere to any contiguous memory,</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">C-array buffers; buffers (pointer, size) tuple; std::vector; std::array</span>
        <span class="org-constant">gsl</span>::<span class="org-type">span</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-variable-name">sp</span>;

        <span class="org-type">int</span> <span class="org-variable-name">carray</span> <span class="org-rainbow-delimiters-depth-3">[]</span> = <span class="org-rainbow-delimiters-depth-3">{</span>10, 5, 8, 5, 6, 15<span class="org-rainbow-delimiters-depth-3">}</span>;
        sp = carray;

        <span class="org-type">int</span>* <span class="org-variable-name">ptr_data</span> = sp.data<span class="org-rainbow-delimiters-depth-3">()</span>;

        display_span<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"carray [A]"</span>, sp<span class="org-rainbow-delimiters-depth-3">)</span>;
        display_span<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"carray [B]"</span>, carray<span class="org-rainbow-delimiters-depth-3">)</span>;
        disp<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">" *(carray.data + 0) "</span>, *ptr_data<span class="org-rainbow-delimiters-depth-3">)</span>;
        disp<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">" *(carray.data + 0) "</span>, *<span class="org-rainbow-delimiters-depth-4">(</span>ptr_data + 1<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>;


        <span class="org-comment-delimiter">// </span><span class="org-comment">Display buffer defined by tuple (pointer, size)</span>
        <span class="org-type">int</span>*   <span class="org-variable-name">buffer_ptr</span>  = carray;
        <span class="org-type">size_t</span> <span class="org-variable-name">buffer_size</span> = <span class="org-constant">std</span>::size<span class="org-rainbow-delimiters-depth-3">(</span>carray<span class="org-rainbow-delimiters-depth-3">)</span>;
        sp = <span class="org-constant">gsl</span>::make_span<span class="org-rainbow-delimiters-depth-3">(</span>buffer_ptr, buffer_size<span class="org-rainbow-delimiters-depth-3">)</span>;
        display_span<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"buffer"</span>, sp<span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-variable-name">vector1</span> = <span class="org-rainbow-delimiters-depth-3">{</span>10, 256, -15, 20, -8<span class="org-rainbow-delimiters-depth-3">}</span>;
        sp = vector1; <span class="org-comment-delimiter">// </span><span class="org-comment">View refers to vector1</span>
        display_span<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"vector1 [A]"</span>, sp<span class="org-rainbow-delimiters-depth-3">)</span>;
        display_span<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"vector1 [B]"</span>, sp<span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Just a nice C++ wrapper for a C stack-allocated or static-allocated array</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">It encapsulates the array: int [] std_array = {100, ...}</span>
        <span class="org-constant">std</span>::<span class="org-type">array</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">int</span>, 7<span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-variable-name">std_array</span> = <span class="org-rainbow-delimiters-depth-3">{</span>100, -56, 6, 87, 61, 25, 151<span class="org-rainbow-delimiters-depth-3">}</span>;
        sp = std_array;
        display_span<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"std_array [A]"</span>, sp<span class="org-rainbow-delimiters-depth-3">)</span>;
        display_span<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"std_array [B]"</span>, sp<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n ==== EXPERIMENT 2 - gsl::span with std algorithms  ======\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-type">int</span> <span class="org-variable-name">carray</span> <span class="org-rainbow-delimiters-depth-3">[]</span> = <span class="org-rainbow-delimiters-depth-3">{</span>8, 10, 5, 90, 0, 14<span class="org-rainbow-delimiters-depth-3">}</span>;
        <span class="org-constant">gsl</span>::<span class="org-type">span</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-variable-name">sp</span>;
        sp = carray;

        display_span<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"carray &lt;before&gt;"</span>, sp<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-constant">std</span>::sort<span class="org-rainbow-delimiters-depth-3">(</span>sp.begin<span class="org-rainbow-delimiters-depth-4">()</span>, sp.end<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        display_span<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"carray &lt;after&gt;"</span>, sp<span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-keyword">auto</span> <span class="org-variable-name">sum</span> = <span class="org-constant">std</span>::accumulate<span class="org-rainbow-delimiters-depth-3">(</span>sp.begin<span class="org-rainbow-delimiters-depth-4">()</span>, sp.end<span class="org-rainbow-delimiters-depth-4">()</span>, 0<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] sum of all elements  = "</span> &lt;&lt; sum &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n ==== EXPERIMENT 3 - gsl::span methods ==================\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-type">int</span> <span class="org-variable-name">carrayA</span> <span class="org-rainbow-delimiters-depth-3">[]</span> = <span class="org-rainbow-delimiters-depth-3">{</span>10, 15, -8, 251, 56, 15, 100<span class="org-rainbow-delimiters-depth-3">}</span>;
         <span class="org-keyword">auto</span> <span class="org-variable-name">sp</span> = <span class="org-constant">gsl</span>::span<span class="org-rainbow-delimiters-depth-3">{</span>carrayA<span class="org-rainbow-delimiters-depth-3">}</span>;        

         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::boolalpha;

         <span class="org-comment-delimiter">// </span><span class="org-comment">Returns true if the view points to an empty location</span>
         disp<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sp.empty()"</span>, sp.empty<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>;
         <span class="org-comment-delimiter">// </span><span class="org-comment">Returns the number of elements</span>
         disp<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sp.size()"</span>, sp.size<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>;
         <span class="org-comment-delimiter">// </span><span class="org-comment">Returns the total size in bytes</span>
         disp<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sp.size_byte()"</span>, sp.size_bytes<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>;                  

         <span class="org-comment-delimiter">// </span><span class="org-comment">--- Access to elements with array-index operator [] -------//</span>
         <span class="org-comment-delimiter">// </span><span class="org-comment">Note: The bound checking only happens in the debug build.</span>
         <span class="org-comment-delimiter">//       </span><span class="org-comment">In the release build, it is disabled.</span>
         disp<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sp[0]"</span>, sp<span class="org-rainbow-delimiters-depth-4">[</span>0<span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">)</span>;
         disp<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sp[4]"</span>, sp<span class="org-rainbow-delimiters-depth-4">[</span>4<span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">)</span>;
         disp<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sp[5]"</span>, sp<span class="org-rainbow-delimiters-depth-4">[</span>5<span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">)</span>;

         sp<span class="org-rainbow-delimiters-depth-3">[</span>0<span class="org-rainbow-delimiters-depth-3">]</span> = 100;

         <span class="org-comment-delimiter">// </span><span class="org-comment">---- Access to elements with always enabled, throws exception</span>
         <span class="org-comment-delimiter">// </span><span class="org-comment">if the access is out of bounds.</span>
         disp<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sp.at(0)"</span>, sp.at<span class="org-rainbow-delimiters-depth-4">(</span>0<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>;
         disp<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sp.at(4)"</span>, sp.at<span class="org-rainbow-delimiters-depth-4">(</span>5<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>;
         disp<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"sp.at(5)"</span>, sp.at<span class="org-rainbow-delimiters-depth-4">(</span>4<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>;

         <span class="org-comment-delimiter">// </span><span class="org-comment">Note 1: The bound checking with array operator is only enabled</span>
         <span class="org-comment-delimiter">// </span><span class="org-comment">for debug building, in the release building it can be disabled</span>
         <span class="org-comment-delimiter">// </span><span class="org-comment">due to performance reasons.</span>
         <span class="org-comment-delimiter">//</span>
         <span class="org-comment-delimiter">// </span><span class="org-comment">Note 2: It only throws exception, if the macro</span>
         <span class="org-comment-delimiter">// </span><span class="org-comment">GSL_THROW_ON_CONTRACT_VIOLATION is defined before GSL includes.</span>
         <span class="org-comment-delimiter">// </span><span class="org-comment">Otherwise, it calls std::terminate without throwing an exception.</span>
         <span class="org-keyword">try</span>
         <span class="org-rainbow-delimiters-depth-3">{</span>
             disp<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"sp[15]"</span>, sp<span class="org-rainbow-delimiters-depth-5">[</span>15<span class="org-rainbow-delimiters-depth-5">]</span><span class="org-rainbow-delimiters-depth-4">)</span>;
         <span class="org-rainbow-delimiters-depth-3">}</span> <span class="org-keyword">catch</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">gsl</span>::<span class="org-type">fail_fast</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">{</span>
             <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"  [ERROR] Failure = "</span> &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-4">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-rainbow-delimiters-depth-3">}</span>
     <span class="org-rainbow-delimiters-depth-2">}</span>


    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">==== EXPERIMENT 1 - gsl::span variable =====================

 =&gt; carray [A] = [ 10, 5, 8, 5, 6, 15,  ]
 =&gt; carray [B] = [ 10, 5, 8, 5, 6, 15,  ]
 =&gt;&gt;  *(carray.data + 0)    =    10
 =&gt;&gt;  *(carray.data + 0)    =     5
 =&gt; buffer = [ 10, 5, 8, 5, 6, 15,  ]
 =&gt; vector1 [A] = [ 10, 256, -15, 20, -8,  ]
 =&gt; vector1 [B] = [ 10, 256, -15, 20, -8,  ]
 =&gt; std_array [A] = [ 100, -56, 6, 87, 61, 25, 151,  ]
 =&gt; std_array [B] = [ 100, -56, 6, 87, 61, 25, 151,  ]

==== EXPERIMENT 2 - gsl::span with std algorithms  ======

 =&gt; carray &lt;before&gt; = [ 8, 10, 5, 90, 0, 14,  ]
 =&gt; carray &lt;after&gt; = [ 0, 5, 8, 10, 14, 90,  ]
[INFO] sum of all elements  = 127

==== EXPERIMENT 3 - gsl::span methods ==================

 =&gt;&gt; sp.empty()   = false
 =&gt;&gt;  sp.size()   =     7
 =&gt;&gt; sp.size_byte()   =    28
 =&gt;&gt;      sp[0]   =    10
 =&gt;&gt;      sp[4]   =    56
 =&gt;&gt;      sp[5]   =    15
 =&gt;&gt;   sp.at(0)   =   100
 =&gt;&gt;   sp.at(4)   =    15
 =&gt;&gt;   sp.at(5)   =    56
 [ERROR] Failure = GSL: Precondition failure at ... .../_deps/gsl-src/include/gsl/span: 499
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc13d1ac" class="outline-3">
<h3 id="orgc13d1ac"><span class="section-number-3">1.2</span> mapbox variant</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Mapbox variant is a C++14,C++11 header-only library which provides
variant type which are discriminant union containers (sum types), also
called as algebraic data types in functional programming languages. 
</p>

<p>
Repository: 
</p>

<ul class="org-ul">
<li><a href="https://github.com/mapbox/variant/">https://github.com/mapbox/variant/</a></li>
</ul>

<p>
Benefits: 
</p>

<ul class="org-ul">
<li>Supports C++11 and C++14 compilers</li>

<li>Header only, however with fast compile-time.</li>

<li>Similar to Boost.Variant (unlike std::variant which is
stack-allocated), but it is more convenient to use than
Boost.Variant as the only way to get it is downloading and
installing the whole Boost library.</li>

<li>Unlike, std::variant from C++17, which are stack allocated, mapbox
variant can deal with non-complete recursive types as it is
heap-allocated. In other words it can deal with recursive types
without explicitly using std::unique_ptr, std::shared_ptr and so
on.</li>
</ul>

<p>
Use cases: 
</p>

<ul class="org-ul">
<li>Traverse recursive data structures, for instance: AST - Abstract
Syntax Trees; Trees; Binary Trees; Json; XML; &#x2026;;</li>

<li>Implement <span class="underline">visitor</span> object oriented design pattern.</li>

<li>Implement double dispatching.</li>

<li>Evaluate ASTs - Abstract Syntax Trees.</li>

<li>Emulate algebraic data types from functional programming languages.</li>

<li>Emulate pattern matching from functional programming languages.</li>

<li>Implementation of compilers, interpreters and parsers.</li>
</ul>

<p>
<b>Sample Code</b> 
</p>

<p>
GIST: 
</p>
<ul class="org-ul">
<li><a href="https://gist.github.com/b153a0748519330dec0d153d2c608eb9">https://gist.github.com/b153a0748519330dec0d153d2c608eb9</a></li>
</ul>

<p>
File: CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(recursive-variant)

<span class="org-comment-delimiter">#</span><span class="org-comment">========== Global Configurations =============#</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">----------------------------------------------#</span>

<span class="org-builtin">set</span>(CMAKE_CXX_STANDARD 17)     
<span class="org-builtin">set</span>(CMAKE_VERBOSE_MAKEFILE ON)
<span class="org-builtin">set</span>(CMAKE_CXX_EXTENSIONS OFF)

<span class="org-comment-delimiter"># </span><span class="org-comment">------------ Download CPM CMake Script ----------------#</span>

<span class="org-comment-delimiter">## </span><span class="org-comment">Automatically donwload and use module CPM.cmake</span>
<span class="org-function-name">file</span>(DOWNLOAD https://raw.githubusercontent.com/TheLartians/CPM.cmake/v0.26.2/cmake/CPM.cmake
                 <span class="org-string">"${CMAKE_BINARY_DIR}/CPM.cmake"</span>)
<span class="org-function-name">include</span>(<span class="org-string">"${CMAKE_BINARY_DIR}/CPM.cmake"</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">----------- Add dependencies --------------------------#</span>

<span class="org-function-name">CPMAddPackage</span>(
    NAME  mapbox-variant 
    URL   https://github.com/mapbox/variant/archive/v1.1.6.zip
    DOWNLOAD_ONLY YES
)

<span class="org-function-name">include_directories</span>( ${<span class="org-variable-name">mapbox</span>-variant_SOURCE_DIR}/include )
<span class="org-function-name">message</span>([TRACE] <span class="org-string">" mapbox source = ${mapbox-variant_SOURCE_DIR} "</span>)

<span class="org-comment-delimiter">#</span><span class="org-comment">----------- Set targets -------------------------------#</span>

<span class="org-function-name">add_executable</span>(app1 app1.cpp)
<span class="org-function-name">target_link_libraries</span>(app1)

</pre>
</div>

<p>
File: app1.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cassert</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">mapbox/variant.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">namespace</span> <span class="org-constant">m</span> = <span class="org-constant">mapbox</span>::util;

<span class="org-comment-delimiter">// </span><span class="org-comment">Forward declarations</span>
<span class="org-keyword">struct</span> <span class="org-type">Add</span>;
<span class="org-keyword">struct</span> <span class="org-type">Mul</span>;

<span class="org-keyword">using</span> <span class="org-type">expr</span> = <span class="org-constant">m</span>::<span class="org-type">variant</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>, <span class="org-constant">m</span>::<span class="org-type">recursive_wrapper</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">Add</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>, <span class="org-constant">m</span>::<span class="org-type">recursive_wrapper</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">Mul</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>;

<span class="org-keyword">struct</span> <span class="org-type">Add</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">expr</span> <span class="org-variable-name">lhs</span>;
    <span class="org-type">expr</span> <span class="org-variable-name">rhs</span>;
    <span class="org-function-name">Add</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">expr</span> <span class="org-variable-name">lhs</span>, <span class="org-type">expr</span> <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">)</span>: lhs<span class="org-rainbow-delimiters-depth-2">(</span>lhs<span class="org-rainbow-delimiters-depth-2">)</span>, rhs<span class="org-rainbow-delimiters-depth-2">(</span>rhs<span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">struct</span> <span class="org-type">Mul</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">expr</span> <span class="org-variable-name">lhs</span>;
    <span class="org-type">expr</span> <span class="org-variable-name">rhs</span>;
    <span class="org-function-name">Mul</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">expr</span> <span class="org-variable-name">lhs</span>, <span class="org-type">expr</span> <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">)</span>: lhs<span class="org-rainbow-delimiters-depth-2">(</span>lhs<span class="org-rainbow-delimiters-depth-2">)</span>, rhs<span class="org-rainbow-delimiters-depth-2">(</span>rhs<span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">struct</span> <span class="org-type">EvalVisitor</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">int</span> <span class="org-keyword">operator</span><span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">return</span> x;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">int</span> <span class="org-keyword">operator</span><span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Add</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">v</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">return</span> <span class="org-constant">m</span>::apply_visitor<span class="org-rainbow-delimiters-depth-3">(</span>*<span class="org-keyword">this</span>, v.lhs<span class="org-rainbow-delimiters-depth-3">)</span>
                + <span class="org-constant">m</span>::apply_visitor<span class="org-rainbow-delimiters-depth-3">(</span>*<span class="org-keyword">this</span>, v.rhs<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">int</span> <span class="org-keyword">operator</span><span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Mul</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">v</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">return</span> <span class="org-constant">m</span>::apply_visitor<span class="org-rainbow-delimiters-depth-3">(</span>*<span class="org-keyword">this</span>, v.lhs<span class="org-rainbow-delimiters-depth-3">)</span>
                * <span class="org-constant">m</span>::apply_visitor<span class="org-rainbow-delimiters-depth-3">(</span>*<span class="org-keyword">this</span>, v.rhs<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>;


<span class="org-keyword">struct</span> <span class="org-type">StringVisitor</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">format_expr</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">expr</span> <span class="org-variable-name">node</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span>node.is<span class="org-rainbow-delimiters-depth-4">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-4">&gt;()</span><span class="org-rainbow-delimiters-depth-3">)</span>
            <span class="org-keyword">return</span> <span class="org-constant">std</span>::to_string<span class="org-rainbow-delimiters-depth-3">(</span> node.get<span class="org-rainbow-delimiters-depth-4">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-4">&gt;()</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">else</span>
            <span class="org-keyword">return</span> <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-3">()</span> + <span class="org-string">" ("</span> + <span class="org-constant">m</span>::apply_visitor<span class="org-rainbow-delimiters-depth-3">(</span>*<span class="org-keyword">this</span>, node<span class="org-rainbow-delimiters-depth-3">)</span> + <span class="org-string">") "</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">operator</span><span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">return</span> <span class="org-constant">std</span>::to_string<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">operator</span><span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Add</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">v</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">return</span> <span class="org-keyword">this</span>-&gt;format_expr<span class="org-rainbow-delimiters-depth-3">(</span>v.rhs<span class="org-rainbow-delimiters-depth-3">)</span> + <span class="org-string">" + "</span> + <span class="org-keyword">this</span>-&gt;format_expr<span class="org-rainbow-delimiters-depth-3">(</span>v.lhs<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">operator</span><span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Mul</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">v</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">return</span> <span class="org-keyword">this</span>-&gt;format_expr<span class="org-rainbow-delimiters-depth-3">(</span>v.rhs<span class="org-rainbow-delimiters-depth-3">)</span> + <span class="org-string">" * "</span> + <span class="org-keyword">this</span>-&gt;format_expr<span class="org-rainbow-delimiters-depth-3">(</span>v.lhs<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>;




<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Running Ok "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::boolalpha;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Abstract syntax tree</span>
    <span class="org-type">expr</span> <span class="org-variable-name">ast</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Create visitor object</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">eval</span> = EvalVisitor<span class="org-rainbow-delimiters-depth-2">{}</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">disp</span> = StringVisitor<span class="org-rainbow-delimiters-depth-2">{}</span>;

    ast = 10;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;&gt;  is_num? = "</span> &lt;&lt; ast.is<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;&gt;    value = "</span> &lt;&lt; ast.get<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;&gt;   Expr 0 = "</span> &lt;&lt; <span class="org-constant">m</span>::apply_visitor<span class="org-rainbow-delimiters-depth-2">(</span>disp, ast<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;&gt; Result 0 = "</span> &lt;&lt; <span class="org-constant">m</span>::apply_visitor<span class="org-rainbow-delimiters-depth-2">(</span>eval, ast<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">'\n'</span>;

    ast = Mul<span class="org-rainbow-delimiters-depth-2">(</span>5, Add<span class="org-rainbow-delimiters-depth-3">(</span>3, 4<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;&gt;  is_num? = "</span> &lt;&lt; ast.is<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;&gt;  is_add? = "</span> &lt;&lt; ast.is<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">Mul</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;&gt;   Expr 1 = "</span> &lt;&lt; <span class="org-constant">m</span>::apply_visitor<span class="org-rainbow-delimiters-depth-2">(</span>disp, ast<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;&gt; Result 1 = "</span> &lt;&lt; <span class="org-constant">m</span>::apply_visitor<span class="org-rainbow-delimiters-depth-2">(</span>eval, ast<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">'\n'</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">(10 + 4) * (5 * (3 + 8)) = 770</span>
    ast        = Mul<span class="org-rainbow-delimiters-depth-2">(</span>Add<span class="org-rainbow-delimiters-depth-3">(</span>10, 4<span class="org-rainbow-delimiters-depth-3">)</span>, Mul<span class="org-rainbow-delimiters-depth-3">(</span>5, Add<span class="org-rainbow-delimiters-depth-4">(</span>3, 8<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;&gt;  is_mul? = "</span> &lt;&lt; ast.is<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">Mul</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;&gt;   Expr 2 = "</span> &lt;&lt; <span class="org-constant">m</span>::apply_visitor<span class="org-rainbow-delimiters-depth-2">(</span>disp, ast<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-type">int</span> <span class="org-variable-name">result</span> = <span class="org-constant">m</span>::apply_visitor<span class="org-rainbow-delimiters-depth-2">(</span>eval, ast<span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span>result == 770<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;&gt; Result 2 = "</span> &lt;&lt; result  &lt;&lt; <span class="org-string">'\n'</span>;


    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-sh">[INFO] Running Ok 
=&gt;&gt;  is_num? = true
=&gt;&gt;    value = 10
=&gt;&gt;   Expr 0 = 10
=&gt;&gt; Result 0 = 10

=&gt;&gt;  is_num? = false
=&gt;&gt;  is_add? = true
=&gt;&gt;   Expr 1 =  (4 + 3)  * 5
=&gt;&gt; Result 1 = 35

=&gt;&gt;  is_mul? = true
=&gt;&gt;   Expr 2 =  ( (8 + 3)  * 5)  *  (4 + 10) 
=&gt;&gt; Result 2 = 770
</pre>
</div>
</div>
</div>

<div id="outline-container-org17f101e" class="outline-3">
<h3 id="org17f101e"><span class="section-number-3">1.3</span> Range v3 (C++20)</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Ranges v3 is a header-only generic library that will be included in
the <a href="https://en.cppreference.com/w/cpp/ranges">C++20 ranges</a> and provides stl-like algorithms that can operate on
ranges, also known as pairs of iterators. The benefit of the range v3
library over STL algorithms and iterator pairs is that the greater
composability and that the calling code does not need to specify the
iterator pair explicitly.
</p>

<p>
Resources: 
</p>

<ul class="org-ul">
<li>Documentation:
<ul class="org-ul">
<li><a href="https://ericniebler.github.io/range-v3/">https://ericniebler.github.io/range-v3/</a></li>
</ul></li>

<li>Conan Reference:
<ul class="org-ul">
<li><a href="https://bintray.com/range-v3/range-v3/range-v3%3Aericniebler">range-v3/0.5.0@ericniebler/stable</a></li>
</ul></li>

<li>Github Repsitory:
<ul class="org-ul">
<li><a href="https://github.com/ericniebler/range-v3">https://github.com/ericniebler/range-v3</a></li>
</ul></li>

<li>C++ Standard Proposal:
<ul class="org-ul">
<li><a href="https://ericniebler.github.io/std/wg21/D4128.html">https://ericniebler.github.io/std/wg21/D4128.html</a></li>

<li><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4128.html">Ranges for the Standard Library, Revision 1</a></li>
</ul></li>

<li>C++20 - &lt;ranges&gt; header
<ul class="org-ul">
<li><a href="https://en.cppreference.com/w/cpp/ranges">https://en.cppreference.com/w/cpp/ranges</a></li>
</ul></li>

<li>Videos:
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=mFUXNMfaciE">CppCon 2015: Eric Niebler "Ranges for the Standard Library"</a></li>
<li><a href="https://www.youtube.com/watch?v=4p21wBOplPQ">Introduction to C++ Ranges - Fluent C++</a></li>
<li><a href="https://www.youtube.com/watch?v=OI0YFgEscGQ">C++ Russia 2018: Arno SchÃ¶dl, From Iterators To Ranges</a></li>
</ul></li>
</ul>

<p>
Headers: 
</p>
<ul class="org-ul">
<li>Include all features:
<ul class="org-ul">
<li>&lt;range/v3/all.hpp&gt;  (Note: It increase the compile-time)</li>
</ul></li>

<li>Algorithms
<ul class="org-ul">
<li>&lt;range/v3/action/join.hpp&gt;</li>
<li>&lt;range/v3/algorithm/copy.hpp&gt;</li>
<li>&lt;range/v3/algorithm/for_each.hpp&gt;</li>
<li>&lt;range/v3/algorithm/mismatch.hpp&gt;</li>
</ul></li>

<li>All
<ul class="org-ul">
<li>&lt;range/v3/view/transform.hpp&gt;</li>
<li>&lt;range/v3/core.hpp&gt;</li>
<li>&lt;range/v3/view/all.hpp&gt;</li>
<li>&lt;range/v3/view/concat.hpp&gt;</li>
<li>&lt;range/v3/view/group_by.hpp&gt;</li>
<li>&lt;range/v3/view/iota.hpp&gt;</li>
<li>&lt;range/v3/view/join.hpp&gt;</li>
<li>&lt;range/v3/view/repeat_n.hpp&gt;</li>
<li>&lt;range/v3/view/single.hpp&gt;</li>
<li>&lt;range/v3/view/take.hpp&gt;</li>
<li>&lt;range/v3/view/transform.hpp&gt;</li>
</ul></li>
</ul>

<p>
Built-in Range Views: 
</p>
<ul class="org-ul">
<li>Views are lazily evaluated algorithms that are computed on demand
without any wasteful allocation.</li>
</ul>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">adjacent_remove_if</td>
<td class="org-left">drop_while</td>
<td class="org-left">map</td>
<td class="org-left">split</td>
</tr>

<tr>
<td class="org-left">all</td>
<td class="org-left">empty</td>
<td class="org-left">move</td>
<td class="org-left">stride</td>
</tr>

<tr>
<td class="org-left">any_range</td>
<td class="org-left">filter</td>
<td class="org-left">parital_sum</td>
<td class="org-left">tail</td>
</tr>

<tr>
<td class="org-left">bounded</td>
<td class="org-left">for_each</td>
<td class="org-left">remove_if</td>
<td class="org-left">take</td>
</tr>

<tr>
<td class="org-left">c_str</td>
<td class="org-left">generate</td>
<td class="org-left">repeat</td>
<td class="org-left">take_exactly</td>
</tr>

<tr>
<td class="org-left">chunck</td>
<td class="org-left">generate_n</td>
<td class="org-left">repetat_n</td>
<td class="org-left">take_while</td>
</tr>

<tr>
<td class="org-left">concat</td>
<td class="org-left">group_by</td>
<td class="org-left">replace</td>
<td class="org-left">tokenize</td>
</tr>

<tr>
<td class="org-left">const_</td>
<td class="org-left">indirect</td>
<td class="org-left">replace_if</td>
<td class="org-left">transform</td>
</tr>

<tr>
<td class="org-left">counted</td>
<td class="org-left">interspece</td>
<td class="org-left">reverse</td>
<td class="org-left">unbounded</td>
</tr>

<tr>
<td class="org-left">delimit</td>
<td class="org-left">iota</td>
<td class="org-left">single</td>
<td class="org-left">unique</td>
</tr>

<tr>
<td class="org-left">drop</td>
<td class="org-left">join</td>
<td class="org-left">slice</td>
<td class="org-left">zip_with</td>
</tr>
</tbody>
</table>

<p>
Built-in Range Actions: 
</p>
<ul class="org-ul">
<li>Actions are eager sequence algorithms that operates on containers
and returns containers.</li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">drop</td>
<td class="org-left">push_front</td>
<td class="org-left">stable_sort</td>
</tr>

<tr>
<td class="org-left">drop_while</td>
<td class="org-left">remove_if</td>
<td class="org-left">stride</td>
</tr>

<tr>
<td class="org-left">erase</td>
<td class="org-left">shuffle</td>
<td class="org-left">take</td>
</tr>

<tr>
<td class="org-left">insert</td>
<td class="org-left">slice</td>
<td class="org-left">take_while</td>
</tr>

<tr>
<td class="org-left">join</td>
<td class="org-left">sort</td>
<td class="org-left">transform</td>
</tr>

<tr>
<td class="org-left">push_back</td>
<td class="org-left">split</td>
<td class="org-left">unique</td>
</tr>
</tbody>
</table>

<p>
Comparison Range Views X Range Actions: 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Range Views</th>
<th scope="col" class="org-left">Range Actions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Lazy sequence algorithms</td>
<td class="org-left">Eager sequence algorithms</td>
</tr>

<tr>
<td class="org-left">Lightweightm, non owning</td>
<td class="org-left">Operates on containers and returns containers.</td>
</tr>

<tr>
<td class="org-left">Doesn't perform allocation</td>
<td class="org-left">Performs allocation</td>
</tr>

<tr>
<td class="org-left">Composable</td>
<td class="org-left">Composable</td>
</tr>

<tr>
<td class="org-left">Non-mutating</td>
<td class="org-left">Potentially mutating</td>
</tr>
</tbody>
</table>


<p>
<b>Example:</b>
</p>

<ul class="org-ul">
<li>Complete source: 
<ul class="org-ul">
<li><a href="https://gist.github.com/caiorss/6d1ca8c20e71ea72866fe799408c6add#file-main1-cpp">Experiments with C++ ranges v3 Library  - Gisthub</a></li>
<li>File: <a href="https://gist.github.com/caiorss/6d1ca8c20e71ea72866fe799408c6add#file-main1-cpp">main1.cpp</a></li>
</ul></li>
</ul>

<p>
<b>Main Function - Range Algorithms Experiments</b>
</p>

<ul class="org-ul">
<li>Experiment 1A:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"   +------------------------------------+\n"</span>
              &lt;&lt; <span class="org-string">"   | Range Algorithms Experiments       |\n"</span>
              &lt;&lt; <span class="org-string">"   +------------------------------------+\n"</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">printLambda</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-keyword">auto</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" x = "</span> &lt;&lt; x &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-1">}</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">std::cout &lt;&lt; view::iota(2, 10) &lt;&lt; std::endl;</span>

    <span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------------------------//</span>
    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 1 A - for_each ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
    <span class="org-rainbow-delimiters-depth-1">{</span>

        <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs</span> = <span class="org-rainbow-delimiters-depth-2">{</span>8, 9, 20, 25<span class="org-rainbow-delimiters-depth-2">}</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Print numbers"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-constant">ranges</span>::for_each<span class="org-rainbow-delimiters-depth-2">(</span>xs, printLambda<span class="org-rainbow-delimiters-depth-2">)</span>;

        <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">words</span> = <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"c++"</span>, <span class="org-string">"c++17"</span>, <span class="org-string">"C++20"</span>, <span class="org-string">"asm"</span>, <span class="org-string">"ADA"</span><span class="org-rainbow-delimiters-depth-2">}</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Print words"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-constant">ranges</span>::for_each<span class="org-rainbow-delimiters-depth-2">(</span>xs, printLambda<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">  +------------------------------------+
  | Range Algorithms Experiments       |
  +------------------------------------+

=== EXPERIMENT 1 A - for_each ===
=&gt; Print numbers
x = 8
x = 9
x = 20
x = 25
=&gt; Print words
x = 8
x = 9
x = 20
x = 25
</pre>
</div>

<ul class="org-ul">
<li>Experiment 1B</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 1 B - for_each ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">astr</span> = <span class="org-string">"bolts"</span>;
    <span class="org-constant">ranges</span>::for_each<span class="org-rainbow-delimiters-depth-2">(</span>astr, printLambda<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 1 B - for_each ===
x = b
x = o
x = l
x = t
x = s
</pre>
</div>

<ul class="org-ul">
<li>Experiment 2</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 2 - sort ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs2</span> = <span class="org-rainbow-delimiters-depth-2">{</span>10.45, -30.0, 45.0, 8.2, 100.0, 10.6<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Reverse vector"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" BEFORE xs2 = "</span> &lt;&lt; xs2 &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">ranges</span>::sort<span class="org-rainbow-delimiters-depth-2">(</span>xs2<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER xs2 = "</span> &lt;&lt; xs2 &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 2 - sort ===
Reverse vector
BEFORE xs2 = [6]( 10.45 -30 45 8.2 100 10.6  )
AFTER xs2 = [6]( -30 8.2 10.45 10.6 45 100  )
</pre>
</div>


<ul class="org-ul">
<li>Experiment 3</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 3 - fill ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs2</span><span class="org-rainbow-delimiters-depth-2">(</span>10, 0<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" BEFORE  A xs2 = "</span> &lt;&lt; <span class="org-constant">view</span>::all<span class="org-rainbow-delimiters-depth-2">(</span>xs2 <span class="org-rainbow-delimiters-depth-2">)</span>&lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" BEFOREB B xs2 = "</span> &lt;&lt; xs2 &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">ranges</span>::fill<span class="org-rainbow-delimiters-depth-2">(</span>xs2, 10<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER 1 =&gt; x2 = "</span> &lt;&lt; xs2 &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">ranges</span>::fill<span class="org-rainbow-delimiters-depth-2">(</span>xs2, 5<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER 2 =&gt; x2 = "</span> &lt;&lt; xs2 &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 3 - fill ===
BEFORE  A xs2 = [0,0,0,0,0,0,0,0,0,0]
BEFOREB B xs2 = [10]( 0 0 0 0 0 0 0 0 0 0  )
AFTER 1 =&gt; x2 = [10]( 10 10 10 10 10 10 10 10 10 10  )
AFTER 2 =&gt; x2 = [10]( 5 5 5 5 5 5 5 5 5 5  )
</pre>
</div>

<ul class="org-ul">
<li>Experiment 4:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 4 - reverse ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">words</span> = <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"c++"</span>, <span class="org-string">"c++17"</span>, <span class="org-string">"C++20"</span>, <span class="org-string">"asm"</span>, <span class="org-string">"ADA"</span><span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" BEFORE =&gt; words = "</span> &lt;&lt; <span class="org-constant">view</span>::all<span class="org-rainbow-delimiters-depth-2">(</span>words<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">ranges</span>::reverse<span class="org-rainbow-delimiters-depth-2">(</span>words<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER =&gt; words = "</span> &lt;&lt; <span class="org-constant">view</span>::all<span class="org-rainbow-delimiters-depth-2">(</span>words<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 4 - reverse ===
BEFORE =&gt; words = [c++,c++17,C++20,asm,ADA]
AFTER =&gt; words = [ADA,asm,C++20,c++17,c++]
</pre>
</div>


<ul class="org-ul">
<li>Experiment 5:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 5 - remove_if ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xvec</span> = <span class="org-rainbow-delimiters-depth-2">{</span>1, 2, 5, 10, 1, 4, 1, 2, 8, 20, 100, 10, 1<span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" BEFORE =&gt; xvec = "</span> &lt;&lt; xvec &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Erase remove idiom</span>
    xvec.erase<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">ranges</span>::remove_if<span class="org-rainbow-delimiters-depth-3">(</span>xvec, <span class="org-rainbow-delimiters-depth-4">[](</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-4">){</span> <span class="org-keyword">return</span> x == 1; <span class="org-rainbow-delimiters-depth-4">}</span><span class="org-rainbow-delimiters-depth-3">)</span>, xvec.end<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER  =&gt; xvec = "</span> &lt;&lt; xvec &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 5 - remove_if ===
BEFORE =&gt; xvec = [13]( 1 2 5 10 1 4 1 2 8 20 100 10 1  )
AFTER  =&gt; xvec = [9]( 2 5 10 4 2 8 20 100 10  )
</pre>
</div>

<ul class="org-ul">
<li>Experiment 6:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 6 - find ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xvec</span> = <span class="org-rainbow-delimiters-depth-2">{</span>1, 2, 5, 10, 1, 4, 1, 2<span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">it</span> = <span class="org-constant">ranges</span>::find<span class="org-rainbow-delimiters-depth-2">(</span>xvec, 10<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>it != xvec.end<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">){</span>
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [OK] Found value == 10 =&gt; *it = "</span> &lt;&lt; *it &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Position = "</span>
                   &lt;&lt; <span class="org-constant">ranges</span>::distance<span class="org-rainbow-delimiters-depth-3">(</span>xvec.begin<span class="org-rainbow-delimiters-depth-4">()</span>, it<span class="org-rainbow-delimiters-depth-3">)</span>
                   &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">else</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [FAIL] Not found  value "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 6 - find ===
[OK] Found value == 10 =&gt; *it = 10
Position = 3
</pre>
</div>

<ul class="org-ul">
<li>Experiment 7:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 7 - accumulator ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xvec</span> = <span class="org-rainbow-delimiters-depth-2">{</span>1, 2, 5, 10, 1, 4, 1, 2<span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-type">int</span> <span class="org-variable-name">result</span> = <span class="org-constant">ranges</span>::accumulate<span class="org-rainbow-delimiters-depth-2">(</span>xvec, 0<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; ranges::accumulate(xvec, 0) = "</span>
              &lt;&lt; result &lt;&lt; <span class="org-constant">std</span>::endl;

<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 7 - accumulator ===
=&gt; ranges::accumulate(xvec, 0) = 26
</pre>
</div>

<p>
<b>Range View Experiments</b> 
</p>

<ul class="org-ul">
<li>Experiment 1A</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"  +------------------------------------+\n"</span>
          &lt;&lt; <span class="org-string">"   | Range View Experiments             |\n"</span>
          &lt;&lt; <span class="org-string">"   +------------------------------------+\n"</span>;

<span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 1A - view::all"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs</span> = <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">'x'</span>, <span class="org-string">'y'</span>, <span class="org-string">'m'</span>, <span class="org-string">'k'</span>, <span class="org-string">'m'</span><span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [1] =&gt; std::view(xs) = "</span>
              &lt;&lt; <span class="org-constant">view</span>::all<span class="org-rainbow-delimiters-depth-2">(</span>xs<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n [2] =&gt; xs = "</span>;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span>&amp;&amp; <span class="org-variable-name">x</span>: <span class="org-constant">view</span>::all<span class="org-rainbow-delimiters-depth-3">(</span>xs<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; x &lt;&lt; <span class="org-string">" "</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 1A - view::all
[1] =&gt; std::view(xs) = [x,y,m,k,m]

[2] =&gt; xs = x y m k m
</pre>
</div>

<ul class="org-ul">
<li>Experiment 1B</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 1B - view::reverse ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs</span> = <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">'x'</span>, <span class="org-string">'y'</span>, <span class="org-string">'m'</span>, <span class="org-string">'k'</span>, <span class="org-string">'m'</span><span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: <span class="org-constant">view</span>::reverse<span class="org-rainbow-delimiters-depth-3">(</span>xs<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" "</span> &lt;&lt; x;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER xs = "</span> &lt;&lt; xs &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 1B - view::reverse ===
m k m y x
AFTER xs = [5]( x y m k m  )
</pre>
</div>

<ul class="org-ul">
<li>Experiment 1C:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 1C - view::transform ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs</span> = <span class="org-rainbow-delimiters-depth-2">{</span>100, 5, 20, 9, 10, 6<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">a_lambda</span> = <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-keyword">auto</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> 5 * x -10; <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: xs | <span class="org-constant">view</span>::transform<span class="org-rainbow-delimiters-depth-3">(</span>a_lambda<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" "</span> &lt;&lt; x;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-comment-delimiter">//</span><span class="org-comment">std::cout &lt;&lt; " AFTER xs = " &lt;&lt; xs &lt;&lt; std::endl;</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 1C - view::transform ===
490 15 90 35 40 20
</pre>
</div>

<ul class="org-ul">
<li>Experiment 2A:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 2A - Range adaptors pipeline ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">a_lambda</span> = <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-keyword">auto</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> 5 * x -10; <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Iota view = "</span>;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: <span class="org-constant">view</span>::iota<span class="org-rainbow-delimiters-depth-3">(</span>1<span class="org-rainbow-delimiters-depth-3">)</span> | <span class="org-constant">view</span>::take<span class="org-rainbow-delimiters-depth-3">(</span>8<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" "</span> &lt;&lt; x;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">=== EXPERIMENT 2A - Range adaptors pipeline ===
=&gt; Iota view =  1 2 3 4 5 6 7 8
</pre>
</div>


<ul class="org-ul">
<li>Expeirment 2B</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 2B - Range adaptors pipeline ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Iota view [B] = \n"</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">aview</span> =
              <span class="org-constant">view</span>::iota<span class="org-rainbow-delimiters-depth-2">(</span>1<span class="org-rainbow-delimiters-depth-2">)</span>
            | <span class="org-constant">view</span>::take<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span>
            | <span class="org-constant">view</span>::transform<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">){</span> <span class="org-keyword">return</span> 5 * x + 6; <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] aview = "</span> &lt;&lt; aview &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] aview | reverse = "</span>
              &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>aview | <span class="org-constant">view</span>::reverse<span class="org-rainbow-delimiters-depth-2">)</span>
              &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n Iteration 1 =&gt; "</span>;
    <span class="org-constant">ranges</span>::for_each<span class="org-rainbow-delimiters-depth-2">(</span>aview, <span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">int</span> <span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-3">){</span> <span class="org-constant">std</span>::cout &lt;&lt; a &lt;&lt; <span class="org-string">" "</span>; <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n Iteration 2 =&gt; "</span>;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: aview | <span class="org-constant">view</span>::reverse<span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; x &lt;&lt; <span class="org-string">" "</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;

<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 2B - Range adaptors pipeline ===
=&gt; Iota view [B] = 
[INFO] aview = [11,16,21,26,31]
[INFO] aview | reverse = [31,26,21,16,11]

Iteration 1 =&gt; 11 16 21 26 31 
Iteration 2 =&gt; 31 26 21 16 11 
</pre>
</div>


<ul class="org-ul">
<li>Experiment 3A</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 3A - enumerate ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">words</span> = <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-string">"c++"</span>, <span class="org-string">"c++17"</span>, <span class="org-string">"C++20"</span>, <span class="org-string">"asm"</span> <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ==== Loop 1 ==== "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: <span class="org-constant">view</span>::enumerate<span class="org-rainbow-delimiters-depth-3">(</span>words<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; n = "</span> &lt;&lt; x.first
                  &lt;&lt; <span class="org-string">" ; w = "</span> &lt;&lt; x.second &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ==== Loop 2 ==== "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: words | <span class="org-constant">view</span>::enumerate<span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; n = "</span> &lt;&lt; x.first
                  &lt;&lt; <span class="org-string">" ; w = "</span> &lt;&lt; x.second &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 3A - enumerate ===
==== Loop 1 ==== 
=&gt; n = 0 ; w = c++
=&gt; n = 1 ; w = c++17
=&gt; n = 2 ; w = C++20
=&gt; n = 3 ; w = asm
==== Loop 2 ==== 
=&gt; n = 0 ; w = c++
=&gt; n = 1 ; w = c++17
=&gt; n = 2 ; w = C++20
=&gt; n = 3 ; w = asm
</pre>
</div>

<ul class="org-ul">
<li>Experiment 4A:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 4 - ranges::accumulate withe iterator ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">aview</span> = <span class="org-constant">view</span>::iota<span class="org-rainbow-delimiters-depth-2">(</span>2<span class="org-rainbow-delimiters-depth-2">)</span>
               | <span class="org-constant">view</span>::transform<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">){</span><span class="org-keyword">return</span> 3.0 * x - 5; <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>
               | <span class="org-constant">view</span>::take<span class="org-rainbow-delimiters-depth-2">(</span>15<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" aview = "</span> &lt;&lt; aview &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" accumulate(aview) = "</span> &lt;&lt; <span class="org-constant">ranges</span>::accumulate<span class="org-rainbow-delimiters-depth-2">(</span>aview, 0.0<span class="org-rainbow-delimiters-depth-2">)</span>
              &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">=== EXPERIMENT 4 - <span class="org-constant">ranges</span>::accumulate withe iterator ===
aview = <span class="org-rainbow-delimiters-depth-1">[</span>1,4,7,10,13,16,19,22,25,28,31,34,37,40,43<span class="org-rainbow-delimiters-depth-1">]</span>
accumulate<span class="org-rainbow-delimiters-depth-1">(</span>aview<span class="org-rainbow-delimiters-depth-1">)</span> = 330
</pre>
</div>

<ul class="org-ul">
<li>Experiment 5</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 5 - Copy Range to destination ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">output</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">aview</span> = <span class="org-constant">view</span>::iota<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span>
               | <span class="org-constant">view</span>::transform<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">int</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-3">){</span> <span class="org-keyword">return</span> 6 * n - 10;<span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>
               | <span class="org-constant">view</span>::take<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" BEFORE =&gt; output = "</span> &lt;&lt; output &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">ranges</span>::copy<span class="org-rainbow-delimiters-depth-2">(</span>aview, <span class="org-constant">ranges</span>::back_inserter<span class="org-rainbow-delimiters-depth-3">(</span>output<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER =&gt; output = "</span> &lt;&lt; output &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 5 - Copy Range to destination ===
BEFORE =&gt; output = [0](  )
AFTER =&gt; output = [10]( 20 26 32 38 44 50 56 62 68 74  )
</pre>
</div>
</div>
</div>
<div id="outline-container-orgca904a6" class="outline-3">
<h3 id="orgca904a6"><span class="section-number-3">1.4</span> Printf replacements</h3>
<div class="outline-text-3" id="text-1-4">
</div>
<div id="outline-container-org2ac8092" class="outline-4">
<h4 id="org2ac8092"><span class="section-number-4">1.4.1</span> fmtlib (fmt) - Better printf (C++20)</h4>
<div class="outline-text-4" id="text-1-4-1">
<p>
Fmt is a highly popular library for printing in similar way to the old
C's printf. The advantage of fmt over old printf are the type safety
and concise format specifiers based on Python ones. This library
features will be included in the C++20 upcoming standard
library. Nevertheless, most compilers still does not implement this
library. 
</p>

<ul class="org-ul">
<li>The old C's printf is not type-safe and prone to security
vulnerabilities if proper care is not taken.</li>
</ul>

<p>
Web Site:
</p>
<ul class="org-ul">
<li><a href="http://fmtlib.net/latest/index.html">http://fmtlib.net/latest/index.html</a></li>
</ul>

<p>
Repository: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/fmtlib/fmt">https://github.com/fmtlib/fmt</a></li>
</ul>

<p>
C++20 Stadnard library inclusion:
</p>
<ul class="org-ul">
<li><a href="https://en.cppreference.com/w/cpp/utility/format/format">https://en.cppreference.com/w/cpp/utility/format/format</a></li>
</ul>

<p>
Conan Refence: 
</p>
<ul class="org-ul">
<li><a href="https://bintray.com/bincrafters/public-conan/fmt%3Abincrafters/5.3.0%3Astable">fmt/5.3.0@bincrafters/stable</a></li>
</ul>

<p>
See: 
</p>
<ul class="org-ul">
<li><a href="https://www.programiz.com/python-programming/methods/string/format">Python String format() - Python Standard Library</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-use-string-formatters-in-python-3">String Formatting with str.format() in Python 3 | DigitalOcean</a></li>
<li><a href="https://stackabuse.com/formatting-strings-with-python/">Formatting Strings with Python</a></li>
</ul>

<p>
<b>Library Local Installation for header-only usage</b> 
</p>

<p>
Installation at: ~/dev/include/fmt 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ git clone https://github.com/fmtlib/fmt

<span class="org-comment-delimiter"># </span><span class="org-comment">Build directory /home/&lt;USER&gt;/dev on Linux </span>
$ mkdir -p ~/dev &amp;&amp; <span class="org-builtin">cd</span> dev                           
<span class="org-comment-delimiter"># </span><span class="org-comment">Clone repository </span>
$ git clone https://github.com/fmtlib/fmt
<span class="org-comment-delimiter"># </span><span class="org-comment">Extract headers </span>
$ cp -r -v fmt/include ~/dev/
<span class="org-comment-delimiter"># </span><span class="org-comment">Delete fmt directory </span>
$ rm -rf fmt 
</pre>
</div>

<p>
Testing code: File - <b>fmttest.cpp</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">If defined before including fmt, uses it as header-only library</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">FMT_HEADER_ONLY</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Basic functionality</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fmt/core.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-comment-delimiter">// </span><span class="org-comment">fmt string literals "name"_a, "product"_a</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fmt/format.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Print to streams std::cout, std::cerr, std::ostream</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fmt/ostream.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fmt/color.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">#include &lt;fmt/color.h&gt;</span>

<span class="org-keyword">using</span> <span class="org-keyword">namespace</span> <span class="org-constant">fmt</span>::<span class="org-constant">literals</span>;

<span class="org-type">void</span> <span class="org-function-name">printHeader</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">header</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n{}\n"</span>, header<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"---------------------------------------------\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    printHeader<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ***** EXPERIMENT 1 - Boolean  *************"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" true == {0} ; false == {1} \n"</span>, <span class="org-constant">true</span>, <span class="org-constant">false</span><span class="org-rainbow-delimiters-depth-2">)</span>;


    printHeader<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ***** EXPERIMENT 2 - Numeric Base  *********"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" [BASES] =&gt; dec: {0:d} ; hex = 0x{0:X} "</span>
               <span class="org-string">" ; oct = {0:o} ; bin = 0b{0:b} \n"</span>, 241 <span class="org-rainbow-delimiters-depth-2">)</span>;

    printHeader<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ***** EXPERIMENT 3 - Positional arguments ****"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" first = {0}, 2nd = {1}, 1st = {1}, 3rd = {2}\n"</span>,
                200, <span class="org-string">"hello"</span>, 5.615<span class="org-rainbow-delimiters-depth-2">)</span>;

    printHeader<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"**** EXPERIMENT 4 - Named Arguments ********* "</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" [A] Product =&gt; product = {0} id = {1} price = {2}\n"</span>
               ,<span class="org-string">"oranges 1 kg"</span>, 200, 10.6758 <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Requires: #include &lt;fmt/format.h&gt;</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">using namespace fmt::literals;</span>
    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" [B] Product =&gt; product = {product} id = {id} price = {price:.2F}\n"</span>
               , <span class="org-string">"product"</span>_a = <span class="org-string">"oranges 1 kg"</span>, <span class="org-string">"id"</span>_a = 200, <span class="org-string">"price"</span>_a = 10.6758 <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" [B] Product =&gt; product = {product} id = {id} price = {price:.2F}\n"</span>
               , <span class="org-constant">fmt</span>::arg<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"product"</span>, <span class="org-string">"oranges 1 kg"</span><span class="org-rainbow-delimiters-depth-3">)</span>
               , <span class="org-constant">fmt</span>::arg<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"id"</span>,  200<span class="org-rainbow-delimiters-depth-3">)</span>
               , <span class="org-constant">fmt</span>::arg<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"price"</span>, 10.6758 <span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    printHeader<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"************ Colored Output ******************"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-constant">fmt</span>::fg<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">fmt</span>::<span class="org-constant">color</span>::aqua<span class="org-rainbow-delimiters-depth-3">)</span> | <span class="org-constant">fmt</span>::<span class="org-constant">emphasis</span>::bold,
               <span class="org-string">" [INFO] Voltage Leval  = {0:+.3F}\n"</span>, 10.6478<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-constant">fmt</span>::fg<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">fmt</span>::<span class="org-constant">color</span>::red<span class="org-rainbow-delimiters-depth-3">)</span> | <span class="org-constant">fmt</span>::<span class="org-constant">emphasis</span>::underline,
               <span class="org-string">" [ERROR] Fatal Error, shutdown systems code  0x{0:X}\n"</span>, 2651<span class="org-rainbow-delimiters-depth-2">)</span>;


    printHeader<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ***** EXPERIMENT 5 - Numeric Formatting ******"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">double</span> <span class="org-variable-name">x</span> = 20.0;
    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"The square root of x = {}\n"</span>, <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    x = 28524.0;

    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" log(x) = {:.2F}  (2 digit precision)\n"</span>, <span class="org-constant">std</span>::log<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" log(x) = {:+.6F} (6 digit precision)\n"</span>, <span class="org-constant">std</span>::log<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" 2000 * log(x) = {:+.6G} (6 digit precision)\n"</span>, 1e5 * <span class="org-constant">std</span>::log<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"  log(x) = {0:+.8E} ; sqrt(x) = {1:+8E} (8 digit precision)\n"</span>,
               <span class="org-constant">std</span>::log<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>, <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    printHeader<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ***** EXPERIMENT 6 - Print numeric table ******"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">int</span> <span class="org-variable-name">i</span> = 0;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span> = 0.0; x &lt;= 4.0; x += 0.5<span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"{0:8d}{1:10.5F}{2:10.5F}\n"</span>, i++, x, <span class="org-constant">std</span>::exp<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    printHeader<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ***** EXPERIMENT 7 - Print table to file *******"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">std::ofstream file("/tmp/table.txt");</span>
    <span class="org-constant">std</span>::<span class="org-type">stringstream</span> <span class="org-variable-name">file</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">Fake file</span>

    i = 0;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Note: Requires &lt;fmt/ostream.h&gt;</span>
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span> = -4.0; x &lt;= 4.0; x += 1.0<span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span>file, <span class="org-string">"{0:8d}{1:10.5F}{2:10.5F}\n"</span>, i++, x, <span class="org-constant">std</span>::exp<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"File content = \n{0}"</span>, file.str<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Program output: 
</p>

<div class="org-src-container">
<pre class="src src-text"> ***** EXPERIMENT 1 - Boolean  *************
---------------------------------------------
 true == true ; false == false 

 ***** EXPERIMENT 2 - Numeric Base  *********
---------------------------------------------
 [BASES] =&gt; dec: 241 ; hex = 0xF1  ; oct = 361 ; bin = 0b11110001 

 ***** EXPERIMENT 3 - Positional arguments ****
---------------------------------------------
 first = 200, 2nd = hello, 1st = hello, 3rd = 5.615

**** EXPERIMENT 4 - Named Arguments ********* 
---------------------------------------------
 [A] Product =&gt; product = oranges 1 kg id = 200 price = 10.6758
 [B] Product =&gt; product = oranges 1 kg id = 200 price = 10.68
 [B] Product =&gt; product = oranges 1 kg id = 200 price = 10.68

************ Colored Output ******************
---------------------------------------------
&#27;[1m&#27;[38;2;000;255;255m [INFO] Voltage Leval  = +10.648
&#27;[0m&#27;[4m&#27;[38;2;255;000;000m [ERROR] Fatal Error, shutdown systems code  0xA5B
&#27;[0m
 ***** EXPERIMENT 5 - Numeric Formatting ******
---------------------------------------------
The square root of x = 4.47213595499958
 log(x) = 10.26  (2 digit precision)
 log(x) = +10.258501 (6 digit precision)
 2000 * log(x) = +1.02585e+06 (6 digit precision)
  log(x) = +1.02585011E+01 ; sqrt(x) = +1.688905E+02 (8 digit precision)

 ***** EXPERIMENT 6 - Print numeric table ******
---------------------------------------------
       0   0.00000   1.00000
       1   0.50000   1.64872
       2   1.00000   2.71828
       3   1.50000   4.48169
       4   2.00000   7.38906
       5   2.50000  12.18249
       6   3.00000  20.08554
       7   3.50000  33.11545
       8   4.00000  54.59815

 ***** EXPERIMENT 7 - Print table to file *******
---------------------------------------------
File content = 
       0  -4.00000   0.01832
       1  -3.00000   0.04979
       2  -2.00000   0.13534
       3  -1.00000   0.36788
       4   0.00000   1.00000
       5   1.00000   2.71828
       6   2.00000   7.38906
       7   3.00000  20.08554
       8   4.00000  54.59815
</pre>
</div>

<p>
Compilation: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++  fmttest.cpp -o <span class="org-keyword">app.bin</span> -std=c++1z -Wall -I$<span class="org-variable-name">HOME</span>/dev/include 

<span class="org-comment-delimiter"># </span><span class="org-comment">Or, on Linux</span>
$ clang++  fmttest.cpp -o <span class="org-keyword">app.bin</span> -std=c++1z -Wall -I/home/&lt;USER&gt;/dev/include 

<span class="org-comment-delimiter"># </span><span class="org-comment">Or, On OSX </span>
$ clang++  fmttest.cpp -o <span class="org-keyword">app.bin</span> -std=c++1z -Wall -I/Users/&lt;USER&gt;/dev/include 
</pre>
</div>

<p>
The code can be compiled without specifying the include path, by
adding the following code to the file  <b>~/.profile</b> on Linux.
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">------------ Local Libraries Installation ---------------------</span>
<span class="org-variable-name">LOCAL_LIB_PATH</span>=~/dev
<span class="org-builtin">export</span> <span class="org-variable-name">CPLUS_INCLUDE_PATH</span>=$<span class="org-variable-name">LOCAL_LIB_PATH</span>/include:$<span class="org-variable-name">CPLUS_INCLUDE_PATH</span>
<span class="org-builtin">export</span> <span class="org-variable-name">C_INCLUDE_PATH</span>=$<span class="org-variable-name">LOCAL_LIB_PATH</span>/include:$<span class="org-variable-name">C_INCLUDE_PATH</span>
<span class="org-builtin">export</span> <span class="org-variable-name">LIBRARY_PATH</span>=$<span class="org-variable-name">LOCAL_LIB_PATH</span>/lib:$<span class="org-variable-name">LIBRARY_PATH</span>
<span class="org-builtin">export</span> <span class="org-variable-name">LD_LIBRARY_PATH</span>=$<span class="org-variable-name">LOCAL_LIB_PATH</span>/lib:$<span class="org-variable-name">LD_LIBRARY_PATH</span>
</pre>
</div>

<p>
After this configuration was set, the code can be compiled with:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++  fmttest.cpp -o <span class="org-keyword">app.bin</span> -std=c++1z -Wall

<span class="org-comment-delimiter"># </span><span class="org-comment">Header only compilation takes 2 seconds </span>
$ time g++  fmttest.cpp -o <span class="org-keyword">app.bin</span> -std=c++1z -Wall

real    0m1.824s
user    0m1.650s
sys     0m0.156s
</pre>
</div>

<p>
Once the environment variabble CPLUS_INCLUDE_PATH is set, the library
can be loaded from CERN's Root or Cling REPL with:  
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#define</span> <span class="org-variable-name">FMT_HEADER_ONLY</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fmt/format.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fmt/color.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fmt/ostream.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

&gt;&gt; <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" x = {0:.5F}, sqrt(x) = {1:+.8F}\n"</span>, 20.6, <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-2">(</span>20.6<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
 x = 20.60000, sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = +4.53872229
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Print with color foreground blue </span>
&gt;&gt; <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">fmt</span>::fg<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">fmt</span>::<span class="org-constant">color</span>::blue<span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-string">" [INFO] x = {0:.5E}\n"</span>, 20.6<span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>INFO<span class="org-rainbow-delimiters-depth-1">]</span> x = 2.06000E+01

<span class="org-comment-delimiter">// </span><span class="org-comment">Print with background color blue </span>
&gt;&gt; <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">fmt</span>::bg<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">fmt</span>::<span class="org-constant">color</span>::blue<span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-string">" [INFO] x = {0:.5E}\n"</span>, 20.6<span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>INFO<span class="org-rainbow-delimiters-depth-1">]</span> x = 2.06000E+01
&gt;&gt; 
</pre>
</div>
</div>
</div>

<div id="outline-container-org784c375" class="outline-4">
<h4 id="org784c375"><span class="section-number-4">1.4.2</span> tinyprintf</h4>
<div class="outline-text-4" id="text-1-4-2">
<p>
Single-file header-only library replacement for printf. The advatange
of this library is the extensibility, easy-of-use and deployment as it
just a single header-file. 
</p>

<p>
Repository: 
</p>

<ul class="org-ul">
<li><a href="https://github.com/c42f/tinyformat">https://github.com/c42f/tinyformat</a></li>
</ul>

<p>
<b>Sample Project:</b> 
</p>

<p>
File: CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 2.8)
<span class="org-function-name">project</span>(tinyprintf-test)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment">#============= Functions and macros ===========================#</span>
<span class="org-keyword">macro</span>(Download_Single_Headerlib FILE URL)
    <span class="org-function-name">file</span>(DOWNLOAD ${<span class="org-variable-name">URL</span>} ${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/include/${<span class="org-variable-name">FILE</span>})
    <span class="org-keyword">IF</span>(NOT Download_Single_Headerlib_flag)
       <span class="org-function-name">include_directories</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/include)
       <span class="org-function-name">set</span>(Download_Single_Headerlib_flag TRUE)
    <span class="org-keyword">ENDIF</span>()
<span class="org-keyword">endmacro</span>()

<span class="org-function-name">Download_Single_Headerlib</span>(
    tinyformat.h
    <span class="org-string">"https://raw.githubusercontent.com/c42f/tinyformat/master/tinyformat.h"</span>
    )

<span class="org-comment">#============ Target settings ==================================#</span>
<span class="org-function-name">add_executable</span>(main main.cpp)
</pre>
</div>

<p>
File: main.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">tinyformat.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">void</span> <span class="org-function-name">display</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">T</span>&amp;&amp; <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">tfm</span>::printfln<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" Function = %s ; Value x = %s"</span>, __FUNCTION__, x<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">struct</span> <span class="org-type">Point3D</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-variable-name">y</span>, <span class="org-variable-name">z</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">/** </span><span class="org-comment">Enables printing user defined data with tinyprintf library */</span>
<span class="org-function-name">std</span>::ostream&amp;
<span class="org-keyword">operator</span>&lt;&lt;<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span>, <span class="org-variable-name">Point3D</span> <span class="org-keyword">const</span>&amp; point <span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-2">[</span>x, y, z<span class="org-rainbow-delimiters-depth-2">]</span> = point;
    <span class="org-keyword">return</span> os &lt;&lt; <span class="org-string">" Point3d{ x = "</span> &lt;&lt; x
              &lt;&lt; <span class="org-string">" ; y = "</span> &lt;&lt; y &lt;&lt; <span class="org-string">" ; z = "</span>
              &lt;&lt; z &lt;&lt; <span class="org-string">" } "</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">s</span> = <span class="org-string">"Hello world"</span>;
    <span class="org-constant">tfm</span>::printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" LINE 1 =&gt; s = %s n1 = %d f = %.3f \n"</span>, s, 10, 283.41345<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">tfm</span>::printfln<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" LINE 2 =&gt; arg1 = %1$s ; arg3 = %3$s ; arg2 = %2$d "</span>, <span class="org-string">"A1"</span>, 1003, <span class="org-string">"A3"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Templated function</span>
    display<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span>;
    display<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Hello world C++20 ... modules"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Print user-defined type</span>
    <span class="org-constant">tfm</span>::printfln<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n User Defined Data =&gt;&gt; = %s"</span>, Point3D<span class="org-rainbow-delimiters-depth-3">{</span>3.5, 100.34, -90.341<span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">//</span><span class="org-comment">==== Print to stream ===========//</span>
    <span class="org-constant">std</span>::<span class="org-type">stringstream</span> <span class="org-variable-name">ss</span>;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; 5; i++<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">tfm</span>::format<span class="org-rainbow-delimiters-depth-3">(</span>ss, <span class="org-string">"%8.d %10.5f\n"</span>, i, <span class="org-constant">std</span>::exp<span class="org-rainbow-delimiters-depth-4">(</span>i<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">tfm</span>::printfln<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\nFunction tabulation result =&gt; \n %s"</span>, ss.str<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output of executable main: 
</p>

<div class="org-src-container">
<pre class="src src-sh"> % ./main 

 LINE 1 =&gt; s = Hello world n1 = 10 f = 283.413 
 LINE 2 =&gt; arg1 = A1 ; arg3 = A3 ; arg2 = 1003 
 Function = display ; Value x = 10
 Function = display ; Value x = Hello world C++20 ... modules

 User Defined Data =&gt;&gt; =  Point3d{ x = 3.5 ; y = 100.34 ; z = -90.341 } 

Function tabulation result =&gt; 
        0    1.00000
       1    2.71828
       2    7.38906
       3   20.08554
       4   54.59815
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb3d7907" class="outline-3">
<h3 id="orgb3d7907"><span class="section-number-3">1.5</span> Pretty Printing</h3>
<div class="outline-text-3" id="text-1-5">
</div>
<div id="outline-container-org9315eeb" class="outline-4">
<h4 id="org9315eeb"><span class="section-number-4">1.5.1</span> cxx-prettyprint - STL container pretty print</h4>
<div class="outline-text-4" id="text-1-5-1">
<p>
Description:
</p>
<ul class="org-ul">
<li>"A header-only library for C++(0x) that allows automagic pretty-printing of any container."</li>
<li>Note: as this library is single-file and header-only, it does not need any
pre-compilation. All that is needed for using it is to download the
file prettyprint.hpp and add it to the project directory or any
other include directory.</li>
</ul>

<p>
Website:
</p>
<ul class="org-ul">
<li><a href="http://louisdx.github.io/cxx-prettyprint/">http://louisdx.github.io/cxx-prettyprint/</a></li>
</ul>

<p>
Repository:
</p>
<ul class="org-ul">
<li><a href="https://github.com/louisdx/cxx-prettyprint">https://github.com/louisdx/cxx-prettyprint</a></li>
</ul>

<p>
<b>Examples in CERN-Root REPL</b>
</p>

<p>
Step 1: Download the library and start the CERN's ROOT Repl (Cling).
</p>

<div class="org-src-container">
<pre class="src src-sh">$ curl -O -L https://raw.githubusercontent.com/louisdx/cxx-prettyprint/master/prettyprint.hpp

$ ~/opt/root/bin/root.exe
   ------------------------------------------------------------
  | Welcome to ROOT 6.14/04                http://root.cern.ch |
  |                               (c) 1995-2018, The ROOT Team |
  | Built for linuxx8664gcc                                    |
  | From tags/v6-14-04@v6-14-04, Aug 23 2018, 17:00:44         |
  | Try <span class="org-string">'.help'</span>, <span class="org-string">'.demo'</span>, <span class="org-string">'.license'</span>, <span class="org-string">'.credits'</span>, <span class="org-string">'.quit'</span>/<span class="org-string">'.q'</span> |
   ------------------------------------------------------------
</pre>
</div>

<p>
Include header in the repl:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; #include <span class="org-string">"prettyprint.hpp""</span>
</pre>
</div>

<p>
Print vector:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> xs = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>434.4, -10.54, 9.654, 45.23, -10.56<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">//</span><span class="org-comment">------- Print Vector -----------------//</span>
&gt;&gt;
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" xs = "</span> &lt;&lt; xs &lt;&lt; <span class="org-constant">std</span>::endl;
 xs = <span class="org-rainbow-delimiters-depth-1">[</span>5<span class="org-rainbow-delimiters-depth-1">](</span>434.4 -10.54 9.654 45.23 -10.56 <span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt;
</pre>
</div>

<p>
Print tuple:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> t = <span class="org-constant">std</span>::make_tuple<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-2">)</span>, 100<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">tuple</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">basic_string</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-string">"hello"</span>, 100 <span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" t = "</span> &lt;&lt; t &lt;&lt; <span class="org-constant">std</span>::endl;
 t = <span class="org-rainbow-delimiters-depth-1">(</span>hello, 100<span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; <span class="org-keyword">auto</span> tt = <span class="org-constant">std</span>::make_tuple<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-2">)</span>, 100, <span class="org-string">'x'</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">tuple</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">basic_string</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>, <span class="org-type">int</span>, <span class="org-type">char</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-string">"hello"</span>, 100, <span class="org-string">'x'</span> <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt;
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" tt = "</span> &lt;&lt; tt &lt;&lt; <span class="org-constant">std</span>::endl;
 tt = <span class="org-rainbow-delimiters-depth-1">(</span>hello, 100, x<span class="org-rainbow-delimiters-depth-1">)</span>

</pre>
</div>

<p>
Print map:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> dataset <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"USD"</span>, 200.3<span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"BRL"</span>, 451.34<span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"CAD"</span>, 400.5<span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"AUD"</span>, 34.65<span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">}</span>;

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" dataset = "</span> &lt;&lt; dataset &lt;&lt; <span class="org-constant">std</span>::endl;
 dataset = <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">(</span>AUD, 34.65<span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>BRL, 451.34<span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>CAD, 400.5<span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>USD, 200.3<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">]</span>
&gt;&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgefc6bde" class="outline-4">
<h4 id="orgefc6bde"><span class="section-number-4">1.5.2</span> pprint - Pretty print library for C++17</h4>
<div class="outline-text-4" id="text-1-5-2">
<p>
PPrint is an easy and simple to use header-only pretty printing
library for C++17 capable of printing all C++17 containers, including
variants and optional in a nice way.
</p>

<p>
Repository: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/p-ranav/pprint/">https://github.com/p-ranav/pprint/</a></li>
</ul>

<p>
Download the library: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cd &lt;PROJECT&gt; 
$ curl -O -L https://raw.githubusercontent.com/p-ranav/pprint/v0.9.1/include/pprint.hpp
</pre>
</div>

<p>
File: main.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">map</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">complex</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Library from: https://github.com/p-ranav/pprint/tree/v0.9.1</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">include/pprint.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">using</span> <span class="org-type">cpl</span> = <span class="org-constant">std</span>::<span class="org-type">complex</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">printer</span> = <span class="org-constant">pprint</span>::PrettyPrinter<span class="org-rainbow-delimiters-depth-2">{}</span>;

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n========= Print Numbers ============"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    printer.print<span class="org-rainbow-delimiters-depth-2">(</span>100<span class="org-rainbow-delimiters-depth-2">)</span>;
    printer.print<span class="org-rainbow-delimiters-depth-2">(</span>59.15<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n======= Print string with/without quotes ====="</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    printer.print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" Testing CEE PLUS PLUS Printer"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    printer.quotes<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">false</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    printer.print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" Testing CEE PLUS PLUS Printer"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    printer.quotes<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n=========== Print booleans ==========="</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    printer.print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    printer.print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">false</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n========== Print Null Pointer ========="</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    printer.print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n======== Print complex numbers ========="</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">cpl</span> <span class="org-variable-name">x1</span><span class="org-rainbow-delimiters-depth-2">{</span>10.0, 15<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">x2</span> = cpl<span class="org-rainbow-delimiters-depth-2">{</span>-36.34, 98.765<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-type">cpl</span> <span class="org-variable-name">x3</span> = <span class="org-rainbow-delimiters-depth-2">{</span>-2.5312, -9.81<span class="org-rainbow-delimiters-depth-2">}</span>;
    printer.quotes<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">false</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    printer.print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"x1 = "</span>, x1, <span class="org-string">" ; x2 = "</span>, x2, <span class="org-string">" ; x3 = "</span>, x3<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n======= STL Container ================="</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ---&gt;&gt; Print a vector &lt;&lt;----- "</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">words</span> = <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-string">"c++"</span>, <span class="org-string">"Ada"</span>, <span class="org-string">"Scala"</span>, <span class="org-string">"C++17"</span>, <span class="org-string">"Serial"</span> <span class="org-rainbow-delimiters-depth-2">}</span>;
    printer.print<span class="org-rainbow-delimiters-depth-2">(</span>words<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ---&gt;&gt; Print a map &lt;&lt;--------"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">dataset</span> = <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"x"</span>, -9.4351<span class="org-rainbow-delimiters-depth-3">}</span>, <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"mx"</span>, -100.35<span class="org-rainbow-delimiters-depth-3">}</span>, <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"g"</span>, 9.814<span class="org-rainbow-delimiters-depth-3">}</span>  <span class="org-rainbow-delimiters-depth-2">}</span>;
    printer.print<span class="org-rainbow-delimiters-depth-2">(</span>dataset<span class="org-rainbow-delimiters-depth-2">)</span>;


    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ---&gt;&gt; Print a map / Compact &lt;&lt;--------"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    printer.compact<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    printer.print<span class="org-rainbow-delimiters-depth-2">(</span>dataset<span class="org-rainbow-delimiters-depth-2">)</span>;


    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" --&gt;&gt; Print a vector of tuples &lt;&lt;------"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    printer.compact<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">false</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">xlist</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">tuple</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-3">&gt;</span><span class="org-rainbow-delimiters-depth-2">&gt;{</span>
        <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"CAD"</span>, 100<span class="org-rainbow-delimiters-depth-3">}</span>, <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"AUD"</span>, 900 <span class="org-rainbow-delimiters-depth-3">}</span>, <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"BRL"</span>, 871<span class="org-rainbow-delimiters-depth-3">}</span>, <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"EUR"</span>, 9871<span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>;

    printer.print<span class="org-rainbow-delimiters-depth-2">(</span>xlist<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n=== Print C++17 Variants ================="</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">using</span> <span class="org-type">var</span> = <span class="org-constant">std</span>::<span class="org-type">variant</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span>, <span class="org-constant">std</span>::string, <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-3">&gt;</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>;
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">var</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">varlist</span> = <span class="org-rainbow-delimiters-depth-2">{</span> 100, <span class="org-string">"hello"</span>, 51, <span class="org-constant">std</span>::vector<span class="org-rainbow-delimiters-depth-3">{</span>23, 100, -9, 8, 100<span class="org-rainbow-delimiters-depth-3">}</span>, <span class="org-string">"world"</span> <span class="org-rainbow-delimiters-depth-2">}</span>;
    printer.print<span class="org-rainbow-delimiters-depth-2">(</span>varlist<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">./main.bin 

========= Print Numbers ============
100
59.15

======= Print string with/without quotes =====
" Testing CEE PLUS PLUS Printer"
 Testing CEE PLUS PLUS Printer

=========== Print booleans ===========
true
false

========== Print Null Pointer =========
nullptr

======== Print complex numbers =========
x1 =  (10 + 15i)  ; x2 =  (-36.34 + 98.765i)  ; x3 =  (-2.5312 + -9.81i)

======= STL Container =================
 ---&gt;&gt; Print a vector &lt;&lt;----- 
[
  c++, 
  Ada, 
  Scala, 
  C++17, 
  Serial

]
 ---&gt;&gt; Print a map &lt;&lt;--------
{
  g : 9.814, 
  mx : -100.35, 
  x : -9.4351
}
 ---&gt;&gt; Print a map / Compact &lt;&lt;--------
{g : 9.814,   mx : -100.35, x : -9.4351}
 --&gt;&gt; Print a vector of tuples &lt;&lt;------
[
  ("CAD", 100), 
  ("AUD", 900), 
  ("BRL", 871), 
  ("EUR", 9871)
]

=== Print C++17 Variants =================
[
  100, 
  hello, 
  51, 
  [23, 100, -9, 8, 100], 
  world
]
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgca26299" class="outline-3">
<h3 id="orgca26299"><span class="section-number-3">1.6</span> Command Line Parsing</h3>
<div class="outline-text-3" id="text-1-6">
</div>
<div id="outline-container-org3b83b54" class="outline-4">
<h4 id="org3b83b54"><span class="section-number-4">1.6.1</span> CLI11 Library</h4>
<div class="outline-text-4" id="text-1-6-1">
<p>
CLI11 is a small and lightweight header-only library for command line
parsing.
</p>

<p>
Repository: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/CLIUtils/CLI11">https://github.com/CLIUtils/CLI11</a></li>
</ul>

<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="https://cliutils.gitlab.io/CLI11Tutorial/">https://cliutils.gitlab.io/CLI11Tutorial/</a></li>
</ul>

<p>
Doxygen API docs: 
</p>
<ul class="org-ul">
<li><a href="https://cliutils.github.io/CLI11/">https://cliutils.github.io/CLI11/</a></li>
</ul>

<p>
Conan reference: 
</p>
<ul class="org-ul">
<li><a href="https://bintray.com/cliutils/CLI11/CLI11%3Acliutils/1.8.0%3Astable">CLI11/1.8.0@cliutils/stable</a></li>
</ul>


<p>
<b>Sample Project:</b>
</p>

<p>
File: CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 2.8)
<span class="org-function-name">project</span>(cli11-app)

<span class="org-comment">#========================================#</span>

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment">#=========== Conan Bootstrap =================#</span>

<span class="org-comment"># Download automatically, you can also just copy the conan.cmake file</span>
<span class="org-keyword">if</span>(NOT EXISTS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
   <span class="org-function-name">message</span>(STATUS <span class="org-string">"Downloading conan.cmake from https://github.com/conan-io/cmake-conan"</span>)
   <span class="org-function-name">file</span>(DOWNLOAD <span class="org-string">"https://github.com/conan-io/cmake-conan/raw/v0.13/conan.cmake"</span>
                 <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
<span class="org-keyword">endif</span>()

<span class="org-function-name">include</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/conan.cmake)
<span class="org-function-name">set</span>(CONAN_PROFILE default)

<span class="org-function-name">conan_cmake_run</span>( REQUIRES
                 CLI11/1.8.0@cliutils/stable
                 BASIC_SETUP
                 BUILD missing )

<span class="org-comment">#=========== Find Package ================#</span>

<span class="org-function-name">find_package</span>(CLI11 REQUIRED)

<span class="org-comment">#=========== Targets ======================#</span>

<span class="org-comment"># Note: CLI11 is a header-only library and does not need Linking</span>
<span class="org-function-name">add_executable</span>(httpserver main.cpp)
</pre>
</div>

<p>
File: <b>main.cpp</b> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">CLI/CLI.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">CLI</span>::<span class="org-type">App</span> <span class="org-variable-name">app</span><span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-string">"C++ http Web Server"</span><span class="org-rainbow-delimiters-depth-2">}</span>;
    app.footer<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n Creator: Somebody else."</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Sets the current path that will be served by the http server</span>
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">dir</span> = <span class="org-string">"default"</span>;
    app.add_option<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"directory"</span>, dir, <span class="org-string">"Directory served"</span><span class="org-rainbow-delimiters-depth-2">)</span>-&gt;required<span class="org-rainbow-delimiters-depth-2">()</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Sets the port that the server will listen to</span>
    <span class="org-type">int</span> <span class="org-variable-name">port</span> = 8080;
    app.add_option<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"-p,--port"</span>, port, <span class="org-string">"TCP port which the server will bind/listen to"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Set the the hostname that the server will listen to</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Default: 0.0.0.0 =&gt; Listen all hosts</span>
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">host</span> = <span class="org-string">"0.0.0.0"</span>;
    app.add_option<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"--host"</span>, host, <span class="org-string">"Host name that the sever will listen to."</span><span class="org-rainbow-delimiters-depth-2">)</span>;

     app.validate_positionals<span class="org-rainbow-delimiters-depth-2">()</span>;
    CLI11_PARSE<span class="org-rainbow-delimiters-depth-2">(</span>app, argc, argv<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Running server at port = "</span> &lt;&lt; port
              &lt;&lt; <span class="org-string">"\n and listen to host = "</span> &lt;&lt; host
              &lt;&lt; <span class="org-string">"\n serving directory = "</span> &lt;&lt; dir &lt;&lt; <span class="org-string">"\n"</span>;

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Sample program output: 
</p>

<ul class="org-ul">
<li>Display help:</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ ./httpserver -h
C++ http Web Server
<span class="org-function-name">Usage</span>: ./httpserver [OPTIONS] directory

<span class="org-function-name">Positionals</span>:
  directory TEXT REQUIRED     Directory served

<span class="org-function-name">Options</span>:
  -h,--help                   Print this help message and exit
  -p,--port INT               TCP port which the server will bind/listen to
  --host TEXT                 Host name that the sever will listen to.

 Creator: Somebody else.
</pre>
</div>

<ul class="org-ul">
<li>Run app.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ ./httpserver 
directory is required
Run with --help for more information.

$ ./httpserver /var/data/www
Running server at port = 8080
 and listen to host = 0.0.0.0
 servind directory = /var/data/www


$ ./httpserver /var/data/www --port=9090
Running server at port = 9090
 and listen to host = 0.0.0.0
 serving directory = /var/data/www


$ ./httpserver --port=9090 --host=localhost /home/user/pages
Running server at port = 9090
 and listen to host = localhost
 serving directory = /home/user/pages
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcb5dee8" class="outline-4">
<h4 id="orgcb5dee8"><span class="section-number-4">1.6.2</span> Clipp library</h4>
<div class="outline-text-4" id="text-1-6-2">
<p>
Single-file header-only library for parsing command line arguments
(command line option parsing). It supports: positional values
(required arguments); optional values; manpage generation and so on. 
</p>

<ul class="org-ul">
<li>Repository: <a href="https://github.com/muellan/clipp">https://github.com/muellan/clipp</a></li>
</ul>

<p>
<b>Sample Project</b> 
</p>

<p>
File: CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.0)
<span class="org-function-name">project</span>(clipp-test)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment">#============= Functions and macros ===========================#</span>

<span class="org-keyword">macro</span>(Download_Single_Headerlib FILE URL)
    <span class="org-function-name">file</span>(DOWNLOAD ${<span class="org-variable-name">URL</span>} ${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/include/${<span class="org-variable-name">FILE</span>})
    <span class="org-keyword">IF</span>(NOT Download_Single_Headerlib_flag)
       <span class="org-function-name">include_directories</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/include)
       <span class="org-function-name">set</span>(Download_Single_Headerlib_flag TRUE)
    <span class="org-keyword">ENDIF</span>()
<span class="org-keyword">endmacro</span>()

<span class="org-function-name">Download_Single_Headerlib</span>(
    clipp.h
    https://raw.githubusercontent.com/muellan/clipp/v1.2.3/include/clipp.h
    )

<span class="org-comment">#============ Targets settings ==================================#</span>

<span class="org-function-name">add_executable</span>( application application.cpp )
</pre>
</div>

<p>
File: application.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">clipp.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">struct</span> <span class="org-type">ServerOptions</span>
<span class="org-rainbow-delimiters-depth-1">{</span>        
        <span class="org-comment-delimiter">// </span><span class="org-comment">--------- Required values -------------------//</span>
        <span class="org-type">int</span>         <span class="org-variable-name">port</span>;
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">host</span>; 

        <span class="org-comment-delimiter">// </span><span class="org-comment">-------- Optional values -------------------//</span>
        <span class="org-type">int</span>         <span class="org-variable-name">loglevel</span>                = 1; 
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span>                    = <span class="org-string">"untitled"</span>;
        <span class="org-type">bool</span>        <span class="org-variable-name">require_authentication</span>  = <span class="org-constant">false</span>;    
        <span class="org-type">bool</span>        <span class="org-variable-name">verbose</span>                 = <span class="org-constant">false</span>;         
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>* <span class="org-variable-name">argv</span> <span class="org-rainbow-delimiters-depth-2">[]</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-type">ServerOptions</span> <span class="org-variable-name">opts</span>; 

        <span class="org-keyword">auto</span> <span class="org-variable-name">cli</span> = <span class="org-rainbow-delimiters-depth-2">(</span>
                <span class="org-comment-delimiter">// </span><span class="org-comment">--- Positional values ===&gt;&gt; Required --------------//</span>
                  <span class="org-constant">clipp</span>::value<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"host name"</span>, opts.host<span class="org-rainbow-delimiters-depth-3">)</span>
                , <span class="org-constant">clipp</span>::value<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"server port"</span>, opts.port<span class="org-rainbow-delimiters-depth-3">)</span>

                <span class="org-comment-delimiter">// </span><span class="org-comment">--- Optional values ------------------------//</span>
                , <span class="org-constant">clipp</span>::option<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"-v"</span>, <span class="org-string">"--verbose"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                        .set<span class="org-rainbow-delimiters-depth-3">(</span>opts.verbose<span class="org-rainbow-delimiters-depth-3">)</span>
                        .doc<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Enable versbosity"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                , <span class="org-constant">clipp</span>::option<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"-a"</span>, <span class="org-string">"--require-auth"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                        .set<span class="org-rainbow-delimiters-depth-3">(</span>opts.require_authentication<span class="org-rainbow-delimiters-depth-3">)</span>
                        .doc<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Require authentication"</span><span class="org-rainbow-delimiters-depth-3">)</span>                
                , <span class="org-constant">clipp</span>::option<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"--loglevel"</span><span class="org-rainbow-delimiters-depth-3">)</span> &amp; <span class="org-constant">clipp</span>::value<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"set server's log level"</span>, opts.loglevel<span class="org-rainbow-delimiters-depth-3">)</span>
                , <span class="org-constant">clipp</span>::option<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"-n"</span>, <span class="org-string">"--name"</span><span class="org-rainbow-delimiters-depth-3">)</span> &amp; <span class="org-constant">clipp</span>::value<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"server name"</span>, opts.name<span class="org-rainbow-delimiters-depth-3">)</span>
                <span class="org-rainbow-delimiters-depth-2">)</span>;

        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-negation-char">!</span><span class="org-constant">clipp</span>::parse<span class="org-rainbow-delimiters-depth-3">(</span>argc, argv, cli<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">clipp</span>::make_man_page<span class="org-rainbow-delimiters-depth-3">(</span>cli, argv<span class="org-rainbow-delimiters-depth-4">[</span>0<span class="org-rainbow-delimiters-depth-4">]</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-keyword">return</span> EXIT_SUCCESS;
        <span class="org-rainbow-delimiters-depth-2">}</span>

        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::boolalpha; 

        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Running server "</span> 
                  &lt;&lt; <span class="org-string">" \n         port = "</span> &lt;&lt; opts.port 
                  &lt;&lt; <span class="org-string">" \n         host = "</span> &lt;&lt; opts.host 
                  &lt;&lt; <span class="org-string">" \n      verbose = "</span> &lt;&lt; opts.verbose
                  &lt;&lt; <span class="org-string">" \n require_auth = "</span> &lt;&lt; opts.require_authentication
                  &lt;&lt; <span class="org-string">" \n         name = "</span> &lt;&lt; opts.name
                  &lt;&lt; <span class="org-string">" \n   log level  = "</span> &lt;&lt; opts.loglevel
                  &lt;&lt; <span class="org-string">"\n"</span>;

        <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Running</b> 
</p>

<p>
Building: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake -H. -B_build -DCMAKE_BUILD_TYPE=Debug 
$ cmake --build _build --target 
</pre>
</div>

<p>
Running [1]:  
</p>

<div class="org-src-container">
<pre class="src src-text"> $ ./application 
SYNOPSIS
        ./application &lt;host name&gt; &lt;server port&gt; [-v] [-a] [--loglevel &lt;set server's log level&gt;] [-n
                      &lt;server name&gt;]

OPTIONS
        -v, --verbose
                    Enable versbosity

        -a, --require-auth
                    Require authentication
</pre>
</div>

<p>
Running [2]: 
</p>

<div class="org-src-container">
<pre class="src src-text">$ ./application 127.0.0.1 8080 
Running server  
        port = 8080 
        host = 127.0.0.1 
     verbose = false 
require_auth = false 
        name = untitled 
  log level  = 1
</pre>
</div>

<p>
Running [3]: 
</p>

<div class="org-src-container">
<pre class="src src-text">$ ./application 127.0.0.1 8080 --verbose --name "lisp server"
Running server  
        port = 8080 
        host = 127.0.0.1 
     verbose = true 
require_auth = false 
        name = lisp server 
  log level  = 1
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orge0b05de" class="outline-3">
<h3 id="orge0b05de"><span class="section-number-3">1.7</span> Serialization</h3>
<div class="outline-text-3" id="text-1-7">
</div>
<div id="outline-container-org5c3f448" class="outline-4">
<h4 id="org5c3f448"><span class="section-number-4">1.7.1</span> Cereal - Serialization library</h4>
<div class="outline-text-4" id="text-1-7-1">
<p>
Cereal is a lightweight header-only library for serialization which
supports a wide variety of serialization formats such as binary, XML
and JSON. The library also provides lots of facilities for serializing
and deserializing STL containers.
</p>

<ul class="org-ul">
<li>License: BSD</li>

<li>Documentation and official web site:
<ul class="org-ul">
<li><a href="https://uscilab.github.io/cereal">https://uscilab.github.io/cereal</a></li>
</ul></li>

<li>Github Repository:
<ul class="org-ul">
<li><a href="https://github.com/USCiLab/cereal">https://github.com/USCiLab/cereal</a></li>
</ul></li>

<li>Conan Reference:
<ul class="org-ul">
<li><a href="https://bintray.com/conan-community/conan/cereal%3Aconan/1.2.2%3Astable">cereal/1.2.2@conan/stable</a></li>
</ul></li>
</ul>

<p>
<b>Serialization Challenges</b>
</p>

<p>
Despite what it may look like, serialization is not easy, there are
lots of serialization pitfalls that a library shoudl deal with:
</p>

<ul class="org-ul">
<li><span class="underline">Machine endianess</span>:
<ul class="org-ul">
<li>The order that bytes of numeric data are loaded into memory
depends on the machine architecture, therefore a numeric data
stored in a binary file generated in a machine with a <b>little
endian</b> processor, may be read in a wrong way by a <b>big endian</b>
machine. So, in order to be portable, a binary file must use a
default endianess independent of the any processor.</li>
</ul></li>

<li><span class="underline">Data Sizes</span>:
<ul class="org-ul">
<li>C and C++ binary sizes of fundamental data types such
as int, long and long long are not constant across different
operating systems and machine architectures. So a value of long
type save in binary format in one machine may be read in a wrong
way in a machine where the long type has a different size in
bytes. The only way to ensure that the data type is portable and
avoid bad surprises is to use fixed width integers from header
&lt;stdint&gt; uint32_t, uint64_t and so on.</li>
</ul></li>

<li><span class="underline">Data Versioning</span>
<ul class="org-ul">
<li>In order to avoid data corruption, a serialization format should
support multiple versions of the data structure being
serialized and check the version of the data whenever it is
deserialized from any stream.</li>
</ul></li>
</ul>

<p>
<b>Supported Serialization Formats:</b>
</p>

<ul class="org-ul">
<li>XML</li>
<li>JSON</li>
<li>Binary</li>
</ul>

<p>
<b>Headers:</b>
</p>

<ul class="org-ul">
<li>Serialization formats:
<ul class="org-ul">
<li>Binary Format:
<ul class="org-ul">
<li>&lt;cereal/archives/binary.hpp&gt;</li>
</ul></li>

<li>Portable Binary Format:
<ul class="org-ul">
<li>&lt;cereal/archives/portable_binary.hpp&gt;</li>
</ul></li>

<li>XML
<ul class="org-ul">
<li>&lt;cereal/archives/xml.hpp&gt;</li>
</ul></li>

<li>JSON - JavaScript Object Notation
<ul class="org-ul">
<li>&lt;cereal/archives/json.hpp&gt;</li>
</ul></li>
</ul></li>

<li>Support for serializing STL containers
<ul class="org-ul">
<li>&lt;cereal/types/vector.hpp&gt; =&gt; STL Vector std::vector serialization</li>
</ul></li>

<li>Support for polymorphic types serialization
<ul class="org-ul">
<li>&lt;cereal/types/polymorphic.hpp&gt;</li>
</ul></li>
</ul>


<p>
Sample Code:
</p>
<ul class="org-ul">
<li>File: cereal_test.cpp</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">std::ofstream</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">std::stringstream</span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cereal/archives/binary.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-comment-delimiter">// </span><span class="org-comment">#include &lt;cereal/archives/portable_binary.hpp&gt;</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cereal/archives/xml.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cereal/archives/json.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Allows std::vector serialization</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cereal/types/vector.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">struct</span> <span class="org-type">DummyClass</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">double</span> <span class="org-variable-name">x</span>;
    <span class="org-type">float</span>  <span class="org-variable-name">y</span>;
    <span class="org-type">size_t</span> <span class="org-variable-name">N</span>;
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">list</span>;

    <span class="org-function-name">DummyClass</span><span class="org-rainbow-delimiters-depth-2">()</span>: x<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span>, y<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span>, N<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-function-name">DummyClass</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">float</span> <span class="org-variable-name">y</span>, <span class="org-type">size_t</span> <span class="org-variable-name">N</span><span class="org-rainbow-delimiters-depth-2">)</span>
        : x<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>, y<span class="org-rainbow-delimiters-depth-2">(</span>y<span class="org-rainbow-delimiters-depth-2">)</span>, N<span class="org-rainbow-delimiters-depth-2">(</span>N<span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">void</span> <span class="org-function-name">Add</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        list.push_back<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">Archive</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>
    <span class="org-type">void</span> <span class="org-function-name">serialize</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Archive</span>&amp; <span class="org-variable-name">archive</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Archive without name-value pair</span>
        <span class="org-comment-delimiter">//</span><span class="org-comment">--------------------------------</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">archive(x, y, N, list);</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">Archive with name-value pair</span>
        <span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------------</span>
        archive<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cereal</span>::make_nvp<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"x"</span>, x<span class="org-rainbow-delimiters-depth-4">)</span>,
                <span class="org-constant">cereal</span>::make_nvp<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"y"</span>, y<span class="org-rainbow-delimiters-depth-4">)</span>,
                <span class="org-constant">cereal</span>::make_nvp<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"N"</span>, N<span class="org-rainbow-delimiters-depth-4">)</span>,
                <span class="org-constant">cereal</span>::make_nvp<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"list"</span>, <span class="org-type">list</span><span class="org-rainbow-delimiters-depth-4">)</span>
                <span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">void</span> <span class="org-function-name">show</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        os &lt;&lt; <span class="org-string">"DummyClass { x = "</span> &lt;&lt; x
           &lt;&lt; <span class="org-string">" ; y = "</span> &lt;&lt; y
           &lt;&lt; <span class="org-string">" ; N = "</span> &lt;&lt; N
           &lt;&lt; <span class="org-string">" } =&gt; "</span>;
        os &lt;&lt; <span class="org-string">" List[ "</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">e</span>: list<span class="org-rainbow-delimiters-depth-3">)</span>
            os &lt;&lt; <span class="org-string">" "</span> &lt;&lt; e;
        os &lt;&lt; <span class="org-string">" ] "</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;


<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">============ Binary Serialization ==================//</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Memory "file" simulating a disk file</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">mock_file</span> = <span class="org-constant">std</span>::stringstream<span class="org-rainbow-delimiters-depth-2">{}</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n=== Experiment 1 - Serialize object to binary file ===\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">outArchive</span>   = <span class="org-constant">cereal</span>::BinaryOutputArchive<span class="org-rainbow-delimiters-depth-3">(</span>mock_file<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">DummyClass</span> <span class="org-variable-name">obj</span><span class="org-rainbow-delimiters-depth-3">{</span>100.6534, 45.5f, 100<span class="org-rainbow-delimiters-depth-3">}</span>;
        obj.Add<span class="org-rainbow-delimiters-depth-3">(</span>100<span class="org-rainbow-delimiters-depth-3">)</span>; obj.Add<span class="org-rainbow-delimiters-depth-3">(</span>200<span class="org-rainbow-delimiters-depth-3">)</span>; obj.Add<span class="org-rainbow-delimiters-depth-3">(</span>50<span class="org-rainbow-delimiters-depth-3">)</span>; obj.Add<span class="org-rainbow-delimiters-depth-3">(</span>80<span class="org-rainbow-delimiters-depth-3">)</span>;
        outArchive<span class="org-rainbow-delimiters-depth-3">(</span>obj<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Content of mock-file =  "</span> &lt;&lt; mock_file.str<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n=== Experiment 2 - Deserialize object from binary file ====\n"</span> ;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">inArchive</span> = <span class="org-constant">cereal</span>::BinaryInputArchive<span class="org-rainbow-delimiters-depth-3">(</span>mock_file<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">DummyClass</span> <span class="org-variable-name">cls</span>;
        inArchive<span class="org-rainbow-delimiters-depth-3">(</span>cls<span class="org-rainbow-delimiters-depth-3">)</span>;
        cls.show<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cout<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">//</span><span class="org-comment">============= XML Serialization ============================//</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">auto xmlFile = std::ofstream("/tmp/dataset.xml");</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">xmlFile</span> = <span class="org-constant">std</span>::stringstream<span class="org-rainbow-delimiters-depth-2">{}</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n=== Experiment 3 - Serialize object to XML file ====\n"</span> ;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">outArchive</span> = <span class="org-constant">cereal</span>::XMLOutputArchive<span class="org-rainbow-delimiters-depth-3">(</span>xmlFile<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">DummyClass</span> <span class="org-variable-name">obj1</span><span class="org-rainbow-delimiters-depth-3">{</span>200.0, -802.5f, 900<span class="org-rainbow-delimiters-depth-3">}</span>;
        obj1.Add<span class="org-rainbow-delimiters-depth-3">(</span>100<span class="org-rainbow-delimiters-depth-3">)</span>; obj1.Add<span class="org-rainbow-delimiters-depth-3">(</span>200<span class="org-rainbow-delimiters-depth-3">)</span>; obj1.Add<span class="org-rainbow-delimiters-depth-3">(</span>50<span class="org-rainbow-delimiters-depth-3">)</span>; obj1.Add<span class="org-rainbow-delimiters-depth-3">(</span>80<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">DummyClass</span> <span class="org-variable-name">obj2</span><span class="org-rainbow-delimiters-depth-3">{</span>400.0, -641.f, 300<span class="org-rainbow-delimiters-depth-3">}</span>;
        outArchive<span class="org-rainbow-delimiters-depth-3">(</span>obj1, obj2<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Note: Cereal uses RAII to flush the archive output, so the output is only</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">guaranteeed to be written to the stream when the archive go out of escope.</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [TRACE] xmlFile = "</span> &lt;&lt; xmlFile.str<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n=== Experiment 4 - Deserialize object from XML file ===\n"</span> ;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">inArchive</span> = <span class="org-constant">cereal</span>::XMLInputArchive<span class="org-rainbow-delimiters-depth-3">(</span>xmlFile<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">DummyClass</span> <span class="org-variable-name">obj1</span>, <span class="org-variable-name">obj2</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Read two objects from stream</span>
        inArchive<span class="org-rainbow-delimiters-depth-3">(</span>obj1, obj2<span class="org-rainbow-delimiters-depth-3">)</span>;
        obj1.show<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cout<span class="org-rainbow-delimiters-depth-3">)</span>;
        obj2.show<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cout<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">============= JSON Serialization =================================//</span>


    <span class="org-comment-delimiter">// </span><span class="org-comment">auto xmlFile = std::ofstream("/tmp/dataset.xml");</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">jsonFile</span> = <span class="org-constant">std</span>::stringstream<span class="org-rainbow-delimiters-depth-2">{}</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n=== Experiment 5 - Serialize object to JSON file ====\n"</span> ;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">outArchive</span> = <span class="org-constant">cereal</span>::JSONOutputArchive<span class="org-rainbow-delimiters-depth-3">(</span>jsonFile<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">DummyClass</span> <span class="org-variable-name">obj1</span><span class="org-rainbow-delimiters-depth-3">{</span>200.0, -802.5f, 900<span class="org-rainbow-delimiters-depth-3">}</span>;
        obj1.Add<span class="org-rainbow-delimiters-depth-3">(</span>100<span class="org-rainbow-delimiters-depth-3">)</span>; obj1.Add<span class="org-rainbow-delimiters-depth-3">(</span>200<span class="org-rainbow-delimiters-depth-3">)</span>; obj1.Add<span class="org-rainbow-delimiters-depth-3">(</span>50<span class="org-rainbow-delimiters-depth-3">)</span>; obj1.Add<span class="org-rainbow-delimiters-depth-3">(</span>80<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">DummyClass</span> <span class="org-variable-name">obj2</span><span class="org-rainbow-delimiters-depth-3">{</span>400.0, -641.f, 300<span class="org-rainbow-delimiters-depth-3">}</span>;
        outArchive<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cereal</span>::make_nvp<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"object1"</span>, obj1<span class="org-rainbow-delimiters-depth-4">)</span>,
                   <span class="org-constant">cereal</span>::make_nvp<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"object2"</span>, obj2<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [TRACE] JSON File =\n"</span> &lt;&lt; jsonFile.str<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n=== Experiment 6 - Deserialize object from JSON file ====\n"</span> ;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">inArchive</span> = <span class="org-constant">cereal</span>::JSONInputArchive<span class="org-rainbow-delimiters-depth-3">(</span>jsonFile<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">DummyClass</span> <span class="org-variable-name">obj1</span>, <span class="org-variable-name">obj2</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Read two objects from stream</span>
        inArchive<span class="org-rainbow-delimiters-depth-3">(</span>obj1, obj2<span class="org-rainbow-delimiters-depth-3">)</span>;
        obj1.show<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cout<span class="org-rainbow-delimiters-depth-3">)</span>;
        obj2.show<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cout<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Program output:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./cereal_test.bin

=== Experiment 1 - Serialize object to binary file ===
 Content of mock-file =  6&#65533;;N&#65533;)Y@&#0;&#0;6Bd&#0;&#0;&#0;&#0;&#0;&#0;&#0;&#4;&#0;&#0;&#0;&#0;&#0;&#0;&#0;d&#0;&#0;&#0;&#65533;&#0;&#0;&#0;2&#0;&#0;&#0;P&#0;&#0;&#0;

=== Experiment 2 - Deserialize object from binary file ====
DummyClass { x = 100.653 ; y = 45.5 ; N = 100 } =&gt;  List[  100 200 50 80 ]

=== Experiment 3 - Serialize object to XML file ====
 [TRACE] xmlFile = &lt;?xml <span class="org-variable-name">version</span>=<span class="org-string">"1.0"</span> <span class="org-variable-name">encoding</span>=<span class="org-string">"utf-8"</span>?&gt;
&lt;cereal&gt;
        &lt;value0&gt;
                &lt;x&gt;200&lt;/x&gt;
                &lt;y&gt;-802.5&lt;/y&gt;
                &lt;N&gt;900&lt;/N&gt;
                &lt;list <span class="org-variable-name">size</span>=<span class="org-string">"dynamic"</span>&gt;
                        &lt;value0&gt;100&lt;/value0&gt;
                        &lt;value1&gt;200&lt;/value1&gt;
                        &lt;value2&gt;50&lt;/value2&gt;
                        &lt;value3&gt;80&lt;/value3&gt;
                &lt;/list&gt;
        &lt;/value0&gt;
        &lt;value1&gt;
                &lt;x&gt;400&lt;/x&gt;
                &lt;y&gt;-641&lt;/y&gt;
                &lt;N&gt;300&lt;/N&gt;
                &lt;list <span class="org-variable-name">size</span>=<span class="org-string">"dynamic"</span>/&gt;
        &lt;/value1&gt;
&lt;/cereal&gt;



=== Experiment 4 - Deserialize object from XML file ===
DummyClass { x = 200 ; y = -802.5 ; N = 900 } =&gt;  List[  100 200 50 80 ]
DummyClass { x = 400 ; y = -641 ; N = 300 } =&gt;  List[  ]

=== Experiment 5 - Serialize object to JSON file ====
 [TRACE] JSON File =
{
    <span class="org-string">"object1"</span>: {
        <span class="org-string">"x"</span>: 200.0,
        <span class="org-string">"y"</span>: -802.5,
        <span class="org-string">"N"</span>: 900,
        <span class="org-string">"list"</span>: [
            100,
            200,
            50,
            80
        ]
    },
    <span class="org-string">"object2"</span>: {
        <span class="org-string">"x"</span>: 400.0,
        <span class="org-string">"y"</span>: -641.0,
        <span class="org-string">"N"</span>: 300,
        <span class="org-string">"list"</span>: []
    }
}

=== Experiment 6 - Deserialize object from JSON file ====
DummyClass { x = 200 ; y = -802.5 ; N = 900 } =&gt;  List[  100 200 50 80 ]
DummyClass { x = 400 ; y = -641 ; N = 300 } =&gt;  List[  ]
</pre>
</div>
</div>
</div>

<div id="outline-container-org9b8d905" class="outline-4">
<h4 id="org9b8d905"><span class="section-number-4">1.7.2</span> YAS - Yet Another Serialization Library</h4>
<div class="outline-text-4" id="text-1-7-2">
<p>
YAS - Yet Another Serialization Library - High performance ligthweight
header-only serialization library with support for all STL containers.
</p>

<p>
Repository: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/niXman/yas">https://github.com/niXman/yas</a></li>
</ul>

<p>
More Examples: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/niXman/yas/tree/master/examples">https://github.com/niXman/yas/tree/master/examples</a></li>
</ul>

<p>
Supported Serialization Formats: 
</p>

<ul class="org-ul">
<li>binary (portable, endianess-independent)</li>
<li>text</li>
<li>json (not fully compatible)</li>
</ul>

<p>
Problems: 
</p>
<ul class="org-ul">
<li>Less documentation</li>
<li>Lack of doxygen comments</li>
<li>Not comptabile with C++'s standard library streams such as
std::ostream, std::fstream, std::cout.</li>
</ul>

<p>
<b>CMake Project Example</b>
</p>

<ul class="org-ul">
<li>File: CMakeLists.txt</li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(YAS_PROJECT)

<span class="org-comment">#========== Global Configurations =============#</span>
<span class="org-comment">#----------------------------------------------#</span>
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)     
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)
<span class="org-function-name">set</span>(CMAKE_CXX_EXTENSIONS OFF)

<span class="org-comment">#------------- Fetch Serialization Library YAS -------------------#</span>

<span class="org-function-name">include</span>( FetchContent )
<span class="org-function-name">FetchContent_Declare</span>( yas
    GIT_REPOSITORY  <span class="org-string">"https://github.com/niXman/yas.git"</span>
    GIT_TAG         <span class="org-string">"7.0.4"</span>
)
<span class="org-function-name">FetchContent_MakeAvailable</span>(yas)
<span class="org-function-name">include_directories</span>(<span class="org-string">"${</span><span class="org-variable-name">yas_SOURCE_DIR</span><span class="org-string">}/include/"</span> )

<span class="org-comment">#========== Targets Configurations ============#</span>

<span class="org-function-name">add_executable</span>(executable serialize.cpp)
</pre>
</div>

<ul class="org-ul">
<li>File: serialize.cpp</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">deque</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">algorithm</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">numeric</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">initializer_list</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">yas/serialize.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">yas/std_types.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">yas/text_iarchive.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">yas/text_oarchive.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">@brief Read whole input stream to a string and returns it</span>
<span class="org-comment">  * Requires headers: &lt;iostream&gt; and &lt;sstream&gt;</span>
<span class="org-comment">  */</span>
<span class="org-function-name">std</span>::<span class="org-type">string</span>
istreamToString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">istream</span>&amp; <span class="org-variable-name">is</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>is.bad<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-keyword">throw</span> <span class="org-constant">std</span>::runtime_error<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: stream has errors."</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-constant">std</span>::<span class="org-type">stringstream</span> <span class="org-variable-name">ss</span>;
    ss &lt;&lt; is.rdbuf<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-keyword">return</span> ss.str<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">class</span> <span class="org-type">Stats</span>
<span class="org-rainbow-delimiters-depth-1">{</span>

    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">m_name</span> = <span class="org-string">""</span>;
    <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">m_data</span> = <span class="org-rainbow-delimiters-depth-2">{}</span>;
<span class="org-function-name">public</span>:
    <span class="org-function-name">Stats</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-function-name">Stats</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">initializer_list</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">list</span><span class="org-rainbow-delimiters-depth-2">)</span>
        : m_data<span class="org-rainbow-delimiters-depth-2">(</span>list.begin<span class="org-rainbow-delimiters-depth-3">()</span>, list.end<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">void</span>   <span class="org-function-name">insert</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> m_data.push_back<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">double</span> <span class="org-function-name">get</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">size_t</span> <span class="org-variable-name">index</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> m_data<span class="org-rainbow-delimiters-depth-3">[</span>index<span class="org-rainbow-delimiters-depth-3">]</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">size_t</span> <span class="org-function-name">size</span><span class="org-rainbow-delimiters-depth-2">()</span>            <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> m_data.size<span class="org-rainbow-delimiters-depth-3">()</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">auto</span> <span class="org-function-name">begin</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> m_data.begin<span class="org-rainbow-delimiters-depth-3">()</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">auto</span> <span class="org-function-name">end</span><span class="org-rainbow-delimiters-depth-2">()</span>   <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> m_data.end<span class="org-rainbow-delimiters-depth-3">()</span>;   <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">name</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> m_name; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">void</span> <span class="org-function-name">set_name</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span> m_name = name; <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">double</span> <span class="org-function-name">mean</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-type">double</span> <span class="org-variable-name">total</span> = <span class="org-constant">std</span>::accumulate<span class="org-rainbow-delimiters-depth-3">(</span>m_data.begin<span class="org-rainbow-delimiters-depth-4">()</span>, m_data.end<span class="org-rainbow-delimiters-depth-4">()</span>, 0.0<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">return</span> total / m_data.size<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">double</span> <span class="org-function-name">first</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> m_data.front<span class="org-rainbow-delimiters-depth-3">()</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">double</span> <span class="org-function-name">last</span><span class="org-rainbow-delimiters-depth-2">()</span>  <span class="org-keyword">const</span><span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> m_data.back<span class="org-rainbow-delimiters-depth-3">()</span>; <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">/** </span><span class="org-comment">Required friend function for making class printable */</span>
    <span class="org-keyword">friend</span> <span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">&lt;&lt;</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span>, <span class="org-keyword">const</span> <span class="org-type">Stats</span>&amp; <span class="org-variable-name">stat</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        os &lt;&lt;  <span class="org-string">"Stats { name = '"</span> &lt;&lt; stat.m_name &lt;&lt; <span class="org-string">"' ; data = [ "</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">x</span>: stat.m_data<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">{</span> os &lt;&lt; x &lt;&lt; <span class="org-string">", "</span>; <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-keyword">return</span> os &lt;&lt; <span class="org-string">" ] }"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">/** </span><span class="org-comment">Required method for making the class serializable */</span>
    <span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">Archive</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>
    <span class="org-type">void</span> <span class="org-function-name">serialize</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Archive</span>&amp; <span class="org-variable-name">ar</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">NVP =&gt; Name-value-pair</span>
        <span class="org-type">ar</span> &amp; <span class="org-variable-name">YAS_OBJECT_NVP</span><span class="org-rainbow-delimiters-depth-3">(</span>
              <span class="org-string">"Stats"</span>
            ,<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"name"</span>, m_name<span class="org-rainbow-delimiters-depth-4">)</span>
            ,<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"data"</span>, m_data<span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>;


<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>

    <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">jsonfile</span> = <span class="org-string">"program_data.json"</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n ==== EXPERIMENT 1 ====== Save data to file ========\n\n"</span>;

    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">stats</span> = Stats<span class="org-rainbow-delimiters-depth-3">{</span>4.5, -10.3, 58.66, 10.6, 9.615, 56.156, 90.51, -62.0<span class="org-rainbow-delimiters-depth-3">}</span>;
        stats.set_name<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Price change"</span><span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">std::cout &lt;&lt; " =&gt; Name " &lt;&lt; stats.name() &lt;&lt; std::endl;</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"   =&gt; stats = "</span> &lt;&lt; stats &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"   =&gt;  mean = "</span> &lt;&lt; stats.mean<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Remove file if it exists</span>
        <span class="org-constant">std</span>::remove<span class="org-rainbow-delimiters-depth-3">(</span>jsonfile<span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Save archive data in a JSON file</span>
        <span class="org-constant">yas</span>::save<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">yas</span>::file | <span class="org-constant">yas</span>::json<span class="org-rainbow-delimiters-depth-3">&gt;(</span>jsonfile, stats<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Check file content</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">ifs</span> = <span class="org-constant">std</span>::ifstream<span class="org-rainbow-delimiters-depth-2">{</span>jsonfile<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">content</span> = istreamToString<span class="org-rainbow-delimiters-depth-2">(</span>ifs<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n File content = \n "</span> &lt;&lt; content
              &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n ==== EXPERIMENT 2 ====== Load data from file ======\n\n"</span>;

    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">statsB</span> = Stats<span class="org-rainbow-delimiters-depth-3">{}</span>;
        <span class="org-constant">yas</span>::load<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">yas</span>::file | <span class="org-constant">yas</span>::json<span class="org-rainbow-delimiters-depth-3">&gt;(</span>jsonfile, statsB<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"   =&gt; stats = "</span> &lt;&lt; statsB &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"   =&gt;  mean = "</span> &lt;&lt; statsB.mean<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n ==== EXPERIMENT 3 ====== Load/Save data from memory ======\n\n"</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Save to memory</span>
    <span class="org-constant">yas</span>::<span class="org-type">mem_ostream</span> <span class="org-variable-name">os</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">statsX</span> = Stats<span class="org-rainbow-delimiters-depth-2">{</span>14.5, 25.16, 18.66, -10.6, 62.615, +46.1566, 90.51, 62.61<span class="org-rainbow-delimiters-depth-2">}</span>;
    statsX.set_name<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Oil prices"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">archive</span> = <span class="org-constant">yas</span>::binary_oarchive<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">yas</span>::<span class="org-type">mem_ostream</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span>os<span class="org-rainbow-delimiters-depth-3">)</span>;
        archive<span class="org-rainbow-delimiters-depth-3">(</span>statsX<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" StatsX = "</span> &lt;&lt; statsX &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [TRACE] Saved to memory OK."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">is</span> = <span class="org-constant">yas</span>::mem_istream<span class="org-rainbow-delimiters-depth-3">(</span>os.get_intrusive_buffer<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">auto</span> <span class="org-variable-name">archive</span> = <span class="org-constant">yas</span>::binary_iarchive<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">yas</span>::mem_istream<span class="org-rainbow-delimiters-depth-3">&gt;(</span>is<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">auto</span> <span class="org-variable-name">statsY</span> = Stats<span class="org-rainbow-delimiters-depth-3">()</span>;
        archive<span class="org-rainbow-delimiters-depth-3">(</span>statsY<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [TRACE] Load from memory OK."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" StatsY = "</span> &lt;&lt; statsY &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<ul class="org-ul">
<li>Program output:</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">==== EXPERIMENT 1 ====== Save data to file ========

  =&gt; stats = Stats { name = <span class="org-string">'Price change'</span> ; data = [ 4.5, -10.3, 58.66, 10.6, 9.615, 56.156, 90.51, -62,  ] }
  =&gt;  mean = 19.7176

File content = 
{<span class="org-string">"name"</span>:<span class="org-string">"Price change"</span>,<span class="org-string">"data"</span>:[4.5,-10.3,58.66,10.6,9.615,56.156,90.51,-62.0]}

==== EXPERIMENT 2 ====== Load data from file ======

  =&gt; stats = Stats { name = <span class="org-string">'Price change'</span> ; data = [ 4.5, -10.3, 58.66, 10.6, 9.615, 56.156, 90.51, -62,  ] }
  =&gt;  mean = 19.7176

==== EXPERIMENT 3 ====== Load/Save data from memory ======

StatsX = Stats { name = <span class="org-string">'Oil prices'</span> ; data = [ 14.5, 25.16, 18.66, -10.6, 62.615, 46.1566, 90.51, 62.61,  ] }
[TRACE] Saved to memory OK.
[TRACE] Load from memory OK.
StatsY = Stats { name = <span class="org-string">'Oil prices'</span> ; data = [ 14.5, 25.16, 18.66, -10.6, 62.615, 46.1566, 90.51, 62.61,  ] }
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org5738e25" class="outline-3">
<h3 id="org5738e25"><span class="section-number-3">1.8</span> Parsers</h3>
<div class="outline-text-3" id="text-1-8">
</div>
<div id="outline-container-org6a3347a" class="outline-4">
<h4 id="org6a3347a"><span class="section-number-4">1.8.1</span> TinyXML2 - Lightweight XML parser</h4>
<div class="outline-text-4" id="text-1-8-1">
<p>
Simple and ligtweight C++ library for parsing XML files.
</p>

<p>
Site:
</p>
<ul class="org-ul">
<li><a href="http://leethomason.github.io/tinyxml2/">http://leethomason.github.io/tinyxml2/</a></li>
</ul>

<p>
Repository:
</p>
<ul class="org-ul">
<li><a href="https://github.com/leethomason/tinyxml2">https://github.com/leethomason/tinyxml2</a></li>
</ul>

<p>
Conan Reference: 
</p>
<ul class="org-ul">
<li><a href="https://bintray.com/nicolastagliani/tinyxml2/tinyxml2%3Anicolastagliani/7.0.1%3Astable">tinyxml2/7.0.1@nicolastagliani/stable</a></li>
</ul>

<p>
Conan package repository: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/nicolastagliani/conan-tinyxml2/">https://github.com/nicolastagliani/conan-tinyxml2/</a></li>
</ul>

<p>
<b>Example:</b>
</p>

<p>
Full Project Code: 
</p>

<ul class="org-ul">
<li><a href="https://gist.github.com/caiorss/351e291b8df2b0fc8e1bba5c86b7ee4d">https://gist.github.com/caiorss/351e291b8df2b0fc8e1bba5c86b7ee4d</a></li>
</ul>


<p>
File: <b>tinyxml2-test.cpp</b>
</p>

<ul class="org-ul">
<li>This file parses the XML taken from <a href="https://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml">eurofxref-daily.xml</a> which
contains a set of FX exchange rates.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">tinyxml2.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#define</span> <span class="org-variable-name">ENABLE_ASSERT</span>

<span class="org-preprocessor">#ifdef</span> ENABLE_ASSERT
<span class="org-preprocessor">#define</span> <span class="org-function-name">M_ASSERT</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">expr</span><span class="org-rainbow-delimiters-depth-1">)</span> \
      <span class="org-rainbow-delimiters-depth-1">{</span> \
         <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span><span class="org-rainbow-delimiters-depth-3">(</span>expr<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">){</span> \
            <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"ASSERTION FAILURE: \n"</span>; \
            <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" =&gt; Condition: "</span> &lt;&lt; #expr &lt;&lt; <span class="org-string">"\n"</span>; \
            <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" =&gt;  Function: "</span> &lt;&lt; __FUNCTION__ &lt;&lt; <span class="org-string">"\n"</span>; \
            <span class="org-constant">std</span>::cerr &lt;&lt; __FILE__ &lt;&lt; <span class="org-string">":"</span> &lt;&lt; __LINE__ &lt;&lt; <span class="org-string">":"</span> &lt;&lt; <span class="org-string">"\n"</span>; \
            <span class="org-constant">std</span>::terminate<span class="org-rainbow-delimiters-depth-3">()</span>; \
         <span class="org-rainbow-delimiters-depth-2">}</span> \
      <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-preprocessor">#else</span>
<span class="org-preprocessor">#define</span> <span class="org-function-name">M_ASSERT</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">expr</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-preprocessor">#endif</span>

<span class="org-keyword">using</span> <span class="org-constant">tinyxml2</span>::<span class="org-type">XMLText</span>;
<span class="org-keyword">using</span> <span class="org-constant">tinyxml2</span>::<span class="org-type">XMLElement</span>;
<span class="org-keyword">using</span> <span class="org-constant">tinyxml2</span>::<span class="org-type">XMLNode</span>;

<span class="org-keyword">extern</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">exchangeRatesXML</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Running TinyXMl2 "</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">tinyxml2</span>::<span class="org-type">XMLDocument</span> <span class="org-variable-name">doc</span>;

    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>doc.Parse<span class="org-rainbow-delimiters-depth-3">(</span> exchangeRatesXML<span class="org-rainbow-delimiters-depth-3">)</span> != <span class="org-constant">tinyxml2</span>::XML_SUCCESS<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [ERROR] Failed to parse XML"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-keyword">return</span> EXIT_FAILURE;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [OK] XML parsed successfully"</span> &lt;&lt; <span class="org-constant">std</span>::endl;


    <span class="org-constant">tinyxml2</span>::<span class="org-type">XMLPrinter</span> <span class="org-variable-name">printer</span>;
    doc.Print<span class="org-rainbow-delimiters-depth-2">(</span>&amp;printer<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Value: doc.FirstChild()-&gt;Value() = "</span> &lt;&lt; doc.FirstChild<span class="org-rainbow-delimiters-depth-2">()</span>-&gt;Value<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-type">XMLElement</span>* <span class="org-variable-name">elem</span> = doc.FirstChildElement<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"gesmes:Envelope"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    M_ASSERT<span class="org-rainbow-delimiters-depth-2">(</span>elem != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>elem<span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Element found. OK "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;&gt; Element Name = "</span> &lt;&lt; elem-&gt;Name<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">XMLElement</span>* <span class="org-variable-name">elem1</span> = elem-&gt;FirstChildElement<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Cube"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    M_ASSERT<span class="org-rainbow-delimiters-depth-2">(</span>elem1 != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;&gt; Found Node Name: "</span> &lt;&lt; elem1-&gt;ToElement<span class="org-rainbow-delimiters-depth-2">()</span>-&gt;Name<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;

    <span class="org-type">XMLElement</span>* <span class="org-variable-name">elem2</span> = elem1-&gt;FirstChildElement<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Cube"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    M_ASSERT<span class="org-rainbow-delimiters-depth-2">(</span>elem2 != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">time</span> = elem2-&gt;Attribute<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"time"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    M_ASSERT<span class="org-rainbow-delimiters-depth-2">(</span>time != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">XML node with: &lt;Cube time = 'xxxx-xx-xx'&gt;</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Time = "</span> &lt;&lt; time &lt;&lt; <span class="org-string">"\n\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-2">(</span>3<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ===== Exchange rates per Euro ===="</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">XMLElement</span>* <span class="org-variable-name">e</span> = elem2-&gt;FirstChildElement<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Cube"</span><span class="org-rainbow-delimiters-depth-3">)</span>
             ; e != <span class="org-constant">nullptr</span>; e = e-&gt;NextSiblingElement<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Cube"</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; e-&gt;Attribute<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"currency"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                  &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>15<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-3">(</span>e-&gt;Attribute<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"rate"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                  &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>


    <span class="org-keyword">return</span> doc.ErrorID<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Source: https://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml</span>
<span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">exchangeRatesXML</span> = R<span class="org-default">"</span><span class="org-string">(</span>
<span class="org-string">   &lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="org-string">   &lt;gesmes:Envelope </span>
<span class="org-string">                xmlns:gesmes="http://www.gesmes.org/xml/2002-08-01" </span>
<span class="org-string">                xmlns="http://www.ecb.int/vocabulary/2002-08-01/eurofxref"&gt;</span>

<span class="org-string">           &lt;gesmes:subject&gt;Reference rates&lt;/gesmes:subject&gt;</span>
<span class="org-string">           &lt;gesmes:Sender&gt;</span>
<span class="org-string">                   &lt;gesmes:name&gt;European Central Bank&lt;/gesmes:name&gt;</span>
<span class="org-string">           &lt;/gesmes:Sender&gt;</span>
<span class="org-string">           &lt;Cube&gt;</span>
<span class="org-string">                   &lt;Cube time='2019-06-14'&gt;</span>
<span class="org-string">                           &lt;Cube currency='USD' rate='1.1265'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='JPY' rate='121.90'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='BGN' rate='1.9558'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='CZK' rate='25.540'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='DKK' rate='7.4676'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='GBP' rate='0.89093'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='HUF' rate='321.53'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='PLN' rate='4.2534'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='RON' rate='4.7233'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='SEK' rate='10.6390'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='CHF' rate='1.1211'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='ISK' rate='141.50'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='NOK' rate='9.7728'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='HRK' rate='7.4105'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='RUB' rate='72.3880'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='TRY' rate='6.6427'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='AUD' rate='1.6324'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='BRL' rate='4.3423'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='CAD' rate='1.5018'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='CNY' rate='7.7997'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='HKD' rate='8.8170'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='IDR' rate='16128.10'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='ILS' rate='4.0518'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='INR' rate='78.6080'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='KRW' rate='1333.60'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='MXN' rate='21.6073'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='MYR' rate='4.6981'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='NZD' rate='1.7241'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='PHP' rate='58.539'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='SGD' rate='1.5403'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='THB' rate='35.101'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='ZAR' rate='16.6529'/&gt;</span>
<span class="org-string">                   &lt;/Cube&gt;</span>
<span class="org-string">           &lt;/Cube&gt;</span>
<span class="org-string">   &lt;/gesmes:Envelope&gt;</span>
<span class="org-string">)</span><span class="org-default">"</span>;
</pre>
</div>

<p>
File: <b>CMakeLists.txt</b> 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(tinyxml2-test)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment">#=========== Conan Bootstrap =================#</span>

<span class="org-comment"># Download automatically, you can also just copy the conan.cmake file</span>
<span class="org-keyword">if</span>(NOT EXISTS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
   <span class="org-function-name">message</span>(STATUS <span class="org-string">"Downloading conan.cmake from https://github.com/conan-io/cmake-conan"</span>)
   <span class="org-function-name">file</span>(DOWNLOAD <span class="org-string">"https://github.com/conan-io/cmake-conan/raw/v0.13/conan.cmake"</span>
                 <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
<span class="org-keyword">endif</span>()

<span class="org-function-name">include</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/conan.cmake)
<span class="org-function-name">set</span>(CONAN_PROFILE default)

<span class="org-function-name">conan_cmake_run</span>( REQUIRES
                 tinyxml2/7.0.1@nicolastagliani/stable
                 BASIC_SETUP
                 BUILD missing )

<span class="org-comment">#=========== Find Package ================#</span>

<span class="org-function-name">include</span>(tinyxml2_helper.cmake)

<span class="org-comment">#=========== Targets =====================# </span>

<span class="org-function-name">add_executable</span>(tinyxml2-test tinyxml2-test.cpp)
<span class="org-function-name">target_link_libraries</span>(tinyxml2-test PRIVATE ${<span class="org-variable-name">tinyxml2_LIBRARY</span>})
</pre>
</div>

<p>
File: <b>tinyxml2_helper.cmake</b> 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-comment"># Credits: https://github.com/nicolastagliani/conan-tinyxml2/issues/3</span>
<span class="org-function-name">include</span>( FindPackageHandleStandardArgs )

<span class="org-function-name">find_path</span>( tinyxml2_INCLUDE_DIR
  NAMES
    tinyxml2.h
  PATHS
    ${<span class="org-variable-name">CONAN_INCLUDE_DIRS_TINYXML2</span>}
)

<span class="org-function-name">find_library</span>( tinyxml2_LIBRARY
  NAMES
    ${<span class="org-variable-name">CONAN_LIBS_TINYXML2</span>}
  PATHS
    ${<span class="org-variable-name">CONAN_LIB_DIRS_TINYXML2</span>}
)

<span class="org-function-name">find_package_handle_standard_args</span>( tinyxml2 DEFAULT_MSG
  tinyxml2_INCLUDE_DIR
)

<span class="org-keyword">if</span>( tinyxml2_FOUND )
  <span class="org-function-name">set</span>( tinyxml2_INCLUDE_DIRS ${<span class="org-variable-name">tinyxml2_INCLUDE_DIR</span>} )
  <span class="org-function-name">set</span>( tinyxml2_LIBRARIES ${<span class="org-variable-name">tinyxml2_LIBRARY</span>} )

  <span class="org-function-name">get_filename_component</span>( tinyxml2_CONFIG_PATH ${<span class="org-variable-name">CONAN_TINYXML2_ROOT</span>} DIRECTORY )
  <span class="org-function-name">get_filename_component</span>( tinyxml2_HASH ${<span class="org-variable-name">CONAN_TINYXML2_ROOT</span>} NAME )
  <span class="org-function-name">get_filename_component</span>( tinyxml2_CONFIG_PATH ${<span class="org-variable-name">tinyxml2_CONFIG_PATH</span>} DIRECTORY )
  <span class="org-function-name">set</span>( tinyxml2_CONFIG_PATH  ${<span class="org-variable-name">tinyxml2_CONFIG_PATH</span>}/build/${<span class="org-variable-name">tinyxml2_HASH</span>} )
  <span class="org-function-name">set</span>( tinyxml2_CONFIG_FILENAME tinyxml2Config.cmake )

  <span class="org-function-name">find_file</span>( tinyxml2_CONFIG_DIR
      ${<span class="org-variable-name">tinyxml2_CONFIG_FILENAME</span>}
    HINTS
      ${<span class="org-variable-name">tinyxml2_CONFIG_PATH</span>}
  )

  <span class="org-keyword">if</span>( tinyxml2_CONFIG_DIR-NOTFOUND )
    <span class="org-function-name">set</span>( tinyxml2_CONFIG <span class="org-string">""</span> )
  <span class="org-keyword">else</span>()
    <span class="org-function-name">set</span>( tinyxml2_CONFIG ${<span class="org-variable-name">tinyxml2_CONFIG_DIR</span>} )
  <span class="org-keyword">endif</span>()

  <span class="org-function-name">mark_as_advanced</span>(
    tinyxml2_INCLUDE_DIR
    tinyxml2_LIBRARY
    tinyxml2_DIR
    tinyxml2_CONFIG
  )
<span class="org-keyword">else</span>()
  <span class="org-function-name">set</span>( tinyxml2_DIR <span class="org-string">""</span> CACHE STRING
    <span class="org-string">"An optional hint to a tinyxml2 directory"</span>
  )
<span class="org-keyword">endif</span>()
</pre>
</div>

<p>
<b>Build</b> 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ git clone https://gist.github.com/caiorss/351e291b8df2b0fc8e1bba5c86b7ee4d gist 
$ cd gist 

<span class="org-comment-delimiter"># </span><span class="org-comment">Build with QT Creator </span>
$ qtcreator CMakeLists.txt 

<span class="org-comment-delimiter"># </span><span class="org-comment">Build from command line </span>
$ cmake -H. -Bbuild -DCMAKE_BUILD_TYPE=Debug
$ cmake --build build --target
</pre>
</div>

<p>
<b>Program Output:</b> 
</p>
<ul class="org-ul">
<li>Meaning: USD 1.127 =&gt; Means that 1 Euro = 1.127 USD or that the
exchange rate is 1.127 per Euro.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ build/bin/tinyxml2-test 

 [INFO] Running TinyXMl2 
 [OK] XML parsed successfully
<span class="org-function-name">Value</span>: doc.FirstChild()-&gt;Value() = xml <span class="org-variable-name">version</span>=<span class="org-string">"1.0"</span> <span class="org-variable-name">encoding</span>=<span class="org-string">"UTF-8"</span>
 Element found. OK 
 =&gt;&gt; Element Name = gesmes:Envelope
 =&gt;&gt; Found Node Name: Cube
 =&gt; Time = 2019-06-14

 ===== Exchange rates per Euros ====
       USD          1.127
       JPY        121.900
       BGN          1.956
       CZK         25.540
       DKK          7.468
       GBP          0.891
       HUF        321.530
       PLN          4.253
       RON          4.723
       SEK         10.639
       CHF          1.121
       ISK        141.500
       NOK          9.773
       HRK          7.410
       RUB         72.388
       TRY          6.643
       AUD          1.632
       BRL          4.342
       CAD          1.502
       CNY          7.800
       HKD          8.817
       IDR      16128.100
       ILS          4.052
       INR         78.608
       KRW       1333.600
       MXN         21.607
       MYR          4.698
       NZD          1.724
       PHP         58.539
       SGD          1.540
       THB         35.101
       ZAR         16.653
</pre>
</div>
</div>
</div>

<div id="outline-container-org9de0314" class="outline-4">
<h4 id="org9de0314"><span class="section-number-4">1.8.2</span> PugiXML - Lightweight XML parser</h4>
<div class="outline-text-4" id="text-1-8-2">
<p>
PugiXML is lightweight XML parsing library with DOM (Document Object
Model) transversing and XPATH capabilities. 
</p>

<p>
Official Web Site: 
</p>
<ul class="org-ul">
<li><a href="https://pugixml.org/">https://pugixml.org/</a></li>
</ul>

<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="https://pugixml.org/docs/manual.html">https://pugixml.org/docs/manual.html</a></li>
</ul>

<p>
Repository: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/zeux/pugixml">https://github.com/zeux/pugixml</a></li>
</ul>

<p>
Conan Reference: 
</p>
<ul class="org-ul">
<li><a href="https://bintray.com/bincrafters/public-conan/pugixml%3Abincrafters/1.9%3Astable">pugixml/1.9@bincrafters/stable</a></li>
</ul>


<p>
<b>Example:</b> 
</p>

<p>
File: <b>pugixml_test1.cpp</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">pugixml.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">extern</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">exchangeRatesXML</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">This input stream 'is' can be replaced by</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">any other input stream without any code modification</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">such as:  std::ifstream is("/tmp/input-file.xml")</span>
    <span class="org-constant">std</span>::<span class="org-type">stringstream</span> <span class="org-variable-name">is</span><span class="org-rainbow-delimiters-depth-2">{</span>exchangeRatesXML<span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-constant">pugi</span>::<span class="org-type">xml_document</span>     <span class="org-variable-name">doc</span>;
    <span class="org-constant">pugi</span>::<span class="org-type">xml_parse_result</span> <span class="org-variable-name">result</span> = doc.load<span class="org-rainbow-delimiters-depth-2">(</span>is<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>result<span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [ERROR] Failed to parse the XML. Invalid file."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-constant">std</span>::exit<span class="org-rainbow-delimiters-depth-3">(</span>EXIT_FAILURE<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">sender_name</span> = doc.child<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"gesmes:Envelope"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                  .child<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"gesmes:Sender"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                  .child_value<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"gesmes:name"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">type: const char*</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">subject</span> = doc.child<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"gesmes:Envelope"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                      .child_value<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"gesmes:subject"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">time</span> = doc.child<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"gesmes:Envelope"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                   .child<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Cube"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                   .child<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Cube"</span><span class="org-rainbow-delimiters-depth-2">)</span>.attribute<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"time"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                   .value<span class="org-rainbow-delimiters-depth-2">()</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ========= DOCUMENT INFO ================"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Sender name = "</span> &lt;&lt; sender_name &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;     Subject = "</span> &lt;&lt; subject &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;        Time = "</span> &lt;&lt; time &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-keyword">auto</span> <span class="org-variable-name">parent</span> = doc.child<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"gesmes:Envelope"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                              .child<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Cube"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                              .child<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Cube"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-2">(</span>3<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt;<span class="org-string">"\n Exchange Rates per EURO "</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">node</span> : parent<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; node.attribute<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"currency"</span><span class="org-rainbow-delimiters-depth-3">)</span>.value<span class="org-rainbow-delimiters-depth-3">()</span>
                  &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-3">(</span>node.attribute<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"rate"</span><span class="org-rainbow-delimiters-depth-4">)</span>.value<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
                  &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n\n *********** Extracting Data with XPATH ********\n\n"</span>;

    <span class="org-constant">pugi</span>::<span class="org-type">xpath_node</span> <span class="org-variable-name">sender_name2</span> = doc.select_node<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"//gesmes:name"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Sender = "</span> &lt;&lt; sender_name2.node<span class="org-rainbow-delimiters-depth-2">()</span>.child_value<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-keyword">auto</span> <span class="org-variable-name">time2</span> = doc.select_node<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"//Cube[@time]"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Time = "</span> &lt;&lt; time2.node<span class="org-rainbow-delimiters-depth-2">()</span>.attribute<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"time"</span><span class="org-rainbow-delimiters-depth-2">)</span>.value<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt;<span class="org-string">"\n Exchange Rates per EURO - Extracted with XPATH "</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Type: pugi::xpath_node_set</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">dataNodes</span> = doc.select_nodes<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"/gesmes:Envelope/Cube/Cube/Cube"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">n</span> : dataNodes<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; n.node<span class="org-rainbow-delimiters-depth-3">()</span>.attribute<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"currency"</span><span class="org-rainbow-delimiters-depth-3">)</span>.value<span class="org-rainbow-delimiters-depth-3">()</span>
                  &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-3">(</span>n.node<span class="org-rainbow-delimiters-depth-4">()</span>.attribute<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"rate"</span><span class="org-rainbow-delimiters-depth-4">)</span>.value<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
                  &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>


    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Source: https://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml</span>
<span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">exchangeRatesXML</span> = R<span class="org-default">"</span><span class="org-string">(</span>
<span class="org-string">   &lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="org-string">   &lt;gesmes:Envelope</span>
<span class="org-string">                xmlns:gesmes="http://www.gesmes.org/xml/2002-08-01"</span>
<span class="org-string">                xmlns="http://www.ecb.int/vocabulary/2002-08-01/eurofxref"&gt;</span>

<span class="org-string">       &lt;gesmes:subject&gt;Reference rates&lt;/gesmes:subject&gt;</span>
<span class="org-string">       &lt;gesmes:Sender&gt;</span>
<span class="org-string">           &lt;gesmes:name&gt;European Central Bank&lt;/gesmes:name&gt;</span>
<span class="org-string">       &lt;/gesmes:Sender&gt;</span>
<span class="org-string">       &lt;Cube&gt;</span>
<span class="org-string">           &lt;Cube time='2019-06-14'&gt;</span>
<span class="org-string">               &lt;Cube currency='USD' rate='1.1265'/&gt;</span>
<span class="org-string">               &lt;Cube currency='JPY' rate='121.90'/&gt;</span>
<span class="org-string">               &lt;Cube currency='BGN' rate='1.9558'/&gt;</span>
<span class="org-string">               &lt;Cube currency='CZK' rate='25.540'/&gt;</span>
<span class="org-string">               &lt;Cube currency='DKK' rate='7.4676'/&gt;</span>
<span class="org-string">               &lt;Cube currency='GBP' rate='0.89093'/&gt;</span>
<span class="org-string">               &lt;Cube currency='HUF' rate='321.53'/&gt;</span>
<span class="org-string">               &lt;Cube currency='PLN' rate='4.2534'/&gt;</span>
<span class="org-string">               &lt;Cube currency='RON' rate='4.7233'/&gt;</span>
<span class="org-string">               &lt;Cube currency='SEK' rate='10.6390'/&gt;</span>
<span class="org-string">               &lt;Cube currency='CHF' rate='1.1211'/&gt;</span>
<span class="org-string">               &lt;Cube currency='ISK' rate='141.50'/&gt;</span>
<span class="org-string">               &lt;Cube currency='NOK' rate='9.7728'/&gt;</span>
<span class="org-string">               &lt;Cube currency='HRK' rate='7.4105'/&gt;</span>
<span class="org-string">           &lt;/Cube&gt;</span>
<span class="org-string">       &lt;/Cube&gt;</span>
<span class="org-string">   &lt;/gesmes:Envelope&gt;</span>
<span class="org-string">)</span><span class="org-default">"</span>;

</pre>
</div>

<p>
File: CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(purgixml)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment"># ============= Conan Boosttrap =========================#</span>

<span class="org-comment"># Download automatically, you can also just copy the conan.cmake file</span>
<span class="org-keyword">if</span>(NOT EXISTS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
   <span class="org-function-name">message</span>(STATUS <span class="org-string">"Downloading conan.cmake from https://github.com/conan-io/cmake-conan"</span>)
   <span class="org-function-name">file</span>(DOWNLOAD <span class="org-string">"https://github.com/conan-io/cmake-conan/raw/v0.13/conan.cmake"</span>
                 <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
<span class="org-keyword">endif</span>()

<span class="org-function-name">include</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/conan.cmake)

<span class="org-comment"># Possible values "default" and "llvm8"</span>
<span class="org-function-name">set</span>(CONAN_PROFILE default)

<span class="org-function-name">conan_cmake_run</span>(REQUIRES
                  pugixml/1.9@bincrafters/stable
                BASIC_SETUP
                BUILD missing)

<span class="org-comment"># ============= Find Package ===========================#</span>

<span class="org-function-name">find_package</span>(pugixml REQUIRED)

<span class="org-comment">#============= Targets Settings ========================#</span>

<span class="org-function-name">add_executable</span>(pugixml_test1 pugixml_test1.cpp)
<span class="org-function-name">target_link_libraries</span>(pugixml_test1 pugixml)
</pre>
</div>

<p>
Program output: 
</p>

<div class="org-src-container">
<pre class="src src-text">========= DOCUMENT INFO ================
 =&gt; Sender name = European Central Bank
 =&gt;     Subject = Reference rates
 =&gt;        Time = 2019-06-14

 Exchange Rates per EURO 
       USD     1.127
       JPY   121.900
       BGN     1.956
       CZK    25.540
       DKK     7.468
       GBP     0.891
       HUF   321.530
       PLN     4.253
       RON     4.723
       SEK    10.639
       CHF     1.121
       ISK   141.500
       NOK     9.773
       HRK     7.410


 *********** Extracting Data with XPATH ********

 Sender = European Central Bank
 Time = 2019-06-14

 Exchange Rates per EURO - Extracted with XPATH 
       USD     1.127
       JPY   121.900
       BGN     1.956
       CZK    25.540
       DKK     7.468
       GBP     0.891
       HUF   321.530
       PLN     4.253
       RON     4.723
       SEK    10.639
       CHF     1.121
       ISK   141.500
       NOK     9.773
       HRK     7.410
</pre>
</div>
</div>
</div>

<div id="outline-container-orga66d7dc" class="outline-4">
<h4 id="orga66d7dc"><span class="section-number-4">1.8.3</span> nlohmann JSON Parser Library</h4>
<div class="outline-text-4" id="text-1-8-3">
<p>
Easy to use single-file header-only library for parsing and writing
<a href="http://json.org/">JSON</a> (Javascript Object Notation).
</p>

<ul class="org-ul">
<li>Library Repository:
<ul class="org-ul">
<li><a href="https://github.com/nlohmann/json">https://github.com/nlohmann/json</a></li>
</ul></li>

<li>Conan Recipe Repository:
<ul class="org-ul">
<li><a href="https://github.com/vthiery/conan-jsonformoderncpp">https://github.com/vthiery/conan-jsonformoderncpp</a></li>
</ul></li>

<li>Conan Reference:
<ul class="org-ul">
<li><a href="https://bintray.com/vthiery/conan-packages/jsonformoderncpp%3Avthiery/3.7.0%3Astable">jsonformoderncpp/3.7.0@vthiery/stable</a></li>
</ul></li>
</ul>

<p>
<b>Example:</b> 
</p>

<ul class="org-ul">
<li>File: CMakeLists.txt
<ul class="org-ul">
<li>Version with Conan</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.14 FATAL_ERROR)
<span class="org-function-name">project</span>(cppjson)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment"># ============= Conan Bootstrap =============================#</span>

<span class="org-comment"># Download automatically, you can also just copy the conan.cmake file</span>
<span class="org-keyword">if</span>(NOT EXISTS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
   <span class="org-function-name">message</span>(STATUS <span class="org-string">"Downloading conan.cmake from https://github.com/conan-io/cmake-conan"</span>)
   <span class="org-function-name">file</span>(DOWNLOAD <span class="org-string">"https://github.com/conan-io/cmake-conan/raw/v0.13/conan.cmake"</span>
                 <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
<span class="org-keyword">endif</span>()

<span class="org-function-name">include</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/conan.cmake)

<span class="org-function-name">conan_cmake_run</span>(REQUIRES     
                             jsonformoderncpp/3.7.0@vthiery/stable
                BASIC_SETUP
                BUILD missing
                )
<span class="org-comment">#===== Targets ===========================#</span>

<span class="org-comment"># Conan package: jsonformoderncpp/3.7.0@vthiery/stable</span>
<span class="org-function-name">find_package</span>(nlohmann_json 3.2.0 REQUIRED)
<span class="org-function-name">add_executable</span>(json-parse  json-parse.cpp)
<span class="org-function-name">target_link_libraries</span>(json-parse nlohmann_json::nlohmann_json)
</pre>
</div>

<ul class="org-ul">
<li>File: CMakeLists.txt
<ul class="org-ul">
<li>Version without Conan with custom macro</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.14 FATAL_ERROR)
<span class="org-function-name">project</span>(cmake-experiment)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-keyword">macro</span>(Download_Single_Headerlib_dir FILE PATH URL)
    <span class="org-function-name">file</span>(DOWNLOAD ${<span class="org-variable-name">URL</span>} ${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/include/${<span class="org-variable-name">PATH</span>}${<span class="org-variable-name">FILE</span>})
    <span class="org-keyword">IF</span>(NOT Download_Single_Headerlib_flag)
       <span class="org-function-name">include_directories</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/include)
       <span class="org-function-name">set</span>(Download_Single_Headerlib_flag TRUE)
    <span class="org-keyword">ENDIF</span>()
<span class="org-keyword">endmacro</span>()

<span class="org-comment"># #include &lt;nlohmann/json.hpp&gt;</span>
<span class="org-function-name">Download_Single_Headerlib_dir</span>(
     json.hpp <span class="org-string">"nlohmann/"</span>
    <span class="org-string">"https://github.com/nlohmann/json/raw/develop/single_include/nlohmann/json.hpp"</span>
)

<span class="org-comment"># --------------------------------------------#</span>

<span class="org-function-name">add_executable</span>(json-parse json-parse.cpp)
</pre>
</div>

<ul class="org-ul">
<li>File: json-parse.cpp</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">nlohmann/json.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">using</span> <span class="org-type">json</span> = <span class="org-constant">nlohmann</span>::json;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n====== EXPERIMETN 1 - Create JSON Object ==========================="</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-type">json</span> <span class="org-variable-name">top</span>;
        top<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"hero1"</span><span class="org-rainbow-delimiters-depth-3">]</span> = <span class="org-string">"John Von Neumman / Modern Computers"</span>;
        top<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"hero2"</span><span class="org-rainbow-delimiters-depth-3">]</span> = <span class="org-string">"Dennis Ritchie / C Language"</span>;
        top<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"points"</span><span class="org-rainbow-delimiters-depth-3">]</span> = 200;
        top<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"list_number"</span><span class="org-rainbow-delimiters-depth-3">]</span>  = <span class="org-rainbow-delimiters-depth-3">{</span>1, 2, 3, 3, 4, 5, 6<span class="org-rainbow-delimiters-depth-3">}</span>;
        top<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"list_string"</span><span class="org-rainbow-delimiters-depth-3">]</span>  = <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"Rice"</span>, <span class="org-string">"Coffee"</span>, <span class="org-string">"Beans"</span>, <span class="org-string">"Milk"</span><span class="org-rainbow-delimiters-depth-3">}</span>;

        top<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"currency_basket"</span><span class="org-rainbow-delimiters-depth-3">]</span> = <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-rainbow-delimiters-depth-4">{</span><span class="org-string">"USD"</span>, 10<span class="org-rainbow-delimiters-depth-4">}</span>, <span class="org-rainbow-delimiters-depth-4">{</span><span class="org-string">"BRL"</span>, 2000<span class="org-rainbow-delimiters-depth-4">}</span>, <span class="org-rainbow-delimiters-depth-4">{</span><span class="org-string">"CAD"</span>, 90<span class="org-rainbow-delimiters-depth-4">}</span>, <span class="org-rainbow-delimiters-depth-4">{</span><span class="org-string">"AUD"</span>, <span class="org-string">"N/A"</span><span class="org-rainbow-delimiters-depth-4">}</span><span class="org-rainbow-delimiters-depth-3">}</span>;

        <span class="org-type">json</span> <span class="org-variable-name">cd</span>;
        cd<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"latitude"</span><span class="org-rainbow-delimiters-depth-3">]</span>  = -23.5505;
        cd<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"longitude"</span><span class="org-rainbow-delimiters-depth-3">]</span> = -46.6333;
        cd<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"location"</span><span class="org-rainbow-delimiters-depth-3">]</span>  = <span class="org-string">"S&#227;o Paulo city"</span>;

        top<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"coordiante"</span><span class="org-rainbow-delimiters-depth-3">]</span> = cd;

        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n VALUE OF JSON [NOT PRETTY PRINT] = "</span>
                  &lt;&lt; top &lt;&lt; <span class="org-constant">std</span>::endl;

        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n VALUE OF JSON [PRETTY PRINT] = "</span>
                  &lt;&lt; top.dump<span class="org-rainbow-delimiters-depth-3">(</span>4<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-rainbow-delimiters-depth-2">}</span>

     <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n====== EXPERIMETN 2 - Deserialization from string literal ==========="</span><span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-type">json</span> <span class="org-variable-name">d</span>;

         <span class="org-keyword">try</span> <span class="org-rainbow-delimiters-depth-3">{</span>
             <span class="org-comment-delimiter">// </span><span class="org-comment">Parsing from string literal</span>
             d = R<span class="org-default">"</span><span class="org-string">(</span>
<span class="org-string">                      {</span>
<span class="org-string">                        "x"            : 1956.2322</span>
<span class="org-string">                      , "y"            : 1000</span>
<span class="org-string">                      , "name"        : "Dennis Ritchie"</span>
<span class="org-string">                      , "fruits" : [ "orange", "jabuticaba", "banana", "apple"  ]</span>
<span class="org-string">                      , "basket" : { "BONDS": 1235, "CDS": 200.354, "FX": 500</span>
<span class="org-string">                                     , "market": "Emergin Markets"}</span>
<span class="org-string">                     }</span>
<span class="org-string">               )</span><span class="org-default">"</span>_json;
         <span class="org-rainbow-delimiters-depth-3">}</span> <span class="org-keyword">catch</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">nlohmann</span>::<span class="org-constant">detail</span>::<span class="org-type">parse_error</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">{</span>
             <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [ERROR] I cannot parse it: "</span> &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-4">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-rainbow-delimiters-depth-3">}</span>

         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n VALUE OF JSON PRETTY PRINT = "</span> &lt;&lt; d.dump<span class="org-rainbow-delimiters-depth-3">(</span>3<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;

         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [RESULT]    x = "</span> &lt;&lt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span>d<span class="org-rainbow-delimiters-depth-4">[</span><span class="org-string">"x"</span><span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [RESULT]    x = "</span> &lt;&lt; d<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"x"</span><span class="org-rainbow-delimiters-depth-3">]</span>.get<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [RESULT]    y = "</span> &lt;&lt; d<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"y"</span><span class="org-rainbow-delimiters-depth-3">]</span>.get<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-3">&gt;()</span>    &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [RESULT] name = "</span> &lt;&lt; d<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"name"</span><span class="org-rainbow-delimiters-depth-3">]</span>.get<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-3">&gt;()</span> &lt;&lt; <span class="org-constant">std</span>::endl;

         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [RESULT] fruit[0] = "</span> &lt;&lt; d<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"fruits"</span><span class="org-rainbow-delimiters-depth-3">][</span>0<span class="org-rainbow-delimiters-depth-3">]</span> &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [RESULT] fruit[1] = "</span> &lt;&lt; d<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"fruits"</span><span class="org-rainbow-delimiters-depth-3">][</span>1<span class="org-rainbow-delimiters-depth-3">]</span> &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [RESULT] fruit[2] = "</span> &lt;&lt; d<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"fruits"</span><span class="org-rainbow-delimiters-depth-3">][</span>2<span class="org-rainbow-delimiters-depth-3">]</span>.get<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-3">&gt;()</span> &lt;&lt; <span class="org-constant">std</span>::endl;

         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [RESULT]  d['basket']['BONDS'] = "</span>
                   &lt;&lt; d<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"basket"</span><span class="org-rainbow-delimiters-depth-3">][</span><span class="org-string">"BONDS"</span><span class="org-rainbow-delimiters-depth-3">]</span>.get<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-3">&gt;()</span>
                   &lt;&lt; <span class="org-constant">std</span>::endl;

         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [RESULT]  d['basket']['CDS'] = "</span>
                   &lt;&lt; d<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"basket"</span><span class="org-rainbow-delimiters-depth-3">][</span><span class="org-string">"CDS"</span><span class="org-rainbow-delimiters-depth-3">]</span>.get<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;()</span>
                   &lt;&lt; <span class="org-constant">std</span>::endl;

         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [RESULT]  d['basket']['market'] = "</span>
                   &lt;&lt; d<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"basket"</span><span class="org-rainbow-delimiters-depth-3">][</span><span class="org-string">"market"</span><span class="org-rainbow-delimiters-depth-3">]</span>.get<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-3">&gt;()</span>
                   &lt;&lt; <span class="org-constant">std</span>::endl;

         <span class="org-comment-delimiter">// </span><span class="org-comment">Attempt to generate a parser error</span>
         <span class="org-keyword">try</span>
         <span class="org-rainbow-delimiters-depth-3">{</span>
             <span class="org-comment-delimiter">// </span><span class="org-comment">Note: Expects failure, the exception will be thrown!</span>
             <span class="org-type">double</span> <span class="org-variable-name">value</span> = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-4">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-4">&gt;(</span>d<span class="org-rainbow-delimiters-depth-5">[</span><span class="org-string">"name"</span><span class="org-rainbow-delimiters-depth-5">]</span><span class="org-rainbow-delimiters-depth-4">)</span>;
             <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [RESULT]  2 *  x = "</span> &lt;&lt;  2 * value
                       &lt;&lt; <span class="org-string">"\n\n"</span>;
         <span class="org-rainbow-delimiters-depth-3">}</span> <span class="org-keyword">catch</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">nlohmann</span>::<span class="org-constant">detail</span>::<span class="org-type">type_error</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-3">)</span>
         <span class="org-rainbow-delimiters-depth-3">{</span>
             <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [ERROR] err = "</span> &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-4">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-rainbow-delimiters-depth-3">}</span>


     <span class="org-rainbow-delimiters-depth-2">}</span>

     <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n====== EXPERIMETN 3 - Deserialization from stream ==========="</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">json_text</span> = R<span class="org-default">"</span><span class="org-string">(</span>
<span class="org-string">                      {</span>
<span class="org-string">                        "x"            : 1956.2322</span>
<span class="org-string">                      , "y"            : 1000</span>
<span class="org-string">                      , "flag"         : true</span>
<span class="org-string">                      , "name"         : "Dennis Ritchie"</span>
<span class="org-string">                      , "asset_basket" : { "CAD": 100, "BRL": 200, "USD": 500}</span>
<span class="org-string">                     }</span>
<span class="org-string">               )</span><span class="org-default">"</span>;

         <span class="org-type">json</span> <span class="org-variable-name">js</span>;
         <span class="org-comment-delimiter">/* </span><span class="org-comment">Input stream could be a file:</span>
<span class="org-comment">          *     auto is = std::ifstream("/tmp/file");</span>
<span class="org-comment">          *------------------------------------------*/</span>
         <span class="org-keyword">auto</span> <span class="org-variable-name">is</span> = <span class="org-constant">std</span>::stringstream<span class="org-rainbow-delimiters-depth-3">(</span>json_text<span class="org-rainbow-delimiters-depth-3">)</span>;
         is &gt;&gt; js; <span class="org-comment-delimiter">// </span><span class="org-comment">Extract from memory stream</span>

         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::boolalpha;
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" JSON VALUE = "</span> &lt;&lt; js.dump<span class="org-rainbow-delimiters-depth-3">(</span>4<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;

         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;      is_null(x) = "</span> &lt;&lt; js<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"x"</span><span class="org-rainbow-delimiters-depth-3">]</span>.is_null<span class="org-rainbow-delimiters-depth-3">()</span>    &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;   is_boolean(x) = "</span> &lt;&lt; js<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"x"</span><span class="org-rainbow-delimiters-depth-3">]</span>.is_boolean<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;    is_number(x) = "</span> &lt;&lt; js<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"x"</span><span class="org-rainbow-delimiters-depth-3">]</span>.is_number<span class="org-rainbow-delimiters-depth-3">()</span>  &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; is_string(name) = "</span> &lt;&lt; js<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"name"</span><span class="org-rainbow-delimiters-depth-3">]</span>.is_string<span class="org-rainbow-delimiters-depth-3">()</span>  &lt;&lt; <span class="org-constant">std</span>::endl;

         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;    is_string(asset_basket) = "</span>
                   &lt;&lt; js<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"asset_basket"</span><span class="org-rainbow-delimiters-depth-3">]</span>.is_string<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;

         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;    is_object(asset_basket) = "</span>
                   &lt;&lt; js<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"asset_basket"</span><span class="org-rainbow-delimiters-depth-3">]</span>.is_object<span class="org-rainbow-delimiters-depth-3">()</span>  &lt;&lt; <span class="org-constant">std</span>::endl;

         <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"\n  &gt;&gt;&gt;--|&gt;&gt;&gt; Iterate Over JSON AST - Abstract Syntax Tree &lt;&lt;&lt;|---&lt;&lt;&lt; "</span><span class="org-rainbow-delimiters-depth-3">)</span>;

         <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">element</span>: js<span class="org-rainbow-delimiters-depth-3">)</span>
             <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; element = "</span> &lt;&lt; element &lt;&lt; <span class="org-constant">std</span>::endl;

     <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-sh">====== EXPERIMETN 1 - Create JSON Object ===========================

 VALUE OF JSON [NOT PRETTY PRINT] = {<span class="org-string">"coordiante"</span>:{<span class="org-string">"latitude"</span>:-23.5505,<span class="org-string">"location"</span>:<span class="org-string">"S&#227;o Paulo city"</span>,<span class="org-string">"longitude"</span>:-46.6333}, ....}

 VALUE OF JSON [PRETTY PRINT] = {
    <span class="org-string">"coordiante"</span>: {
        <span class="org-string">"latitude"</span>: -23.5505,
        <span class="org-string">"location"</span>: <span class="org-string">"S&#227;o Paulo city"</span>,
        <span class="org-string">"longitude"</span>: -46.6333
    },
    <span class="org-string">"currency_basket"</span>: {
        <span class="org-string">"AUD"</span>: <span class="org-string">"N/A"</span>,
        <span class="org-string">"BRL"</span>: 2000,
        <span class="org-string">"CAD"</span>: 90,
        <span class="org-string">"USD"</span>: 10
    },
    <span class="org-string">"hero1"</span>: <span class="org-string">"John Von Neumman / Modern Computers"</span>,
    <span class="org-string">"hero2"</span>: <span class="org-string">"Dennis Ritchie / C Language"</span>,
    <span class="org-string">"list_number"</span>: [
        1,
        2,
        3,
        3,
        4,
        5,
        6
    ],
    <span class="org-string">"list_string"</span>: [
        <span class="org-string">"Rice"</span>,
        <span class="org-string">"Coffee"</span>,
        <span class="org-string">"Beans"</span>,
        <span class="org-string">"Milk"</span>
    ],
    <span class="org-string">"points"</span>: 200
}

====== EXPERIMETN 2 - Deserialization from string literal ===========

 VALUE OF JSON PRETTY PRINT = {
   <span class="org-string">"basket"</span>: {
      <span class="org-string">"BONDS"</span>: 1235,
      <span class="org-string">"CDS"</span>: 200.354,
      <span class="org-string">"FX"</span>: 500,
      <span class="org-string">"market"</span>: <span class="org-string">"Emergin Markets"</span>
   },
   <span class="org-string">"fruits"</span>: [
      <span class="org-string">"orange"</span>,
      <span class="org-string">"jabuticaba"</span>,
      <span class="org-string">"banana"</span>,
      <span class="org-string">"apple"</span>
   ],
   <span class="org-string">"name"</span>: <span class="org-string">"Dennis Ritchie"</span>,
   <span class="org-string">"x"</span>: 1956.2322,
   <span class="org-string">"y"</span>: 1000
}
 [RESULT]    x = 1956.23
 [RESULT]    x = 1956.23
 [RESULT]    y = 1000
 [RESULT] name = Dennis Ritchie
 [RESULT] fruit[0] = <span class="org-string">"orange"</span>
 [RESULT] fruit[1] = <span class="org-string">"jabuticaba"</span>
 [RESULT] fruit[2] = banana
 [RESULT]  d[<span class="org-string">'basket'</span>][<span class="org-string">'BONDS'</span>] = 1235
 [RESULT]  d[<span class="org-string">'basket'</span>][<span class="org-string">'CDS'</span>] = 200.354
 [RESULT]  d[<span class="org-string">'basket'</span>][<span class="org-string">'market'</span>] = Emergin Markets
 [ERROR] err = [json.exception.type_error.302] type must be number, but is string

====== EXPERIMETN 3 - Deserialization from stream ===========
 JSON VALUE = {
    <span class="org-string">"asset_basket"</span>: {
        <span class="org-string">"BRL"</span>: 200,
        <span class="org-string">"CAD"</span>: 100,
        <span class="org-string">"USD"</span>: 500
    },
    <span class="org-string">"flag"</span>: true,
    <span class="org-string">"name"</span>: <span class="org-string">"Dennis Ritchie"</span>,
    <span class="org-string">"x"</span>: 1956.2322,
    <span class="org-string">"y"</span>: 1000
}
 =&gt;      is_null(x) = false
 =&gt;   is_boolean(x) = false
 =&gt;    is_number(x) = true
 =&gt; is_string(name) = true
 =&gt;    is_string(asset_basket) = false
 =&gt;    is_object(asset_basket) = true

  &gt;&gt;&gt;--|&gt;&gt;&gt; Iterate Over JSON AST - Abstract Syntax Tree &lt;&lt;&lt;|---&lt;&lt;&lt; 
 =&gt; element = {<span class="org-string">"BRL"</span>:200,<span class="org-string">"CAD"</span>:100,<span class="org-string">"USD"</span>:500}
 =&gt; element = true
 =&gt; element = <span class="org-string">"Dennis Ritchie"</span>
 =&gt; element = 1956.2322
 =&gt; element = 1000

</pre>
</div>
</div>
</div>

<div id="outline-container-orgdf58452" class="outline-4">
<h4 id="orgdf58452"><span class="section-number-4">1.8.4</span> cpptoml configuration parser</h4>
<div class="outline-text-4" id="text-1-8-4">
<p>
cpptoml is a single-file header-only library for parsing <a href="https://github.com/toml-lang/toml">TOML</a> 
configuration files that resembles the Windows INI files and are more
lightweight than XML and JSON.
</p>

<p>
Repository: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/skystrife/cpptoml">https://github.com/skystrife/cpptoml</a></li>
</ul>

<p>
Download the library: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cd &lt;PROJECT_DIR&gt; 
$ curl -O -L https://raw.githubusercontent.com/skystrife/cpptoml/v0.1.1/include/cpptoml.h
</pre>
</div>

<p>
File: main.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cpptoml.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">template</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">using</span> <span class="org-type">sh</span> = <span class="org-constant">std</span>::<span class="org-type">shared_ptr</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>;

<span class="org-keyword">extern</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">tomlData</span>;


<span class="org-type">void</span> <span class="org-function-name">parseConfiguration</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">istream</span>&amp; <span class="org-variable-name">is</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">cpptoml</span>::<span class="org-type">parser</span> <span class="org-variable-name">p</span><span class="org-rainbow-delimiters-depth-2">{</span>is<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-type">sh</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">cpptoml</span>::table<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">config</span> = p.parse<span class="org-rainbow-delimiters-depth-2">()</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n --- TOML Configuration data read from input stream ------\n"</span>;

    <span class="org-type">int</span> <span class="org-variable-name">loglevel</span>  = config-&gt;get_qualified_as<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"INFO.loglevel"</span><span class="org-rainbow-delimiters-depth-2">)</span>.value_or<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">userName</span> = config-&gt;get_qualified_as<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"INFO.user"</span><span class="org-rainbow-delimiters-depth-2">)</span>.value_or<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"unnamed"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">file</span>     = config-&gt;get_qualified_as<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"INFO.file"</span><span class="org-rainbow-delimiters-depth-2">)</span>.value_or<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">""</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">port</span>     = config-&gt;get_qualified_as<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"SERVER.port"</span><span class="org-rainbow-delimiters-depth-2">)</span>.value_or<span class="org-rainbow-delimiters-depth-2">(</span>8080<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; loglevel = "</span> &lt;&lt; loglevel &lt;&lt; <span class="org-string">"\n"</span>
              &lt;&lt; <span class="org-string">" =&gt; userName = "</span> &lt;&lt; userName &lt;&lt; <span class="org-string">"\n"</span>
              &lt;&lt; <span class="org-string">" =&gt; file     = "</span> &lt;&lt; file &lt;&lt; <span class="org-string">"\n"</span>
              &lt;&lt; <span class="org-string">" =&gt; port     = "</span> &lt;&lt; port &lt;&lt; <span class="org-string">"\n"</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">locations</span> = config-&gt;get_qualified_array_of<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"SERVER.directories"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>locations<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [ERROR] SERVER.directories not found."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">path</span>: *locations<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" path: "</span> &lt;&lt; path &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>argc == 1<span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" Error: invalid option "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-keyword">return</span> EXIT_FAILURE;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">cmd</span> = argv<span class="org-rainbow-delimiters-depth-2">[</span>1<span class="org-rainbow-delimiters-depth-2">]</span>;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>cmd == <span class="org-string">"-stream"</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">is</span> = <span class="org-constant">std</span>::stringstream<span class="org-rainbow-delimiters-depth-3">(</span>tomlData<span class="org-rainbow-delimiters-depth-3">)</span>;
        parseConfiguration<span class="org-rainbow-delimiters-depth-3">(</span>is<span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-keyword">return</span> EXIT_SUCCESS;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>cmd == <span class="org-string">"-file"</span>  &amp;&amp; argc == 3<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">is</span> = <span class="org-constant">std</span>::ifstream<span class="org-rainbow-delimiters-depth-3">(</span>argv<span class="org-rainbow-delimiters-depth-4">[</span>2<span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-negation-char">!</span>is<span class="org-rainbow-delimiters-depth-3">){</span>
            <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"Error: file not found."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
            <span class="org-constant">std</span>::exit<span class="org-rainbow-delimiters-depth-4">(</span>EXIT_FAILURE<span class="org-rainbow-delimiters-depth-4">)</span>;
        <span class="org-rainbow-delimiters-depth-3">}</span>
        parseConfiguration<span class="org-rainbow-delimiters-depth-3">(</span>is<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">return</span> EXIT_SUCCESS;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" Error: invalid option. "</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">tomlData</span> = R<span class="org-default">"</span><span class="org-string">(</span>
<span class="org-string">[INFO]</span>
<span class="org-string"> loglevel = 10</span>
<span class="org-string"> user     = "Dummy user"</span>
<span class="org-string"> file     = "C:\\Users\\somebody\\storage\\data.log"</span>

<span class="org-string">[SERVER]</span>
<span class="org-string">  host = "127.0.0.1"</span>
<span class="org-string">  port = 9090</span>
<span class="org-string">  directories = [</span>
<span class="org-string">      "C:\\Users\\somebody\\Document"</span>
<span class="org-string">     ,"C:\\Users\\somebody\\Upload"</span>
<span class="org-string">     ,"C:\\Users\\somebody\\Pictures"</span>
<span class="org-string">  ]</span>

<span class="org-string">)</span><span class="org-default">"</span>;
</pre>
</div>

<p>
File: server.conf 
</p>

<div class="org-src-container">
<pre class="src src-text">[INFO]
 loglevel = 0 
 user     = "Admin User"
 file     = "C:\\Users\\admin\\files\\log.txt"

[SERVER]
  host = "0.0.0.0"
  port = 9060
  directories = [
      "/Users/admin/Desktop"
      ,"/Applications"
      ,"/Frameworks"
      ,"/tmp"
  ]
</pre>
</div>

<p>
Building: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ main.cpp -o <span class="org-keyword">main.bin</span> -std=c++1z -g -O0 -Wall -Wextra -pedantic

<span class="org-comment-delimiter"># </span><span class="org-comment">Mesaure compile-time </span>
$ time g++ main.cpp -o <span class="org-keyword">main.bin</span> -std=c++1z -g -O0 -Wall -Wextra -pedantic

real    0m2.462s
user    0m2.262s
sys     0m0.172s
</pre>
</div>

<p>
Parse internal data (std::istream): 
</p>

<div class="org-src-container">
<pre class="src src-text">$ ./main.bin -stream

 --- TOML Configuration data read from input stream ------
 =&gt; loglevel = 10
 =&gt; userName = Dummy user
 =&gt; file     = C:\Users\somebody\storage\data.log
 =&gt; port     = 9090
 path: C:\Users\somebody\Document
 path: C:\Users\somebody\Upload
 path: C:\Users\somebody\Pictures

</pre>
</div>

<p>
Parse file (std::ifstream): 
</p>

<div class="org-src-container">
<pre class="src src-text">$ ./main.bin -file server.conf

 --- TOML Configuration data read from input stream ------
 =&gt; loglevel = 0
 =&gt; userName = Admin User
 =&gt; file     = C:\Users\admin\files\log.txt
 =&gt; port     = 9060
 path: /Users/admin/Desktop
 path: /Applications
 path: /Frameworks
 path: /tmp
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org169a3d9" class="outline-3">
<h3 id="org169a3d9"><span class="section-number-3">1.9</span> Unit Testing</h3>
<div class="outline-text-3" id="text-1-9">
</div>
<div id="outline-container-orgd8ca824" class="outline-4">
<h4 id="orgd8ca824"><span class="section-number-4">1.9.1</span> GTest - Unit Testing Framework</h4>
<div class="outline-text-4" id="text-1-9-1">
<p>
GTest or Google test is one of the most used and most popular test
frameworks which supports many features such as mocks; test fixtures;
parameterized tests; XML test report in JUnit / xUnit format; test
discovery and integration with IDEs, namely Eclipse, QTCreator and
Visual Studio.
</p>


<p>
Official Web site:
</p>
<ul class="org-ul">
<li><a href="https://github.com/google/googletest">https://github.com/google/googletest</a></li>
</ul>

<p>
Some Tutorial/Primers: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/google/googletest/blob/master/googletest/docs/primer.md">Google Test Primer</a> (Official)</li>
<li><a href="https://docs.microsoft.com/en-us/visualstudio/test/how-to-use-google-test-for-cpp?view=vs-2019">How to use Google Test for C++ - Visual Studio | Microsoft Docs</a></li>
<li><a href="http://www.yolinux.com/TUTORIALS/Cpp-GoogleTest.html">GoogleTest: C++ unit test framework</a></li>
<li><a href="https://developer.ibm.com/articles/au-googletestingframework/">A quick introduction to the Google C++ Testing Framework â€“ IBM Developer</a></li>
</ul>

<p>
Conan Reference: 
</p>
<ul class="org-ul">
<li><a href="https://bintray.com/conan-community/conan/gtest%3Aconan/1.8.0%3Astable">gtest/1.8.0@conan/stable</a></li>
</ul>

<p>
Test Runner for GTest: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/nholthaus/gtest-runner">https://github.com/nholthaus/gtest-runner</a></li>
</ul>

<p>
CMake Integration:
</p>
<ul class="org-ul">
<li><a href="https://cmake.org/cmake/help/latest/module/FindGTest.html">FindGTest â€” CMake 3.14.4 Documentation</a></li>
</ul>

<p>
Fatal Assertions: 
</p>
<ul class="org-ul">
<li>ASSERT_TRUE</li>
<li>ASSERT_FALSE</li>
<li>ASSERT_EQ(val1, val2)</li>
<li>ASSERT_NE(val1, val2)</li>
<li>ASSERT_LT</li>
<li>ASSERT_GT</li>
<li>ASSERT_GE</li>
</ul>

<p>
Non-fatal assertions Macros: 
</p>

<ul class="org-ul">
<li>EXPECT_TRUE</li>
<li>EXPECT_FALSE</li>
<li>EXPECT_EQ</li>
<li>EXPECT_NQ</li>
<li>EXPECT_DOUBLE_EQ</li>
<li>EXPECT_FLOAT_EQ</li>
<li>EXPECT_NEAR(value1, value2, absolute_tolerance)</li>
<li>TEST(&lt;NAME&gt;, ){ &#x2026; &lt;BODY&gt; .. }</li>
<li>EXPECT_FLOAT_EQ</li>
</ul>

<p>
<b>Example: Usage with CMake and QTCreator</b>
</p>

<p>
Get the source code: 
</p>
<ul class="org-ul">
<li>Gist: <a href="https://gist.github.com/caiorss/eb2fc15b7ed322ccac5ee496585e54e9">Sample Project CMake and GTest with Conan</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ git clone https://gist.github.com/caiorss/eb2fc15b7ed322ccac5ee496585e54e9 gist &amp;&amp; <span class="org-builtin">cd</span> gist
Cloning into <span class="org-string">'gist'</span>...
<span class="org-function-name">remote</span>: Enumerating objects: 4, done.
<span class="org-function-name">remote</span>: Counting objects: 100% (4/4), done.
<span class="org-function-name">remote</span>: Compressing objects: 100% (4/4), done.
<span class="org-function-name">remote</span>: Total 4 (delta 0), reused 0 (delta 0), pack-reused 0
Unpacking objects: 100% (4/4), done.

$ ls
CMakeLists.txt  gtest-experiment.cpp

<span class="org-comment-delimiter"># </span><span class="org-comment">Open with QT Creator, Visual Studio or build from command line </span>
$ qtcreator CMakeList.txt 

<span class="org-comment-delimiter"># </span><span class="org-comment">Open with Visual Studio </span>
$ devenv CMakeLists.txt 
</pre>
</div>

<p>
<b>File: gtest-experiment.cpp</b>
</p>

<p>
Headers:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cassert</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">gtest/gtest.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
Implementations: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">==================== Implementation ========================</span>

<span class="org-type">int</span> <span class="org-function-name">factorial</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-type">int</span> <span class="org-variable-name">prod</span> = 1;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 1; i &lt;= n; i++<span class="org-rainbow-delimiters-depth-2">)</span>
        prod *= i;
    <span class="org-keyword">return</span> prod;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">struct</span> <span class="org-type">Date</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">int</span> <span class="org-variable-name">year</span>;
    <span class="org-type">int</span> <span class="org-variable-name">month</span>;
    <span class="org-type">int</span> <span class="org-variable-name">day</span>;
    <span class="org-function-name">Date</span><span class="org-rainbow-delimiters-depth-2">(){}</span>
    <span class="org-function-name">Date</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">year</span>, <span class="org-type">int</span> <span class="org-variable-name">month</span>, <span class="org-type">int</span> <span class="org-variable-name">day</span><span class="org-rainbow-delimiters-depth-2">)</span>
        : year<span class="org-rainbow-delimiters-depth-2">(</span>year<span class="org-rainbow-delimiters-depth-2">)</span>
        , month<span class="org-rainbow-delimiters-depth-2">(</span>month<span class="org-rainbow-delimiters-depth-2">)</span>
        , day<span class="org-rainbow-delimiters-depth-2">(</span>day<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Comparison operator required by  EXPECT_EQ</span>
    <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">==</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Date</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">const</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">return</span> year  == rhs.year
            &amp;&amp; month == rhs.month
            &amp;&amp; day   == rhs.day;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Necessary for make class printable in GTest</span>
    <span class="org-keyword">friend</span> <span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">&lt;&lt;</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span>, <span class="org-type">Date</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">return</span> os &lt;&lt; <span class="org-string">"Date { "</span> &lt;&lt; rhs.year &lt;&lt; <span class="org-string">" ; "</span>
                  &lt;&lt; rhs.month &lt;&lt; <span class="org-string">" ; "</span>
                  &lt;&lt; rhs.day &lt;&lt; <span class="org-string">" } "</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">Date</span> <span class="org-function-name">GregorianEasterSunday</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">int</span> <span class="org-variable-name">c</span> = y / 100;
    <span class="org-type">int</span> <span class="org-variable-name">n</span> = y - 19 * <span class="org-rainbow-delimiters-depth-2">(</span> y / 19 <span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">int</span> <span class="org-variable-name">k</span> = <span class="org-rainbow-delimiters-depth-2">(</span> c - 17 <span class="org-rainbow-delimiters-depth-2">)</span> / 25;
    <span class="org-type">int</span> <span class="org-variable-name">i</span> = c - c / 4 - <span class="org-rainbow-delimiters-depth-2">(</span> c - k <span class="org-rainbow-delimiters-depth-2">)</span> / 3 + 19 * n + 15;
    i = i - 30 * <span class="org-rainbow-delimiters-depth-2">(</span> i / 30 <span class="org-rainbow-delimiters-depth-2">)</span>;
    i = i - <span class="org-rainbow-delimiters-depth-2">(</span> i / 28 <span class="org-rainbow-delimiters-depth-2">)</span> * <span class="org-rainbow-delimiters-depth-2">(</span> 1 - <span class="org-rainbow-delimiters-depth-3">(</span> i / 28 <span class="org-rainbow-delimiters-depth-3">)</span>
          * <span class="org-rainbow-delimiters-depth-3">(</span> 29 / <span class="org-rainbow-delimiters-depth-4">(</span> i + 1 <span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>
          * <span class="org-rainbow-delimiters-depth-3">(</span> <span class="org-rainbow-delimiters-depth-4">(</span> 21 - n <span class="org-rainbow-delimiters-depth-4">)</span> / 11 <span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">int</span> <span class="org-variable-name">j</span> = y + y / 4 + i + 2 - c + c / 4;
    j = j - 7 * <span class="org-rainbow-delimiters-depth-2">(</span> j / 7 <span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">int</span> <span class="org-variable-name">l</span> = i - j;
    <span class="org-type">int</span> <span class="org-variable-name">m</span> = 3 + <span class="org-rainbow-delimiters-depth-2">(</span> l + 40 <span class="org-rainbow-delimiters-depth-2">)</span> / 44;
    <span class="org-type">int</span> <span class="org-variable-name">d</span> = l + 28 - 31 * <span class="org-rainbow-delimiters-depth-2">(</span> m / 4 <span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">return</span> Date<span class="org-rainbow-delimiters-depth-2">(</span>y, m, d<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Test code: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">//</span><span class="org-comment">=============== Tests ====================================//</span>

<span class="org-function-name">TEST</span><span class="org-rainbow-delimiters-depth-1">(</span>FactorialTest, test1<span class="org-rainbow-delimiters-depth-1">){</span>
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>6,        factorial<span class="org-rainbow-delimiters-depth-3">(</span>3<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>24,       factorial<span class="org-rainbow-delimiters-depth-3">(</span>4<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>120,      factorial<span class="org-rainbow-delimiters-depth-3">(</span>5<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>3628800,  factorial<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Expect greater than</span>
    EXPECT_GT<span class="org-rainbow-delimiters-depth-2">(</span>10000000, factorial<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Expect not equal</span>
    EXPECT_NE<span class="org-rainbow-delimiters-depth-2">(</span>25, factorial<span class="org-rainbow-delimiters-depth-3">(</span>4<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">TEST</span><span class="org-rainbow-delimiters-depth-1">(</span>FactorialTestFailure, testFailure<span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Deliberately fails for demonstration purposes</span>
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>6, factorial<span class="org-rainbow-delimiters-depth-3">(</span>3<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>4, factorial<span class="org-rainbow-delimiters-depth-3">(</span>4<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>6, factorial<span class="org-rainbow-delimiters-depth-3">(</span>2<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">TEST</span><span class="org-rainbow-delimiters-depth-1">(</span>GregorianEaster, testdates<span class="org-rainbow-delimiters-depth-1">){</span>
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>Date<span class="org-rainbow-delimiters-depth-3">(</span>2005, 3, 27<span class="org-rainbow-delimiters-depth-3">)</span>, GregorianEasterSunday<span class="org-rainbow-delimiters-depth-3">(</span>2005<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>Date<span class="org-rainbow-delimiters-depth-3">(</span>2008, 3, 23<span class="org-rainbow-delimiters-depth-3">)</span>, GregorianEasterSunday<span class="org-rainbow-delimiters-depth-3">(</span>2008<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>Date<span class="org-rainbow-delimiters-depth-3">(</span>2010, 4, 4<span class="org-rainbow-delimiters-depth-3">)</span>,  GregorianEasterSunday<span class="org-rainbow-delimiters-depth-3">(</span>2010<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>File: CMakeLists.txt</b>
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>( GtestsExperiment
         VERSION      0.1
         DESCRIPTION  <span class="org-string">"Experiment with Gtest uni testing framework"</span>
        )
<span class="org-comment"># ============= Conan Bootstrap =============================#</span>

<span class="org-comment"># Download automatically, you can also just copy the conan.cmake file</span>
<span class="org-keyword">if</span>(NOT EXISTS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
   <span class="org-function-name">message</span>(STATUS <span class="org-string">"Downloading conan.cmake from https://github.com/conan-io/cmake-conan"</span>)
   <span class="org-function-name">file</span>(DOWNLOAD <span class="org-string">"https://github.com/conan-io/cmake-conan/raw/v0.13/conan.cmake"</span>
                 <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
<span class="org-keyword">endif</span>()

<span class="org-function-name">include</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/conan.cmake)

<span class="org-function-name">conan_cmake_run</span>(REQUIRES
                gtest/1.8.1@bincrafters/stable
                BASIC_SETUP
                BUILD missing
                )

<span class="org-comment">#============= Find Packages ================================#</span>

<span class="org-function-name">find_package</span>(GTest REQUIRED)

<span class="org-comment">#---------------------------------------------------#</span>
<span class="org-comment">#             Targets Settings                      #</span>
<span class="org-comment">#---------------------------------------------------#</span>

<span class="org-function-name">add_executable</span>(gtest-experiment gtest-experiment.cpp)
<span class="org-function-name">target_link_libraries</span>(gtest-experiment GTest::GTest GTest::Main)
<span class="org-function-name">add_test</span>(GTestExperiment gtest-experiment)
</pre>
</div>

<p>
<b>Test Output:</b>
</p>


<div class="figure">
<p><a href="images/gtest-framework-console.png"><img src="images/gtest-framework-console.png" alt="gtest-framework-console.png" /></a>
</p>
<p><span class="figure-number">Figure 1: </span>Test output in Command Line</p>
</div>


<div class="figure">
<p><a href="images/gtest-framework-qtcreator.png"><img src="images/gtest-framework-qtcreator.png" alt="gtest-framework-qtcreator.png" /></a>
</p>
<p><span class="figure-number">Figure 2: </span>QTCreator Test Discovery</p>
</div>
</div>
</div>

<div id="outline-container-orgda6fe97" class="outline-4">
<h4 id="orgda6fe97"><span class="section-number-4">1.9.2</span> Catch2 - Unit Testing Framework</h4>
<div class="outline-text-4" id="text-1-9-2">
<p>
Advatanges over other test frameworks:
</p>

<ul class="org-ul">
<li>Header-only library, so it requires no linking step or linking
dependencies.</li>

<li>Uses C++ operators instead of many macros such as (X &gt; 20) instead of
EXPECT_GT(X, 20) (expect grater than) as in GTest (Google's test)</li>

<li>BDD - Behavior Driven Development</li>

<li>Property-based testing - testing with several random values and
combination of random values.</li>

<li>Test with multiple data or data table which frees the user from
writing lots boilerplate ASSERT_EQUAL(x, y). A single REQUIRE macro
can be used for test a whole list of cartesian pairs such as (x, y,z, expected)</li>

<li>XML output in JUnit, xUnit format.</li>
</ul>

<p>
Problem:
</p>
<ul class="org-ul">
<li>Compile-time can be a bit slow due to the library be header-only.</li>
</ul>

<p>
Repository:
</p>
<ul class="org-ul">
<li><a href="https://github.com/catchorg/Catch2">https://github.com/catchorg/Catch2</a></li>
</ul>

<p>
Conan Reference:
</p>
<ul class="org-ul">
<li><a href="https://bintray.com/catchorg/Catch2/Catch2:catchorg/2.7.2:stable">Catch2/2.7.2@catchorg/stable</a></li>
</ul>

<p>
Code Examples:
</p>
<ul class="org-ul">
<li><a href="https://github.com/catchorg/Catch2/tree/master/examples">https://github.com/catchorg/Catch2/tree/master/examples</a></li>
<li><a href="https://github.com/catchorg/Catch2/blob/master/projects/SelfTest/UsageTests/Generators.tests.cpp">Test Generators</a> - testing with multiple data</li>
</ul>

<p>
Tutorial:
</p>
<ul class="org-ul">
<li><a href="https://github.com/catchorg/Catch2/blob/master/docs/tutorial.md#top">Catch2/tutorial.md at master Â· catchorg/Catch2 Â· GitHub</a></li>
<li><a href="https://mariusbancila.ro/blog/2018/03/29/writing-cpp-unit-tests-with-catch2/">Writing C++ unit tests with Catch2</a> - BDD - Behavior Driven Development.</li>
</ul>

<p>
Misc:
</p>
<ul class="org-ul">
<li><a href="https://levelofindirection.com/blog/catch2-released.html">Catch2 Released : Level of Indirection</a></li>
<li><a href="https://codingnest.com/the-future-of-catch2/">The future of Catch2Â â€” The Coding Nest</a></li>
</ul>

<p>
Example simple test:
</p>

<p>
File: testcatch2.cpp
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">catch2/catch.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>


<span class="org-type">int</span> <span class="org-function-name">formula</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-type">int</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">return</span> 4 * x + 2 * y;
<span class="org-rainbow-delimiters-depth-1">}</span>

TEST_CASE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Test function furmula A"</span>, <span class="org-string">"[tag1]"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    REQUIRE<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>3, 4<span class="org-rainbow-delimiters-depth-3">)</span> == 20 <span class="org-rainbow-delimiters-depth-2">)</span>;
    REQUIRE<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>4, 5<span class="org-rainbow-delimiters-depth-3">)</span> == 26 <span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

TEST_CASE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Test function formula B"</span>, <span class="org-string">"[tag2]"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    REQUIRE<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>0, 0<span class="org-rainbow-delimiters-depth-3">)</span> == 0  <span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Intentionally fails</span>
    REQUIRE<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>2, 5<span class="org-rainbow-delimiters-depth-3">)</span> == 10 <span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">struct</span> <span class="org-type">TestData</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-variable-name">y</span>, <span class="org-variable-name">expected</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;


TEST_CASE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Testing with struct"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">t</span> = GENERATE<span class="org-rainbow-delimiters-depth-2">(</span> values<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">TestData</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span>
    <span class="org-rainbow-delimiters-depth-4">{</span>
        <span class="org-rainbow-delimiters-depth-5">{</span>3,  4, 20<span class="org-rainbow-delimiters-depth-5">}</span>
       ,<span class="org-rainbow-delimiters-depth-5">{</span>4,  5, 26<span class="org-rainbow-delimiters-depth-5">}</span>
       ,<span class="org-rainbow-delimiters-depth-5">{</span>0,  0,  0<span class="org-rainbow-delimiters-depth-5">}</span>
       ,<span class="org-rainbow-delimiters-depth-5">{</span>-1, 4,  6<span class="org-rainbow-delimiters-depth-5">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">Fails</span>
       ,<span class="org-rainbow-delimiters-depth-5">{</span> 2, 2, 12<span class="org-rainbow-delimiters-depth-5">}</span>
    <span class="org-rainbow-delimiters-depth-4">}</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    REQUIRE<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>t.x, t.y<span class="org-rainbow-delimiters-depth-3">)</span> == t.expected<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>


TEST_CASE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Testing with structured bindings"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-2">[</span>x, y, z<span class="org-rainbow-delimiters-depth-2">]</span> = GENERATE<span class="org-rainbow-delimiters-depth-2">(</span> table&lt;<span class="org-type">int</span>, <span class="org-type">int</span>, <span class="org-type">int</span>&gt;<span class="org-rainbow-delimiters-depth-3">(</span>
    <span class="org-rainbow-delimiters-depth-4">{</span>
        <span class="org-rainbow-delimiters-depth-5">{</span>3,  4, 20<span class="org-rainbow-delimiters-depth-5">}</span>
       ,<span class="org-rainbow-delimiters-depth-5">{</span>4,  5, 26<span class="org-rainbow-delimiters-depth-5">}</span>
       ,<span class="org-rainbow-delimiters-depth-5">{</span>0,  0,  0<span class="org-rainbow-delimiters-depth-5">}</span>
       ,<span class="org-rainbow-delimiters-depth-5">{</span>2, 2, 12<span class="org-rainbow-delimiters-depth-5">}</span>
    <span class="org-rainbow-delimiters-depth-4">}</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    REQUIRE<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>x, y<span class="org-rainbow-delimiters-depth-3">)</span> == z<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
File: CMakeLists.txt - CMake building script integrated with Conan.
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(Catch2_testing)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment"># ============= Conan Bootstrap =============================#</span>

<span class="org-comment"># Download automatically, you can also just copy the conan.cmake file</span>
<span class="org-keyword">if</span>(NOT EXISTS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
   <span class="org-function-name">message</span>(STATUS <span class="org-string">"Downloading conan.cmake from https://github.com/conan-io/cmake-conan"</span>)
   <span class="org-function-name">file</span>(DOWNLOAD <span class="org-string">"https://github.com/conan-io/cmake-conan/raw/v0.13/conan.cmake"</span>
                 <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
<span class="org-keyword">endif</span>()

<span class="org-function-name">include</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/conan.cmake)

<span class="org-function-name">conan_cmake_run</span>(REQUIRES
                Catch2/2.7.2@catchorg/stable
                BASIC_SETUP
                BUILD missing
                )
<span class="org-comment">#============= Find Packages ================================#</span>

<span class="org-function-name">find_package</span>(Catch2 REQUIRED)

<span class="org-comment">#---------------------------------------------------#</span>
<span class="org-comment">#             Targets Settings                      #</span>
<span class="org-comment">#---------------------------------------------------#</span>

<span class="org-function-name">add_executable</span>(testcatch2 testcatch2.cpp test-main.cpp)
<span class="org-function-name">target_link_libraries</span>(testcatch2)
</pre>
</div>

<p>
Test runner help option:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./testcatch2 -h

Catch v2.7.2
<span class="org-function-name">usage</span>:
  testcatch2 [&lt;test name|pattern|tags&gt; ... ] options

where options are:
  -?, -h, --help                            display usage information
  -l, --list-tests                          list all/matching test cases
  -t, --list-tags                           list all/matching tags
  -s, --success                             include successful tests<span class="org-keyword"> in</span>
                                            output
  -b, --break                               break into debugger on failure
  -e, --nothrow                             skip exception tests
  -i, --invisibles                          show invisibles (tabs, newlines)
  -o, --out &lt;filename&gt;                      output filename
  -r, --reporter &lt;name&gt;                     reporter to use (defaults to
                                            console)
  -n, --name &lt;name&gt;                         suite name
  -a, --abort                               abort at first failure
  -x, --abortx &lt;no. failures&gt;               abort after x failures
  -w, --warn &lt;warning name&gt;                 enable warnings
  -d, --durations &lt;yes|no&gt;                  show test durations
  -f, --input-file &lt;filename&gt;               load test names to run from a
                                            file
  -#, --filenames-as-tags                   adds a tag for the filename
  -c, --section &lt;section name&gt;              specify section to run
  -v, --verbosity &lt;quiet|normal|high&gt;       set output verbosity
  --list-test-names-only                    list all/matching test cases
                                            names only
  --list-reporters                          list all reporters
  --order &lt;decl|lex|rand&gt;                   test case order (defaults to
                                            decl)
  --rng-seed &lt;<span class="org-string">'time'</span>|number&gt;                set a specific seed for random
                                            numbers
  --use-colour &lt;yes|no&gt;                     should output be colourised
  --libidentify                             report name and version according
                                            to libidentify standard
  --wait-for-keypress &lt;start|<span class="org-keyword">exit</span>|both&gt;     waits for a keypress before
                                            exiting
  --benchmark-resolution-multiple           multiple of clock resolution to
  &lt;multiplier&gt;                              run benchmarks

For more detailed usage please see the project docs


</pre>
</div>

<p>
Test runner test list:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./testcatch2 --list-tests
All available test cases:
  Test <span class="org-keyword">function</span> <span class="org-function-name">furmula</span> A
      [tag1]
  Test <span class="org-keyword">function</span> <span class="org-function-name">formula</span> B
      [tag2]
  Testing with struct
  Testing with structured bindings
4 test cases

</pre>
</div>

<p>
Test runner output:
</p>

<div class="org-src-container">
<pre class="src src-text">$ ./testcatch2

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
testcatch2 is a Catch v2.7.2 host application.
Run with -? for options

-------------------------------------------------------------------------------
Test function formula B
-------------------------------------------------------------------------------
/home/archbox/Documents/projects/fquant/testcatch2.cpp:17
...............................................................................

/home/archbox/Documents/projects/fquant/testcatch2.cpp:21: FAILED:
  REQUIRE( formula(2, 5) == 10 )
with expansion:
  18 == 10

-------------------------------------------------------------------------------
Testing with struct
-------------------------------------------------------------------------------
/home/archbox/Documents/projects/fquant/testcatch2.cpp:31
...............................................................................

/home/archbox/Documents/projects/fquant/testcatch2.cpp:41: FAILED:
  REQUIRE( formula(t.x, t.y) == t.expected )
with expansion:
  4 == 6

===============================================================================
test cases:  4 |  2 passed | 2 failed
assertions: 13 | 11 passed | 2 failed
</pre>
</div>
</div>
</div>

<div id="outline-container-org43794d6" class="outline-4">
<h4 id="org43794d6"><span class="section-number-4">1.9.3</span> Doctest - Unit Testing Framewok</h4>
<div class="outline-text-4" id="text-1-9-3">
<p>
Doctest is a unit test framework based on catch2 test framework,
however doctest has a much faster compile-time than many other
unit-test frameworks.
</p>

<p>
Advantages:
</p>
<ul class="org-ul">
<li>Easy of use</li>
<li>Faster compile-time</li>
<li>Easy to integrate, header-only-library</li>
<li>Operator based testing: CHECK(VALUE == EXPECTED), CHECK(x &gt; 10)
instead of No need to use macros ASSERT_EQ, ASSERT_NEQ (not equal)
as in GTest.</li>
</ul>

<p>
Disadvantages:
</p>
<ul class="org-ul">
<li>No XML output with jUnit standard similar to GTest standard.</li>
<li>No integration with IDE</li>
<li>No data-driven test, aka parameterized test, or test with a list of value tuples.</li>
</ul>

<p>
Repository:
</p>
<ul class="org-ul">
<li><a href="https://github.com/onqtam/doctest">https://github.com/onqtam/doctest</a></li>
</ul>

<p>
Conan Reference:
</p>
<ul class="org-ul">
<li><a href="https://bintray.com/bincrafters/public-conan/doctest%3Abincrafters/2.3.1%3Astable">doctest/2.3.1@bincrafters/stable</a></li>
</ul>

<p>
Conan Package:
</p>
<ul class="org-ul">
<li><a href="https://github.com/bincrafters/conan-doctest">https://github.com/bincrafters/conan-doctest</a></li>
</ul>

<p>
Code Examples:
</p>
<ul class="org-ul">
<li><a href="https://github.com/onqtam/doctest/tree/master/examples">https://github.com/onqtam/doctest/tree/master/examples</a></li>
</ul>

<p>
Features:
</p>
<ul class="org-ul">
<li><a href="https://github.com/onqtam/doctest/blob/master/doc/markdown/features.md">https://github.com/onqtam/doctest/blob/master/doc/markdown/features.md</a></li>
</ul>

<p>
See:
</p>
<ul class="org-ul">
<li><a href="https://accu.org/index.php/journals/2343">ACCU - doctest â€“ the Lightest C++ Unit Testing Framewor</a></li>
<li><a href="https://www.codeproject.com/Articles/1156938/doctest-the-lightest-Cplusplus-unit-testing-framew">doctest - the lightest C++ unit testing framework - CodeProject</a></li>
</ul>

<p>
Video:
</p>
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=eH1CxEC29l8">CppCon 2017: Viktor Kirilov â€œMix Tests and Production Code With Doctest&#x2026;â€ - YouTube</a></li>
</ul>

<p>
Usage:
</p>

<ul class="org-ul">
<li>File: doctest_experiment.cpp</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#define</span> <span class="org-variable-name">DOCTEST_CONFIG_IMPLEMENT_WITH_MAIN</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">doctest.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">formula</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-type">int</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">return</span> 4 * x + 2 * y;
<span class="org-rainbow-delimiters-depth-1">}</span>

TEST_CASE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Test function furmula A"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    CHECK<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>3, 4<span class="org-rainbow-delimiters-depth-3">)</span> == 20 <span class="org-rainbow-delimiters-depth-2">)</span>;
    CHECK<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>4, 5<span class="org-rainbow-delimiters-depth-3">)</span> == 26 <span class="org-rainbow-delimiters-depth-2">)</span>;
    CHECK<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>4, 5<span class="org-rainbow-delimiters-depth-3">)</span> &lt; 100 <span class="org-rainbow-delimiters-depth-2">)</span>;
    CHECK<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>4, 5<span class="org-rainbow-delimiters-depth-3">)</span> != 0 <span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

TEST_CASE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Test function formula B"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    CHECK<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>0, 0<span class="org-rainbow-delimiters-depth-3">)</span> == 0  <span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Intentionally fails</span>
    CHECK<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>2, 5<span class="org-rainbow-delimiters-depth-3">)</span> == 10 <span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<ul class="org-ul">
<li>File: CMakeLists.txt integrated with Conan</li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>( doctest_experiment
         VERSION      0.1
         DESCRIPTION  <span class="org-string">"A doctest experiment"</span>
        )
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment"># ============= Conan Bootstrap =============================#</span>

<span class="org-comment"># Download automatically, you can also just copy the conan.cmake file</span>
<span class="org-keyword">if</span>(NOT EXISTS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
   <span class="org-function-name">message</span>(STATUS <span class="org-string">"Downloading conan.cmake from https://github.com/conan-io/cmake-conan"</span>)
   <span class="org-function-name">file</span>(DOWNLOAD <span class="org-string">"https://github.com/conan-io/cmake-conan/raw/v0.13/conan.cmake"</span>
                 <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
<span class="org-keyword">endif</span>()

<span class="org-function-name">include</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/conan.cmake)

<span class="org-function-name">conan_cmake_run</span>(REQUIRES
                doctest/2.3.1@bincrafters/stable
                BASIC_SETUP
                BUILD missing
                )

<span class="org-comment">#============= Find Packages ================================#</span>

<span class="org-function-name">find_package</span>(doctest 2.3.1 REQUIRED)

<span class="org-comment">#---------------------------------------------------#</span>
<span class="org-comment">#             Targets Settings                      #</span>
<span class="org-comment">#---------------------------------------------------#</span>

<span class="org-function-name">add_executable</span>(doctest_experiment doctest_experiment.cpp)
<span class="org-function-name">copy_after_build</span>(doctest_experiment)
<span class="org-comment"># target_link_libraries(doctest_experiment doctest::doctest)</span>
</pre>
</div>

<p>
Show options:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ bin/doctest_experiment -h
[doctest] doctest version is <span class="org-string">"2.3.1"</span>
[doctest]
[doctest] boolean values: <span class="org-string">"1/on/yes/true"</span> or <span class="org-string">"0/off/no/false"</span>
[doctest] filter  values: <span class="org-string">"str1,str2,str3"</span> (comma separated strings)
[doctest]
[doctest] filters use wildcards for matching strings
[doctest] something passes a filter if any of the strings<span class="org-keyword"> in</span> a filter matches
[doctest]
[doctest] ALL FLAGS, OPTIONS AND FILTERS ALSO AVAILABLE WITH A <span class="org-string">"dt-"</span> PREFIX!!!
[doctest]
[doctest] Query flags - the program quits after them. Available:

 -?,   --help, -h                      prints this message
 -v,   --version                       prints the version
 -c,   --count                         prints the number of matching tests
 -ltc, --list-test-cases               lists all matching tests by name
 -lts, --list-test-suites              lists all matching test suites
 -lr,  --list-reporters                lists all registered reporters

[doctest] The available &lt;int&gt;/&lt;string&gt; options/filters are:

 -tc,  --test-case=&lt;filters&gt;           filters     tests by their name
 -tce, --test-case-exclude=&lt;filters&gt;   filters OUT tests by their name
 -sf,  --source-file=&lt;filters&gt;         filters     tests by their file
 -sfe, --source-file-exclude=&lt;filters&gt; filters OUT tests by their file
 -ts,  --test-suite=&lt;filters&gt;          filters     tests by their test suite
 -tse, --test-suite-exclude=&lt;filters&gt;  filters OUT tests by their test suite
 -sc,  --subcase=&lt;filters&gt;             filters     subcases by their name
 -sce, --subcase-exclude=&lt;filters&gt;     filters OUT subcases by their name
 -r,   --reporters=&lt;filters&gt;           reporters to use (console is default)
 -o,   --out=&lt;string&gt;                  output filename
 -ob,  --order-by=&lt;string&gt;             how the tests should be ordered
                                       &lt;string&gt; - by [file/suite/name/rand]
 -rs,  --rand-seed=&lt;int&gt;               seed for random ordering
 -f,   --first=&lt;int&gt;                   the first test passing the filters to
                                       execute - for range-based execution
 -l,   --last=&lt;int&gt;                    the last test passing the filters to
                                       execute - for range-based execution
 -aa,  --abort-after=&lt;int&gt;             stop after &lt;int&gt; failed assertions
 -scfl,--subcase-filter-levels=&lt;int&gt;   apply filters for the first &lt;int&gt; levels

[doctest] Bool options - can be used like flags and true is assumed. Available:

 -s,   --success=&lt;bool&gt;                include successful assertions<span class="org-keyword"> in</span> output
 -cs,  --case-sensitive=&lt;bool&gt;         filters being treated as case sensitive
 -e,   --exit=&lt;bool&gt;                   exits after the tests finish
 -d,   --duration=&lt;bool&gt;               prints the time duration of each test
 -nt,  --no-throw=&lt;bool&gt;               skips exceptions-related assert checks
 -ne,  --no-exitcode=&lt;bool&gt;            returns (or exits) always with success
 -nr,  --no-run=&lt;bool&gt;                 skips all runtime doctest operations
 -nv,  --no-version=&lt;bool&gt;             omit the framework version<span class="org-keyword"> in</span> the output
 -nc,  --no-colors=&lt;bool&gt;              disables colors<span class="org-keyword"> in</span> output
 -fc,  --force-colors=&lt;bool&gt;           use colors even when not<span class="org-keyword"> in</span> a tty
 -nb,  --no-breaks=&lt;bool&gt;              disables breakpoints<span class="org-keyword"> in</span> debuggers
 -ns,  --no-skip=&lt;bool&gt;                don<span class="org-string">'t skip test cases marked as skip</span>
<span class="org-string"> -gfl, --gnu-file-line=&lt;bool&gt;          :n: vs (n): for line numbers in output</span>
<span class="org-string"> -npf, --no-path-filenames=&lt;bool&gt;      only filenames and no paths in output</span>
<span class="org-string"> -nln, --no-line-numbers=&lt;bool&gt;        0 instead of real line numbers in output</span>

<span class="org-string">[doctest] for more information visit the project documentation</span>
</pre>
</div>

<p>
Test runner test listing:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ bin/doctest_experiment --list-test-cases
[doctest] listing all test case names
===============================================================================
Test <span class="org-keyword">function</span> <span class="org-function-name">furmula</span> A
Test <span class="org-keyword">function</span> <span class="org-function-name">formula</span> B
================================================
</pre>
</div>

<p>
Run tests: (Note: It is printed with colored output)
</p>

<div class="org-src-container">
<pre class="src src-text">$ bin/doctest_experiment
[doctest] doctest version is "2.3.1"
[doctest] run with "--help" for options
===============================================================================
/home/archbox/Documents/projects/fquant/doctest_experiment.cpp:21:
TEST CASE:  Test function formula B

/home/archbox/Documents/projects/fquant/doctest_experiment.cpp:25: ERROR: CHECK( formula(2, 5) == 10 ) is NOT correct!
  values: CHECK( 18 == 10 )

===============================================================================
[doctest] test cases:      2 |      1 passed |      1 failed |      0 skipped
[doctest] assertions:      6 |      5 passed |      1 failed |
[doctest] Status: FAILURE!
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org51fe81b" class="outline-3">
<h3 id="org51fe81b"><span class="section-number-3">1.10</span> Google Benchmark</h3>
<div class="outline-text-3" id="text-1-10">
<p>
Overview: It is library for micro benchmarks of isolated parts of the
code and comparison between algorithms performance. 
</p>

<p>
Web Site: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/google/benchmark">https://github.com/google/benchmark</a></li>
<li><a href="https://opensource.googleblog.com/2014/01/introducing-benchmark.html">https://opensource.googleblog.com/2014/01/introducing-benchmark.html</a></li>
</ul>

<p>
<b>Sample Project:</b> 
</p>

<p>
File: CmakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 2.8)
<span class="org-function-name">project</span>(gbench-evaluation)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD          17)
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD_REQUIRED ON) 
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE      ON)

<span class="org-comment">#========== Macros for automating Library Fetching =============#</span>

<span class="org-function-name">include</span>(FetchContent)

<span class="org-comment"># Download library archive (zip, *.tar.gz, ...) from URL</span>
<span class="org-keyword">macro</span>(Download_Library_Url NAME URL)
    <span class="org-function-name">FetchContent_Declare</span>(${<span class="org-variable-name">NAME</span>} URL  ${<span class="org-variable-name">URL</span>})
    <span class="org-function-name">FetchContent_GetProperties</span>(${<span class="org-variable-name">NAME</span>})
    <span class="org-keyword">if</span>(NOT ${<span class="org-variable-name">NAME</span>}_POPULATED)
        <span class="org-function-name">FetchContent_Populate</span>(${<span class="org-variable-name">NAME</span>})
        <span class="org-function-name">add_subdirectory</span>(${${<span class="org-variable-name">NAME</span>}_SOURCE_DIR} ${${<span class="org-variable-name">NAME</span>}_BINARY_DIR})
    <span class="org-keyword">endif</span>()
<span class="org-keyword">endmacro</span>()


<span class="org-comment">#========== Library Download / Fetching ===========================#</span>

<span class="org-comment"># Google Benchmark Build Setting </span>
<span class="org-function-name">set</span>(BENCHMARK_ENABLE_TESTING        OFF CACHE BOOL <span class="org-string">""</span> FORCE)
<span class="org-function-name">set</span>(BENCHMARK_ENABLE_GTEST_TESTS    OFF CACHE BOOL <span class="org-string">""</span> FORCE)
<span class="org-function-name">set</span>(BENCHMARK_DOWNLOAD_DEPENDENCIES OFF CACHE BOOL <span class="org-string">""</span> FORCE)

<span class="org-function-name">Download_Library_Url</span>(
        gbenchmark 
        <span class="org-string">"https://github.com/google/benchmark/archive/v1.5.0.zip"</span> 
        )

<span class="org-comment">#========== Package Settings =====================================#</span>

<span class="org-function-name">add_executable</span>(benchmark_runner bench.cpp)
<span class="org-function-name">target_link_libraries</span>(benchmark_runner PRIVATE benchmark)
</pre>
</div>

<p>
File: bench.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cstdint</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cassert</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Google Benchmark header</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">benchmark/benchmark.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">#define ENABLE_LOGGING</span>

<span class="org-keyword">using</span> <span class="org-type">ulong</span> = <span class="org-type">unsigned</span> <span class="org-type">long</span>;

<span class="org-comment-delimiter">//</span><span class="org-comment">======= Implementations =================#</span>

<span class="org-keyword">auto</span> <span class="org-function-name">fibonacci_recursive</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">ulong</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">ulong</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>n &lt; 2<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> 1; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">return</span> fibonacci_recursive<span class="org-rainbow-delimiters-depth-2">(</span>n - 1<span class="org-rainbow-delimiters-depth-2">)</span> + fibonacci_recursive<span class="org-rainbow-delimiters-depth-2">(</span>n - 2<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">auto</span> <span class="org-function-name">fibonacci_non_recursive</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">ulong</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">ulong</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">ulong</span> <span class="org-variable-name">a</span> = 0, <span class="org-variable-name">b</span> = 1, <span class="org-variable-name">next</span> = 0;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>n &lt; 2<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> 1; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">i</span> = 0UL; i &lt; n; ++i<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        next = a + b;
        a = b;
        b = next;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">return</span> next;
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">//</span><span class="org-comment">====== Benchmark Code ===================#</span>


<span class="org-comment-delimiter">/* </span><span class="org-comment">Note: All benchmark functions must have this signature.</span>
<span class="org-comment"> *</span>
<span class="org-comment"> *  using BenchmarkSignature = void (*) (benchmark::State&amp; state)</span>
<span class="org-comment"> */</span>
<span class="org-type">void</span> <span class="org-function-name">BM_fibonacci_non_recursive</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">benchmark</span>::<span class="org-type">State</span>&amp; <span class="org-variable-name">state</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">std::cerr &lt;&lt; " [NON RECURSIVE FIBONACCI] " &lt;&lt; std::endl;</span>

    <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span>state.KeepRunning<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">int64_t</span> <span class="org-variable-name">n</span> = 0, <span class="org-variable-name">n_end</span> = state.range<span class="org-rainbow-delimiters-depth-4">()</span>; n &lt; n_end; n++<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">{</span>
            fibonacci_non_recursive<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-5">&lt;</span><span class="org-type">ulong</span><span class="org-rainbow-delimiters-depth-5">&gt;(</span>n<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>;
            <span class="org-comment-delimiter">// </span><span class="org-comment">std::cerr &lt;&lt; " n = " &lt;&lt; n  &lt;&lt; " Result = " &lt;&lt; fibonacci_non_recursive(static_cast&lt;ulong&gt;(n)) &lt;&lt; std::endl;</span>
        <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Register benchmark function</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Possibility A: BENCHMARK(BM_fibonacci_non_recursive)-&gt;Range(0, 40);</span>
BENCHMARK<span class="org-rainbow-delimiters-depth-1">(</span>BM_fibonacci_non_recursive<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;Arg<span class="org-rainbow-delimiters-depth-1">(</span>10<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;Arg<span class="org-rainbow-delimiters-depth-1">(</span>30<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;Arg<span class="org-rainbow-delimiters-depth-1">(</span>40<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;Arg<span class="org-rainbow-delimiters-depth-1">(</span>45<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-preprocessor">#ifdef</span> ENABLE_LOGGING
  <span class="org-keyword">auto</span> <span class="org-variable-name">sink</span> = <span class="org-constant">std</span>::ofstream<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"logging.txt"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-preprocessor">#endif</span>


<span class="org-type">void</span> <span class="org-function-name">BM_fibonacci_recursive</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">benchmark</span>::<span class="org-type">State</span>&amp; <span class="org-variable-name">state</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">std::cerr &lt;&lt; " [RECURSIVE FIBONACCI] " &lt;&lt; std::endl;</span>
    <span class="org-keyword">static</span> <span class="org-type">int</span> <span class="org-variable-name">counter</span> = 0;
    <span class="org-type">ulong</span> <span class="org-variable-name">result</span>;

<span class="org-preprocessor">    #ifdef</span> ENABLE_LOGGING
    sink &lt;&lt; <span class="org-string">"\n [BM_fibonacci_recursive] counter = "</span> &lt;&lt; counter++ &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-preprocessor">    #endif</span>

    <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span>state.KeepRunning<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">int64_t</span> <span class="org-variable-name">n</span> = 0, <span class="org-variable-name">n_end</span> = state.range<span class="org-rainbow-delimiters-depth-4">()</span>; n &lt; n_end; n++<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-keyword">auto</span> <span class="org-variable-name">result</span> = fibonacci_recursive<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-5">&lt;</span><span class="org-type">ulong</span><span class="org-rainbow-delimiters-depth-5">&gt;(</span>n<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>;
<span class="org-preprocessor">            #ifdef</span> ENABLE_LOGGING
            sink &lt;&lt; <span class="org-string">"n_end = "</span> &lt;&lt; n_end &lt;&lt; <span class="org-string">" n = "</span> &lt;&lt; n &lt;&lt; <span class="org-string">" Result = "</span>
                 &lt;&lt; fibonacci_recursive<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-5">&lt;</span><span class="org-type">ulong</span><span class="org-rainbow-delimiters-depth-5">&gt;(</span>n<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-preprocessor">            #endif</span>

        <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Register benchmark function</span>
BENCHMARK<span class="org-rainbow-delimiters-depth-1">(</span>BM_fibonacci_recursive<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;Arg<span class="org-rainbow-delimiters-depth-1">(</span>10<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;Arg<span class="org-rainbow-delimiters-depth-1">(</span>30<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;Arg<span class="org-rainbow-delimiters-depth-1">(</span>40<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;Arg<span class="org-rainbow-delimiters-depth-1">(</span>45<span class="org-rainbow-delimiters-depth-1">)</span>;


<span class="org-comment-delimiter">//</span><span class="org-comment">=============== Entry Point - main() Function =====================//</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Benchmark program entry point</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">----------------------------</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">BENCHMARK_MAIN();</span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"========= Micro Benchmark ==============="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">benchmark</span>::Initialize<span class="org-rainbow-delimiters-depth-2">(</span>&amp;argc, argv<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">benchmark</span>::RunSpecifiedBenchmarks<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Building</b> 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake -H. -B_build -DCMAKE_BUILD_TYPE=Release
$ cmake --build _build --target
</pre>
</div>

<p>
<b>Running</b> 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ _build/benchmark_runner 
========= Micro Benchmark ===============
2019-08-28 14:53:53
Running _build/benchmark_runner
Run on (4 X 3100 MHz CPU s)
CPU Caches:
  L1 Data 32K (x2)
  L1 Instruction 32K (x2)
  L2 Unified 256K (x2)
  L3 Unified 4096K (x1)
Load Average: 0.72, 0.81, 0.96
***WARNING*** CPU scaling is enabled, the benchmark real time measurements may be noisy and will incur extra overhead.
------------------------------------------------------------------------
Benchmark                              Time             CPU   Iterations
------------------------------------------------------------------------
BM_fibonacci_non_recursive/10      0.375 ns        0.373 ns   1000000000
BM_fibonacci_non_recursive/30      0.367 ns        0.366 ns   1000000000
BM_fibonacci_non_recursive/40      0.352 ns        0.351 ns   1000000000
BM_fibonacci_non_recursive/45      0.357 ns        0.356 ns   1000000000
BM_fibonacci_recursive/10            261 ns          260 ns      2531115
BM_fibonacci_recursive/30        4407109 ns      4396380 ns          159
BM_fibonacci_recursive/40      600690587 ns    598780692 ns            1
BM_fibonacci_recursive/45     6128444226 ns   6110706127 ns            1
</pre>
</div>
</div>
</div>

<div id="outline-container-org4184ec3" class="outline-3">
<h3 id="org4184ec3"><span class="section-number-3">1.11</span> Pistache - REST Http Web Server</h3>
<div class="outline-text-3" id="text-1-11">
<p>
Pistache is C++11 a web, http and rest framework, in other words, a
C++ toolkit for building standalone web servers. This library is easy
to use and fast to compile without any external dependency.
</p>

<p>
Web Site: 
</p>
<ul class="org-ul">
<li><a href="http://pistache.io/guide/">http://pistache.io/guide/</a></li>
</ul>

<p>
Repository: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/oktal/pistache">https://github.com/oktal/pistache</a></li>
</ul>

<p>
Conan Coordinate: 
</p>
<ul class="org-ul">
<li><a href="https://bintray.com/conan-community/conan/pistache%3Aconan/d5608a1%3Astable">pistache/d5608a1@conan/stable</a></li>
</ul>

<p>
<b>Example:</b> 
</p>

<p>
File: CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.14 FATAL_ERROR)
<span class="org-function-name">project</span>(pistache-web-server)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment"># ============= Conan Bootstrap =============================#</span>

<span class="org-comment"># Download automatically, you can also just copy the conan.cmake file</span>
<span class="org-keyword">if</span>(NOT EXISTS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
   <span class="org-function-name">message</span>(STATUS <span class="org-string">"Downloading conan.cmake from https://github.com/conan-io/cmake-conan"</span>)
   <span class="org-function-name">file</span>(DOWNLOAD <span class="org-string">"https://github.com/conan-io/cmake-conan/raw/v0.13/conan.cmake"</span>
                 <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
<span class="org-keyword">endif</span>()

<span class="org-function-name">include</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/conan.cmake)

<span class="org-function-name">conan_cmake_run</span>(REQUIRES
                pistache/d5608a1@conan/stable
                BASIC_SETUP
                BUILD missing
                )

<span class="org-comment"># ========= Target Configurations =========================// </span>

<span class="org-function-name">add_executable</span>(pistache-server pistache-server.cpp)
<span class="org-function-name">target_link_libraries</span>(pistache-server pistache)
</pre>
</div>

<p>
File: pistache-server.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">pistache/endpoint.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">namespace</span> <span class="org-constant">ps</span> = Pistache;
<span class="org-keyword">namespace</span> <span class="org-constant">Http</span> = <span class="org-constant">Pistache</span>::Http;
<span class="org-keyword">namespace</span> <span class="org-constant">Header</span> = <span class="org-constant">Pistache</span>::<span class="org-constant">Http</span>::Header;

<span class="org-comment-delimiter">// </span><span class="org-comment">using namespace Pistache;</span>

<span class="org-function-name">std</span>::<span class="org-type">ostream</span>&amp;
<span class="org-keyword">operator</span>&lt;&lt;<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span>, <span class="org-constant">Http</span>::<span class="org-type">Request</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">req</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">return</span> os &lt;&lt; <span class="org-string">" Method "</span> &lt;&lt; req.method<span class="org-rainbow-delimiters-depth-2">()</span>
              &lt;&lt; <span class="org-string">"; route =  "</span> &lt;&lt; req.resource<span class="org-rainbow-delimiters-depth-2">()</span>
              &lt;&lt; <span class="org-string">"; body = "</span> &lt;&lt; req.body<span class="org-rainbow-delimiters-depth-2">()</span>;

<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">struct</span> <span class="org-type">HttpTransaction</span> : <span class="org-keyword">public</span> <span class="org-constant">ps</span>::<span class="org-constant">Http</span>::<span class="org-type">Handler</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    HTTP_PROTOTYPE<span class="org-rainbow-delimiters-depth-2">(</span>HttpTransaction<span class="org-rainbow-delimiters-depth-2">)</span>

    <span class="org-type">void</span>
    <span class="org-function-name">onRequest</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Http</span>::<span class="org-type">Request</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">req</span>, <span class="org-constant">Http</span>::<span class="org-type">ResponseWriter</span> <span class="org-variable-name">res</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">override</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Request: "</span> &lt;&lt; req &lt;&lt; <span class="org-constant">std</span>::endl;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Set response headers</span>
        res.headers<span class="org-rainbow-delimiters-depth-3">()</span>.add<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">Header</span>::Server<span class="org-rainbow-delimiters-depth-3">&gt;(</span><span class="org-string">"CeePlusPlusWebServer"</span><span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Route: / =&gt; Root</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span>req.method<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-constant">Http</span>::<span class="org-constant">Method</span>::Get &amp;&amp; req.resource<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"/"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
            res.send<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">Http</span>::<span class="org-constant">Code</span>::Ok, <span class="org-string">" ==&gt; Welcome to my C++ Web Server, Enjoy it"</span><span class="org-rainbow-delimiters-depth-4">)</span>;
            <span class="org-keyword">return</span>;
        <span class="org-rainbow-delimiters-depth-3">}</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">Route: /demo1</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span>req.method<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-constant">Http</span>::<span class="org-constant">Method</span>::Get &amp;&amp; req.resource<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"/demo1"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
            res.send<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">ps</span>::<span class="org-constant">Http</span>::<span class="org-constant">Code</span>::Ok,
                     R<span class="org-default">"</span><span class="org-string">(</span>
<span class="org-string">                      &lt;html&gt;</span>
<span class="org-string">                         &lt;h1&gt; C++ blazing fast web server. &lt;/h1&gt;</span>
<span class="org-string">                         &lt;img src='https://www.howtogeek.com/wp-content/uploads/2018/09/bin_lede.png.pagespeed.ce.cyJdjIBBg2.png' /&gt;</span>
<span class="org-string">                      &lt;/html&gt;</span>
<span class="org-string">                     )</span><span class="org-default">"</span><span class="org-rainbow-delimiters-depth-4">)</span>;
            <span class="org-keyword">return</span>;
        <span class="org-rainbow-delimiters-depth-3">}</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">Route: /file =&gt; Serve Linux file /etc/protcols to client side</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span>req.method<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-constant">Http</span>::<span class="org-constant">Method</span>::Get &amp;&amp; req.resource<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"/file"</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-comment-delimiter">// </span><span class="org-comment">Allows client side download the text file /etc/protocols</span>
            <span class="org-constant">Http</span>::serveFile<span class="org-rainbow-delimiters-depth-4">(</span>res, <span class="org-string">"/etc/protocols"</span><span class="org-rainbow-delimiters-depth-4">)</span>;
            <span class="org-keyword">return</span>;
        <span class="org-rainbow-delimiters-depth-3">}</span>

        res.send<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">Http</span>::<span class="org-constant">Code</span>::Not_Found, <span class="org-string">"Error: page not found in this server"</span><span class="org-rainbow-delimiters-depth-3">)</span>;

    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" [INFO] Starting server. "</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">addr</span> = <span class="org-constant">ps</span>::Address<span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Allows connections from any IP address</span>
        <span class="org-constant">ps</span>::<span class="org-constant">Ipv4</span>::any<span class="org-rainbow-delimiters-depth-3">()</span>,
        <span class="org-comment-delimiter">// </span><span class="org-comment">Listen port 9080, aka bind to port 9080</span>
        <span class="org-constant">ps</span>::Port<span class="org-rainbow-delimiters-depth-3">(</span>9080<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">ops</span> = <span class="org-constant">ps</span>::<span class="org-constant">Http</span>::<span class="org-constant">Endpoint</span>::options<span class="org-rainbow-delimiters-depth-2">()</span>
                   .threads<span class="org-rainbow-delimiters-depth-2">(</span>4<span class="org-rainbow-delimiters-depth-2">)</span>
                   .flags<span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-constant">ps</span>::<span class="org-constant">Tcp</span>::<span class="org-constant">Options</span>::ReuseAddr<span class="org-rainbow-delimiters-depth-2">)</span>;


    <span class="org-constant">ps</span>::<span class="org-constant">Http</span>::<span class="org-type">Endpoint</span> <span class="org-variable-name">server</span><span class="org-rainbow-delimiters-depth-2">(</span>addr<span class="org-rainbow-delimiters-depth-2">)</span>;
    server.init<span class="org-rainbow-delimiters-depth-2">(</span>ops<span class="org-rainbow-delimiters-depth-2">)</span>;

    server.setHandler<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Http</span>::make_handler<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">HttpTransaction</span><span class="org-rainbow-delimiters-depth-3">&gt;()</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">try</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Attempt to bind server to port</span>
        server.serve<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">catch</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">runtime_error</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [ERROR] Unable to start server. =&gt; \n"</span>
                  &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Exit application. OK."</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">return</span> 0;

<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">--- End of Main() ---------------------//</span>
</pre>
</div>

<p>
<b>Running server:</b>
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./bin/pistache-server 
 [INFO] Starting server. 
</pre>
</div>

<p>
<b>Server route:</b> /
</p>

<ul class="org-ul">
<li>Http request to URL: <code>http://localhost:9080/</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"> $ curl  localhost:9080
 Welcome to my C++ Web Server, Enjoy it

$ curl -v localhost:9080
* Rebuilt URL to: localhost:9080/
*   Trying ::1...
* TCP_NODELAY set
* connect to ::1 port 9080 failed: Connection refused
*   Trying 127.0.0.1...
* TCP_NODELAY set
* Connected to localhost (127.0.0.1) port 9080 (<span class="org-comment-delimiter">#</span><span class="org-comment">0)</span>
&gt; GET / HTTP/1.1
&gt; Host: localhost:9080
&gt; User-Agent: curl/7.59.0
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 200 OK
&lt; Server: CeePlusPlusWebServer 
&lt; Connection: Keep-Alive
&lt; Content-Length: 38
&lt; 
* Connection <span class="org-comment-delimiter">#</span><span class="org-comment">0 to host localhost left intact</span>
Welcome to my C++ Web Server, Enjoy it
</pre>
</div>

<ul class="org-ul">
<li>Server log:</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">Request</span>:  Method GET; route =  /; body = 
</pre>
</div>

<p>
<b>Server route: /errorrout</b> 
</p>

<ul class="org-ul">
<li>Http request to URL: <code>http://localhost:9080/errorroute</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ curl  http://localhost:9080/errorroute
<span class="org-function-name">Error</span>: page not found<span class="org-keyword"> in</span> this server

$ curl -v  http://localhost:9080/errorroute
*   Trying ::1...
* TCP_NODELAY set
* connect to ::1 port 9080 failed: Connection refused
*   Trying 127.0.0.1...
* TCP_NODELAY set
* Connected to localhost (127.0.0.1) port 9080 (<span class="org-comment-delimiter">#</span><span class="org-comment">0)</span>
&gt; GET /errorroute HTTP/1.1
&gt; Host: localhost:9080
&gt; User-Agent: curl/7.59.0
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 404 Not Found
&lt; Server: CeePlusPlusWebServer 
&lt; Connection: Keep-Alive
&lt; Content-Length: 36
&lt; 
* Connection <span class="org-comment-delimiter">#</span><span class="org-comment">0 to host localhost left intact</span>
<span class="org-function-name">Error</span>: page not found<span class="org-keyword"> in</span> this server

</pre>
</div>

<p>
<b>Server route: /demo1</b> 
</p>

<ul class="org-ul">
<li>Http request to URL: <code>http://localhost:9080/demo1</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ curl http://localhost:9080/demo1

                      &lt;html&gt;
                         &lt;h1&gt; C++ blazing fast web server. &lt;/h1&gt;
                         &lt;img <span class="org-variable-name">src</span>=<span class="org-string">'https://www.howtogeek.com/wp-content/uploads/2018/09/bin_lede.png.pagespeed.ce.cyJdjIBBg2.png'</span> /&gt;
                      &lt;/html&gt;


$ curl -v  http://localhost:9080/demo1
*   Trying ::1...
* TCP_NODELAY set
* connect to ::1 port 9080 failed: Connection refused
*   Trying 127.0.0.1...
* TCP_NODELAY set
* Connected to localhost (127.0.0.1) port 9080 (<span class="org-comment-delimiter">#</span><span class="org-comment">0)</span>
&gt; GET /demo1 HTTP/1.1
&gt; Host: localhost:9080
&gt; User-Agent: curl/7.59.0
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 200 OK
&lt; Server: CeePlusPlusWebServer 
&lt; Connection: Keep-Alive
&lt; Content-Length: 279
&lt; 

                      &lt;html&gt;
                         &lt;h1&gt; C++ blazing fast web server. &lt;/h1&gt;
                         &lt;img <span class="org-variable-name">src</span>=<span class="org-string">'https://www.howtogeek.com/wp-content/uploads/2018/09/bin_lede.png.pagespeed.ce.cyJdjIBBg2.png'</span> /&gt;
                      &lt;/html&gt;
* Connection <span class="org-comment-delimiter">#</span><span class="org-comment">0 to host localhost left intact</span>
</pre>
</div>

<p>
<b>Server route: /file</b> 
</p>

<ul class="org-ul">
<li>Http request to URL: <code>http://localhost:9080/file</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ curl http://localhost:9080/file
<span class="org-comment-delimiter"># </span><span class="org-comment">/etc/protocols:</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">$Id: protocols,v 1.12 2016/07/08 12:27 ovasik Exp $</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Internet (IP) protocols</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter">#       </span><span class="org-comment">from: @(#)protocols     5.1 (Berkeley) 4/17/89</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Updated for NetBSD based on RFC 1340, Assigned Numbers (July 1992).</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Last IANA update included dated 2011-05-03</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">See also http://www.iana.org/assignments/protocol-numbers</span>

ip      0       IP              <span class="org-comment-delimiter"># </span><span class="org-comment">internet protocol, pseudo protocol number</span>
hopopt  0       HOPOPT          <span class="org-comment-delimiter"># </span><span class="org-comment">hop-by-hop options for ipv6</span>

  ... ...   ... ...   ... ...   ... ...   ... ...   ... ... 
  ... ...   ... ...   ... ...   ... ...   ... ...   ... ... 

hip     139     HIP             <span class="org-comment-delimiter"># </span><span class="org-comment">Host Identity Protocol</span>
shim6   140     Shim6           <span class="org-comment-delimiter"># </span><span class="org-comment">Shim6 Protocol</span>
wesp    141     WESP            <span class="org-comment-delimiter"># </span><span class="org-comment">Wrapped Encapsulating Security Payload</span>
rohc    142     ROHC            <span class="org-comment-delimiter"># </span><span class="org-comment">Robust Header Compression</span>
<span class="org-comment-delimiter">#   </span><span class="org-comment">143-252 Unassigned                                       [IANA]</span>
<span class="org-comment-delimiter">#   </span><span class="org-comment">253     Use for experimentation and testing           [RFC3692]</span>
<span class="org-comment-delimiter">#   </span><span class="org-comment">254     Use for experimentation and testing           [RFC3692]</span>
<span class="org-comment-delimiter">#   </span><span class="org-comment">255                 Reserved                             [IANA]</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org66851e2" class="outline-3">
<h3 id="org66851e2"><span class="section-number-3">1.12</span> Httplib - Http Client and Server Library</h3>
<div class="outline-text-3" id="text-1-12">
<p>
Cpp-Httplib is a single-file and header-only library for building HTTP
client or HTTP server applications. The advantage of this library is
that unlike most HTTP libraries, it does not relies on LibCurl or on
Boost.ASIO which makes Cpp-Httplib easier to setup and add to new
projects.
</p>

<p>
Repository: 
</p>

<ul class="org-ul">
<li><a href="https://github.com/yhirose/cpp-httplib/">https://github.com/yhirose/cpp-httplib/</a></li>
</ul>

<p>
Dependencies: 
</p>

<ul class="org-ul">
<li>SSL Library for HTTPS 
<ul class="org-ul">
<li>Or OpenSSL</li>
<li>Or LibreSSL (OpenSSL fork from OpenBSD)</li>
<li>Or WolfSSL  (SSL for embedded applications)</li>
</ul></li>

<li>LibZ for Compression</li>

<li>Pthread (Posix Threads) on Unix-like operating systems</li>
</ul>


<p>
<b>Sample project</b> 
</p>

<p>
Gist: 
</p>
<ul class="org-ul">
<li><a href="https://gist.github.com/d890edcb1cf3814ffcd6915940e4f2ca">https://gist.github.com/d890edcb1cf3814ffcd6915940e4f2ca</a></li>
</ul>

<p>
File: CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(httplib-client)

<span class="org-comment">#========== Global Configurations =============#</span>
<span class="org-comment">#----------------------------------------------#</span>

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)     
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)
<span class="org-function-name">set</span>(CMAKE_CXX_EXTENSIONS OFF)

<span class="org-comment"># ------------ Download CPM CMake Script ----------------#</span>

<span class="org-comment">## Automatically donwload and use module CPM.cmake</span>
<span class="org-function-name">file</span>(DOWNLOAD https://raw.githubusercontent.com/TheLartians/CPM.cmake/v0.26.2/cmake/CPM.cmake
                 <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/CPM.cmake"</span>)
<span class="org-function-name">include</span>(<span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/CPM.cmake"</span>)

<span class="org-comment">#----------- Add dependencies --------------------------#</span>

<span class="org-function-name">CPMAddPackage</span>(
    NAME  httplib 
    URL  <span class="org-string">"https://github.com/yhirose/cpp-httplib/archive/v0.6.6.zip"</span>
)
<span class="org-function-name">include_directories</span>( ${<span class="org-variable-name">httplib_SOURCE_DIR</span>} )

<span class="org-function-name">find_package</span>(PkgConfig REQUIRED)
<span class="org-function-name">pkg_search_module</span>(OPENSSL REQUIRED openssl)

<span class="org-function-name">message</span>([TRACE] <span class="org-string">" httplib source = ${</span><span class="org-variable-name">httplib_SOURCE_DIR</span><span class="org-string">} "</span>)
<span class="org-function-name">message</span>([TRACE] <span class="org-string">" OPENSSL_LIBRARIES = ${</span><span class="org-variable-name">OPENSSL_LIBRARIES</span><span class="org-string">} "</span>)

<span class="org-comment">#----------- Set targets -------------------------------#</span>
<span class="org-function-name">add_executable</span>(client client.cpp)

<span class="org-comment"># Requires implementation of this for Windows.</span>
<span class="org-keyword">IF</span>(UNIX)
    <span class="org-function-name">target_link_libraries</span>(client pthread z ${<span class="org-variable-name">OPENSSL_LIBRARIES</span>} )
<span class="org-keyword">ENDIF</span>()
</pre>
</div>

<p>
File: client.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cassert</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#define</span> <span class="org-variable-name">CPPHTTPLIB_ZLIB_SUPPORT</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">CPPHTTPLIB_OPENSSL_SUPPORT</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">httplib.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">namespace</span> <span class="org-constant">h</span> = httplib;

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-keyword">using</span> <span class="org-type">shp</span> = <span class="org-constant">std</span>::<span class="org-type">shared_ptr</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n [TRACE] Started Ok. "</span> &lt;&lt; <span class="org-string">"\n\n"</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">-------- E X P E R I M E N T / 1 --------------------------------------//</span>
    <span class="org-comment-delimiter">//</span><span class="org-comment">------------------------------------------------------------------------//</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [EXPERIMENT 1] HttpS (HTTP + SSL) Request "</span> &lt;&lt; <span class="org-string">'\n'</span>;
    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ----------------------------------------------------"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">h</span>::<span class="org-type">SSLClient</span> <span class="org-variable-name">cli</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"www.httpbin.org"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">cli.enable_server_certificate_verification(true);</span>

        <span class="org-type">shp</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">h</span>::Response<span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-variable-name">res</span> = cli.Get<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"/get"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        assert<span class="org-rainbow-delimiters-depth-3">(</span> res != <span class="org-constant">nullptr</span> <span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span>res<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"   =&gt; Http Version = "</span> &lt;&lt; res-&gt;version &lt;&lt; <span class="org-string">'\n'</span>;
            <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"   =&gt;       Status = "</span> &lt;&lt; res-&gt;status &lt;&lt; <span class="org-string">'\n'</span>;
            <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"   =&gt; Content-Type = "</span> &lt;&lt; res-&gt;get_header_value<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Content-Type"</span><span class="org-rainbow-delimiters-depth-4">)</span> &lt;&lt; <span class="org-string">'\n'</span>;

            <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">" --- All HTTP headers -----------"</span><span class="org-rainbow-delimiters-depth-4">)</span>;
            <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-4">(</span> <span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-rainbow-delimiters-depth-5">[</span><span class="org-constant">key</span>, <span class="org-constant">value</span><span class="org-rainbow-delimiters-depth-5">]</span> : res-&gt;headers <span class="org-rainbow-delimiters-depth-4">)</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-4">(</span>40<span class="org-rainbow-delimiters-depth-4">)</span> &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; key
                          &lt;&lt; <span class="org-string">"  "</span>
                          &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-4">(</span>35<span class="org-rainbow-delimiters-depth-4">)</span> &lt;&lt; <span class="org-constant">std</span>::left  &lt;&lt; value
                          &lt;&lt; <span class="org-string">"\n"</span>;


            <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-4">(</span>res-&gt;status == 200<span class="org-rainbow-delimiters-depth-4">)</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n [INFO] HTTP Response = "</span> &lt;&lt; res-&gt;body &lt;&lt; <span class="org-string">'\n'</span>;

        <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">-------- E X P E R I M E N T / 1 --------------------------------------//</span>
    <span class="org-comment-delimiter">//</span><span class="org-comment">------------------------------------------------------------------------//</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [EXPERIMENT 2] Https (HTTP + SSL) ==&gt;&gt; Download binary file "</span> &lt;&lt; <span class="org-string">'\n'</span>;
    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ----------------------------------------------------"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">ifs</span> = <span class="org-constant">std</span>::ofstream<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"image.jpeg"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">cli</span> = <span class="org-constant">h</span>::Client2<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"https://www.httpbin.org"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">res</span> = cli.Get<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"/image/jpeg"</span>
                       ,<span class="org-rainbow-delimiters-depth-3">[</span>&amp;<span class="org-rainbow-delimiters-depth-3">](</span><span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">bytes</span>, <span class="org-type">size_t</span> <span class="org-variable-name">len</span><span class="org-rainbow-delimiters-depth-3">)</span> -&gt; <span class="org-type">bool</span>
                        <span class="org-rainbow-delimiters-depth-3">{</span>
                            ifs.write<span class="org-rainbow-delimiters-depth-4">(</span>bytes, len<span class="org-rainbow-delimiters-depth-4">)</span>;
                             <span class="org-comment-delimiter">// </span><span class="org-comment">Note: return false for stopping processing the request</span>
                            <span class="org-keyword">return</span> <span class="org-constant">true</span>;
                        <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Status 200 means successful HTTP response from server.</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Res-&gt;status = "</span> &lt;&lt; res-&gt;status &lt;&lt; <span class="org-string">'\n'</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n [TRACE] Finish Ok. "</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Building: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ git clone https://gist.github.com/caiorss/d890edcb1cf3814ffcd6915940e4f2ca code &amp;&amp; <span class="org-builtin">cd</span> code

$ ls 
client.cpp  CMakeLists.txt

$ cmake -H. -B_build -DCMAKE_BUILD_TYPE=Debug 
$ cmake --build _build --target 

</pre>
</div>

<p>
Check compilation output: (object code)
</p>

<div class="org-src-container">
<pre class="src src-sh"> $ file _build/client 
 _build/client: ELF 64-bit LSB executable, x86-64, version 1 (GNU/Linux), dynamically linked, interpreter 
/lib64/ld-linux-x86-64.so.2, <span class="org-variable-name">BuildID</span>[sha1]=e2aa2ba8c5258b274b1c58ddd6039c2f9c83f995, for GNU/Linux 3.2.0, 
with debug_info, not stripped

<span class="org-comment-delimiter"># </span><span class="org-comment">Shared library dependencies</span>
$ ldd _build/client 
        linux-vdso.so.1 (0x00007ffffa9cd000)
        libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007fbbbc4f5000)
        libz.so.1 =&gt; /lib64/libz.so.1 (0x00007fbbbc4db000)
        libssl.so.1.1 =&gt; /lib64/libssl.so.1.1 (0x00007fbbbc444000)
        libcrypto.so.1.1 =&gt; /lib64/libcrypto.so.1.1 (0x00007fbbbc157000)
        libstdc++.so.6 =&gt; /lib64/libstdc++.so.6 (0x00007fbbbbf67000)
        libm.so.6 =&gt; /lib64/libm.so.6 (0x00007fbbbbe21000)
        libgcc_s.so.1 =&gt; /lib64/libgcc_s.so.1 (0x00007fbbbbe04000)
        libc.so.6 =&gt; /lib64/libc.so.6 (0x00007fbbbbc3a000)
        /lib64/ld-linux-x86-64.so.2 (0x00007fbbbc53b000)
        libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007fbbbbc33000)
</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ _build/client 

 [TRACE] Started Ok. 

 [EXPERIMENT 1] HttpS (HTTP + SSL) Request 
 ----------------------------------------------------
   =&gt; Http Version = HTTP/1.1
   =&gt;       Status = 200
   =&gt; Content-Type = application/json
 --- All HTTP headers -----------
        Access-Control-Allow-Credentials  true                               
             Access-Control-Allow-Origin  *                                  
                              Connection  close                              
                          Content-Length  293                                
                            Content-Type  application/json                   
                                    Date  Mon, 08 Jun 2020 17:15:26 GMT      
                                  Server  gunicorn/19.9.0                    

 [INFO] HTTP Response = {
  <span class="org-string">"args"</span>: {}, 
  <span class="org-string">"headers"</span>: {
    <span class="org-string">"Accept"</span>: <span class="org-string">"*/*"</span>, 
    <span class="org-string">"Content-Length"</span>: <span class="org-string">"0"</span>, 
    <span class="org-string">"Host"</span>: <span class="org-string">"www.httpbin.org"</span>, 
    <span class="org-string">"User-Agent"</span>: <span class="org-string">"cpp-httplib/0.6"</span>, 
    <span class="org-string">"X-Amzn-Trace-Id"</span>: <span class="org-string">"Root=2-5ede733a-52cceb0745415a696bea025d"</span>
  }, 
  <span class="org-string">"origin"</span>: <span class="org-string">"153.8.52.56"</span>, 
  <span class="org-string">"url"</span>: <span class="org-string">"https://www.httpbin.org/get"</span>
}

 [EXPERIMENT 2] Https (HTTP + SSL) ==&gt;&gt; Download binary file 
 ----------------------------------------------------
 Res-&gt;status = 200

 [TRACE] Finish Ok. 

</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2021-06-04 Fri 15:06</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
