<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2021-02-20 sáb 17:41 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Computer Graphics</title>
<meta name="generator" content="Org mode" />
<meta name="description" content="cpp/c++ interoperability ffi shim qt5 widgets gui library wrapper julia dlang"
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
<link href="theme/org-nav-theme.css" rel="stylesheet">
<script src="theme/org-nav-theme.js"></script>
<link rel="icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "left",
        displayIndent: "2em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "%LINEBREAKS" },
                        webFont: "%FONT"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "%LINEBREAKS" },
              font: "%FONT"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "%AUTONUMBER"},
               MultLineWidth: "%MULTLINEWIDTH",
               TagSide: "%TAGSIDE",
               TagIndent: "%TAGINDENT"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_SVG"></script>
</head>
<body>
<div id="content">
<h1 class="title">Computer Graphics</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgfeea9a0">1. Computer Graphics</a>
<ul>
<li><a href="#orgbb9c7c6">1.1. Main Computer Graphics APIs</a></li>
<li><a href="#org6dee70e">1.2. OpenGL Documentation</a></li>
<li><a href="#org81dad93">1.3. Terminology related to OpenGL and  Computer Graphics</a></li>
<li><a href="#orga62c415">1.4. OpenGL companion libraries</a>
<ul>
<li><a href="#orgc0dfb0d">1.4.1. OpenGL Companion Libraries</a></li>
<li><a href="#org637edcf">1.4.2. WebGL Companion Libraries</a></li>
<li><a href="#orgbb7d514">1.4.3. See also</a></li>
</ul>
</li>
<li><a href="#orge916077">1.5. Legacy/Obsolete OpenGL Subroutines</a></li>
<li><a href="#org7ec893d">1.6. Computer Graphics Math</a>
<ul>
<li><a href="#org4052e19">1.6.1. Vector Algebra</a></li>
<li><a href="#orge2aeede">1.6.2. Affine Transforms</a></li>
<li><a href="#org5f0f9dc">1.6.3. 2D Canonical Affine Transforms</a></li>
<li><a href="#org11065bb">1.6.4. 3D Canonical Affine Transforms</a></li>
<li><a href="#org93b8544">1.6.5. Camera View Transform</a></li>
<li><a href="#org607f51d">1.6.6. Concatenating Affine Transforms</a></li>
<li><a href="#orgb7ee96e">1.6.7. Quaternions</a></li>
<li><a href="#org214e6ae">1.6.8. Quaternions - Combining Scale and Position</a></li>
<li><a href="#org88fb30d">1.6.9. Quaternion in Julia Language</a></li>
</ul>
</li>
<li><a href="#org69deae0">1.7. Library GLM - OpenGL Mathematics</a>
<ul>
<li><a href="#org52cf41d">1.7.1. Overview</a></li>
<li><a href="#org3b99c01">1.7.2. Testing in CERN's Root REPL</a></li>
</ul>
</li>
<li><a href="#org785fc99">1.8. 2D Graphics - no VBO abstraction</a></li>
<li><a href="#org0b9c635">1.9. 2D Graphics - using VBO abstraction</a></li>
<li><a href="#orgcc82bd0">1.10. 2D Graphics - using VAO</a></li>
<li><a href="#org277a55c">1.11. 2D Graphics - using shaders</a></li>
<li><a href="#org4bfd914">1.12. 3D Graphics - Rotating cube</a></li>
<li><a href="#org5b28d92">1.13. 3D Graphics - Quaternion</a></li>
</ul>
</li>
</ul>
</div>
</div>


<div id="outline-container-orgfeea9a0" class="outline-2">
<h2 id="orgfeea9a0"><span class="section-number-2">1</span> Computer Graphics</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orgbb9c7c6" class="outline-3">
<h3 id="orgbb9c7c6"><span class="section-number-3">1.1</span> Main Computer Graphics APIs</h3>
<div class="outline-text-3" id="text-1-1">
<p>
<b>Native Graphics APIs</b> (exposed as C-subroutines)
</p>

<ul class="org-ul">
<li><a href="https://www.opengl.org//">OpenGL</a> (Khronos Group) - Main OpenGL specification
<ul class="org-ul">
<li>=&gt; Open standard, cross-platform and vendor-independent API for
rendering 2D or 3D computer graphics with GPU (Graphics
Processing Unit) acceleration. OpenGL can be used for
implementing computer graphics, games, scientific vizualization,
virtual reality and CADs - Computer Aided Design
software. OpenGL API specificiation is maintained as an
open-standard by the Krhonos Group industry consortium.</li>

<li>=&gt; OpenGL has two modes, <span class="underline">immediate mode</span> (a.k.a fixed-function
pipeline, legacy-OpenGL) which is being depreacted, and <span class="underline">retained</span>
<span class="underline">mode</span> (modern OpenGL) that delivers more performance and is based
on buffer-objects and shaders.</li>

<li>=&gt; OpenGL Official Specification: <a href="https://www.khronos.org/registry/OpenGL/index_gl.php">Khronos OpenGL® Registry</a></li>
</ul></li>

<li><span class="underline">OpenGL ES</span>  (Khronos Group)
<ul class="org-ul">
<li>=&gt; OpenGL for embedded systems, mobile devices and touch screen
devices and so on. This API (Application Programming Interface)
is widely used by many mobile games.</li>

<li>=&gt; Similar to OpenGL specfication, but supports only the
<span class="underline">retained-mode</span>. OpenGL ES does not support <span class="underline">immediate-mode</span>. As a
result, calls to legacy OpenGL subroutines such as glBegin(),
glEnd(), glRotate(), glTranslate(), &#x2026;, are not supported.</li>
</ul></li>

<li><a href="https://www.khronos.org/vulkan/">Vulkan</a>_(Khronos Group)
<ul class="org-ul">
<li>=&gt; Graphics API with GPU acceleration that provides more
low-level GPU control and less overhead than OpenGL. This API is
designed for taking more advantag of multi-core CPU
architectures and performing tasks in parallel.</li>
</ul></li>

<li><a href="https://en.wikipedia.org/wiki/DirectX">DirectX</a> / Direct3D (Microsoft inc.) - Windows-only
<ul class="org-ul">
<li>=&gt; Microsoft's graphics API for accessing the GPU hardware. It
is only available on operating systems based Windows-NT kernel
and Windows-CE kernel (embedded version of Windows-NT).</li>
</ul></li>

<li><a href="https://developer.apple.com/metal/">Metal</a> (Apple inc.) 
<ul class="org-ul">
<li>=&gt; Apple-only API for rendering 2D or 3D computer graphics with
GPU acceleration. This API is available only on iOS and MacOSX
operating systems. On iOS and MacOSX, Apple is deprecating and
phasing out OpenGL in favor of its own  API.</li>
</ul></li>
</ul>

<p>
<b>Web Computer Graphics APIs</b> (exposed as Javascript/ECMAScript subroutines)
</p>

<ul class="org-ul">
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Tutorial/Getting_started_with_WebGL">WebGL</a> (Khronos Group)  / Html5 API 
<ul class="org-ul">
<li>=&gt; Based on OpenGL ES and implemented by major web
browsers. Unlike OpenGL or OpenGL ES, which are exposed via C
subroutines, WebGL is exposed to calling codes via JavaScript
(ECMAScript) and Html5 canvas.</li>

<li>=&gt; Note: This API does not support OpenGL immediate-mode or
legacy OpenGL. WebGL only supports <span class="underline">retained-mode</span>.</li>
</ul></li>

<li><a href="https://en.wikipedia.org/wiki/WebGPU">WebGPU</a> (W3C Consortium) - Upcoming Html5 standard. 
<ul class="org-ul">
<li>=&gt; Upcoming graphics API for web browser, based on Vulkan,
Metal and DirectX which intends to deliver more low level GPU
control and higher performance. Unlike WebGL, this API is not a
direct port of any native graphics API such as Vulkan, Metal and
DirectX.</li>
<li><a href="https://gpuweb.github.io/gpuweb/">WebGPU - Editor’s Draft</a></li>
<li><a href="https://github.com/gpuweb/gpuweb/wiki/Implementation-Status">Implementation Status · gpuweb/gpuweb Wiki · GitHub</a></li>
<li><a href="https://github.com/gpuweb/gpuweb">GitHub - gpuweb/gpuweb: Where the GPU for the Web work happens!</a></li>
<li><a href="https://kvark.github.io/web/gpu/native/2020/05/03/point-of-webgpu-native.html">Point of WebGPU on native</a></li>
<li><a href="https://hacks.mozilla.org/2020/04/experimental-webgpu-in-firefox/">A Taste of WebGPU in Firefox - Mozilla Hacks - the Web developer blog</a></li>
</ul></li>
</ul>


<p>
<b>Further Reading</b> 
</p>

<ul class="org-ul">
<li><a href="https://vulkan.gpuinfo.org/listdevices.php">Devices - Vulkan Hardware Database by Sascha Willems</a></li>

<li><a href="https://github.com/KhronosGroup/MoltenVK">GitHub - KhronosGroup/MoltenVK</a>
<ul class="org-ul">
<li>"MoltenVK is a Vulkan Portability implementation. It layers a
subset of the high-performance, industry-standard Vulkan
graphics and compute API over Apple's Metal graphics framework,
enabling Vulkan applications to run on iOS and macOS."</li>
</ul></li>

<li><a href="https://www.pcgamer.com/doom-benchmarks-return-vulkan-vs-opengl/">Doom benchmarks return: Vulkan vs. OpenGL | PC Gamer</a></li>

<li><a href="https://linuxhint.com/vulkan-for-linux-users/">Vulkan for Linux Users – Linux Hint</a></li>

<li><a href="https://stackoverflow.com/questions/56766983/what-can-vulkan-do-specifically-that-opengl-4-6-cannot">What can Vulkan do specifically that OpenGL 4.6+ cannot? - Stack</a></li>

<li><a href="https://softwareengineering.stackexchange.com/questions/380832/opengl-and-global-state">design - OpenGL and global state - Software Engineering Stack Exchange</a></li>
</ul>
</div>
</div>
<div id="outline-container-org6dee70e" class="outline-3">
<h3 id="org6dee70e"><span class="section-number-3">1.2</span> OpenGL Documentation</h3>
<div class="outline-text-3" id="text-1-2">
<p>
<b>OpenGL:</b>
</p>

<ul class="org-ul">
<li><a href="http://docs.gl/">docs.gl</a> [BEST]
<ul class="org-ul">
<li>Allows searching and quickly browsing the OpenGL
documentation.</li>
</ul></li>

<li><a href="https://www.opengl.org/">https://www.opengl.org/</a></li>

<li><a href="https://www.khronos.org/registry/OpenGL/index_gl.php">Khronos OpenGL® Registry</a>
<ul class="org-ul">
<li>OpenGL Official Specification.</li>
</ul></li>

<li><a href="https://www.khronos.org/opengl/wiki/Core_Language_(GLSL)">Core Language (GLSL) - OpenGL Wiki</a> / Khronos Group 
<ul class="org-ul">
<li>Official Documentation of OpenGL shading language.</li>
</ul></li>

<li><a href="https://www.khronos.org/opengl/wiki/Data_Type_(GLSL)">Data Type (GLSL) - OpenGL Wiki</a> / Khronos Group
<ul class="org-ul">
<li>Data types of GLSL - OpenGL Shading Language.</li>
</ul></li>

<li><a href="https://thebookofshaders.com/">The Book of Shaders</a> - (Patricio Gonzalez and Jen Love)</li>

<li><a href="https://arm-software.github.io/opengl-es-sdk-for-android/index.html">OpenGL ES SDK for Android Documentation</a> (ARM Company)</li>

<li><a href="https://www.khronos.org/opengl/wiki/Common_Mistakes">Common Mistakes</a> (Khronos Group) =&gt;&gt; Useful for debugging.</li>

<li><a href="https://web.archive.org/web/20190629031543/http://antongerdelan.net/teaching/3dprog1/maths_cheat_sheet.pdf">3D Maths Cheat Sheet</a> - Reference Card for computer graphics
linear algebra. (homogeneous coordinates, rotation matrices,
translation matrices and etc.)</li>
</ul>

<p>
<b>WebGL:</b>
</p>

<ul class="org-ul">
<li><a href="https://www.khronos.org/webgl/">WebGL Overview - The Khronos Group Inc</a>
<ul class="org-ul">
<li>"WebGL is a cross-platform, royalty-free web standard for a
low-level 3D graphics API based on OpenGL ES, exposed to
ECMAScript via the HTML5 Canvas element. Developers familiar
with OpenGL ES 2.0 will recognize WebGL as a Shader-based API
using GLSL, with constructs that are semantically similar to
those of the underlying OpenGL ES API. It stays very close to
the OpenGL ES specification, with some concessions made for
what developers expect out of memory-managed languages such as
JavaScript. WebGL 1.0 exposes the OpenGL ES 2.0 feature set;
WebGL 2.0 exposes the OpenGL ES 3.0 API."</li>
</ul></li>

<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Tutorial">WebGL tutorial - Web APIs | MDN</a></li>

<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Tutorial/Getting_started_with_WebGL">Getting started with WebGL - Web APIs | MDN</a> - WebGL Documentation.</li>

<li><a href="https://webglfundamentals.org/">WebGL Fundamentals</a></li>
</ul>
</div>
</div>

<div id="outline-container-org81dad93" class="outline-3">
<h3 id="org81dad93"><span class="section-number-3">1.3</span> Terminology related to OpenGL and  Computer Graphics</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li><span class="underline">OpenGL</span> - Open Graphics Library</li>

<li><a href="https://www.khronos.org/opengl/wiki/OpenGL_Context">OpenGL Context</a></li>

<li><a href="http://glew.sourceforge.net/index.html">GLEW</a> - OpenGL Extension Wrangler</li>

<li>ARB - Architecture Review Board</li>

<li>OpenGL <span class="underline">Immediate Mode</span> (Fixed-Function Pipeline, Legacy OpenGL)
<ul class="org-ul">
<li>Also known as: Legacy OpenGL, Fixed-Function Pipeline</li>
<li>Drawing is mostly performed without storing data on GPU and by
using subroutines calls to glScale(), glRotate(), glPush(), glPop(),
glTranslate(), glBegin(), glEnd() and so on.</li>
<li>Immediate-mode is not supported by OpenGL ES or WebGL.</li>
<li>See: <a href="https://www.khronos.org/opengl/wiki/Fixed_Function_Pipeline">Fixed Function Pipeline - OpenGL Wiki</a></li>
</ul></li>

<li>OpenGL <span class="underline">retained mode</span> (Programmable Pipeline, Modern OpenGL)
<ul class="org-ul">
<li>Also known as: Modern OpenGL, Programmable Pipeline</li>
<li>New and modern OpenGL API =&gt; Drawing is performed by storing
data on the GPU via VBO (Vertex Buffer Objects) and by using
<span class="underline">shaders</span>, programs that runs on GPU, for performing geometric
vertex transformations, color and texturing computations.</li>
<li>More peformant than <span class="underline">immediate-mode</span> as the data is not sent to
the GPU every frame.</li>
</ul></li>

<li><span class="underline">GPU</span> - Graphics Processing Unit</li>

<li><span class="underline">GPGPU</span> - General Purpose Computing on GPU
<ul class="org-ul">
<li>APIs: OpenGL, Cuda, and so on.</li>
<li>Parallel non-graphics computations on GPU. GPGPU APIs take
advantage of GPU parallel computing features for high
performance computing.</li>
</ul></li>

<li><a href="https://www.khronos.org/opengl/wiki/Direct_State_Access">DSA</a> - Direct State Access</li>

<li><span class="underline">Vertex</span> - 2D or 3D coordinates representing a point in the space.</li>

<li><span class="underline">DOF</span> - Degrees Of Freedom</li>

<li><span class="underline">2D</span> - 2 dimensions (plane) / 2 coordinates (X, Y)</li>

<li><span class="underline">3D</span> - 3 dimensions (space) / 3 coordinates (X, Y, Z)</li>

<li><span class="underline">Homogenous Coordinate</span> - Coordinate system using an extra dimension
for encoding translation coordinate transformation in the same way
as rotation matrices transformations.
<ul class="org-ul">
<li>2D homogeneous coordinates: (X, Y, W = 1)</li>
<li>3D homogeneous coordinates: (X, Y, Z, W = 1)</li>
</ul></li>

<li><span class="underline">NDC</span> - Normalized Device Coordinate
<ul class="org-ul">
<li>Default coordinates used by OpenGL (-1.0 to 1.0) for each
axis. Any vertex that falls out of this range will not be visible
on the screen.</li>
</ul></li>

<li><span class="underline">MCS</span> - Model Coordinate System</li>

<li><span class="underline">CTM</span> - Current Transform Matrix</li>

<li><a href="https://www.khronos.org/opengl/wiki/Buffer_Object">Buffer Object</a></li>

<li><span class="underline">VBO</span> - Vertex Buffer Object</li>

<li><span class="underline">VAO</span> - Vertex Array Object</li>

<li><span class="underline">FBO</span> - Framebuffer Object</li>

<li><span class="underline">IBO</span> - Index Buffer Object</li>

<li><span class="underline">UBO</span> - Uniform Buffer Object</li>

<li><span class="underline">FPS</span> - Frame Per Seconds</li>

<li><span class="underline">Shader</span> - Program that runs on the GPU and performs vertex
computations such as coordinate transformations (matrix
multiplications), colors and texture computations.</li>

<li><span class="underline">GLSL</span> - OpenGL shading programming language - for performing
computer graphics calculations on the GPU hardware.</li>

<li><span class="underline">HLSL</span> (High-Level Shader Language) - Microsft's DirectX shading language.</li>

<li><span class="underline">CAD</span> - Computer Aided Design</li>

<li><span class="underline">CAM</span> - Computer Aided Manufacturing</li>
</ul>
</div>
</div>

<div id="outline-container-orga62c415" class="outline-3">
<h3 id="orga62c415"><span class="section-number-3">1.4</span> OpenGL companion libraries</h3>
<div class="outline-text-3" id="text-1-4">
</div>
<div id="outline-container-orgc0dfb0d" class="outline-4">
<h4 id="orgc0dfb0d"><span class="section-number-4">1.4.1</span> OpenGL Companion Libraries</h4>
<div class="outline-text-4" id="text-1-4-1">
<p>
Core Libraries:
</p>

<ul class="org-ul">
<li><span class="underline">GL</span>  - OpenGL Graphics API</li>
</ul>

<p>
OpenGL Loaders:
</p>

<ul class="org-ul">
<li>Libraries that abstracts OpenGL function pointers loading in a
platform-independent way.</li>

<li><a href="http://glew.sourceforge.net/index.html">GLEW</a> - OpenGL Extension Wrangler [MOST USED]
<ul class="org-ul">
<li>"The OpenGL Extension Wrangler Library (GLEW) is a
cross-platform open-source C/C++ extension loading library. GLEW
provides efficient run-time mechanisms for determining which
OpenGL extensions are supported on the target platform. OpenGL
core and extension functionality is exposed in a single header
file. GLEW has been tested on a variety of operating systems,
including Windows, Linux, Mac OS X, FreeBSD, Irix, and Solaris."</li>
</ul></li>

<li><a href="https://glad.dav1d.de/">GLAD</a> - [MOST-USED] Multi-Language GL/GLES/EGL/GLX/WGL
Loader-Generator based on the official specs.</li>

<li><a href="https://github.com/cginternals/glbinding">GitHub - cginternals/glbinding</a>
<ul class="org-ul">
<li>"A C++ binding for the OpenGL API, generated using the gl.xml
specification."</li>
</ul></li>

<li><a href="https://github.com/anholt/libepoxy">GitHub - anholt/libepoxy</a>
<ul class="org-ul">
<li>"Epoxy is a library for handling OpenGL function pointer
management for you."</li>
</ul></li>

<li><a href="https://github.com/imakris/glatter">GitHub - imakris/glatter</a>
<ul class="org-ul">
<li>"An OpenGL loading library, with support for GL, GLES, EGL, GLX and WGL"</li>
</ul></li>

<li><a href="https://galogen.gpfault.net/">Galogen OpenGL Loader Generator</a>
<ul class="org-ul">
<li>"Galogen is an OpenGL loader generator. Given an API version and
a list of extensions, Galogen will produce corresponding headers
and code that load the exact OpenGL entry points you need. The
produced code can then be used directly by your C or C++
application, without having to link against any additional
libraries."</li>
</ul></li>

<li><a href="https://github.com/SFML/SFML-glLoadGen">GitHub - SFML/SFML-glLoadGen</a>
<ul class="org-ul">
<li>Customized glLoadGen for SFML</li>
</ul></li>
</ul>

<p>
Libraries for window systems, event handling and OpenGL context abstraction: 
</p>

<ul class="org-ul">
<li>Abstract platform-specific window system and event handling.</li>

<li><a href="https://www.glfw.org/">GLFW</a> [BEST] [MOST-USED]
<ul class="org-ul">
<li>C library that provides graphics windows for OpenGL, Vulkan,
OpenGL ES and deals with event handling.</li>
</ul></li>

<li><a href="https://www.libsdl.org/">SDL</a> (Simple Direct Media Layer) [BEST] [MOST-USED]
<ul class="org-ul">
<li>Cross-platform C library that provides windows and event
handling for many computer graphics APIs such as OpenGL, Vulkan
and DirectX. SLD also has facilities for dealing with audio,
joystick, CD-ROM, network and threads.</li>
</ul></li>

<li><a href="http://freeglut.sourceforge.net/">GLUT</a> (FreeGlut) - OpenGL Utility Toolkit
<ul class="org-ul">
<li>Deals with window creation, OpenGL initialization, event
handling and  so on.</li>
<li>Docs: <a href="https://www.glfw.org/documentation.html">https://www.glfw.org/documentation.html</a></li>
</ul></li>
</ul>


<p>
OpenGL Math and Computer Graphics Math: 
</p>


<ul class="org-ul">
<li><a href="https://glm.g-truc.net/0.9.5/api/index.html">GLM</a> (OpenGL Mathematics Library) [MOST-USED]
<ul class="org-ul">
<li>Source code: <a href="https://github.com/g-truc/glm">https://github.com/g-truc/glm</a></li>
<li>Header-only C++ library that provides classes for computer
graphics mathematics such as: 2D, 3D and homogeneous coordinate
vector; 2D, 3D and homogeneous coordinate transformation
matrices; quaternions and subroutines for computing camera,
perspective or orthogonal transformation matrices.</li>
</ul></li>

<li><a href="https://github.com/Kazade/kazmath">GitHub - Kazade/kazmath</a> - A C math library targeted at games
<ul class="org-ul">
<li>"Kazmath is a simple 3D maths library written in C. It was
initially coded for use in my book, Beginning OpenGL Game
Programming - Second edition, but rapidly gained a life of its
own. Kazmath is now used by many different projects, and
apparently is used in 25% of the worlds mobile games (yeah, I
don't believe it either - but it's used in Cocos2d-x)."</li>
</ul></li>

<li><a href="https://github.com/recp/cglm">GitHub - recp/cglm</a> -  Highly Optimized Graphics Math (glm) for C</li>

<li>See: <a href="https://github.com/chunkyguy/Math-Library-Test">GitHub - chunkyguy/Math-Library-Test</a> - A comparison of the
various major math libraries for speed and ease of use.</li>
</ul>

<p>
Object loader / Asset import libraries: 
</p>

<ul class="org-ul">
<li><a href="http://www.assimp.org/">Assimp - The Open-Asset-Import Library</a> [MOST-USED]
<ul class="org-ul">
<li>"The Open Asset Import Library (short name: Assimp) is a
portable Open-Source library to import various well-known 3D
model formats in a uniform manner. The most recent version also
knows how to export 3d files and is therefore suitable as a
general-purpose 3D model converter. See the feature-list."</li>
<li>Note: Allows importing blender-generated models/assets in OpenGL.</li>
<li>Repository: <a href="https://github.com/assimp/assimp">https://github.com/assimp/assimp</a></li>
<li>See: <a href="https://www.khronos.org/opengl/wiki/Tools/Open_Asset_Import">https://www.khronos.org/opengl/wiki/Tools/Open_Asset_Import</a></li>
</ul></li>

<li><a href="https://github.com/Bly7/OBJ-Loader">OBJ-Loader</a>
<ul class="org-ul">
<li>"OBJ Loader is a simple, header only, .obj model file loader
that will take in a path to a file, load it into the Loader
class object, then allow you to get the data from each mesh
loaded. This will load each mesh within the model with the
corresponding data such as vertices, indices, and material. Plus
a large array of vertices, indices and materials which you can
do whatever you want with."</li>
</ul></li>

<li><a href="https://github.com/tinyobjloader/tinyobjloader">tinyobjloader/tinyobjloader</a> 
<ul class="org-ul">
<li>"Tiny but powerful single file wavefront obj loader written in
C++03. No dependency except for C++ STL. It can parse over 10M
polygons with moderate memory and time. tinyobjloader is good
for embedding .obj loader to your (global illumination) renderer
;-)."</li>
</ul></li>

<li><a href="https://github.com/codelibs/libdxfrw">codelibs/libdxfrw</a>
<ul class="org-ul">
<li>"C++ library to read and write DXF/DWG (Autocad file format)
files. - libdxfrw is a free C++ library to read and write DXF
files in both formats, ascii and binary form. Also can read DWG
files from R14 to the last V2015. It is licensed under the terms
of the GNU General Public License version 2 (or at you option
any later version)."</li>
</ul></li>
</ul>

<p>
Text and Font Rendering: 
</p>

<ul class="org-ul">
<li><a href="https://www.freetype.org/">The FreeType Project</a>
<ul class="org-ul">
<li>Brief: "It is written in C, designed to be small, efficient,
highly customizable, and portable while capable of producing
high-quality output (glyph images) of most vector and bitmap
font formats."</li>
</ul></li>

<li><a href="http://oglft.sourceforge.net/">OGLFT: OpenGL-FreeType Library</a>
<ul class="org-ul">
<li>Brief: "This C++ library supplies an interface between the fonts
on your system and an OpenGL or Mesa application. It uses the
excellent FreeType library to read font faces from their files
and renders text strings as OpenGL primitives."</li>
</ul></li>

<li><a href="https://github.com/vallentin/glText">GitHub - vallentin/glText</a> - [HEADER-ONLY-LIBRARY]
<ul class="org-ul">
<li>Brief: "glText is a simple cross-platform single header text
rendering library for OpenGL. glText requires no additional
files (such as fonts or textures) for drawing text, everything
comes pre-packed in the header."</li>
</ul></li>

<li><a href="https://github.com/MartinPerry/OpenGL-Font-Rendering">GitHub - MartinPerry/OpenGL-Font-Rendering</a> 
<ul class="org-ul">
<li>Brief: "Rendering UNICODE fonts with OpenGL This library is
still work-in-progress. This is a working beta version."</li>
</ul></li>

<li><a href="http://nuclear.mutantstargoat.com/sw/libdrawtext/">libdrawtext - OpenGL text rendering library</a>
<ul class="org-ul">
<li>Brief: "Libdrawtext uses freetype2 for glyph rasterization. If
you would rather avoid having freetype2 as a dependency, you can
optionally compile libdrawtext without it, and use pre-rendered
glyphmaps. Glyphmaps can be generated by the included
font2glyphmap tool, or by calling dtx_save_glyphmap."</li>
</ul></li>

<li><a href="https://github.com/codetiger/Font23D">GitHub - codetiger/Font23D</a> - Convert any text to a 3d mesh using any font style
<ul class="org-ul">
<li>Brief: "Font23D is a C++ library for creating a 3d mesh of any
Text in the given True type font."</li>
</ul></li>
</ul>


<p>
C++ Wrappers: 
</p>

<ul class="org-ul">
<li><a href="https://oglplus.org/">OGplus</a> - Self described as C++ Wrapper for modern OpengL.
<ul class="org-ul">
<li>Brief: "OGLplus is a header-only library which implements a thin
object-oriented facade over the OpenGL® (version 3 and higher)
C-language API. It provides wrappers which automate resource and
object management and make the use of OpenGL in C++ safer and
easier."</li>
<li>Repository: <a href="https://github.com/matus-chochlik/oglplu2">https://github.com/matus-chochlik/oglplu2</a></li>
</ul></li>

<li><a href="https://github.com/Tomius/oglwrap">Oglwrap</a>
<ul class="org-ul">
<li>Brief: "Oglwrap is a lightweight, cross-platform,
object-oriented, header-only C++ wrapper for modern (2.1+)
OpenGL, that focuses on preventing most of the trivial OpenGL
errors, and giving as much debug information about the other
errors, as possible."</li>
</ul></li>

<li><a href="https://globjects.org/">Globjects</a> - globjects is a cross-platform C++ wrapper for OpenGL
API objects
<ul class="org-ul">
<li>Brief: "globjects provides object-oriented interfaces to the
OpenGL API (3.0 and higher). It reduces the amount of OpenGL
code required for rendering and facilitates coherent OpenGL use
by means of an additional abstraction layer to glbinding and
GLM. Common rendering tasks and processes are automated and
missing features of specific OpenGL drivers are partially
simulated or even emulated at run-time."</li>
</ul></li>
</ul>


<p>
Non-categorized / Miscellaneous: 
</p>

<ul class="org-ul">
<li><a href="http://glsdk.sourceforge.net/docs/html/index.html">GLSDK - Unofficial OpenGL Software Development Kit</a>
<ul class="org-ul">
<li>Brief: "The Unofficial OpenGL Software Development Kit is a
collection of libraries and utilities that will help you get
started working with OpenGL. It provides a unified,
cross-platform build system to make compiling the disparate
libraries easier. Many of the components of the SDK are C++
libraries. Each component of the SDK specifies the terms under
which they are distributed. All licenses used by components are
approximately like the MIT license in permissivity. The parts of
the SDK responsible for maintaining the build, as well as all
examples, are distributed under the MIT License."q</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org637edcf" class="outline-4">
<h4 id="org637edcf"><span class="section-number-4">1.4.2</span> WebGL Companion Libraries</h4>
<div class="outline-text-4" id="text-1-4-2">
<p>
WebGL Companion Libraries: (OpenGL on the WEB)
</p>

<ul class="org-ul">
<li><a href="https://glmatrix.net/">glMatrix</a> - GLM math library ported to Javascript. Computer
graphics math library, similar to OpenGL GLM math library.</li>

<li><a href="https://math.gl/docs">Math.GL</a> - "math.gl is JavaScript math library focused on
geospatial and 3D use cases, designed as a composable, modular
toolbox. math.gl provides a core module with classic vector and
matrix classes, and a suite of optional modules implementing
various aspects of geospatial and 3D math. While the math.gl is
highly optimized for use with the WebGL and WebGPU APIs, math.gl
itself has no WebGL dependencies."</li>

<li><a href="https://threejs.org/">Three.JS</a> - High level wrapper library around WebGL, that provides
many high level features that includes: camera objects; scene graphs;
geometry; perspective; forward kinematics, inverse kinematics;
graphics math library containing, matrices, vectors, quaternions;
image loaders; animation and more.</li>
</ul>
</div>
</div>
<div id="outline-container-orgbb7d514" class="outline-4">
<h4 id="orgbb7d514"><span class="section-number-4">1.4.3</span> See also</h4>
<div class="outline-text-4" id="text-1-4-3">
<ul class="org-ul">
<li><a href="https://www.khronos.org/opengl/wiki/OpenGL_Loading_Library">OpenGL Loading Library - OpenGL Wiki</a> / Khronos Group
<ul class="org-ul">
<li>Brief: "An OpenGL Loading Library is a library that loads
pointers to OpenGL functions at runtime, core as well as
extensions. This is required to access functions from OpenGL
versions above 1.1 on most platforms. Extension loading
libraries also abstracts away the difference between the loading
mechanisms on different platforms."</li>
</ul></li>

<li><a href="https://www.khronos.org/opengl/wiki/Load_OpenGL_Functions">Load OpenGL Functions - OpenGL Wiki</a>  / Khronos Group 
<ul class="org-ul">
<li>Brief: "Loading OpenGL Functions is an important task for
initializing OpenGL after creating an OpenGL context. You are
strongly advised to use an OpenGL Loading Library instead of a
manual process. However, if you want to know how it works
manually, read on."</li>
</ul></li>

<li><a href="https://www.khronos.org/opengl/wiki/Image_Libraries">Image Libraries - OpenGL Wiki</a>  / Khronos Group</li>

<li><a href="https://stackoverflow.com/questions/27873784/when-do-i-need-to-use-an-opengl-function-loader">When do I need to use an OpenGL function loader? - Stack Overflow</a></li>

<li><a href="https://keyj.emphy.de/glext/">KeyJ's Blog : Blog Archive » Modern OpenGL with lcc-win32, the hard way</a></li>

<li><a href="https://apoorvaj.io/loading-opengl-without-glew/">Loading OpenGL without GLEW</a></li>

<li><a href="https://www.libsdl.org/release/SDL-1.2.15/docs/html/guidevideoopengl.html">Using OpenGL With SDL</a> - LibSDL</li>

<li><a href="https://www.khronos.org/opengl/wiki/Tutorial1:_Creating_a_Cross_Platform_OpenGL_3.2_Context_in_SDL_(C_/_SDL)">Tutorial1: Creating a Cross Platform OpenGL 3.2 Context in SDL (C / SDL) - OpenGL Wiki</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orge916077" class="outline-3">
<h3 id="orge916077"><span class="section-number-3">1.5</span> Legacy/Obsolete OpenGL Subroutines</h3>
<div class="outline-text-3" id="text-1-5">
<p>
The following OpenGL subroutines are from the OpenGL <span class="underline">immediate mode</span>
(fixed-function pipeline), which are obsolete and should be avoided as
they incur on a significant overhead and they lack portability due to
not be available at OpenGL ES.
</p>

<ul class="org-ul">
<li>Vertex:
<ul class="org-ul">
<li>=&gt; Modern OpenGL replacement: VBO (Vertex Buffer Object) and VAO
(Vertex Array Object) and shader program.</li>
<li>glVertex2f()</li>
<li>glVertex2f()</li>
<li>glVertex3f()</li>
<li>glColor3f()</li>
</ul></li>

<li>Begin/End:
<ul class="org-ul">
<li>glEnd()</li>
<li>glBegin()</li>
</ul></li>

<li>Colors
<ul class="org-ul">
<li>glColor()   =&gt; Modern OpenGL replacement: Fragement shader</li>
<li>glMaterial()</li>
<li>glVertexPointer()</li>
</ul></li>

<li>Coordinate Transformation
<ul class="org-ul">
<li>Modern OpenGL Replacement: shader model matrix <span class="underline">uniform variable</span>
which is set by the calling code. Since the matrix math (linear
algebra) functionality is no longer provided by OpenGL, a third
party math library is necessary.</li>
<li>glLoadIdentity()  =&gt; Modern OpenGL replacement: glm::mat4(1.0);</li>
<li>glRotate()        =&gt; Modern OpenGL replacement: glm::rotate();</li>
<li>glTranslate()     =&gt; Modern OpenGL replacement: glm::translate();</li>
<li>glScale()         =&gt; Modern OpenGL replacement: glm::scale();</li>
<li>glRotate3f()</li>
<li>glMatrixMode()</li>
<li>glFrustum()       =&gt; Modern OpenGL replacement: glm::frustum();</li>
<li>gluLookAt()       =&gt; Modern OpenGL replacement: glm::lookAt();</li>
<li>gluPerspective()  =&gt; Modern OpenGL replacement: glm::perspective();</li>
<li>glMatrixMode()</li>
<li>glViewPort()</li>
<li>glOrtho()</li>
<li>glMultMatrix()</li>
</ul></li>

<li>Camera affine transforms: 
<ul class="org-ul">
<li>gluLookAt() =&gt; Replacement: glm::lookAt()</li>
</ul></li>

<li>Save Context 
<ul class="org-ul">
<li>glPop()</li>
<li>glPush()</li>
</ul></li>

<li>Matrix Stack [DEPRECATED!]
<ul class="org-ul">
<li>Modern OpenGL replacement: OpenGL since 3.0, no longer provides
a matrix stack. Now the calling code that has to keep track of
transformation state.</li>
<li>glPushMatrix()</li>
<li>glPopMatrix()</li>
</ul></li>

<li>Miscellaneous / Non Categorized
<ul class="org-ul">
<li>glEnableClientState()</li>
<li>glColorPointer()</li>
<li>glVertexPointer(*)</li>
<li>glLight*&#x2026;</li>
<li>glMaterial*&#x2026;</li>
<li>glDrawPixels()</li>
<li>glPixelZoom()</li>
<li>glRasterPos2i()</li>
</ul></li>
</ul>

<p>
See:  
</p>

<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/13647108/matrix-stacks-in-opengl-deprecated">Matrix stacks in OpenGL deprecated?</a></li>

<li><a href="https://stackoverflow.com/questions/3755998/what-is-the-point-of-the-matrix-stack-in-opengl">What is the point of the matrix stack in OpenGL?</a></li>

<li><a href="http://edeleastar.github.io/opengl-programming/topic05/pdf/3.MatrixStacks.pdf">OpenGL Matrix Stacks {PDF}</a></li>
</ul>
</div>
</div>

<div id="outline-container-org7ec893d" class="outline-3">
<h3 id="org7ec893d"><span class="section-number-3">1.6</span> Computer Graphics Math</h3>
<div class="outline-text-3" id="text-1-6">
</div>
<div id="outline-container-org4052e19" class="outline-4">
<h4 id="org4052e19"><span class="section-number-4">1.6.1</span> Vector Algebra</h4>
<div class="outline-text-4" id="text-1-6-1">
<p>
Given 2 3D vectors \(\vec{A} = [ x_A, y_A, z_A ]\) and \(\vec{B} = [ x_B, y_B, z_B ]\) 
, the following properties can be defined: 
</p>


<p>
<b>Vector Norm</b> 
</p>

<p>
The <span class="underline">norm</span> or <span class="underline">magnitude</span> of A, \(|| \vec{A} ||\) is given by: 
</p>

\begin{equation}
   || \vec{A} || = \sqrt{ x_A^2 + y_A^2 + z_A^2 }
\end{equation}


\begin{equation}
   || \vec{A} ||^2 = \vec{A} \cdot \vec{A}
\end{equation}

<p>
<b>Normalized Vector / Unit Vector</b> 
</p>

<p>
A <span class="underline">normalized vector</span>, is a vector with the same direction than a given
vector, but with norm equal to one. A normalized vector of A can be
computed as: 
</p>

\begin{equation}
    \text{normalized}( \vec{A} ) 
       = \frac{ \vec{A} }{ || A || }  
       = \frac{1}{ \sqrt{ x_A^2 + y_A^2 + z_A^2 } } . \vec{A}
\end{equation}

\begin{equation}
    || \text{normalized}( \vec{A} ) || = 1 
\end{equation}


<p>
<b>Distance between two position (point) vectors</b> 
</p>

<p>
Given two vectors A and B which represent the position relative to the
coordinate system origin or point. (0, 0, 0). The distance between A
and B, or the length of the vector difference between A and B is
determined by the following relation. 
</p>

\begin{eqnarray*} 
   \text{distance}( \vec{A}, \vec{B}) &=& || \vec{A}  - \vec{B} || = || \vec{B}  - \vec{A} || \\
   \text{distance}( \vec{A}, \vec{B}) &=& \sqrt{ (x_A - x_B)^2 + (y_A - y_B)^2 + (z_A - z_B)^2 }
\end{eqnarray*}

<p>
<b>Dot Product</b> 
</p>

<p>
The vector <span class="underline">dot product</span> is:  
</p>

<ul class="org-ul">
<li>Where:
<ul class="org-ul">
<li>\(|| \vec{A} ||\) is the norm of vector A</li>
<li>\(|| \vec{B} ||\) is the norm of vector B</li>
<li>\(\theta\) is the angle between vectors A and B.</li>
</ul></li>

<li>The vectros \(\vec{A}\) and \(\vec{B}\) are <span class="underline">orthogonal</span>, the angle
between them is 90 degrees, when the dot product is zero.</li>
</ul>

\begin{equation} 
  \text{dot}( \vec{A}, \vec{B} ) 
    = \vec{A} \cdot \vec{B} 
    = x_A \cdot x_B + y_A \cdot y_B + z_A \cdot z_B 
    = || \vec{A} || \cdot || \vec{B} || \cdot \cos \theta 
\end{equation}

<p>
If the vectors \(\vec{A}\) and \(\vec{B}\) are expressed as column
matrices, the product can be computed as a matrix multiplication.
</p>

<ul class="org-ul">
<li>In the following equations. \(A^T\) is the transpose of matrix A.</li>
</ul>

\begin{equation}
  A = \begin{bmatrix} x_A \\ y_A \\ z_A  \end{bmatrix}
\end{equation}

\begin{equation}
  B = \begin{bmatrix} x_B \\ y_B \\ z_B  \end{bmatrix}
\end{equation}


\begin{equation}
  dot(\vec{A}, \vec{B})  
     = \vec{A} \cdot \vec{B}
     = A^T \cdot B 
     =  
        \begin{bmatrix} x_A & y_A & z_A  \end{bmatrix}
        \cdot 
        \begin{bmatrix} x_B \\ y_B \\ z_B  \end{bmatrix}
\end{equation}

<p>
<b>Cross Product</b> / <b>Vector product</b> 
</p>

<p>
The cross product between two vectors \(\vec{A}\) and \(\vec{B}\) results
in a vector which is perpendicular (orthogonal) to both A and B. 
</p>

\begin{equation}
   \text{cross}( \vec{A}, \vec{B} ) 

        = \vec{A} \times \vec{B} 

        = \begin{bmatrix} 
             y_A \cdot z_B - z_A \cdot y_B   \\
             z_A \cdot x_B - x_A \cdot z_B   \\
             x_A \cdot y_B - y_A \cdot x_B   \\
          \end{bmatrix}

       = [A]_{\times} \cdot B       
\end{equation}


<p>
Where \([A]_{\times}\) is the <span class="underline">cross product matrix</span>. 
</p>

\begin{equation} 
  [A]_{\times} =
     \begin{bmatrix}
          0   & -z_A  &  y_A  \\
          z_A &  0    & -x_A  \\
         -y_A &  x_A  &  0    \\
     \end{bmatrix}
\end{equation}

<p>
The cross product have the following properties: 
</p>

<ul class="org-ul">
<li>Where:
<ul class="org-ul">
<li>\(\vec{n}\) is unit vector with the same direction as the cross
product vector.</li>
<li>\(\theta\) is the angle between the two underlying vectors.</li>
</ul></li>
</ul>

\begin{equation}
   \vec{A} \times \vec{B} = || \vec{A} || \cdot || \vec{B} || \cdot \sin \theta \times \vec{n}
\end{equation}

\begin{equation}
   \vec{A} \times \vec{B} = - \vec{B} \times \vec{A}
\end{equation}

<p>
<b>Vector Triple Product</b> 
</p>

\begin{equation} 
   ( \vec{u} \times \vec{v} ) \times \vec{w} 
         = ( \vec{v} \cdot \vec{w} ) \vec{u} + ( \vec{u} \cdot \vec{w}) \vec{v}
         = \text{dot}( \vec{v}, \vec{w} ) \vec{u} + \text{dot}( \vec{u}, \vec{w}) \vec{v}
\end{equation}
</div>
</div>

<div id="outline-container-orge2aeede" class="outline-4">
<h4 id="orge2aeede"><span class="section-number-4">1.6.2</span> Affine Transforms</h4>
<div class="outline-text-4" id="text-1-6-2">
<p>
Affine transforms, which are represented by matrices, are a particular
class of linear transforms which preserves ratios between distances,
colinearity and parallelism. Affine transforms has many applications
that includes, computer graphics, computer vision, image processing,
CAD (Computer Aided Design) and robotics. 
</p>

<p>
Outline of properties preserved by affine transforms: 
</p>

<ul class="org-ul">
<li>Ratios between distances.</li>

<li>Colinearity
<ul class="org-ul">
<li>=&gt; Points in the same line, remains in the same line, after the
transform was applied.</li>
</ul></li>

<li>Parallelism
<ul class="org-ul">
<li>=&gt; Lines that are parallels, remains parallel.</li>
</ul></li>
</ul>


<p>
Types of geometric linear transforms: 
</p>

<ul class="org-ul">
<li>Affine Transforms
<ul class="org-ul">
<li>=&gt; Preserves ratios, colinearity and parallelism.</li>
</ul></li>

<li>Projection Transforms
<ul class="org-ul">
<li>=&gt; Does not preserver parallelism. However, it preservers
colinearity. Affine transforms are a particular case of
projection transforms.</li>
<li>=&gt; Some projection transforms are:
<ul class="org-ul">
<li>Orthogonal view transform</li>
<li>Projection view transform</li>
</ul></li>
</ul></li>

<li>Rigid body transforms
<ul class="org-ul">
<li>=&gt; Are a particular case of affine transforms. The set of rigid
body transforms comprises: identity, translation and
rotation. However, this set does not include shear and scaling.</li>
</ul></li>
</ul>


<p>
Some affine transforms are: 
</p>

<ul class="org-ul">
<li>Identity (Identity matrix) =&gt; Represents no transform, all points
or vertices remain the same.</li>

<li>Translation</li>

<li>Scaling</li>

<li>Reflection</li>

<li>Rotation</li>

<li>Shear</li>
</ul>


<p>
<b>General form of 2D affine transforms</b> 
</p>

<p>
2D affine transforms, including translation, rotation and scaling can
be represented by matrices with the following format, that transforms
homogeneous coordinates from one coordinate system to
another. <span class="underline">Homogeneous coordinates</span>, are 2D or 3D coordinates with an
extra pseudo-coordinate, often designated by 'w', for representing
translations affine transforms in the same way as rotations and
scaling. 
</p>


\begin{equation}
  A = 
   \begin{bmatrix} 
     a_{11}   & a_{12}   &  a_{13} \\
     a_{21}   & a_{22}   &  a_{23} \\  
     0        & 0        &  1 \\  
   \end{bmatrix}
\end{equation}

<p>
This affine transform performs the coordinate transformation from the
coordinate frame C2 (which axis are x, y), which could an object
local-space coordinate, to coordinate frame C1 (which axis are x', y')
which could be a world-coordinate system. The matrix transforms
homogenous coordinates, which are coordinates with an extra parameter
w = 1 for allowing translation transformation to be expressed in the
same way as rotation transformations.
</p>


\begin{equation}
     \begin{bmatrix} 
       x' \\ y' \\ w' = 1
      \end{bmatrix}
  = 
    \begin{bmatrix} 
      a_{11}   & a_{12}   &  a_{13} \\
      a_{21}   & a_{22}   &  a_{23} \\
      0        & 0        &  1      \\
   \end{bmatrix}

     \cdot 

     \begin{bmatrix} 
       x \\ y \\ w = 1
     \end{bmatrix}

    = 

    \begin{bmatrix} 
        a_{11} \cdot x + a_{12}  \cdot y + a_{13}  \\
        a_{21} \cdot x + a_{22}  \cdot y + a_{23}  \\
        1 
    \end{bmatrix}
\end{equation}


<p>
<b>3D Affine Transforms</b> 
</p>

<p>
3D affine transforms can be represented by matrices with following
format. 
</p>

\begin{equation}
  A = 
   \begin{bmatrix} 
     a_{11}   & a_{12}   &  a_{13} & a_{14}  \\
     a_{21}   & a_{22}   &  a_{23} & a_{24}  \\
     a_{31}   & a_{32}   &  a_{33} & a_{34}  \\
     0        & 0        &  0      & 1       \\
   \end{bmatrix}
\end{equation}

<p>
An affine transformation maps the coordinate system (X, Y, Z), which
could be an object local coordinate system, to the coordinate system
(X', Y', Z'), which could be a world coordinate system. In a similar
manner to 2D homogeneous coordinates, an extra pseudo-coordinate w = 1
is added for expressing translations transformations as matrix
multiplications, in the same way as rotations.
</p>


\begin{equation}
     \begin{bmatrix} 
       x' \\ y' \\ z' \\ w' = 1
      \end{bmatrix}
  = 
    \begin{bmatrix} 
      a_{11}   & a_{12}   &  a_{13} & a_{14} \\
      a_{21}   & a_{22}   &  a_{23} & a_{24} \\
      a_{31}   & a_{32}   &  a_{33} & a_{34} \\
      0        & 0        &  0      &   1    \\
   \end{bmatrix}

     \cdot 

     \begin{bmatrix} 
       x \\ y \\ z \\ w = 1
     \end{bmatrix}

    = 

    \begin{bmatrix} 
        a_{11} \cdot x + a_{12}  \cdot y + a_{13} \cdot z + a_{14}  \\
        a_{21} \cdot x + a_{22}  \cdot y + a_{23} \cdot z + a_{24}  \\
        a_{31} \cdot x + a_{32}  \cdot y + a_{33} \cdot z + a_{34}  \\
        1
    \end{bmatrix}
\end{equation}


<p>
<b>Further Reading</b> 
</p>

<ul class="org-ul">
<li><a href="http://graphics.cs.cmu.edu/nsp/course/15-462/Spring04/slides/04-transform.pdf">CMU - Transformations</a></li>

<li><a href="http://www.cs.cornell.edu/courses/cs4620/2013fa/lectures/04transforms2d.pdf">Cornell CS4620 - 2D Geometric Transformations</a></li>

<li><a href="https://web.iitd.ac.in/~hegde/cad/lecture/L6_3dtrans.pdf">AML170 CAD - 3D Transformations - Lecture 6</a></li>

<li><a href="https://mycourses.aalto.fi/pluginfile.php/352115/mod_resource/content/1/01_transform.pdf">CS_CS3100 (Introduction to) Computer Graphics</a></li>

<li><a href="https://en.m.wikipedia.org/wiki/Coordinate_system">Coordinate system - Wikipedia</a>
<ul class="org-ul">
<li>Brief: "n geometry, a coordinate system is a system that uses
one or more numbers, or coordinates, to uniquely determine the
position of the points or other geometric elements on a manifold
such as Euclidean space."</li>
</ul></li>

<li><a href="https://en.m.wikipedia.org/wiki/Homogeneous_coordinates">Homogeneous coordinates - Wikipedia</a>
<ul class="org-ul">
<li>Brief: "Homogeneous coordinates have a range of applications,
including computer graphics and 3D computer vision, where they
allow affine transformations and, in general, projective
transformations to be easily represented by a matrix."</li>
</ul></li>

<li><a href="https://en.m.wikipedia.org/wiki/Right-hand_rule">Right-hand rule - Wikipedia</a>
<ul class="org-ul">
<li>Brief: "In mathematics and physics, the right-hand rule is a
common mnemonic for understanding orientation of axes in
three-dimensional space."</li>
</ul></li>

<li><a href="https://en.m.wikipedia.org/wiki/Rotation_matrix">Rotation matrix - Wikipedia</a>
<ul class="org-ul">
<li>Brief: "In linear algebra, a rotation matrix is a transformation
matrix that is used to perform a rotation in Euclidean space."</li>
</ul></li>

<li><a href="https://en.m.wikipedia.org/wiki/Rotation_formalisms_in_three_dimensions">Rotation formalisms in three dimensions - Wikipedia</a>
<ul class="org-ul">
<li>Brief: "In geometry, various formalisms exist to express a
rotation in three dimensions as a mathematical
transformation. In physics, this concept is applied to classical
mechanics where rotational (or angular) kinematics is the
science of quantitative description of a purely rotational
motion."</li>
</ul></li>

<li><a href="https://en.m.wikipedia.org/wiki/Axes_conventions">Axes conventions - Wikipedia</a>
<ul class="org-ul">
<li>Brief: "In ballistics and flight dynamics, axes conventions are
standardized ways of establishing the location and orientation
of coordinate axes for use as a frame of reference."</li>
</ul></li>

<li><a href="https://en.m.wikipedia.org/wiki/Euler_angles">Euler angles - Wikipedia</a>
<ul class="org-ul">
<li>Brief: "The Euler angles are three angles introduced by Leonhard
Euler to describe the orientation of a rigid body with respect
to a fixed coordinate system."</li>
</ul></li>

<li><a href="https://en.m.wikipedia.org/wiki/Aircraft_principal_axes">Yaw, Pitch, Roll angles - Aircraft principal axes - Wikipedia</a>
<ul class="org-ul">
<li>Brief: Rotation angles convention for aircrafts.</li>
</ul></li>

<li><a href="https://en.m.wikipedia.org/wiki/Celestial_coordinate_system">Celestial coordinate system - Wikipedia</a>
<ul class="org-ul">
<li>Brief: "In astronomy, a celestial coordinate system (or
celestial reference system) is a system for specifying positions
of satellites, planets, stars, galaxies, and other celestial
objects relative to physical reference points available to a
situated observer (e.g. the true horizon and north cardinal
direction to an observer situated on the Earth's surface)"</li>
</ul></li>

<li><a href="https://en.m.wikipedia.org/wiki/Conversion_between_quaternions_and_Euler_angles">Conversion between quaternions and Euler angles - Wikipedia</a>
<ul class="org-ul">
<li>Brief: "Spatial rotations in three dimensions can be
parametrized using both Euler angles and unit quaternions. This
article explains how to convert between the two
representations. Actually this simple use of "quaternions" was
first presented by Euler some seventy years earlier than
Hamilton to solve the problem of magic squares."</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org5f0f9dc" class="outline-4">
<h4 id="org5f0f9dc"><span class="section-number-4">1.6.3</span> 2D Canonical Affine Transforms</h4>
<div class="outline-text-4" id="text-1-6-3">
<p>
Identity matrix
</p>

\begin{equation}
  I = 
   \begin{bmatrix} 
     1   & 0   &  0 \\
     0   & 1   &  0 \\  
     0   & 0   &  1 \\  
   \end{bmatrix}
\end{equation}

<p>
Translation: 
</p>

\begin{equation}
  T = 
   \begin{bmatrix} 
     1   & 0   &  \Delta_x \\
     0   & 1   &  \Delta_y \\  
     0   & 0   &  1        \\  
   \end{bmatrix}
\end{equation}


\begin{equation}
     \begin{bmatrix} 
       x' \\ y' \\ 1 
      \end{bmatrix}
  = 

   \begin{bmatrix} 
     1   & 0   &  \Delta_x \\
     0   & 1   &  \Delta_y \\  
     0   & 0   &  1        \\  
   \end{bmatrix}

     \cdot 

   \begin{bmatrix} 
       x \\ y \\ w = 1
   \end{bmatrix}

  = 
   \begin{bmatrix} 
       x + \Delta_x \\ y + \Delta_y \\ 1
   \end{bmatrix}
\end{equation}


<p>
Scaling:
</p>

<ul class="org-ul">
<li>Where: \(s_x\) is the scale for X axis and \(s_y\) is the scale for
the y axis.</li>
</ul>

\begin{equation}
  S = 
   \begin{bmatrix} 
     s_x   & 0     &  0 \\
     0     & s_y   &  0 \\  
     0     & 0     &  1 \\  
   \end{bmatrix}
\end{equation}


\begin{equation}
     \begin{bmatrix} 
       x' \\ y' \\ 1 
      \end{bmatrix}
  = 

   \begin{bmatrix} 
     s_x   & 0     &  0 \\
     0     & s_y   &  0 \\  
     0     & 0     &  1 \\  
   \end{bmatrix}
     \cdot 

   \begin{bmatrix} 
       x \\ y \\ w = 1
   \end{bmatrix}

  = 
   \begin{bmatrix} 
       s_x \cdot x \\ s_y \cdot y \\ 1
   \end{bmatrix}
\end{equation}


<p>
Shear: 
</p>

\begin{equation}
  H = 
   \begin{bmatrix} 
     1     & h_x  &  0 \\
     h_y   & 1    &  0 \\  
     0     & 0    &  1 \\  
   \end{bmatrix}
\end{equation}


<p>
Rotation around Z axis: 
</p>

<ul class="org-ul">
<li>Where \(\theta\) is the angle of counterclockwise rotation around Z
axis.</li>
</ul>

\begin{equation}
  R  = 
   \begin{bmatrix} 
     \cos \theta     & -\sin \theta  &  0 \\
     \sin \theta     &  \cos \theta  &  0 \\  
     0               &  0            &  1 \\  
   \end{bmatrix}
\end{equation}


\begin{equation}
     \begin{bmatrix} x' \\ y' \\ 1  \end{bmatrix} 

    = 
      \begin{bmatrix} 
        \cos \theta     & -\sin \theta  &  0 \\
        \sin \theta     &  \cos \theta  &  0 \\  
        0               &  0            &  1 \\  
      \end{bmatrix}

     \begin{bmatrix} x \\ y \\ 1  \end{bmatrix} 
    = 
     \begin{bmatrix} 
          x \cos \theta - y \sin \theta  \\ 
          x \sin \theta + y \cos \theta \\ 
          1
     \end{bmatrix} 
\end{equation}
</div>
</div>

<div id="outline-container-org11065bb" class="outline-4">
<h4 id="org11065bb"><span class="section-number-4">1.6.4</span> 3D Canonical Affine Transforms</h4>
<div class="outline-text-4" id="text-1-6-4">
<p>
<span class="underline">Translation:</span>
</p>

<ul class="org-ul">
<li>Where: \(T^{-1}\) is the inverse transform.</li>
</ul>

\begin{equation}
  T = 
   \begin{bmatrix} 
     1   & 0   &  0 &  \Delta_x \\
     0   & 1   &  0 &  \Delta_y \\  
     0   & 0   &  1 &  \Delta_z \\  
     0   & 0   &  0 &   1      \\
   \end{bmatrix}
\end{equation}


\begin{equation}
  T^{-1} = 
   \begin{bmatrix} 
     1   & 0   &  0 &  -\Delta_x \\
     0   & 1   &  0 &  -\Delta_y \\  
     0   & 0   &  1 &  -\Delta_z \\  
     0   & 0   &  0 &   1        \\
   \end{bmatrix}
\end{equation}

<p>
Translation transform applied to an homogeneous vector (x, y, z, w = 1):
</p>


\begin{equation}
     \begin{bmatrix} 
       x' \\ y' \\ z' \\ w' = 1
      \end{bmatrix}
  = 

   \begin{bmatrix} 
     1   & 0   & 0 &  \Delta_x \\
     0   & 1   & 0 &  \Delta_y \\  
     0   & 0   & 1 &  \Delta_z \\  
     0   & 0   & 0 &    1      \\
   \end{bmatrix}

     \cdot 

   \begin{bmatrix} 
       x \\ y \\ z \\ w = 1
   \end{bmatrix}

  = 
   \begin{bmatrix} 
       x + \Delta_x \\ y + \Delta_y \\ z + \Delta_z \\ 1
   \end{bmatrix}
\end{equation}


<p>
<span class="underline">Scaling:</span> 
</p>

<ul class="org-ul">
<li>Where: \(s_x\),  \(s_y\), \(s_z\) are the scale factors for axis x, y, z
and  \(S^{-1}\) is the inverse transform (inverse matrix).</li>
</ul>

\begin{equation}
  S = 
   \begin{bmatrix} 
     s_x   & 0     &  0   &  0 \\
     0     & s_y   &  0   &  0 \\  
     0     & 0     &  s_z &  0 \\  
     0     & 0     &  0   &  1  \\
   \end{bmatrix}
\end{equation}


\begin{equation}
  S^{-1} = 
   \begin{bmatrix} 
     1 / s_x   & 0     &  0       &  0 \\
     0     & 1 / s_y   &  0       &  0 \\  
     0     &    0      &  1 / s_z &  0 \\  
     0     &    0      &  0       &  1 \\
   \end{bmatrix}
\end{equation} 



\begin{equation}
     \begin{bmatrix} 
       x' \\ y' \\ z' \\ w' = 1 
      \end{bmatrix}
  = 

   S \cdot 

   \begin{bmatrix} 
       x \\ y \\ z \\ w = 1 
   \end{bmatrix}

  = 
   \begin{bmatrix} 
       s_x \cdot x \\ s_y \cdot y \\ s_z \cdot z \\ 1
   \end{bmatrix}
\end{equation}


<p>
<span class="underline">Rotation around x axis</span> 
</p>

<ul class="org-ul">
<li>\(R_x^{-1} = R_x^T\) =&gt; The inverse is equal to the transpose.</li>
</ul>

\begin{equation}
    R_x(\alpha) = 
      \begin{bmatrix} 
        1   & 0            &  0              & 0  \\ 
        0   & \cos{\alpha} & -\sin{\alpha}   & 0  \\ 
        0   & \sin{\alpha} &  \cos{\alpha}   & 0  \\ 
        0   & 0            &  0              & 1  \\ 
      \end{bmatrix}
\end{equation}


<p>
Transform \(R_x\) applied to a homogeneous vector (X, Y, Z, w = 1).
</p>

\begin{equation}
     \begin{bmatrix} 
       x' \\ y' \\ z' \\ w' = 1 
      \end{bmatrix}
  = 

   R_x(\alpha) \cdot 

   \begin{bmatrix} 
       x \\ y \\ z \\ w = 1 
   \end{bmatrix}

  = 
   \begin{bmatrix} 
       x                                            \\   
       y \cdot \cos{\alpha} - z \cdot \sin{\alpha}  \\ 
       y \cdot \sin{\alpha} + z \cdot \cos{\alpha}  \\ 
       1                                            \\
   \end{bmatrix}
\end{equation}



<p>
<span class="underline">Rotation around y axis</span>
</p>

<ul class="org-ul">
<li>\(R_y^{-1} = R_y^T\)</li>
</ul>

\begin{equation}
 R_y(\beta) = 
   \begin{bmatrix} 
     \cos{\beta}    & 0   & \sin{\beta} & 0 \\ 
     0              & 1   & 0           & 0 \\
    -\sin{\beta}    & 0   & \cos{\beta} & 0 \\
    0               & 0   & 0           & 1 
   \end{bmatrix}
\end{equation}


<p>
Transform \(R_y\) applied to a homogeneous vector:
</p>

\begin{equation}
     \begin{bmatrix} 
       x' \\ y' \\ z' \\ w' = 1 
      \end{bmatrix}
  = 

   R_y(\beta) \cdot 

   \begin{bmatrix} 
       x \\ y \\ z \\ w = 1 
   \end{bmatrix}

  = 
   \begin{bmatrix} 
       x \cdot \cos{\beta} + z \cdot \sin{\beta} \\ 
       y                             \\
     - x \cdot \sin{\beta} + z \cdot \cos{\beta} \\
   \end{bmatrix}
\end{equation}

<p>
<span class="underline">Rotation around z axis</span>
</p>

<ul class="org-ul">
<li>\(R_z^{-1} = R_z^T\)</li>
</ul>

\begin{equation}
 R_z(\theta) = 
   \begin{bmatrix} 
      \cos{\theta}  & -\sin{\theta} &  0 & 0 \\ 
      \sin{\theta}  &  \cos{\theta} &  0 & 0 \\ 
     0              & 0             &  1 & 0 \\
     0              & 0             &  0 & 1 \\
   \end{bmatrix}
\end{equation}


<p>
Transform \(R_z\) applied to a homogeneous vector:
</p>

\begin{equation}
     \begin{bmatrix} 
       x' \\ y' \\ z' \\ w' = 1 
      \end{bmatrix}
  = 

   R_z(\theta) \cdot 

   \begin{bmatrix} 
       x \\ y \\ z \\ w = 1 
   \end{bmatrix}

  = 
   \begin{bmatrix} 
       x \cdot \cos{\theta} - y \cdot \sin{\theta}   \\
       x \cdot \sin{\theta} + y \cdot \cos{\theta}   \\
       z                                             \\
       1 
   \end{bmatrix}
\end{equation}



<p>
<span class="underline">Rotation around arbirtary axis</span> 
</p>

<ul class="org-ul">
<li>Formula 1 : The axis is defined by unit vector \(\hat{n}\)
<ul class="org-ul">
<li>References:  <a href="http://www.chrobotics.com/library/understanding-quaternions">(Chrobotics)</a>, <a href="https://www.weizmann.ac.il/sci-tea/benari/sites/sci-tea.benari/files/uploads/softwareAndLearningMaterials/quaternion-tutorial-2-0-1.pdf">(Ben-Ari - Weizmann)</a> - derived from
quaternion equations.</li>
</ul></li>
</ul>

\begin{equation} 
   T_n = \begin{bmatrix}

             a^2 + b^2 - c^2 - d^2  
          &  2 (b \cdot c -  a \cdot d)
          &  2 (b \cdot d +  a \cdot c)  
          &  0                            \\

             2 (b \cdot c +  a \cdot d )
          &  a^2 - b^2 + c^2 -d^2                   
          &  2 ( c \cdot d -  a \cdot b ) 
          &  0                            \\

             2 ( b \cdot d -  a \cdot c  )
          &  2 ( c \cdot d +  a \cdot b )
          &  a^2 - b^2 - c^2 + d^2     
          &  0                            \\

             0 & 0 & 0 & 1 \\ 
         \end{bmatrix}
\end{equation}

<p>
Where: 
</p>
<ul class="org-ul">
<li>\(\hat{n}\) is a unit vector that designates the direction, thus: \(\hat{n} = 1\)</li>
<li>\(\hat{n} = [x_n \quad y_n \quad z_n]^T\)
<ul class="org-ul">
<li>\(x_n\), \(y_n\), \(z_n\) are the components of vector \(\hat{n}\).</li>
</ul></li>
<li>\(a = \cos( \theta / 2)\)</li>
<li>\(b = x_n \cdot \sin (\theta / 2)\)</li>
<li>\(c = y_n \cdot \sin (\theta / 2)\)</li>
<li>\(d = z_n \cdot \sin (\theta / 2)\)</li>
</ul>


<p>
<span class="underline">Rotation around arbirtary axis</span> 
</p>
<ul class="org-ul">
<li>Reference:  <a href="https://cseweb.ucsd.edu/classes/wi18/cse169-a/slides/CSE169_03.pdf">(Steve Rotenberg - Computer Animation)</a></li>
</ul>


\begin{equation} 
  T_n = \begin{bmatrix}
             x_n^2 + C \cdot (1 - x_n^2)  
          &  x_n \cdot y_n \cdot (1 - C) - z_n \cdot S 
          &  x_n \cdot z_n \cdot (1 - C)  + y_n \cdot S  
          &  0
          \\

             x_n \cdot y_n \cdot (1 - C) + z_n \cdot S 
          &  y_n^2 + C \cdot (1 - y_n^2) 
          &  y_n \cdot z_n \cdot (1 - C) - x_n \cdot S   
          &  0
          \\
               x_n \cdot z_n \cdot (1 - C) - y_n \cdot S 
           &   y_n \cdot z_n \cdot (1 - C) +  x_n \cdot S 
           &  z_n^2 + C \cdot (1 - z_n^2) 
           &  0
           \\

           0 & 0 & 0 & 1 
         
        \end{bmatrix}
\end{equation}

<p>
Where: 
</p>
<ul class="org-ul">
<li>\(\theta\) is the rotation angle around the unit vector \(\hat{n}\)</li>
<li>\(C = \sin \theta\)</li>
<li>\(S = \cos \theta\)</li>
<li>\(\hat{n}\) is a unit vector that designates the direction, thus: \(\hat{n} = 1\)</li>
<li>\(\hat{n} = [x_n \quad y_n \quad z_n]^T\)
<ul class="org-ul">
<li>\(x_n\), \(y_n\), \(z_n\) are the components of vector \(\hat{n}\).</li>
</ul></li>
</ul>


<p>
Testing formula in <a href="https://www.sympy.org/en/index.html">Sympy</a> - Python CAS (Computer Algebra System): 
</p>

<div class="org-src-container">
<pre class="src src-python"><span class="org-keyword">import</span> sympy 

<span class="org-comment-delimiter"># </span><span class="org-comment">t represents the angle theta </span>
<span class="org-variable-name">x</span>, <span class="org-variable-name">y</span>, <span class="org-variable-name">z</span>, <span class="org-variable-name">t</span> = symbols(<span class="org-string">'x y z t'</span>) 
<span class="org-variable-name">C</span>, <span class="org-variable-name">S</span> = symbols(<span class="org-string">"C S"</span>)

<span class="org-variable-name">row1</span> = [ x**2 + C * (1 - x**2), x * y * (1 - C) - z * S, x * z * (1 - C)  + y * S ]
<span class="org-variable-name">row2</span> = [ x * y * (1 - C) + z * S, y**2 + C * (1 - y**2), y * z * (1 - C) - x * S ]
<span class="org-variable-name">row3</span> = [ x * z * (1 - C) - y * S,  y * z * (1 - C) +  x * S, z**2 + C * (1 - z**2) ]

<span class="org-variable-name">m</span> = Matrix([row1, row2, row3])

<span class="org-comment-delimiter"># </span><span class="org-comment">C = cos(t)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">S = sin(t)</span>

In [7]: m
<span class="org-function-name">Out</span>[<span class="org-compilation-line-number">7</span>]: 
&#9121;   &#9115;     2&#9118;    2                                          &#9124;
&#9122; C&#8901;&#9117;1 - x &#9120; + x     -S&#8901;z + x&#8901;y&#8901;(1 - C)  S&#8901;y + x&#8901;z&#8901;(1 - C) &#9125;
&#9122;                                                          &#9125;
&#9122;                       &#9115;     2&#9118;    2                      &#9125;
&#9122;S&#8901;z + x&#8901;y&#8901;(1 - C)    C&#8901;&#9117;1 - y &#9120; + y     -S&#8901;x + y&#8901;z&#8901;(1 - C)&#9125;
&#9122;                                                          &#9125;
&#9122;                                           &#9115;     2&#9118;    2  &#9125;
&#9123;-S&#8901;y + x&#8901;z&#8901;(1 - C)  S&#8901;x + y&#8901;z&#8901;(1 - C)    C&#8901;&#9117;1 - z &#9120; + z   &#9126;

<span class="org-comment-delimiter"># </span><span class="org-comment">--- Determine rotation matrix around Z axis (Particular case) ------#</span>
<span class="org-comment-delimiter">#</span>

In [8]: m.subs({x: 0, y: 0, z: 1})
<span class="org-function-name">Out</span>[<span class="org-compilation-line-number">8</span>]: 
&#9121;C  -S  0&#9124;
&#9122;        &#9125;
&#9122;S  C   0&#9125;
&#9122;        &#9125;
&#9123;0  0   1&#9126;

In [11]: <span class="org-variable-name">rotZ</span> = m.subs({x: 0, y: 0, z: 1, C: cos(t), S: sin(t) })

In [12]: rotZ
<span class="org-function-name">Out</span>[<span class="org-compilation-line-number">12</span>]: 
&#9121;cos(t)  -sin(t)  0&#9124;
&#9122;                  &#9125;
&#9122;sin(t)  cos(t)   0&#9125;
&#9122;                  &#9125;
&#9123;  0        0     1&#9126;


<span class="org-comment-delimiter">#</span><span class="org-comment">---- Determine rotation matrix around X axis (Particular case) ------#</span>
<span class="org-comment-delimiter">#</span>
In [14]: <span class="org-variable-name">rotX</span> = m.subs({x: 1, y: 0, z: 0, C: cos(t), S: sin(t) })

In [15]: rotX
<span class="org-function-name">Out</span>[<span class="org-compilation-line-number">15</span>]: 
&#9121;1    0        0   &#9124;
&#9122;                  &#9125;
&#9122;0  cos(t)  -sin(t)&#9125;
&#9122;                  &#9125;
&#9123;0  sin(t)  cos(t) &#9126;

<span class="org-comment-delimiter">#</span><span class="org-comment">---- Determine rotation matrix around Y axis (Particular case) ------#</span>
<span class="org-comment-delimiter">#</span>
In [16]: <span class="org-variable-name">rotY</span> = m.subs({x: 0, y: 1, z: 0, C: cos(t), S: sin(t) })

In [17]: rotY
<span class="org-function-name">Out</span>[<span class="org-compilation-line-number">17</span>]: 
&#9121;cos(t)   0  sin(t)&#9124;
&#9122;                  &#9125;
&#9122;   0     1    0   &#9125;
&#9122;                  &#9125;
&#9123;-sin(t)  0  cos(t)&#9126;

</pre>
</div>
</div>
</div>

<div id="outline-container-org93b8544" class="outline-4">
<h4 id="org93b8544"><span class="section-number-4">1.6.5</span> Camera View Transform</h4>
<div class="outline-text-4" id="text-1-6-5">
<p>
The camera view transform matrix transforms world-space coordinates to
camera-space coordinates. On old OpenGL versions, this matrix was
can be constructed through the OpenGL routine <span class="underline">gluLookAt</span> or the GLM
(OpenGL Mathematics) library routine glm::lookAt. 
</p>

<p>
The GLM function glm::lookAt() has the following type signature. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">glm</span>::mat4 <span class="org-constant">glm</span>::lookAt<span class="org-rainbow-delimiters-depth-1">(</span> 
                <span class="org-comment-delimiter">// </span><span class="org-comment">Eye vector - camera position in world-space coordinates</span>
                <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">at</span>

                <span class="org-comment-delimiter">// </span><span class="org-comment">At vector - point to where camera is looking at </span>
                <span class="org-comment-delimiter">// </span><span class="org-comment">in world-space coordinates. </span>
              , <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">at</span>

                <span class="org-comment-delimiter">// </span><span class="org-comment">Up vector - camera's orientation. Often set to vertical axis</span>
                <span class="org-comment-delimiter">// </span><span class="org-comment">or Y axis up = (x = 0, y = 1, z = 0) by default.</span>
              , <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">up</span> 
              <span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>


<p>
This function has the following algorithm: 
</p>

\begin{equation} 
    T_{\text{view}} = 
          \begin{bmatrix}
              X_x & X_y & X_z & -\vec{X} \cdot \vec{\text{eye}}  \\
              Y_x & Y_y & Y_z & -\vec{Y} \cdot \vec{\text{eye}}  \\
              Z_x & Z_y & Z_z & -\vec{Z} \cdot \vec{\text{eye}}  \\
              0   & 0   & 0   &  1   
          \end{bmatrix}

     = 
          \begin{bmatrix}
              X_x & X_y & X_z & - \text{dot}(\vec{X}, \vec{\text{eye}})  \\
              Y_x & Y_y & Y_z & - \text{dot}(\vec{Y}, \vec{\text{eye}})  \\
              Z_x & Z_y & Z_z & - \text{dot}(\vec{Z}, \vec{\text{eye}})  \\
              0   & 0   & 0   &  1   
          \end{bmatrix}
\end{equation}

<p>
And the unit vectors, X, Y and Z are computed in the following manner:
</p>

\begin{eqnarray*} 
    \vec{Z} &=  \frac{ \vec{eye} - \vec{at} }{\left\| \vec{eye} - \vec{at}  \right\| }  \\

    \vec{X} &=  \frac{ \vec{up} \times \vec{Z} }{\left\| \vec{up} \times \vec{Z}  \right\| }  \\

    \vec{Y} &=  \frac{ \vec{Z} \times \vec{X} }{\left\| \vec{Z} \times \vec{Z}  \right\| }  \\
\end{eqnarray*}

<p>
The vector \(\vec{Z}\) is the opposite direction, represented by a unit
vector, to where the camera is looking at. If this vector were an
input, and was directly set by the calling code, rotating that camera
viewing direction  would require just rotating this vector.
</p>

<p>
Where: 
</p>
<ul class="org-ul">
<li>INPUTS: 
<ul class="org-ul">
<li>\(\vec{eye}\) (Eye vector) =&gt; Camera's position in world-space coordinates.</li>
<li>\(\vec{at}\)  (At vector) =&gt; Point in world-space coordinate where the camera is lookin at.</li>
<li>\(\vec{up}\)  (Up vector) =&gt; Camera orientation, often set by default to Y axis.</li>
</ul></li>
<li>Intermediate Outputs:
<ul class="org-ul">
<li>\(\vec{X} = [X_x \quad X_y \quad X_z]\)</li>
<li>\(\vec{Y} = [Y_x \quad Y_y \quad Y_z]\)</li>
<li>\(\vec{Z} = [Z_x \quad Z_y \quad Z_z]\)</li>
</ul></li>
<li>Notation Used:
<ul class="org-ul">
<li>\(\left\| \vec{vector}  \right\|\) - means the vector norm</li>
<li>\(\vec{A} \times \vec{B}\) - means vector cross product</li>
<li>\(\vec{A} \cdot \vec{B}\) - means vector dot product.</li>
</ul></li>
</ul>


<p>
<b>Point camera to specific direction</b> 
</p>

<p>
The function lookAt() points the camera view to a specific point in
the space <span class="underline">at</span> vector in world-space coordinates. The following function
could be defined for pointing the camera at specific direction (vector
or normalized vector) instead of a point-vector. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">glm</span>::mat4 
lookAt_direction<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">eye</span>, <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">forward</span>, <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">up</span>  <span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-variable-name">at</span> = eye + forward; 
    <span class="org-keyword">return</span> lookAt<span class="org-rainbow-delimiters-depth-2">(</span>eye, at, up<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Where: 
</p>

<ul class="org-ul">
<li><span class="underline">eye</span> - (point-verctor) Camera position in world-space coordinates</li>
<li><span class="underline">forward</span> - (vector) Direction to where camera is looking at.</li>
<li><span class="underline">up</span> (vector) Camera's orientation</li>
</ul>


<p>
<b>Algorithm Validation</b> 
</p>

<p>
Testing GLM (OpenGL Mathematic Library) in CERN's root REPL: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">-------------- Case  1 --------------------- //</span>
<span class="org-comment-delimiter">// </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">eye</span> = <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-1">(</span>3.0, 10.0, 20.0<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">auto</span> <span class="org-variable-name">at</span>  = <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-1">(</span>50.0, 25.0, 10.0<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">auto</span> <span class="org-variable-name">up</span>  = <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-1">(</span>0.0, 1.0, 0.0<span class="org-rainbow-delimiters-depth-1">)</span>;

root <span class="org-rainbow-delimiters-depth-1">[</span>108<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> view_matrix = <span class="org-constant">glm</span>::lookAt<span class="org-rainbow-delimiters-depth-1">(</span>eye, at, up<span class="org-rainbow-delimiters-depth-1">)</span>;
root <span class="org-rainbow-delimiters-depth-1">[</span>109<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>109<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"view = "</span>, view_matrix<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> view =  = 
   0.208  -0.000   0.978 -20.186
  -0.291   0.955   0.062  -9.912
  -0.934  -0.298   0.199   1.808
   0.000   0.000   0.000   1.000
root <span class="org-rainbow-delimiters-depth-1">[</span>110<span class="org-rainbow-delimiters-depth-1">]</span> 

<span class="org-comment-delimiter">// </span><span class="org-comment">------------ Case 2 --------------------------// </span>
<span class="org-keyword">auto</span> eye = <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-1">(</span>50.0, -10.0, 0.0<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">auto</span> <span class="org-variable-name">up</span> = <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-1">(</span>0.0, 1.0, 0.0<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">auto</span> <span class="org-variable-name">at</span> = <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-1">(</span>25.0, 5.615, -200.0<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">auto</span> <span class="org-variable-name">view_matrix</span> = <span class="org-constant">glm</span>::lookAt<span class="org-rainbow-delimiters-depth-1">(</span>eye, at, up<span class="org-rainbow-delimiters-depth-1">)</span>;

root <span class="org-rainbow-delimiters-depth-1">[</span>114<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>114<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"view = "</span>, view_matrix<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> view =  = 
   0.992   0.000  -0.124 -49.614
   0.010   0.997   0.077   9.491
   0.124  -0.077   0.989  -6.956
   0.000   0.000   0.000   1.000

</pre>
</div>

<p>
Implement glm::lookAt() algorithm in Julia programming language: 
</p>

<div class="org-src-container">
<pre class="src src-julia"><span class="org-comment-delimiter"># </span><span class="org-comment">Return vector v normalized =&gt;&gt; Returns column vector </span>
<span class="org-function-name">normalize</span>(v) = <span class="org-keyword">begin</span> 
   x, y, z = v
   mag = sqrt(x * x + y * y + z * z)
   [ (x / mag) (y / mag) (z / mag)]'
<span class="org-keyword">end</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Vector cross product =&gt;&gt; Returns column vector </span>
<span class="org-keyword">function</span> <span class="org-function-name">cross</span>(va, vb)
   x, y, z = va
   T = [ 0 -z y ; z 0 -x; -y x 0]
   <span class="org-keyword">return</span> T * vb
<span class="org-keyword">end</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Vector Dot product via vector column X transpose multiplication</span>
<span class="org-function-name">dot</span>(va, vb) = va' * vb

<span class="org-comment-delimiter"># </span><span class="org-comment">Note: The inputs must be column vectors</span>
<span class="org-keyword">function</span> <span class="org-function-name">lookAt</span>(eye, at, up)
   <span class="org-comment-delimiter"># </span><span class="org-comment">The vector Z is the direction to where the camera is looking at.</span>
   Z = normalize( eye - at      )
   X = normalize( cross(up, Z)  )
   Y = normalize( cross(Z, X )  )
   t = [ dot(eye, X)  dot(eye, Y)  dot(eye, Z) ]

   <span class="org-comment-delimiter"># </span><span class="org-comment">Define identity matrix </span>
   matrix = [ 1.0 0.0 0.0 0.0 ; 0.0 1.0 0.0 0.0 ; 0.0 0.0 1.0 0.0; 0.0 0.0 0.0 1.0]   

   <span class="org-comment-delimiter"># </span><span class="org-comment">Assign vector X to matrix's first row </span>
   matrix[1, 1:3] = X
   <span class="org-comment-delimiter"># </span><span class="org-comment">Assign vector Y to matrix's second row</span>
   matrix[2, 1:3] = Y
   <span class="org-comment-delimiter"># </span><span class="org-comment">Assign vector Z to matrix's third row </span>
   matrix[3, 1:3] = Z
   <span class="org-comment-delimiter"># </span><span class="org-comment">Assign forth (last) column to vector t </span>
   matrix[1:3, 4] = -t
   <span class="org-keyword">return</span> matrix 
<span class="org-keyword">end</span>
</pre>
</div>

<p>
Test implementation: 
</p>

<div class="org-src-container">
<pre class="src src-julia"><span class="org-comment-delimiter">#  </span><span class="org-comment">--------- Test Case 1 --------------------------#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">=================================================#</span>
eye = [3.0 10.0 20.0  ]'
at  = [50.0 25.0 10.0 ]'
up  = [0.0   1.0 0.00 ]' <span class="org-comment-delimiter"># </span><span class="org-comment">Y axis</span>

julia&gt; eye
3&#215;1 LinearAlgebra.Adjoint{<span class="org-type">Float64</span>,<span class="org-type">Array</span>{<span class="org-type">Float64</span>,2}}:
  3.0
 10.0
 20.0

<span class="org-comment-delimiter"># </span><span class="org-comment">Camera's view transform matrix </span>
julia&gt; Tview = lookAt(eye, at, up)
4&#215;4 <span class="org-type">Array</span>{<span class="org-type">Float64</span>,2}:
 -0.208108  0.0       -0.978106   20.1864
 -0.291457  0.954572   0.062012   -9.91159
  0.933672  0.297981  -0.198654  -52.1466
  0.0       0.0        0.0         1.0

<span class="org-comment-delimiter"># </span><span class="org-comment">Camera's view transform matrix rounded with 3 decimal digits</span>
julia&gt; map(x -&gt; round(x, digits=3), Tview)
4&#215;4 <span class="org-type">Array</span>{<span class="org-type">Float64</span>,2}:
  0.208   0.0    0.978  -20.186
 -0.291   0.955  0.062   -9.912
 -0.934  -0.298  0.199    1.808
  0.0     0.0    0.0      1.0

<span class="org-comment-delimiter">#  </span><span class="org-comment">--------- Test Case 2 --------------------------#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">=================================================#</span>
eye = [50.0 -10.0 0.0 ]'
up  = [0.0 1.0 0.0 ]'
at  = [25.0 5.615 -200.0]'

Tview = lookAt(eye, at, up)

julia&gt; map(x -&gt; round(x, digits=3), Tview)
4&#215;4 <span class="org-type">Array</span>{<span class="org-type">Float64</span>,2}:
 0.992   0.0    -0.124  -49.614
 0.01    0.997   0.077    9.491
 0.124  -0.077   0.989   -6.956
 0.0     0.0     0.0      1.0

</pre>
</div>


<p>
<b>References</b> 
</p>

<ul class="org-ul">
<li><a href="http://ivl.calit2.net/wiki/images/2/2c/03_CoordinateSystemsS15.pdf">CSE 167: Introduction to Computer Graphics</a> - Lecture 3 - Coordinate Systems.</li>

<li><a href="https://www.cs.utexas.edu/~fussell/courses/cs354/lectures/lecture11.pdf">Viewing and Modelling - CS354</a></li>
</ul>
</div>
</div>
<div id="outline-container-org607f51d" class="outline-4">
<h4 id="org607f51d"><span class="section-number-4">1.6.6</span> Concatenating Affine Transforms</h4>
<div class="outline-text-4" id="text-1-6-6">
<p>
<b>Concatenating / Combinating of affine transforms</b> 
</p>

<p>
Multiple affine transforms can be combined or concatenated as a single
affine transform, just by multiplying matrices. Considering the
following sequence of 3D affine transforms, such as:
</p>

<ol class="org-ol">
<li>scale(3, 3, 3) - scale by 3 on all axis.</li>
<li>translate(x = 25, y = 10, z = 20) - translate to point (25, 30, 2)</li>
<li>rotX(30) - rotate 30 degrees around X axis</li>
<li>rotZ(54) - rotate by 54 degrees around Z axis.</li>
</ol>

<p>
Let V = [ x y z 1 ]' to be (4 x 1 - 4 rows and 1 column) a column
vector containing the current vertice homogeneous coordinates.
</p>

<p>
Those transforms can be combined in the following way: 
</p>

<ul class="org-ul">
<li>Node: the symnol (·) means multiplication.</li>
</ul>

<div class="org-src-container">
<pre class="src src-js"><span class="org-comment-delimiter">// </span><span class="org-comment">Where:</span>
<span class="org-comment-delimiter">//  </span><span class="org-comment">=&gt;  scale(3, 3, 3) is the scaling affine transform matrix.</span>
<span class="org-comment-delimiter">//  </span><span class="org-comment">=&gt;  Va is the vertex coordinate after applying the scale transform.</span>
<span class="org-comment-delimiter">// </span>
Va = scale(3, 3, 3) &#183; V

<span class="org-comment-delimiter">// </span><span class="org-comment">Where: </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">=&gt; translate(25, 10, 20) is the translation affine transfom matrix. </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">=&gt; Vb is the result, vertex coodinate after the transform was applied.</span>
Vb = translate(25, 10, 20)  &#183; Va 

Vc = rotX(30) &#183; Vb
Vd = rotZ(54) &#183; Vc

<span class="org-comment-delimiter">// </span><span class="org-comment">V' (V - prime) - overall transformation result (end result)</span>
V<span class="org-string">' = Vd </span>
</pre>
</div>

<p>
By performing algebraics substitution, the overall transform result
becomes: 
</p>

<div class="org-src-container">
<pre class="src src-text">STEP 1: 
 Vb = translate(25, 10, 20) &#183; Va 
 Vb = translate(25, 10, 20) &#183; ( scale(3, 3, 3) &#183; V )

STEP 2:     
  Vc = rotX(30) &#183; Vb 
  Vc = rotX(30) &#183; ( translate(25, 10, 20) &#183; ( scale(3, 3, 3) &#183; V ) )

STEP 3: 
  Vd = rotZ(54) &#183; vc 
  Vd = rotZ(54) &#183; ( rotX(30) &#183; ( translate(25, 10, 20) &#183; ( scale(3, 3, 3) &#183; V ) ) )

STEP 4:  - End result 
  V' = Vd
  V' = rotZ(54) &#183; ( rotX(30) &#183; ( translate(25, 10, 20) &#183; ( scale(3, 3, 3) &#183; V ) ) )          
</pre>
</div>

<p>
The final vertex position can be stated as:
</p>

<div class="org-src-container">
<pre class="src src-text">   V' = rotZ(54) &#183; rotX(30) &#183; translate(25, 10, 20) &#183; scale(3, 3, 3) &#183; V 

OR:

   V' =  [ rotZ(54) &#183; rotX(30) &#183; translate(25, 10, 20) &#183; scale(3, 3, 3) ] &#183; V 
</pre>
</div>

<p>
All the sequence of transformations can be combined as a single
transform, designated by T, which is the multiplication between all
transforms in reverse order that they were applied. The last transform
is multiplied first and first transform is multiplied last. In the
same that matrix multiplication is not commutative, the operation
result depends on the order that of matrices, transform combinations
are not commutative, they also depends on the order that transforms
were applied. 
</p>

<div class="org-src-container">
<pre class="src src-text">V' = T &#183; V 

Where: 
   T =  rotZ(54) &#183; rotX(30) &#183; translate(25, 10, 20) &#183; scale(3, 3, 3)  
</pre>
</div>

<p>
Multiple transforms can be combined as: 
</p>

<div class="org-src-container">
<pre class="src src-text">Tranform_combined = Transform_N &#183; Transform_N-1 &#183; ... &#183; Transform_2 &#183; Transform_1
</pre>
</div>


<p>
<b>Combining 2D canonical transforms in Sympy - Python CAS</b>
</p>

<p>
Sympy - Python CAS (Computer Algebra System) can be used for debugging
and testing affine transforms in a symbolic way. 
</p>

<p>
Define 2D canonical affine transforms: 
</p>

<div class="org-src-container">
<pre class="src src-python"><span class="org-keyword">from</span> sympy <span class="org-keyword">import</span> *

<span class="org-variable-name">x</span>,  <span class="org-variable-name">y</span>  = symbols(<span class="org-string">"x y"</span>)
<span class="org-variable-name">dx</span>, <span class="org-variable-name">dy</span> = symbols(<span class="org-string">"dx dy"</span>)
<span class="org-variable-name">sx</span>, <span class="org-variable-name">sy</span> = symbols(<span class="org-string">"sx sy"</span>)
<span class="org-variable-name">t</span>      = symbols(<span class="org-string">"t"</span>)  <span class="org-comment-delimiter"># </span><span class="org-comment">t represents the rotation angle theta (&#952;)</span>


<span class="org-comment-delimiter"># </span><span class="org-comment">Column vector representing - generic Vertex (aka point) in homogeneous coordinate</span>
<span class="org-comment-delimiter"># </span>
<span class="org-variable-name">v</span> = Matrix([x, y, 1])

&gt;&gt;&gt; pprint(v)
&#9121;x&#9124;
&#9122; &#9125;
&#9122;y&#9125;
&#9122; &#9125;
&#9123;1&#9126;

<span class="org-comment-delimiter"># </span><span class="org-comment">Translation of (dx, dy) coordinate transform </span>
&gt;&gt;&gt; <span class="org-variable-name">Translate</span> = Matrix([[1, 0, dx], [0, 1, dy], [0, 0, 1]])

&gt;&gt;&gt; pprint(Translate)
&#9121;1  0  dx&#9124;
&#9122;        &#9125;
&#9122;0  1  dy&#9125;
&#9122;        &#9125;
&#9123;0  0  1 &#9126;


<span class="org-comment-delimiter"># </span><span class="org-comment">Scale affine transform </span>
&gt;&gt;&gt; <span class="org-variable-name">Scale</span> = Matrix([[sx, 0, 0], [0, sy, 0], [0, 0, 1]])

&gt;&gt;&gt; pprint(Scale)
&#9121;sx  0   0&#9124;
&#9122;         &#9125;
&#9122;0   sy  0&#9125;
&#9122;         &#9125;
&#9123;0   0   1&#9126;


<span class="org-comment-delimiter"># </span><span class="org-comment">Rotation around Z axis </span>
&gt;&gt;&gt; <span class="org-variable-name">RotZ</span>  = Matrix([[ cos(t), -sin(t), 0], [ sin(t), cos(t), 0], [0, 0, 1]])

&gt;&gt;&gt; pprint( RotZ )
&#9121;cos(t)  -sin(t)  0&#9124;
&#9122;                  &#9125;
&#9122;sin(t)  cos(t)   0&#9125;
&#9122;                  &#9125;
&#9123;  0        0     1&#9126;

</pre>
</div>

<p>
Apply single transforms to vertex <b>v</b>. 
</p>

<div class="org-src-container">
<pre class="src src-python"><span class="org-comment-delimiter"># </span><span class="org-comment">Apply translation affine transform to vertex V </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">-------------------------------------------</span>
&gt;&gt;&gt; pprint( Translate * v )
&#9121;dx + x&#9124;
&#9122;      &#9125;
&#9122;dy + y&#9125;
&#9122;      &#9125;
&#9123;  1   &#9126;

<span class="org-comment-delimiter"># </span><span class="org-comment">Apply scale to vertex v </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">-------------------------------------------</span>

&gt;&gt;&gt; Scale * v
Matrix([
[sx*x],
[sy*y],
[   1]])

&gt;&gt;&gt; pprint( Scale * v )
&#9121;sx&#8901;x&#9124;
&#9122;    &#9125;
&#9122;sy&#8901;y&#9125;
&#9122;    &#9125;
&#9123; 1  &#9126;

&gt;&gt;&gt; pprint( (Scale * v).subs({sx: 10, sy: 10}) )
&#9121;10&#8901;x&#9124;
&#9122;    &#9125;
&#9122;10&#8901;y&#9125;
&#9122;    &#9125;
&#9123; 1  &#9126;


&gt;&gt;&gt; pprint( (Scale * v).subs({sx: 10, sy: 20}) )
&#9121;10&#8901;x&#9124;
&#9122;    &#9125;
&#9122;20&#8901;y&#9125;
&#9122;    &#9125;
&#9123; 1  &#9126;


<span class="org-comment-delimiter"># </span><span class="org-comment">Apply rotation to vertex v </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">------------------------------</span>

&gt;&gt;&gt; <span class="org-variable-name">v_rot</span> = RotZ * v

&gt;&gt;&gt; pprint( v_rot )
&#9121;x&#8901;cos(t) - y&#8901;sin(t)&#9124;
&#9122;                   &#9125;
&#9122;x&#8901;sin(t) + y&#8901;cos(t)&#9125;
&#9122;                   &#9125;
&#9123;         1         &#9126;

&gt;&gt;&gt; pprint( v_rot.subs(t, 0) )
&#9121;x&#9124;
&#9122; &#9125;
&#9122;y&#9125;
&#9122; &#9125;
&#9123;1&#9126;

<span class="org-comment-delimiter"># </span><span class="org-comment">Rotate by 90 degrees (pi / 2 radians)</span>
&gt;&gt;&gt; pprint( v_rot.subs(t, pi / 2) )
&#9121;-y&#9124;
&#9122;  &#9125;
&#9122;x &#9125;
&#9122;  &#9125;
&#9123;1 &#9126;

<span class="org-comment-delimiter"># </span><span class="org-comment">Rotate by 60 degreees (pi / 3)</span>
&gt;&gt;&gt; pprint( v_rot.subs(t, pi / 3) )
&#9121;x   &#8730;3&#8901;y&#9124;
&#9122;&#9472; - &#9472;&#9472;&#9472;&#9472;&#9125;
&#9122;2    2  &#9125;
&#9122;        &#9125;
&#9122;&#8730;3&#8901;x   y&#9125;
&#9122;&#9472;&#9472;&#9472;&#9472; + &#9472;&#9125;
&#9122; 2     2&#9125;
&#9122;        &#9125;
&#9123;   1    &#9126;
</pre>
</div>

<p>
Combine 2 tranforms in multiple orders and check the outcome. 
</p>

<div class="org-src-container">
<pre class="src src-python"><span class="org-comment-delimiter"># </span><span class="org-comment">Combine transforms: 1st - translation; 2nd - scale. </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">--------------------------------------------------</span>

  &gt;&gt;&gt; <span class="org-variable-name">T</span> = Scale * Translate

  &gt;&gt;&gt; pprint(T)
  &#9121;sx  0   dx&#8901;sx&#9124;
  &#9122;             &#9125;
  &#9122;0   sy  dy&#8901;sy&#9125;
  &#9122;             &#9125;
  &#9123;0   0     1  &#9126;


  <span class="org-comment-delimiter"># </span><span class="org-comment">Apply to vertex</span>
  &gt;&gt;&gt; pprint( T * v ) 
  &#9121;dx&#8901;sx + sx&#8901;x&#9124;
  &#9122;            &#9125;
  &#9122;dy&#8901;sy + sy&#8901;y&#9125;
  &#9122;            &#9125;
  &#9123;     1      &#9126;


<span class="org-comment-delimiter"># </span><span class="org-comment">Combine transforms: 1st - scale; 2nd - translation. </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">--------------------------------------------------</span>

   &gt;&gt;&gt; <span class="org-variable-name">T</span> = Translate * Scale

   &gt;&gt;&gt; pprint( T )
   &#9121;sx  0   dx&#9124;
   &#9122;          &#9125;
   &#9122;0   sy  dy&#9125;
   &#9122;          &#9125;
   &#9123;0   0   1 &#9126;

   <span class="org-comment-delimiter"># </span><span class="org-comment">Apply to vertex</span>
   &gt;&gt;&gt; pprint(T * v) 
   &#9121;dx + sx&#8901;x&#9124;
   &#9122;         &#9125;
   &#9122;dy + sy&#8901;y&#9125;
   &#9122;         &#9125;
   &#9123;    1    &#9126;


<span class="org-comment-delimiter"># </span><span class="org-comment">Combine transforms: 1st - rotation; 2nd - translation. </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">--------------------------------------------------</span>

   &gt;&gt;&gt; <span class="org-variable-name">T</span> = Translate * RotZ

   &gt;&gt;&gt; pprint( T )
   &#9121;cos(t)  -sin(t)  dx&#9124;
   &#9122;                   &#9125;
   &#9122;sin(t)  cos(t)   dy&#9125;
   &#9122;                   &#9125;
   &#9123;  0        0     1 &#9126;


   <span class="org-comment-delimiter"># </span><span class="org-comment">Apply to vertex</span>
   &gt;&gt;&gt; pprint( T * v ) 
   &#9121;dx + x&#8901;cos(t) - y&#8901;sin(t)&#9124;
   &#9122;                        &#9125;
   &#9122;dy + x&#8901;sin(t) + y&#8901;cos(t)&#9125;
   &#9122;                        &#9125;
   &#9123;           1            &#9126;

<span class="org-comment-delimiter"># </span><span class="org-comment">Combine transforms: 1st - translation ; 2nd - rotation </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">------------------------------------------------------</span>

   &gt;&gt;&gt; <span class="org-variable-name">T</span> = RotZ * Translate

   &gt;&gt;&gt; pprint( T )
   &#9121;cos(t)  -sin(t)  dx&#8901;cos(t) - dy&#8901;sin(t)&#9124;
   &#9122;                                      &#9125;
   &#9122;sin(t)  cos(t)   dx&#8901;sin(t) + dy&#8901;cos(t)&#9125;
   &#9122;                                      &#9125;
   &#9123;  0        0               1          &#9126;


   <span class="org-comment-delimiter"># </span><span class="org-comment">Apply to vertex</span>
   &gt;&gt;&gt; pprint( T * v ) 
   &#9121;dx&#8901;cos(t) - dy&#8901;sin(t) + x&#8901;cos(t) - y&#8901;sin(t)&#9124;
   &#9122;                                           &#9125;
   &#9122;dx&#8901;sin(t) + dy&#8901;cos(t) + x&#8901;sin(t) + y&#8901;cos(t)&#9125;
   &#9122;                                           &#9125;
   &#9123;                     1                     &#9126;


</pre>
</div>

<p>
Combine transforms in the following order: 1st - rotation; 2nd -
scaling; 3rd - translation: 
</p>

<div class="org-src-container">
<pre class="src src-python">&gt;&gt;&gt; <span class="org-variable-name">T</span> = Translate * Scale * RotZ

&gt;&gt;&gt; pprint( T )
&#9121;sx&#8901;cos(t)  -sx&#8901;sin(t)  dx&#9124;
&#9122;                         &#9125;
&#9122;sy&#8901;sin(t)  sy&#8901;cos(t)   dy&#9125;
&#9122;                         &#9125;
&#9123;    0          0       1 &#9126;

&gt;&gt;&gt; pprint( T * v )
&#9121;dx + sx&#8901;x&#8901;cos(t) - sx&#8901;y&#8901;sin(t)&#9124;
&#9122;                              &#9125;
&#9122;dy + sy&#8901;x&#8901;sin(t) + sy&#8901;y&#8901;cos(t)&#9125;
&#9122;                              &#9125;
&#9123;              1               &#9126;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb7ee96e" class="outline-4">
<h4 id="orgb7ee96e"><span class="section-number-4">1.6.7</span> Quaternions</h4>
<div class="outline-text-4" id="text-1-6-7">
<p>
Quaternions are a generalization of complex numbers, that was proposed
and formulated by the irish mathematician and physicist William Rowan 
<a href="https://en.wikipedia.org/wiki/William_Rowan_Hamilton">Hamilton</a>, in 1843. This mathematical construct provides a convenient
notation for expressing rotation and has a broad range of
applications, including computer graphics, computer vision, robotics,
orbital mechanics, aerospace and flight dynamics. 
</p>

<p>
A quaternion <b>q</b> is defined as: 
</p>

<ul class="org-ul">
<li>Where:
<ul class="org-ul">
<li>w, x, y, z are real numbers.</li>
<li>w =&gt; is the quaternion's real (scalar) component.</li>
<li>[x, y, z] =&gt; is the quaternion's vector componet</li>
<li>i, j, k are unit vectors (basis elements) that satisfies a set
of properties.</li>
</ul></li>
</ul>

\begin{equation}
   q = w + x \cdot i + y \cdot j + z \cdot k
\end{equation}

<p>
The quaternion <b>q</b> can be represented as: 
</p>

<ul class="org-ul">
<li>Where:
<ul class="org-ul">
<li>\(\vec{v} = [x, y, z]\) is the quaternion vector component.</li>
</ul></li>
</ul>

\begin{align*}
    q &= [w, x, y, z]  \quad & \text{Tuple representation}         \\
    q &= (u, \vec{v})  \quad & \text{Scalar/vector representation} \\
\end{align*}


<p>
The quaternion unit vectors or basis elements satifies the following
properties: 
</p>

\begin{equation}
   i^1 = j^2 = k^2 = i \cdot j \cdot k = -1 
\end{equation}

<p>
And also:
</p>

\begin{align*}
    i \cdot j = k  & \quad & j \cdot i =  k  \\
    j \cdot k = i  & \quad & k \cdot j = -i  \\
    k \cdot i = j  & \quad & i \cdot k = -j  \\
\end{align*}


<p>
<b>Types of Quaternion</b> 
</p>

<ul class="org-ul">
<li>Real quaternion</li>
</ul>

<p>
Real quaternion, is a quaterion which all elements of vector
components are zero. 
</p>

\begin{equation} 
   q = w + 0 \cdot i + 0 \cdot j + 0 \cdot k 
\end{equation}

<ul class="org-ul">
<li>Pure quaternion</li>
</ul>

<p>
A pure quaternion, has the real part equal to zero. It can represent a
vector in the space. 
</p>

\begin{equation} 
  q = 0 + x \cdot i + y \cdot j + z \cdot k
\end{equation}

<ul class="org-ul">
<li>Unit quaternion</li>
</ul>

<p>
A quaternion which the norm or magnitude is equal to one. 
</p>

\begin{equation} 
  || q || = 1
\end{equation}

<ul class="org-ul">
<li>Identity quaternion</li>
</ul>

<p>
An identity quaternion when multiplied by another quaternion results
in no rotation. 
</p>

\begin{equation}
   q_i = 1 + 0 \cdot i + 0 \cdot j + 0 \cdot k 
\end{equation}

<p>
In similar way to identity matrices, the following is valid: 
</p>

\begin{equation}
  q_i \cdot q_a = q_a \cdot q_i = q_a
\end{equation}

<p>
<b>Quaternion Conjugate</b> 
</p>

<p>
The conjugate of a quaternion, \(q^*\), is defined as:
</p>

\begin{equation}
  q^{*} = w - \vec{v} 
        = w - (x \cdot i + y \cdot j + z \cdot k)
        = w + (-x) i + (-y) j + (-z) k         
\end{equation}

<p>
<b>Inverse Quaternion</b> \(q^{-1}\)
</p>

\begin{equation}
  q^{-1} = \frac{q^{*}}{ || q ||^2 }
\end{equation}

<p>
The inverse quaternion satifies the following equality: 
</p>

\begin{equation}
  q^{-1} \cdot q = q \cdot q^{-1} = 1 
\end{equation}

<p>
<b>Quaternion Norm</b> 
</p>

<p>
The norm (magnitude) of a quaternion is given by: 
</p>

\begin{equation}
   || q ||^2 = q \cdot q^{*} =  w^2 + x^2 + y^2 + z^2
\end{equation}

<p>
<b>Unit quaternion</b> 
</p>

<p>
An unit quaternion \(q_u\) has norm equal to one.
</p>

\begin{equation}
   || q_u || = 1 
\end{equation}

<p>
An unit quaternion is equal to its conjugate: 
</p>

\begin{equation} 
   q^* = q^{-1}
\end{equation}

<p>
<b>Quaternion Dot Product</b> 
</p>

<p>
A quaternion dot product is similar to vector dot product. The
quaternion dot product between two quaternions q1 and q2 is defined as
the sum of the product between the quaternions components. 
</p>

\begin{equation} 
   \text{dotquat}(q_1, q_2) = q_1 \cdot q_2 = w_1 \cdot w_2 + x_1 \cdot x_2 + y_1 \cdot y_2 + z_1 \cdot z_2 
\end{equation}

<p>
<b>Angle between two quaternion</b> 
</p>

<p>
The angle between two quaternions q1 and q2 is defined as: 
</p>

\begin{equation} 
    \cos \theta = \frac{ q_1 \cdot q_2 }{ || q_1 || \cdot || q_2 ||  }
                = \frac{ \text{dotquat}(q_1, q_2) }{ \text{norm}( q_1) \cdot \text{norm}(q_2)  }
                = \frac{  w_1 \cdot w_2 + x_1 \cdot x_2 + y_1 \cdot y_2 + z_1 \cdot z_2  }{  || q_1 || \cdot || q_2 ||  }
\end{equation}

<p>
<b>Quaternion Sum</b> 
</p>

<p>
The sum of two quaternions q1 and q2 is: 
</p>

\begin{equation}
   q_1 + q_2 = (w_1 + w_2) + (x_1 + x_2) i + (y_1 + y_2)j + (z_1 + z_2) k
\end{equation}

<p>
<b>Quaternion Product</b> (a.k.a Hamilton Product)
</p>

<p>
The product <b>p</b> of two quaternons q1 and q2 can be computed as: 
</p>

<ul class="org-ul">
<li>Where:
<ul class="org-ul">
<li>p is the quaternion product between q1 and q2</li>
<li>\(\vec{v_1} \cdot \vec{v_2}\) is the scalar product between \(\vec{v_1}\) and \(\vec{v_2}\).</li>
<li>\(\vec{v1} \times \vec{v_2}\) is the cross product between  \(\vec{v_1}\) and \(\vec{v_2}\).</li>
<li>\(p_v\) is the vector component of p</li>
<li>\(p_w\) is the scalar/real component of p.</li>
</ul></li>
</ul>

\begin{align*}
  p &= q_1 \cdot q_2 = ( w_1 \cdot w_2 - \vec{v_1} \cdot \vec{v_2} \quad ; \quad
                       w_1 \cdot \vec{v_2} + w_2 \cdot \vec{v_1} + \vec{v1} \times \vec{v_2} )  \\

    &= ( w_1 \cdot w_2 - \vec{v_1} \cdot \vec{v_2} )  + 
                      ( w_1 \cdot \vec{v_2} + w_2 \cdot \vec{v_1} + \vec{v1} \times \vec{v_2} )
\end{align*}

<p>
The components of vector p are: 
</p>

\begin{align*}
    p_w &= w_1 \cdot w_2 - \vec{v_1} \cdot \vec{v_2}                             \\
    p_v &= w_1 \cdot \vec{v_2} + w_2 \cdot \vec{v_1} + \vec{v1} \times \vec{v_2} \\
\end{align*}

<p>
The quaternion product is non commuative, as a result, the following
holds: 
</p>

\begin{equation}
      q_1 \cdot q_2 \neq q_2 \cdot q_2 
\end{equation}

<p>
The quaternion product satifies the following properties: 
</p>

\begin{align*}
    || q_1 \cdot q_2 ||  &= ||q_1|| \cdot || q_2 ||   \\
     (q_1 \cdot q_2)^* &= q_2^* \cdot q_1^*
\end{align*}

<p>
<b>Quaternion product between pure quaternions</b> 
</p>

<p>
The product between two pure quaternions yields the dot product and
cross simultaneously, the dot product as the real part of the
operation result and cross product as the vector part of the result.
</p>

\begin{equation} 
    p \cdot q = - (p \cdot q) + (p \times q)
\end{equation}

<p>
Where: 
</p>
<ul class="org-ul">
<li>Note: A pure quaternion, is the same as space vector, the real
part is zero, w = 0.</li>
<li>\(p = 0 + x_p \cdot i + y_p \cdot j + z_p \cdot k\)</li>
<li>\(q = 0 + x_q \cdot i + y_q \cdot j + z_q \cdot k\)</li>
<li>\(p \cdot q\) is the dot product between the vector parts of p and q.</li>
<li>\(p \times q\) is the cross product (vector product) between p and q.</li>
</ul>


<p>
<b>Quaternion division</b> (<a href="http://www.math.umd.edu/~immortal/MATH431/lecturenotes/ch_quaternions.pdf">MATH432</a> - page 11)
</p>

<p>
The division between two quaternions q1 and q2 is defined as: 
</p>

\begin{equation} 
   \frac{q_1}{q_2} = \frac{q_1 \cdot q_2^* }{ || q_2 ||^2 } = \frac{1}{ || q_2 ||^2 } ( q_1 \cdot q_2^* )
\end{equation}

<p>
<b>Quaternion product using matrices representation</b>
</p>

<p>
The product of two quaternions q1 and q2 can be computed 
in a more convenient and faster way by using matrices and column
vectors multiplication, instead of dot product and cross product. 
</p>

<p>
Let \([q]_v\) be the vector column representation of a quaternion: 
</p>

\begin{equation} 
  [q]_v = \begin{bmatrix} w \\ x \\ y \\ z  \end{bmatrix}
\end{equation}

<p>
Let \([q]_m\) be the following matrix representation of a quaternion: 
</p>

\begin{equation} 
  [q]_m = \begin{bmatrix} 
               w  & -x & -y & -z  \\ 
               x  &  w & -z &  y  \\
               y  &  z &  w & -x  \\
               z  & -y &  x &  w  \\
          \end{bmatrix}
\end{equation}

<p>
The quaternion product between q1 and q2, designated by \([q_r]_v\), can
be expressed as a matrix-column vector multiplication, which is best
suitable for a computer implementation.
</p>

\begin{equation} 
  [q_r]_v = q_1 \cdot q_2 = [q_1]_m \cdot [q_2]_v 
          =           
          \begin{bmatrix} 
               w_1  & -x_1 & -y_1 & -z_1  \\ 
               x_1  &  w_1 & -z_1 &  y_1  \\
               y_1  &  z_1 &  w_1 & -x_1  \\
               z_1  & -y_1 &  x_1 &  w_1  \\
          \end{bmatrix}

          \begin{bmatrix} 
              w_2 \\ x_2 \\ y_2 \\ z_2 \\
          \end{bmatrix}
\end{equation}

<p>
By performing the previous matrix multiplication, the quaternion
product becomes: 
</p>

\begin{equation} 
     [q_r]_v = q_1 \cdot q_2 = 
       \begin{bmatrix} 
            w_1 \cdot w_2 - x_1 \cdot x_2 - y_1 \cdot y_2 - z_1 \cdot z_2  \\ 
            w_1 \cdot x_2 + w_2 \cdot x_1 + y_1 \cdot z_2 - y_2 \cdot z_1  \\
            w_1 \cdot y_2 + w_2 \cdot y_1 - x_1 \cdot z_2 + x_2 \cdot z_1  \\ 
            w_1 \cdot z_2 + w_2 \cdot z_1 + x_1 \cdot y_2 - x_2 \cdot y_1  \\
       \end{bmatrix}
\end{equation}


<p>
<b>Rotation Quaternion</b>
</p>

<p>
A rotation around an axis \(\hat{n}\) (unit vector) by angle \(\theta\)
can be encoded by quaternion \(q_r\): 
</p>

\begin{equation} 
   q_r = \cos \frac{\theta}{2}  + \sin \frac{\theta}{2} \cdot \hat{n}
       = \cos \frac{\theta}{2}  + \sin \frac{\theta}{2} ( x_n \cdot i + y_n \cdot j + z_n \cdot k  )
\end{equation}

<ul class="org-ul">
<li>Where:
<ul class="org-ul">
<li>\(\hat{n}\) is a unit vector.</li>
<li>\(\hat{n} = x_n \cdot i + y_n \cdot j + z_n \cdot k\)</li>
<li>\(|| \hat{n} || = 1\)</li>
</ul></li>
</ul>

<p>
The norm of quaternion \(q_r = 1\), thus the following holds: 
</p>

\begin{equation} 
  || q_r || = 1 
\end{equation}

<p>
The coordinate transformation from a vector in reference frame A to a
reference frame B, obtained by the rotation of coordinate frame A
around a unit vector \(\hat{n}\) can be computed as:
</p>

\begin{equation} 
   q_B = q_r \cdot q_A \cdot q_r^{-1}
       = q_r \cdot q_A \cdot q_r^{*}
\end{equation}

<p>
Where: 
</p>
<ul class="org-ul">
<li>\(q_A\) is the coordinate of a vector in the reference frame A (aka
coordinate system, aka coordinate frame).</li>
<li>\(q_B\) is the coordinate of a the same vector in the reference frame B.</li>
<li>\(q_A = 0 + x_A \cdot i + y_A \cdot j + z_A \cdot k\)</li>
<li>\(q_B = 0 + x_B \cdot i + y_B \cdot j + z_B \cdot k\)</li>
</ul>


<p>
The previous rotation coordinate transformation can be determined in a
more efficient way by applying the following algorithm. <a href="https://fgiesen.wordpress.com/2019/02/09/rotating-a-single-vector-using-a-quaternion/">(The-Ryg-Blog)</a>
</p>


\begin{eqnarray*} 
   v_t &=& 2 ( v_r \times v_a)                    \\
   q_B &=&  v_A + w_r \cdot v_t + v_r \times v_t 
\end{eqnarray*}

<p>
Where: 
</p>
<ul class="org-ul">
<li>\([ Q ]_w\) - real part of a quaternion Q</li>
<li>\([ Q ]_v\) - vector part of a quaterion Q</li>
<li>\(w_r = \cos ( \theta / 2)\) - real part of rotation quaternion \(q_r\)</li>
<li>\(v_r = \hat{n} \cdot \sin( \theta / 2 )\) - vector part of rotation quaternion \(q_r\)</li>
<li>\(v_B\) - vector part of quaternion \(q_B\)</li>
<li>\(v_A\) - Vector part of quaternion \(q_A\)</li>
<li>\(v_r \times v_a\) - Cross product between those two vectors.</li>
</ul>


<p>
<b>Determining rotation and axis from a normalized quaternion</b> 
</p>

<p>
Supposing that the components (w, x, y, z) of normalized quaternion <b>q</b>
are known. The represented rotation angle, \(\theta\) and rotation axis
(a.k.a orientation) vector, \(\hat{n} = [x_n \quad y_n \quad z_n]\), can
be determined in the following way.
</p>

<p>
Rotation quaternion (known: x, y, z, w)
</p>

\begin{eqnarray*} 
  q  &=& w + x \cdot i + y \cdot j + z \cdot k  \\
     &=& \cos \frac{\theta}{2} + \sin \frac{\theta}{2}  \hat{n} \\
     &=& \cos \frac{\theta}{2} + \sin \frac{\theta}{2} (x_n \cdot i + y_n \cdot j + z_n \cdot k) \\
\end{eqnarray*}

<p>
Rotation angle \(\theta\)
</p>

\begin{equation}
  \theta  = 2 \text{atan2}( || \vec{v} ||, w  ) = 2 \text{atan2}( \sqrt{x^2 + y^2 + z^2} , w  ) 
\end{equation}

<p>
Rotation axis: \(\hat{n} = x_n \cdot i + y_n \cdot j + z_n \cdot k\)
</p>

\begin{eqnarray*}
   x_n &=& x / \sqrt{1 - w^2} \\
   y_n &=& x / \sqrt{1 - w^2} \\
   z_n &=& x / \sqrt{1 - w^2} \\
\end{eqnarray*}

<p>
Where: 
</p>

<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Atan2">Atan2</a>(Y, X) is the 2-argument tangent function which determines
the angle quadrant.</li>

<li>\(q = w + x \cdot i + y \cdot j + z \cdot k\) - is a unitary
quaternion, which components x, y and z are assumed to be
known. The quaternion <b>q</b> is presumed to be normalized.</li>

<li>\(\theta\) is the rotation angle. Assumed to be unknown.</li>

<li>\(\hat{n}\) - is the rotation axis vector. Also assumed to be
unknown, which components are \(x_n\), \(y_n\) and \(z_n\).
<ul class="org-ul">
<li>\(\hat{n} = 0 + x_n \cdot i + y_n + \cdot j + z_n \cdot k\)</li>
</ul></li>
</ul>



<p>
<b>Quaternion to rotation matrix conversion</b> 
</p>

<p>
The rotation matrix that transforms coordinates from reference frame A
to reference frame B can be computed as:  <a href="https://www.weizmann.ac.il/sci-tea/benari/sites/sci-tea.benari/files/uploads/softwareAndLearningMaterials/quaternion-tutorial-2-0-1.pdf">(Moti Ben-Ari - Wizmann)</a>, <a href="http://barbic.usc.edu/cs520-s12/quaternions/quaternions-cs520.pdf">(Jernej Barbic)</a>
</p>

\begin{equation} 
   R_n = \begin{bmatrix}

             a^2 + b^2 - c^2 - d^2  
          &  2 (b \cdot c -  a \cdot d)
          &  2 (b \cdot d +  a \cdot c)  \\

             2 (b \cdot c +  a \cdot d )
          &  a^2 - b^2 + c^2 -d^2                   
          &  2 ( c \cdot d -  a \cdot b ) \\

             2 ( b \cdot d -  a \cdot c  )
          &  2 ( c \cdot d +  a \cdot b )
          &  a^2 - b^2 - c^2 + d^2     \\

         \end{bmatrix}
\end{equation}

<p>
Where: 
</p>
<ul class="org-ul">
<li>a, b, c, d are the components of the unit quaternion \(q_r\)</li>
<li>\(a = \cos( \theta / 2)\)</li>
<li>\(b = x_n \cdot \sin (\theta / 2)\)</li>
<li>\(c = y_n \cdot \sin (\theta / 2)\)</li>
<li>\(d = z_n \cdot \sin (\theta / 2)\)</li>
</ul>

<p>
The matrix \(R_n\) can also be simplified to: <a href="https://www.weizmann.ac.il/sci-tea/benari/sites/sci-tea.benari/files/uploads/softwareAndLearningMaterials/quaternion-tutorial-2-0-1.pdf">(Moti Ben-Ari - Wizmann)</a>
</p>

\begin{equation} 
   R_n = 2 \begin{bmatrix}
              a^2 + b^2 - 1/2  & 
              b \cdot c - a \cdot d  & 
              a \cdot c + b \cdot d  \\ 

              a \cdot d + b \cdot c  &
              a^2  + c^2 - 1/2 & 
              c \cdot d - a \cdot b  \\

              b \cdot d - a \cdot c &
              a \cdot b + c \cdot d &
              a^2 + d^2 - 1/2 \\
           
          \end{bmatrix}
\end{equation}

<p>
Coordinates from frame A can be turned into coordinates from frame B
by performing the following  matrix multiplication.
</p>

\begin{equation} 
    \begin{bmatrix} x_B \\ y_B \\ z_B \end{bmatrix}
    = R_n  \begin{bmatrix} x_A \\ y_A \\ z_A \end{bmatrix}
\end{equation}


<p>
From the previous matrix \(R_n\) it is possible to determine the
yaw-pitch-roll (Z-X-Y) Euler's angles. <a href="http://www.chrobotics.com/library/understanding-quaternions">(chrobotics)</a>
</p>

\begin{eqnarray*}
    \phi   &=&  \arctan\left( \frac{ 2 a \cdot b + 2 c \cdot d } { a^2 - b^2 - c^2 + d^2 } \right )  \\ 
    \theta &=& -\arcsin\left( 2 b \cdot d - 2 a \cdot c  \right )                                    \\
    \psi   &=&  \arctan\left( \frac{ 2 a \cdot d + 2 b \cdot c}{ a^2 + b^2 - c^2 - d^2 } \right )    \\
\end{eqnarray*}

<p>
Where: 
</p>
<ul class="org-ul">
<li>\(\phi\)   - is the yaw angle</li>
<li>\(\theta\) - is the pitch angle</li>
<li>\(\psi\)   -is the roll angle</li>
</ul>


<p>
<b>Quaternion to homogeneous coordinate rotation matrix</b> 
</p>

<p>
The matrix \(R_n\) can be converted to a homogenous coordinate form,
\(T_n\), which is more convenient, since homogenous coordinate allows
expressing translations in a similar fashion to rotation
transformations, just as vector-matrix multiplication.
</p>


\begin{equation} 
   T_n = \begin{bmatrix}

             a^2 + b^2 - c^2 - d^2  
          &  2 (b \cdot c -  a \cdot d)
          &  2 (b \cdot d +  a \cdot c)  
          &  0                            \\

             2 (b \cdot c +  a \cdot d )
          &  a^2 - b^2 + c^2 -d^2                   
          &  2 ( c \cdot d -  a \cdot b ) 
          &  0                            \\

             2 ( b \cdot d -  a \cdot c  )
          &  2 ( c \cdot d +  a \cdot b )
          &  a^2 - b^2 - c^2 + d^2     
          &  0                            \\

             0 & 0 & 0 & 1 \\ 
         \end{bmatrix}
\end{equation}


\begin{equation} 
   T_n = 2 \begin{bmatrix}
              a^2 + b^2 - 1/2  & 
              b \cdot c - a \cdot d  & 
              a \cdot c + b \cdot d  & 
              0                      \\ 

              a \cdot d + b \cdot c  &
              a^2  + c^2 - 1/2       & 
              c \cdot d - a \cdot b  & 
              0                     \\ 

              b \cdot d - a \cdot c &
              a \cdot b + c \cdot d &
              a^2 + d^2 - 1/2       & 
              0                     \\ 

              0 & 0 & 0 & 1 \\
           
          \end{bmatrix}
\end{equation}

<p>
Homogeneous coordinates from frame A can be turned into coordinates of
frame B by using the following expression: 
</p>

\begin{equation} 
    \begin{bmatrix} x_B \\ y_B \\ z_B \\ 1 \end{bmatrix}
    = T_n  \begin{bmatrix} x_A \\ y_A \\ z_A \\ 1 \end{bmatrix}
\end{equation}


<p>
<b>Table with Useful Normalized Quaternions (Rotation Quaternions)</b> - <a href="http://wiki.ogre3d.org/Quaternion+and+Rotation+Primer">(Ogre3D Game Engine)</a>
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">w</th>
<th scope="col" class="org-right">x</th>
<th scope="col" class="org-right">y</th>
<th scope="col" class="org-right">z</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">1</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Identity quaternion, represents no rotation.</td>
</tr>

<tr>
<td class="org-left">0</td>
<td class="org-right">1</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">180°  (π radians) rotation around X axis</td>
</tr>

<tr>
<td class="org-left">0</td>
<td class="org-right">0</td>
<td class="org-right">1</td>
<td class="org-right">0</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">180° rotation around Y axis</td>
</tr>

<tr>
<td class="org-left">0</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-right">1</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">180° rotation around Z axis.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">\(\sqrt{1/2}\)</td>
<td class="org-right">\(\sqrt{1/2}\)</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">90° rotation around X axis.</td>
</tr>

<tr>
<td class="org-left">\(\sqrt{1/2}\)</td>
<td class="org-right">0</td>
<td class="org-right">\(\sqrt{1/2}\)</td>
<td class="org-right">0</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">90° rotation around Y axis.</td>
</tr>

<tr>
<td class="org-left">\(\sqrt{1/2}\)</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-right">\(\sqrt{1/2}\)</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">90° rotation around Z axis.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">\(\sqrt{1/2}\)</td>
<td class="org-right">\(-\sqrt{1/2}\)</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">-90° rotation around X axis.</td>
</tr>

<tr>
<td class="org-left">\(\sqrt{1/2}\)</td>
<td class="org-right">0</td>
<td class="org-right">\(-\sqrt{1/2}\)</td>
<td class="org-right">0</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">-90° rotation around Y axis.</td>
</tr>

<tr>
<td class="org-left">\(\sqrt{1/2}\)</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-right">\(-\sqrt{1/2}\)</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">-90° rotation around Z axis.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Note: 
</p>
<ul class="org-ul">
<li>\(\sqrt{1/2} = \sqrt{0.5} \approx 0.70710\)</li>
<li>\(\pi = pi = \approx 3.14159265\)</li>
</ul>


<p>
<b>Further Reading</b> 
</p>


<p>
Quaternions: 
</p>

<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Quaternion">Quaternions</a> - Wikipedia</li>

<li><a href="https://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation">Quaternions and spatial rotation</a></li>

<li><a href="https://en.wikipedia.org/wiki/History_of_quaternions">History of Quaternions</a></li>

<li><a href="https://arxiv.org/pdf/2009.00425.pdf">An algorithm for dividing quaternions</a> [PAPER]</li>

<li><a href="http://www.chrobotics.com/library/understanding-quaternions">Understanding Quaternions</a>  - ChRobotics</li>

<li><a href="http://www.chrobotics.com/library/understanding-euler-angles">Understanding Euler Angles</a> - ChRobotics</li>

<li><a href="https://www.energid.com/resources/orientation-calculator">Quaternion Calculator</a> - Energid / Actin Advanced Control For Robotics
<ul class="org-ul">
<li>Note: Online calculator for Quaternions.</li>
</ul></li>

<li><a href="https://www.weizmann.ac.il/sci-tea/benari/sites/sci-tea.benari/files/uploads/softwareAndLearningMaterials/quaternion-tutorial-2-0-1.pdf">A Tutorial on Euler Angles and Quaternions</a> - Weizmann Institute of Science</li>

<li><a href="http://www.math.umd.edu/~immortal/MATH431/lecturenotes/ch_quaternions.pdf">Chapter 5 - Quaternions</a></li>

<li><a href="http://wiki.ogre3d.org/Quaternion+and+Rotation+Primer">Quaternion Rotation Primer / Ogre3D Game Engine</a></li>

<li><a href="https://web.cs.ucdavis.edu/~amenta/3dphoto/quaternion.pdf">https://web.cs.ucdavis.edu/~amenta/3dphoto/quaternion.pdf</a></li>

<li><a href="http://www2.cs.uregina.ca/~anima/408/Notes/Quaternions/Quaternions.htm">Quaternion - in computer animation</a></li>

<li><a href="http://web.archive.org/web/20130116192343/https://www.crytek.com/download/izfrey_siggraph2011.pdf">Spherical Skinning withDual-Quaternions and QTangents</a> - Spherical Skinning withDual-Quaternions and QTangentsIvo Zoltan FreyCrytek R&amp;D</li>
</ul>


<p>
Dual Quaternion: 
</p>

<ul class="org-ul">
<li>Dual quaternions are a combination of quaternions and dual
numbers. Unlike ordinary quaternions, which can only express
rotation, dual quaternions can express both rotation and
translation in a more concise and efficient way than
transformation matrices. Some applications of this mathematical
construct are: computer graphics; robotics; aerospace engineering
and more.</li>

<li><a href="https://en.m.wikipedia.org/wiki/Dual_quaternion">Dual Quaternions</a></li>

<li><a href="https://doc.magnum.graphics/magnum/transformations.html">Feature guide » 2D and 3D transformations</a> - Magnum Engine</li>
</ul>


<p>
Quaternion Computer Implementations: 
</p>

<ul class="org-ul">
<li><a href="http://docs.ros.org/en/kinetic/api/tf/html/c++/classtf_1_1Quaternion.html">t::Quaternion - ROS Framework</a> (C++)</li>

<li><a href="https://doc.qt.io/qt-5/qquaternion.html">Qt5 C++ Framework - QQuaternion class</a> (C++)</li>

<li><a href="https://doc.qt.io/qt-5/qtdatavisualization-rotations-example.html">Qt5 - Rotation Example</a></li>

<li><a href="https://ivlab.github.io/MinGfx/classmingfx_1_1_quaternion.html">MinGfx C++ - OpenGL Wrapper</a> (C++)</li>

<li><a href="https://docs.unrealengine.com/en-US/API/Runtime/Core/Math/FQuat/index.html">FQuat</a> - Unreal Game Engine (C++)
<ul class="org-ul">
<li>"Floating point quaternion that can represent a rotation about
an axis in 3-D space."</li>
</ul></li>

<li><a href="https://docs.unrealengine.com/en-US/API/Runtime/Core/Math/FTransform/index.html">FTransform</a> - Unreal Game Engine (C++)
<ul class="org-ul">
<li>"Transform composed of Scale, Rotation (as a quaternion), and
Translation."</li>
<li>Note: It has three member variables: Rotation (class FQaut),
Scale3D (FVector) and Translation (FVector).</li>
</ul></li>

<li><a href="https://docs.unrealengine.com/en-US/API/Runtime/Core/Math/FRotator/index.html">FRotator</a>  - Unreal Gamer Engine (C++)
<ul class="org-ul">
<li>"Implements a container for rotation information. All rotation
values are stored in degrees."</li>
</ul></li>

<li><a href="https://doc.magnum.graphics/magnum/classMagnum_1_1Math_1_1Quaternion.html">Magnum Graphics Library - Quaternion</a> (C++)</li>

<li><a href="https://docs.microsoft.com/en-us/dotnet/api/system.numerics.quaternion?view=net-5.0">Quaternion Struct</a> - Dotnet (C#)</li>

<li><a href="https://octave.sourceforge.io/quaternion/overview.html">Octave - Quaternion Library</a> (OCtave Language, akin to Matlab)</li>

<li><a href="https://docs.blender.org/api/2.33/Mathutils-module.html">Blender - MathUtils module</a></li>
</ul>
</div>
</div>

<div id="outline-container-org214e6ae" class="outline-4">
<h4 id="org214e6ae"><span class="section-number-4">1.6.8</span> Quaternions - Combining Scale and Position</h4>
<div class="outline-text-4" id="text-1-6-8">
<p>
Quaternions (non-dual quaternions) can only encode and represent
rotations around some orientation, which is not enough to specify
position and scaling. As a result, quaternions rotation matrices need
to be concatenated with translation and scaling transform matrices for
computing an object's model transform matrix, which is often passed to
a shader program via uniform variables. 
</p>

<p>
Assuming that a rendered object has a transform member variable of
type RendererTransform containing a a quaternion, for representing
rotation; a scale vector and a position vector. The method
get_transform() compute the rendered object transform matrix, which is
the concatenation of rotation (quaternion), scaling and translation
transforms. The model transform determined by get_transform() method
can be passed to a shader uniform variable.
</p>

<p>
Note: Dual-quaternions, which are a combination of <span class="underline">dual-numbers</span> and
ordinary quaternions, can express both rotation and translation. 
</p>


<ul class="org-ul">
<li>Class RendererTransform:</li>
</ul>


<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">struct</span> <span class="org-type">RenderTransform</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
      <span class="org-comment-delimiter">// </span><span class="org-comment">Rotation quaternion</span>
      <span class="org-comment-delimiter">// </span><span class="org-comment">Set to identity quaternion by default. </span>
      <span class="org-comment-delimiter">// </span><span class="org-comment">Members. The quaternion has the fields (w, x, y, z)</span>
      <span class="org-type">quaternion</span> <span class="org-variable-name">rotation</span> <span class="org-rainbow-delimiters-depth-2">{</span>1.0, 0.0, 0.0<span class="org-rainbow-delimiters-depth-2">}</span>;

      <span class="org-comment-delimiter">// </span><span class="org-comment">Scale vector containing scales (sx, sy, sz) of axis (X, Y, Z)</span>
      <span class="org-type">vec3</span> <span class="org-variable-name">scale</span><span class="org-rainbow-delimiters-depth-2">(</span>1.0, 1.0, 1.0<span class="org-rainbow-delimiters-depth-2">)</span>;      

      <span class="org-comment-delimiter">// </span><span class="org-comment">Contains object's position </span>
      <span class="org-type">vec3</span> <span class="org-function-name">position</span><span class="org-rainbow-delimiters-depth-2">(</span>tx, ty, tz<span class="org-rainbow-delimiters-depth-2">)</span>;

      <span class="org-comment-delimiter">// </span><span class="org-comment">??? Get overall (end result) transform matrix that </span>
      <span class="org-comment-delimiter">// </span><span class="org-comment">will be passed to shader uniform variable.</span>
      <span class="org-type">mat4</span> <span class="org-function-name">get_transform</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span> ????? <span class="org-rainbow-delimiters-depth-2">}</span>

      <span class="org-type">void</span> <span class="org-function-name">translate</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">dx</span>, <span class="org-type">float</span> <span class="org-variable-name">dy</span>, <span class="org-type">float</span> <span class="org-variable-name">dz</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-rainbow-delimiters-depth-2">{</span> 
          <span class="org-keyword">this</span>-&gt;position.x += dx; 
          <span class="org-keyword">this</span>-&gt;position.y += dy; 
          <span class="org-keyword">this</span>-&gt;position.z += dz; 
      <span class="org-rainbow-delimiters-depth-2">}</span>

      <span class="org-type">void</span> <span class="org-function-name">set_position</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">x</span>, <span class="org-type">float</span> <span class="org-variable-name">y</span>, <span class="org-type">float</span> <span class="org-variable-name">z</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-rainbow-delimiters-depth-2">{</span>
          <span class="org-keyword">this</span>-&gt;position.x = x; 
          <span class="org-keyword">this</span>-&gt;position.y = y; 
          <span class="org-keyword">this</span>-&gt;position.z = z; 
      <span class="org-rainbow-delimiters-depth-2">}</span>

      <span class="org-type">void</span> <span class="org-function-name">set_scale</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">sx</span> <span class="org-type">float</span> sy, <span class="org-type">float</span> <span class="org-variable-name">sz</span><span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-keyword">this</span>-&gt;scale.x = sx;
         <span class="org-keyword">this</span>-&gt;scale.y = sy;
         <span class="org-keyword">this</span>-&gt;scale.z = sz;
      <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
The transforms are often applied in the following sequence, first
scaling, then rotation and finally translation. 
</p>

\begin{equation} 
   T = T_t \cdot  T_r \cdot T_s
\end{equation}

<p>
Where: 
</p>
<ul class="org-ul">
<li>T is the total transform matrix, which is the product between
intermediate transforms and later can be passed to a shader
uniform variable.</li>
<li>\(T_s\) - is the scale transform, determined from the scale vector.</li>
<li>\(T_t\) - is the translation transform, computed from the position vector.</li>
<li>\(T_r\) - is the quaternion rotation transform.</li>
</ul>


<p>
Intermediate transforms: 
</p>

<ul class="org-ul">
<li>Translation affine transform form position vector.</li>
</ul>

\begin{equation}
  T_t = 
   \begin{bmatrix} 
     1   & 0   &  0 &  t_x \\
     0   & 1   &  0 &  t_y \\  
     0   & 0   &  1 &  t_z \\  
     0   & 0   &  0 &   1  \\
   \end{bmatrix}
\end{equation}

<ul class="org-ul">
<li>Scaling affine transform from scale vector.</li>
</ul>

\begin{equation}
  T_s = 
   \begin{bmatrix} 
     s_x   & 0     &  0   &  0 \\
     0     & s_y   &  0   &  0 \\  
     0     & 0     &  s_z &  0 \\  
     0     & 0     &  0   &  1  \\
   \end{bmatrix}
\end{equation}

<ul class="org-ul">
<li>Rotation affine transform obtainted from rotation quaternion.
<ul class="org-ul">
<li>Note: most linear algebrar or computer graphics math libraries
provide subroutines (aka functions) or class methods for
converting quaternions to 4x4 rotation matrices. Those libraries
also provide subroutines for determining a quaternion's yaw,
pitch and roll angles and constructing the quaternion from yaw,
pitch and roll angles.</li>
</ul></li>
</ul>

\begin{equation}
  T_r = 
   \begin{bmatrix} 
     a_{11}   & a_{12}   &  a_{13} & 0  \\
     a_{21}   & a_{22}   &  a_{23} & 0  \\
     a_{32}   & a_{32}   &  a_{33} & 0  \\
     0        & 0        &  0      & 1  \\
   \end{bmatrix}
\end{equation}

<p>
The end transform T is determined by concatenating all intermediate
transforms: 
</p>

\begin{equation} 
     T = T_t \cdot  T_r \cdot T_s
\end{equation}


\begin{equation} 
     T = 
  \begin{bmatrix} 
     1   & 0   &  0 &  t_x \\
     0   & 1   &  0 &  t_y \\  
     0   & 0   &  1 &  t_z \\  
     0   & 0   &  0 &   1  \\
   \end{bmatrix}

   \begin{bmatrix} 
     a_{11}   & a_{12}   &  a_{13} & 0  \\
     a_{21}   & a_{22}   &  a_{23} & 0  \\
     a_{31}   & a_{32}   &  a_{33} & 0  \\
     0        & 0        &  0      & 1  \\
   \end{bmatrix}

   \begin{bmatrix} 
     s_x   & 0     &  0   &  0 \\
     0     & s_y   &  0   &  0 \\  
     0     & 0     &  s_z &  0 \\  
     0     & 0     &  0   &  1  \\
   \end{bmatrix}
\end{equation}

<p>
Finally, the model transform becomes: 
</p>

\begin{equation} 

  T = 
   \begin{bmatrix} 
     s_x \cdot a_{11} & s_y \cdot a_{12}  & s_z \cdot a_{13}  &  t_x \\
     s_x \cdot a_{21} & s_y \cdot a_{22}  & s_z \cdot a_{23}  &  t_y \\
     s_x \cdot a_{31} & s_y \cdot a_{32}  & s_z \cdot a_{33}  &  t_z \\
      0               &   0               &   0               &   1  \\ 
   \end{bmatrix}  

\end{equation}

<p>
Then, the algorithm for determing the object model matrix, designated
by the transform T, could be written as the following pseudo-code:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">mat4</span> <span class="org-constant">RenderTransform</span>::<span class="org-function-name">get_transform</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">const</span> 
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Convert quaternion to a 4x4 rotation matrix (affine transform)</span>
    <span class="org-type">mat4</span> <span class="org-variable-name">model_transform</span> = quaternion_to_rotation_transform<span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-keyword">this</span>-&gt;quaternion <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Multiply all elements of first column by X axis scale </span>
    model_transform.comlumn<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> = scale.x * model_transform.comlumn<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Multiply all elemnts of second column by Y axis scale</span>
    model_transform.comlumn<span class="org-rainbow-delimiters-depth-2">[</span>1<span class="org-rainbow-delimiters-depth-2">]</span> = scale.y * model_transform.comlumn<span class="org-rainbow-delimiters-depth-2">[</span>1<span class="org-rainbow-delimiters-depth-2">]</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Multiply all elemnts of third column by Z axis scale</span>
    model_transform.comlumn<span class="org-rainbow-delimiters-depth-2">[</span>2<span class="org-rainbow-delimiters-depth-2">]</span> = scale.z * model_transform.comlumn<span class="org-rainbow-delimiters-depth-2">[</span>2<span class="org-rainbow-delimiters-depth-2">]</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Set all elements of forth column as the 4x1  column vector </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">column4 = [position.x position.y position.z 1.0 ]</span>
    model_transform.column<span class="org-rainbow-delimiters-depth-2">[</span>4<span class="org-rainbow-delimiters-depth-2">]</span> = vec4<span class="org-rainbow-delimiters-depth-2">(</span> position.x, position.y, position.z, 1.0f <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">return</span> model_transform;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
To rotate the rendered object, it is only necessary to multiply the
quaternion variable, called 'rotation' by another quaternion. So, a
C++-like pseudo-code for setting or adding a new rotation could be
written as:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">RenderTransform</span> <span class="org-variable-name">object_transform</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Set a new rotation - overriding the old one. </span>
<span class="org-type">void</span> <span class="org-constant">RenderTransform</span>::<span class="org-function-name">set_rotation</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span> <span class="org-variable-name">angle_radians</span>, <span class="org-type">vec3</span> <span class="org-variable-name">axis_direction</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Normalize axis</span>
    <span class="org-type">vec3</span> <span class="org-variable-name">axis</span> = axis_direction.normalize<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Make explicit assumption the assumption that the quaternion is normalized.</span>
    assert<span class="org-rainbow-delimiters-depth-2">(</span> norm<span class="org-rainbow-delimiters-depth-3">(</span>axis<span class="org-rainbow-delimiters-depth-3">)</span> ~= 1.0  <span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">this</span>-&gt;object_transform.quaternion = make_quaternion_from_AngleAxis<span class="org-rainbow-delimiters-depth-2">(</span>angle, axis<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Add a new rotation, rotate the previous quaternion. </span>
<span class="org-type">void</span> <span class="org-constant">RenderTransform</span>::<span class="org-function-name">rotate</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span> <span class="org-variable-name">angle_radians</span>, <span class="org-type">vec3</span> <span class="org-variable-name">axis_direction</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">vec3</span> <span class="org-variable-name">axis</span> = axis_direction.normalize<span class="org-rainbow-delimiters-depth-2">()</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span> norm<span class="org-rainbow-delimiters-depth-3">(</span>axis<span class="org-rainbow-delimiters-depth-3">)</span> ~= 1.0  <span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">quaternon</span> <span class="org-variable-name">q</span> = make_quaternion_from_AngleAxis<span class="org-rainbow-delimiters-depth-2">(</span>angle, axis<span class="org-rainbow-delimiters-depth-2">)</span>;      
    <span class="org-keyword">this</span>-&gt;object_transform.quaternion = <span class="org-keyword">this</span>-&gt;object_transform.quaternion * q;
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Set a new Yaw-Pitch-Roll Euler's angles rotation. </span>
<span class="org-type">void</span> <span class="org-constant">RenderTransform</span>::<span class="org-function-name">set_rotation_YRP</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span> <span class="org-variable-name">yaw</span>, <span class="org-type">float</span> <span class="org-variable-name">pitch</span>, <span class="org-type">float</span> <span class="org-variable-name">roll</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">vec3</span> <span class="org-variable-name">axis</span> = axis_direction.normalize<span class="org-rainbow-delimiters-depth-2">()</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span> norm<span class="org-rainbow-delimiters-depth-3">(</span>axis<span class="org-rainbow-delimiters-depth-3">)</span> ~= 1.0  <span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">quaternon</span> <span class="org-variable-name">q</span> = make_quaternion_from_YAW_PITCH_ROLL<span class="org-rainbow-delimiters-depth-2">(</span>yaw, pitch, roll<span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span> norm<span class="org-rainbow-delimiters-depth-3">(</span>q<span class="org-rainbow-delimiters-depth-3">)</span> ~= 1.0 <span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">this</span>-&gt;object_transform.quaternion = q;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>See also:</b> 
</p>

<ul class="org-ul">
<li><a href="https://tech.metail.com/performance-quaternions-gpu/">Performance of quaternions in the GPU</a> - Metail Tech</li>

<li><a href="https://stackoverflow.com/questions/8594102/matrix-multiply-with-position-quaternion-and-scale-components">c++ - Matrix multiply with position, quaternion and scale components - Stack Overflow</a></li>

<li><a href="https://www.gamasutra.com/view/feature/131686/rotating_objects_using_quaternions.php">Rotating Objects Using Quaternions</a> - Noick Bobic / Gamasutra</li>
</ul>
</div>
</div>

<div id="outline-container-org88fb30d" class="outline-4">
<h4 id="org88fb30d"><span class="section-number-4">1.6.9</span> Quaternion in Julia Language</h4>
<div class="outline-text-4" id="text-1-6-9">
<p>
It is worth prototyping quaternion math in a numerically-oriented programming
language such as <a href="https://en.wikipedia.org/wiki/Julia_(programming_language)">Julia Language</a> is helpful for understanding and
validating the inner works of quaternion computations. This
implementation of quaternion math represents quaternion as an array of
four elements and uses a matrix representation for implemeting
quaternion multiplication. 
</p>

<div class="org-src-container">
<pre class="src src-julia"><span class="org-comment-delimiter"># </span><span class="org-comment">Struct for storing quaternion </span>
<span class="org-comment-delimiter"># </span><span class="org-comment">q = w + x&#183;i + y&#183;j + z&#183;k </span>
struct quatp
   arr<span class="org-default">::</span><span class="org-type">Array</span>{<span class="org-type">Float64</span>,1}
<span class="org-keyword">end</span> 

<span class="org-keyword">function</span> <span class="org-function-name">quat</span>(x, y, z, w)
  <span class="org-keyword">return</span> quatp([x ; y; z; w])
<span class="org-keyword">end</span> 

<span class="org-comment-delimiter"># </span><span class="org-comment">Turns a quaternion into 4x4 matrix representation</span>
<span class="org-keyword">function</span> <span class="org-function-name">quat_to_mat4x4</span>(q<span class="org-default">::</span><span class="org-type">quatp</span>)
    w, x, y, z  = q.arr 
    mat = [  w -x -y -z 
           ; x  w -z  y 
           ; y  z  w -x 
           ; z -y x w ] 
    <span class="org-keyword">return</span> mat 
 <span class="org-keyword">end</span> 

<span class="org-keyword">function</span> Base.<span class="org-function-name">getproperty</span>(q<span class="org-default">::</span><span class="org-type">quatp</span>, sym<span class="org-default">::</span><span class="org-type">Symbol</span>)
    <span class="org-keyword">if</span> sym == <span class="org-julia-quoted-symbol">:arr</span> 
        <span class="org-keyword">return</span> getfield(q, <span class="org-julia-quoted-symbol">:arr</span>)
    <span class="org-keyword">elseif</span> sym == <span class="org-julia-quoted-symbol">:w</span> 
        <span class="org-keyword">return</span> getfield(q, <span class="org-julia-quoted-symbol">:arr</span>)[1]
    <span class="org-keyword">elseif</span> sym == <span class="org-julia-quoted-symbol">:x</span> 
        <span class="org-keyword">return</span> getfield(q, <span class="org-julia-quoted-symbol">:arr</span>)[2]
    <span class="org-keyword">elseif</span> sym == <span class="org-julia-quoted-symbol">:y</span>
        <span class="org-keyword">return</span> getfield(q, <span class="org-julia-quoted-symbol">:arr</span>)[3]
    <span class="org-keyword">elseif</span> sym == <span class="org-julia-quoted-symbol">:z</span> 
        <span class="org-keyword">return</span> getfield(q, <span class="org-julia-quoted-symbol">:arr</span>)[4]
    <span class="org-keyword">elseif</span> sym == <span class="org-julia-quoted-symbol">:v</span>  
        <span class="org-comment-delimiter"># </span><span class="org-comment">Return only the quaternion (vector part)</span>
        <span class="org-keyword">return</span> getfield(q, <span class="org-julia-quoted-symbol">:arr</span>)[2:<span class="org-keyword">end</span>]
    <span class="org-keyword">end</span> 
<span class="org-keyword">end</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Norm - quaternion magnitude, akin to vector norm </span>
<span class="org-keyword">function</span> <span class="org-function-name">norm</span>(q<span class="org-default">::</span><span class="org-type">quatp</span>)
   w, x, y, z = q.arr 
   <span class="org-keyword">return</span> sqrt(w * w + x * x + y * y + z * z)
<span class="org-keyword">end</span> 

<span class="org-comment-delimiter"># </span><span class="org-comment">Conjugate of a quaternion </span>
<span class="org-keyword">function</span> <span class="org-function-name">conj</span>(q<span class="org-default">::</span><span class="org-type">quatp</span>)
  <span class="org-keyword">return</span> quat(q.w, -q.x, -q.y, -q.z)
<span class="org-keyword">end</span> 

<span class="org-comment-delimiter"># </span><span class="org-comment">Inverse of quaternion q^-1</span>
<span class="org-keyword">function</span> <span class="org-function-name">Base</span>.:inv(q<span class="org-default">::</span><span class="org-type">quatp</span>)
   w, x, y, z = q.arr 
   norm_square =  w * w +  x * x + y * y + z * z 
   <span class="org-keyword">return</span>  quat(w, -x, -y, -z) / norm_square
<span class="org-keyword">end</span> 

<span class="org-comment-delimiter"># </span><span class="org-comment">Quaternion sum </span>
<span class="org-function-name">Base.</span>:+(q1<span class="org-default">::</span><span class="org-type">quatp</span>, q2<span class="org-default">::</span><span class="org-type">quatp</span>) = quat(q1.w + q2.w, q1.x + q2.x, q1.y + q2.y, q1.z + q2.z) 
<span class="org-function-name">Base.</span>:-(q1<span class="org-default">::</span><span class="org-type">quatp</span>, q2<span class="org-default">::</span><span class="org-type">quatp</span>) = quat(q1.w - q2.w, q1.x - q2.x, q1.y - q2.y, q1.z - q2.z) 

<span class="org-function-name">Base.</span>:+(q<span class="org-default">::</span><span class="org-type">quatp</span>,   w<span class="org-default">::</span><span class="org-type">Float64</span>) = quat(w + q.w, q.x, q.y, q.z)
<span class="org-function-name">Base.</span>:+(w<span class="org-default">::</span><span class="org-type">Float64</span>, q<span class="org-default">::</span><span class="org-type">quatp</span>  ) = quat(w + q.w, q.x, q.y, q.z)
<span class="org-function-name">Base.</span>:-(q<span class="org-default">::</span><span class="org-type">quatp</span>,   w<span class="org-default">::</span><span class="org-type">Float64</span>) = quat(q.w - w, q.x, q.y, q.z)

<span class="org-comment-delimiter"># </span><span class="org-comment">Mutliplication =&gt; scalar X quaternion </span>
<span class="org-function-name">Base.</span>:*(a<span class="org-default">::</span><span class="org-type">Float64</span>, q<span class="org-default">::</span><span class="org-type">quatp</span>) = quat( a * q.w, a * q.x, a * q.y, a * q.z)
<span class="org-function-name">Base.</span>:*(q<span class="org-default">::</span><span class="org-type">quatp</span>, a<span class="org-default">::</span><span class="org-type">Float64</span>) = quat( a * q.w, a * q.x, a * q.y, a * q.z)

<span class="org-function-name">Base.</span>:/(q<span class="org-default">::</span><span class="org-type">quatp</span>, a<span class="org-default">::</span><span class="org-type">Float64</span>) = quat( q.w / a, q.x / a, q.y / a, q.z / a)

<span class="org-comment-delimiter"># </span><span class="org-comment">Quaternion multiplication / product</span>
<span class="org-function-name">Base.</span>:*(q1<span class="org-default">::</span><span class="org-type">quatp</span>, q2<span class="org-default">::</span><span class="org-type">quatp</span>) = <span class="org-keyword">begin</span> 
     A = quat_to_mat4x4(q1)
     <span class="org-keyword">return</span> quatp( A * q2.arr )
<span class="org-keyword">end</span> 

<span class="org-comment-delimiter"># </span><span class="org-comment">Unit quaternions i, j, k </span>
<span class="org-keyword">const</span> i = quat(0.0, 1.0, 0.0, 0.0)
<span class="org-keyword">const</span> j = quat(0.0, 0.0, 1.0, 0.0)
<span class="org-keyword">const</span> k = quat(0.0, 0.0, 0.0, 1.0)


<span class="org-comment-delimiter"># </span><span class="org-comment">Obtain a rotation quaternion that represents a rotation </span>
<span class="org-comment-delimiter"># </span><span class="org-comment">by some angle around some direction (normalized vector 'vec') </span>
<span class="org-comment-delimiter"># </span><span class="org-comment">=&gt; The angle is given in degrees.</span>
<span class="org-keyword">function</span> <span class="org-function-name">rot_quat</span>(angle<span class="org-default">::</span><span class="org-type">Float64</span>, vec)
   <span class="org-comment-delimiter"># </span><span class="org-comment">Normalize vector vec and store the result in v</span>
   xv, yv, zv = vec 
   x, y, z = vec / sqrt( xv * xv + yv * yv + zv * zv )
   S = cosd(angle / 2)
   C = sind(angle / 2)
   <span class="org-keyword">return</span> quat(C, S * x, S * y, S * z)   
<span class="org-keyword">end</span> 

<span class="org-comment-delimiter">## </span><span class="org-comment">Vector cross product VA x VB of two column vectors (3 x 1)</span>
<span class="org-keyword">function</span> <span class="org-function-name">cross</span>(va, vb)
     x, y, z = va
     T = [ 0 -z y ; z 0 -x; -y x 0]
     T * vb 
 <span class="org-keyword">end</span>

<span class="org-comment-delimiter">## </span><span class="org-comment">Apply a rotation quaternion to a vector (column vector 3 x 1)</span>
<span class="org-comment-delimiter">##  </span><span class="org-comment">=&gt;&gt; Vector 3 rows and 1 column </span>
<span class="org-comment-delimiter">## </span><span class="org-comment">Algorithm from: </span>
<span class="org-comment-delimiter">#     </span><span class="org-comment">=&gt;&gt; https://fgiesen.wordpress.com/2019/02/09/rotating-a-single-vector-using-a-quaternion/</span>
<span class="org-keyword">function</span> <span class="org-function-name">apply_rot</span>(qr<span class="org-default">::</span><span class="org-type">quatp</span>, va)
   wr = qr.w <span class="org-comment-delimiter"># </span><span class="org-comment">Scalar/real part of rotation quaternion </span>
   vr = qr.v <span class="org-comment-delimiter"># </span><span class="org-comment">Vector part of rotation quaternion </span>
   vt = 2 * cross(vr, va)
   vb = va + wr * vt + cross(vr, vt)
   <span class="org-keyword">return</span> vb 
<span class="org-keyword">end</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Obtain a rotation matrix - that represents rotation</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">around an arbitrary axis (vector)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Note: The angle is should be in degrees.</span>
<span class="org-comment-delimiter"># </span>
<span class="org-keyword">function</span> <span class="org-function-name">make_rotmat</span>(angle<span class="org-default">::</span><span class="org-type">Float64</span>, vec)
   <span class="org-comment-delimiter"># </span><span class="org-comment">Normalize vector vec and store components in x, y, z</span>
   x, y, z = vec 
   x, y, z = vec / sqrt( x * x + y * y + z * z )
   <span class="org-comment-delimiter"># </span><span class="org-comment">sin and cos caching </span>
   C = cosd(angle / 2)
   S = sind(angle / 2)
   <span class="org-comment-delimiter"># </span><span class="org-comment">Parameters a, b, c, d =&gt; Components of the rotation </span>
   <span class="org-comment-delimiter"># </span><span class="org-comment">quaternion </span>
   a = C 
   b = x * S 
   c = y * S 
   d = z * S 
   <span class="org-comment-delimiter"># </span><span class="org-comment">rotation matrix </span>
   mat = [
        ( a^2 + b^2 - c^2 - d^2 )  ( 2 * (b * c - a * d )  ) ( 2 * (b * d + a * c)   )  0 
     ;  ( 2 * (b * c + a * d)   )  ( a^2 - b^2 + c^2 - d^2 ) ( 2 * (c * d - a * b)   )  0
     ;  ( 2 * (b * d - a * c)   )  ( 2 * (c * d + a * b)   ) ( a^2 - b^2 - c^2 + d^2 )  0 
     ;  0                          0                         0                          1
   ] 
   <span class="org-keyword">return</span> mat 
<span class="org-keyword">end</span> 
</pre>
</div>

<p>
Quaternion components: 
</p>

<div class="org-src-container">
<pre class="src src-julia"><span class="org-comment-delimiter"># </span><span class="org-comment">Construct a quaternion </span>

julia&gt; q = quat(10.5, -25.1, 4.5, 5.6)
quatp([10.5, -25.1, 4.5, 5.6])

julia&gt; q.w <span class="org-comment-delimiter"># </span><span class="org-comment">Real part </span>
10.5

julia&gt; q.x <span class="org-comment-delimiter"># </span><span class="org-comment">Imaginary part - i axis component</span>
-25.1

julia&gt; q.y <span class="org-comment-delimiter"># </span><span class="org-comment">Imaginary part - j axis component</span>
4.5

julia&gt; q.z <span class="org-comment-delimiter"># </span><span class="org-comment">Imaginary part - k axis component (Z axis)</span>
5.6

julia&gt; q.arr <span class="org-comment-delimiter"># </span><span class="org-comment">Internal array data representation</span>
4-element <span class="org-type">Array</span>{<span class="org-type">Float64</span>,1}:
  10.5
 -25.1
   4.5
   5.6

julia&gt; q.v <span class="org-comment-delimiter"># </span><span class="org-comment">Vector component (i, j, k) components only</span>
3-element <span class="org-type">Array</span>{<span class="org-type">Float64</span>,1}:
 -25.1
   4.5
   5.6
</pre>
</div>

<p>
Quaternion conjugate and inverse: 
</p>

<div class="org-src-container">
<pre class="src src-julia">julia&gt; q = quat(1.0, 2.0, 3.0, 4.0)
quatp([1.0, 2.0, 3.0, 4.0])

julia&gt; inv(q)
quatp([0.03333333333333333, -0.06666666666666667, -0.1, -0.13333333333333333])

<span class="org-comment-delimiter"># </span><span class="org-comment">Expected (-1.0)</span>
julia&gt; q * inv(q)
quatp([1.0, 0.0, 0.0, 0.0])

<span class="org-comment-delimiter"># </span><span class="org-comment">Expected (-1.0)</span>
julia&gt; inv(q) * q
quatp([1.0, -5.551115123125783e-17, -6.938893903907228e-18, 5.551115123125783e-17])
</pre>
</div>

<p>
Normalize a quaternion: 
</p>

<div class="org-src-container">
<pre class="src src-julia"><span class="org-comment-delimiter"># </span><span class="org-comment">Expected normalized to be: (w = 0.18257, x = 0.36515, y = 0.54772, z = 0.7303)</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Test case from: Matlab Robotics Toolbox - https://www.mathworks.com/help/robotics/ref/quaternion.normalize.html</span>

 julia&gt; q = quat(1.0, 2.0, 3.0, 4.0)
 quatp([1.0, 2.0, 3.0, 4.0])

 julia&gt; qn = normalize(q)
 quatp([0.18257418583505536, 0.3651483716701107, 0.5477225575051661, 0.7302967433402214])

 julia&gt; norm(qn)
 0.9999999999999999

</pre>
</div>

<p>
Test case 1 - for quaternion multiplication: 
</p>

<ul class="org-ul">
<li>Test quaternion laws:</li>
<li>Expected: i * i = j * j = k * k = -1</li>
<li>Expected: i * j = k</li>
<li>Expected: j * k = i</li>
<li>Expected: k * i = j</li>
<li>Expected: j * i = -k</li>
</ul>

<div class="org-src-container">
<pre class="src src-julia"><span class="org-comment-delimiter"># </span><span class="org-comment">---- Show components i, j, k --------#</span>

julia&gt; i 
quatp([0.0, 1.0, 0.0, 0.0])

julia&gt; j
quatp([0.0, 0.0, 1.0, 0.0])

julia&gt; k
quatp([0.0, 0.0, 0.0, 1.0])

<span class="org-comment-delimiter"># </span><span class="org-comment">----- Check multiplication of i, j, k by themselves -----------#</span>
<span class="org-comment-delimiter"># </span>

julia&gt; i * i <span class="org-comment-delimiter"># </span><span class="org-comment">Expected -1 or (-1) + 0&#183;i + 0&#183;j + 0&#183;k</span>
quatp([-1.0, 0.0, 0.0, 0.0])

julia&gt; j * j <span class="org-comment-delimiter"># </span><span class="org-comment">Expected -1 </span>
quatp([-1.0, 0.0, 0.0, 0.0])

julia&gt; k * k <span class="org-comment-delimiter"># </span><span class="org-comment">Expected -1 </span>
quatp([-1.0, 0.0, 0.0, 0.0])

<span class="org-comment-delimiter">#</span><span class="org-comment">------- Check multiplication i * j, j * k, k * i and j * i </span>
<span class="org-comment-delimiter">#</span>
julia&gt; i * j <span class="org-comment-delimiter"># </span><span class="org-comment">Expected k </span>
quatp([0.0, 0.0, 0.0, 1.0])

julia&gt; j * i <span class="org-comment-delimiter"># </span><span class="org-comment">Expected -k </span>
quatp([0.0, 0.0, 0.0, -1.0])

julia&gt; k * i <span class="org-comment-delimiter"># </span><span class="org-comment">Expected j </span>
quatp([0.0, 0.0, 1.0, 0.0])

julia&gt; i * k <span class="org-comment-delimiter"># </span><span class="org-comment">Expected -j</span>
quatp([0.0, 0.0, -1.0, 0.0])

</pre>
</div>

<p>
Test case 2 - for quaternion multiplication: 
</p>

<ul class="org-ul">
<li>From:  <a href="https://www.mathworks.com/help/aerotbx/ug/quatmultiply.html">Matlab Aerospace Toolbox</a></li>
<li>q1 = [ 1.0 0.0 1.0 0.00 ]</li>
<li>q2 = [ 1.0 0.5 0.5 0.75 ]</li>
<li>Expected result =&gt;&gt; q1 * q2 = [ 0.5 1.25 1.5 0.25 ]</li>
</ul>

<div class="org-src-container">
<pre class="src src-julia"><span class="org-comment-delimiter"># </span><span class="org-comment">-------- Test A ------------------------#</span>
julia&gt; q1 = quat(1.0, 0.0, 1.0, 0.0) 
quatp([1.0, 0.0, 1.0, 0.0])

julia&gt; q2 = quat(1.0, 0.5, 0.5, 0.75)
quatp([1.0, 0.5, 0.5, 0.75])

<span class="org-comment-delimiter"># </span><span class="org-comment">------- Test B ---------------------#</span>

julia&gt; q1 = 1.0 + 0.0i + 1.0j + 0.0k
quatp([1.0, 0.0, 1.0, 0.0])

julia&gt; q2 = 1.0 + 0.5i + 0.5j + 0.75k
quatp([1.0, 0.5, 0.5, 0.75])

julia&gt; q1 * q2
quatp([0.5, 1.25, 1.5, 0.25])
</pre>
</div>

<p>
Test case 3 - for quaternion multiplication:
</p>

<ul class="org-ul">
<li>From: <a href="https://www.maplesoft.com/applications/view.aspx?SID=4886&amp;view=html">Maplesoft - Quaternion</a></li>
<li>q1 = ( -6) +  (-8)i +  (-5)j +     7k</li>
<li>q2 = (-14) + (-12)i + (-19)j + (-17)k</li>
<li>Expected: q1 * q2 = 12 +   402i + (-36)j +   96k</li>
<li>Expected: q2 * q1 = 12 + (-34)i +   404j + (-88)k</li>
<li>Expected: q2 + q1 = (-20) + (-20)i + (-24)j + (-10)k</li>
</ul>

<div class="org-src-container">
<pre class="src src-julia">julia&gt; q1 = -6.0 + -8.0i + -5.0j + 7.0k
quatp([-6.0, -8.0, -5.0, 7.0])

julia&gt; q2 = -14.0 + -12.0i + -19.0j + -17.0k
quatp([-14.0, -12.0, -19.0, -17.0])

julia&gt; q1 * q2
quatp([12.0, 402.0, -36.0, 96.0])

julia&gt; q2 * q1
quatp([12.0, -34.0, 404.0, -88.0])

julia&gt; q1 + q2
quatp([-20.0, -20.0, -24.0, -10.0])

julia&gt; q2 + q1
quatp([-20.0, -20.0, -24.0, -10.0])


</pre>
</div>

<p>
<b>Test algorithm - make_rotmat</b> that computes rotation matrices around
an arbitrary axis: 
</p>

<p>
Define functions for computing rotation matrices: 
</p>

<div class="org-src-container">
<pre class="src src-julia"><span class="org-comment-delimiter"># </span><span class="org-comment">Rotation around X axis </span>
<span class="org-keyword">function</span> <span class="org-function-name">rot_x</span>(angle<span class="org-default">::</span><span class="org-type">Float64</span>) 
   C = cosd(angle)
   S = sind(angle)
   <span class="org-keyword">return</span> [  1   0   0  0
           ; 0   C  -S  0 
           ; 0   S   C  0 
           ; 0   0   0  1
          ]
<span class="org-keyword">end</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Rotation around X axis </span>
<span class="org-keyword">function</span> <span class="org-function-name">rot_y</span>(angle<span class="org-default">::</span><span class="org-type">Float64</span>) 
   c = cosd(angle)
   s = sind(angle)
   <span class="org-keyword">return</span> [  c   0   s  0
           ; 0   1   0  0 
           ;-s   0   c  0 
           ; 0   0   0  1
          ]
<span class="org-keyword">end</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Returns homogeneous rotation matrix around Z axis </span>
<span class="org-comment-delimiter"># </span><span class="org-comment">=&gt; The angle must be in degrees, not radians</span>
<span class="org-keyword">function</span> <span class="org-function-name">rot_z</span>(angle<span class="org-default">::</span><span class="org-type">Float64</span>) 
   c = cosd(angle)
   s = sind(angle)
   <span class="org-keyword">return</span> [  c  -s  0  0
           ; s   c  0  0 
           ; 0   0  1  0 
           ; 0   0  0  1
          ]
<span class="org-keyword">end</span>
</pre>
</div>

<p>
Test rotation matrices: 
</p>

<div class="org-src-container">
<pre class="src src-julia"><span class="org-keyword">const</span> axis_x = [1.0 0.0 0.0]';
<span class="org-keyword">const</span> axis_y = [0.0 1.0 0.0]';
<span class="org-keyword">const</span> axis_z = [0.0 0.0 1.0]';

<span class="org-comment-delimiter"># </span><span class="org-comment">-------- Rotation around Z axis ---------- #</span>
<span class="org-comment-delimiter"># </span>

julia&gt; rot_z(90.0)
4&#215;4 <span class="org-type">Array</span>{<span class="org-type">Float64</span>,2}:
 0.0  -1.0  0.0  0.0
 1.0   0.0  0.0  0.0
 0.0   0.0  1.0  0.0
 0.0   0.0  0.0  1.0

julia&gt; make_rotmat(90.0, axis_z)
4&#215;4 <span class="org-type">Array</span>{<span class="org-type">Float64</span>,2}:
 0.0  -1.0  0.0  0.0
 1.0   0.0  0.0  0.0
 0.0   0.0  1.0  0.0
 0.0   0.0  0.0  1.0


julia&gt; rot_z(45.0)
4&#215;4 <span class="org-type">Array</span>{<span class="org-type">Float64</span>,2}:
 0.707107  -0.707107  0.0  0.0
 0.707107   0.707107  0.0  0.0
 0.0        0.0       1.0  0.0
 0.0        0.0       0.0  1.0

julia&gt; make_rotmat(45.0, axis_z)
]4&#215;4 <span class="org-type">Array</span>{<span class="org-type">Float64</span>,2}:
 0.707107  -0.707107  0.0  0.0
 0.707107   0.707107  0.0  0.0
 0.0        0.0       1.0  0.0
 0.0        0.0       0.0  1.0

julia&gt; rot_z(125.0)
4&#215;4 <span class="org-type">Array</span>{<span class="org-type">Float64</span>,2}:
 -0.573576  -0.819152  0.0  0.0
  0.819152  -0.573576  0.0  0.0
  0.0        0.0       1.0  0.0
  0.0        0.0       0.0  1.0

julia&gt; make_rotmat(125.0, axis_z)
4&#215;4 <span class="org-type">Array</span>{<span class="org-type">Float64</span>,2}:
 -0.573576  -0.819152  0.0  0.0
  0.819152  -0.573576  0.0  0.0
  0.0        0.0       1.0  0.0
  0.0        0.0       0.0  1.0


<span class="org-comment-delimiter"># </span><span class="org-comment">----- Rotation around X axis ------------#</span>
<span class="org-comment-delimiter"># </span>
julia&gt; rot_x(0.0)
4&#215;4 <span class="org-type">Array</span>{<span class="org-type">Float64</span>,2}:
 1.0  0.0   0.0  0.0
 0.0  1.0  -0.0  0.0
 0.0  0.0   1.0  0.0
 0.0  0.0   0.0  1.0

julia&gt; make_rotmat(0.0, axis_x)
4&#215;4 <span class="org-type">Array</span>{<span class="org-type">Float64</span>,2}:
 1.0  0.0  0.0  0.0
 0.0  1.0  0.0  0.0
 0.0  0.0  1.0  0.0
 0.0  0.0  0.0  1.0


julia&gt; rot_x(45.0)
4&#215;4 <span class="org-type">Array</span>{<span class="org-type">Float64</span>,2}:
 1.0  0.0        0.0       0.0
 0.0  0.707107  -0.707107  0.0
 0.0  0.707107   0.707107  0.0
 0.0  0.0        0.0       1.0

julia&gt; make_rotmat(45.0, axis_x)
4&#215;4 <span class="org-type">Array</span>{<span class="org-type">Float64</span>,2}:
 1.0  0.0        0.0       0.0
 0.0  0.707107  -0.707107  0.0
 0.0  0.707107   0.707107  0.0
 0.0  0.0        0.0       1.0


julia&gt; rot_x(90.0)
4&#215;4 <span class="org-type">Array</span>{<span class="org-type">Float64</span>,2}:
 1.0  0.0   0.0  0.0
 0.0  0.0  -1.0  0.0
 0.0  1.0   0.0  0.0
 0.0  0.0   0.0  1.0

julia&gt; make_rotmat(90.0, axis_x)
4&#215;4 <span class="org-type">Array</span>{<span class="org-type">Float64</span>,2}:
 1.0  0.0   0.0  0.0
 0.0  0.0  -1.0  0.0
 0.0  1.0   0.0  0.0
 0.0  0.0   0.0  1.0

</pre>
</div>

<p>
Test rotation quaternions: 
</p>

<div class="org-src-container">
<pre class="src src-julia"><span class="org-comment-delimiter"># </span><span class="org-comment">Rotation around X axis </span>
<span class="org-keyword">function</span> <span class="org-function-name">rot_xx</span>(angle<span class="org-default">::</span><span class="org-type">Float64</span>) 
   C = cosd(angle)
   S = sind(angle)
   <span class="org-keyword">return</span> [ 1  0  0  ; 0   C  -S   ; 0   S   C     ]
<span class="org-keyword">end</span>

julia&gt; va = [6.0 10.5 2.56]'
3&#215;1 LinearAlgebra.Adjoint{<span class="org-type">Float64</span>,<span class="org-type">Array</span>{<span class="org-type">Float64</span>,2}}:
  6.0
 10.5
  2.56

angle = 60.0 <span class="org-comment-delimiter"># </span><span class="org-comment">60 degrees </span>

julia&gt; vb_rotmat = rot_xx(angle) * va
3&#215;1 <span class="org-type">Array</span>{<span class="org-type">Float64</span>,2}:
  6.0
  3.032974966311837
 10.373266739736605

<span class="org-comment-delimiter"># </span><span class="org-comment">Rotation quaternion that represents rotation of 60 degrees around X axis.</span>
julia&gt; qr = rot_quat(60.0, [1.0 0.0 0.0]')
quatp([0.8660254037844386, 0.5, 0.0, 0.0])

<span class="org-comment-delimiter"># </span><span class="org-comment">Apply transform to vector va </span>
julia&gt; vb_qr = apply_rot(qr, va)
3&#215;1 <span class="org-type">Array</span>{<span class="org-type">Float64</span>,2}:
  6.0
  3.032974966311837
 10.373266739736607

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org69deae0" class="outline-3">
<h3 id="org69deae0"><span class="section-number-3">1.7</span> Library GLM - OpenGL Mathematics</h3>
<div class="outline-text-3" id="text-1-7">
</div>
<div id="outline-container-org52cf41d" class="outline-4">
<h4 id="org52cf41d"><span class="section-number-4">1.7.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-7-1">
<p>
The library GLM (OpenGL math library) contains many classes and
subroutines for computer graphics computations, such as: homogeneous
coordinates; quaternios; 1D, 2D, 3D and homogeneous coordinates
vectors; vector-matrix operations and so on. Aside those facilities,
the library also provides the subroutines <span class="underline">glm::lookAt()</span>, for computing
view matrix transform, that turns world coordinates into camera
coordinates; <span class="underline">glm::perspective()</span> - for computing the projection matrix,
that turns camera coordinates into clip-space coordinates (NDC
coordinates with range -1.0 to 1.0) and also <span class="underline">glm::ortho</span> for computing
the orthogonal perspective matrix. The GLM library is designed with
syntax based on GLSL (OpenGL shading language). 
</p>

<p>
Web Site: 
</p>

<ul class="org-ul">
<li><a href="https://glm.g-truc.net/0.9.9/index.html">OpenGL Mathematics</a></li>
</ul>

<p>
Repository:
</p>

<ul class="org-ul">
<li><a href="https://github.com/g-truc/glm">https://github.com/g-truc/glm</a></li>
</ul>

<p>
Other Documentations: 
</p>

<ul class="org-ul">
<li><a href="https://openframeworks.cc/documentation/glm/">https://openframeworks.cc/documentation/glm/</a></li>
</ul>


<p>
<b>Type signature of most relevant GLM functions:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp">
<span class="org-comment-delimiter">// </span><span class="org-comment">Converts an input angle in degrees to radians. </span>
<span class="org-comment-delimiter">// </span>
<span class="org-comment-delimiter">//  </span><span class="org-comment">angle_radians = angle_degrees * (PI / 180.0 )</span>
<span class="org-comment-delimiter">// </span>
<span class="org-type">float</span> <span class="org-constant">glm</span>::<span class="org-function-name">radians</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">foat</span>  <span class="org-variable-name">degrees</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">------ Basic Matrix Transformation =&gt;&gt; Useful for model matrix ---------------//</span>
<span class="org-function-name">glm</span>::mat4 <span class="org-constant">glm</span>::rotate   <span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-constant">glm</span>::<span class="org-type">mat4</span> <span class="org-keyword">const</span> &amp; <span class="org-variable-name">m</span>, <span class="org-type">float</span> <span class="org-variable-name">angle</span>, <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-keyword">const</span> &amp; <span class="org-variable-name">axis</span> <span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">glm</span>::mat4 <span class="org-constant">glm</span>::scale    <span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-constant">glm</span>::<span class="org-type">mat4</span> <span class="org-keyword">const</span> &amp; <span class="org-variable-name">m</span>, <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-keyword">const</span> &amp; <span class="org-variable-name">factors</span>           <span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">glm</span>::mat4 <span class="org-constant">glm</span>::translate<span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-constant">glm</span>::<span class="org-type">mat4</span> <span class="org-keyword">const</span> &amp; <span class="org-variable-name">m</span>, <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-keyword">const</span> &amp; <span class="org-variable-name">translation</span>       <span class="org-rainbow-delimiters-depth-1">)</span>;


<span class="org-comment-delimiter">// </span><span class="org-comment">---- Camera View matrix and Camera's matrix -------------//</span>
<span class="org-function-name">glm</span>::mat4 <span class="org-constant">glm</span>::lookAt<span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-keyword">const</span> &amp; <span class="org-variable-name">eye</span>, <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-keyword">const</span> &amp; <span class="org-variable-name">look</span>, <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-keyword">const</span> &amp; <span class="org-variable-name">up</span> <span class="org-rainbow-delimiters-depth-1">)</span>; 
<span class="org-function-name">glm</span>::mat4 <span class="org-constant">glm</span>::ortho<span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-type">float</span> <span class="org-variable-name">left</span>, <span class="org-type">float</span> <span class="org-variable-name">right</span>, <span class="org-type">float</span> <span class="org-variable-name">bottom</span>, <span class="org-type">float</span> <span class="org-variable-name">top</span>, <span class="org-type">float</span> <span class="org-variable-name">near</span>, <span class="org-type">float</span> <span class="org-variable-name">far</span> <span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">glm</span>::mat4 <span class="org-constant">glm</span>::ortho<span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-type">float</span> <span class="org-variable-name">left</span>, <span class="org-type">float</span> <span class="org-variable-name">right</span>, <span class="org-type">float</span> <span class="org-variable-name">bottom</span>, <span class="org-type">float</span> <span class="org-variable-name">top</span> <span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">glm</span>::mat4 <span class="org-constant">glm</span>::frustum<span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-type">float</span> <span class="org-variable-name">left</span>, <span class="org-type">float</span> <span class="org-variable-name">right</span>, <span class="org-type">float</span> <span class="org-variable-name">bottom</span>, <span class="org-type">float</span> <span class="org-variable-name">top</span>, <span class="org-type">float</span> <span class="org-variable-name">near</span>, <span class="org-type">float</span> <span class="org-variable-name">far</span> <span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">glm</span>::mat4 <span class="org-constant">glm</span>::perspective<span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-type">float</span> <span class="org-variable-name">fovy</span>, <span class="org-type">float</span> <span class="org-variable-name">aspect</span>, <span class="org-type">float</span> <span class="org-variable-name">near</span>, <span class="org-type">float</span> <span class="org-variable-name">far</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
<b>Subroutines for vector computations</b> 
</p>

<ul class="org-ul">
<li>glm::normalize()
<ul class="org-ul">
<li>=&gt; Normalize a vector.</li>
</ul></li>

<li>glm::dot(vec1, vec2)
<ul class="org-ul">
<li>=&gt; Vector dot product.</li>
</ul></li>

<li>glm::length(vec)
<ul class="org-ul">
<li>=&gt; Vector norm, aka magnitude.</li>
</ul></li>

<li>glm::distance(vec1, vec2)
<ul class="org-ul">
<li>=&gt; Distance between two vectors thatrepresents position.</li>
</ul></li>

<li>glm::cross(vec1, vec2)
<ul class="org-ul">
<li>=&gt; Returns the cross product between two vectors.</li>
</ul></li>
</ul>

<p>
<b>Subroutine for Camera Implementation</b>
</p>

<p>
Camera's View Matrix:
</p>

<ul class="org-ul">
<li>glm::mat4 <span class="underline">glm::lookAt</span> (eye, look, up );
<ul class="org-ul">
<li>Brief: Return <b>View matrix transform</b> - which transforms world coordinates to camera's space coordinates.</li>
<li>eye  =&gt; Vector containing the camera's current position in world coordinates.</li>
<li>look =&gt; Vector (Position) to where camera is looking at.</li>
<li>up   =&gt; Camera orientation. Suitable fault value Y axis or (x =  0, y = 1, z = 0).</li>
</ul></li>
</ul>

<p>
Camera's Projection Matrix:
</p>

<ul class="org-ul">
<li>glm::mat4 <span class="underline">glm::perspective</span> ( fovy, float aspect, near, far);
<ul class="org-ul">
<li>Returns projection matrix that transforms camera-space
coordinates to clip-space coordinates (NDC - Normalized Device
Coordinates within range -1.0 to 1.0). Anything out of the <span class="underline">near</span>,
<span class="underline">far</span> range is not visible.</li>
<li>fovy =&gt; Field view angle in radians.</li>
<li>near =&gt; Distance to near plane.</li>
<li>far  =&gt; Distance to far plane.</li>
</ul></li>

<li>glm::mat4 <span class="underline">glm::ortho</span> ( left, right, bottom, top );
<ul class="org-ul">
<li>Returns a projection matrix for ortographic projection. This
type projection is most suitable for 2D drawing; CAD - Computer
Aided Design; Technical drawing view and on.</li>
</ul></li>
</ul>


<p>
<b>GLM functions - transform matrix multiplication order</b>  
</p>

<p>
Consider the subroutine, glm::translate() - which translate a
coordinate system.
</p>

<pre class="example">
glm::mat4 SOURCE_MATRIX = something(); 
glm::mat4 OUTPUT_MATRIX =  glm::translate( SOURCE_MATRIX, glm::vec3(DX, DY, DZ));
</pre>

<p>
GLM computes the OUTPUT_MATRIX by performing the matrix multiplication
in the following way. The same logic is applicable to the subroutines:
glm::rotate, glm::scale and so on.
</p>

<div class="org-src-container">
<pre class="src src-cpp">OUTPUT_MATRIX = SOURCE_MATRIX * Translate_Transform<span class="org-rainbow-delimiters-depth-1">(</span>DX, DY, DZ<span class="org-rainbow-delimiters-depth-1">)</span>

                                | 1  0  0  DX |
OUTPUT_MATRIX = SOURCE_MATRIX * | 0  1  0  DY |
                                | 0  0  1  DZ |
                                | 0  0  0  1  |
</pre>
</div>

<p>
Consider the following sequence of operations: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"> <span class="org-keyword">const</span> <span class="org-constant">glm</span>::<span class="org-type">vec4</span> <span class="org-variable-name">axis_Z</span> = <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-1">(</span>0, 0, 1<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Reset model matrix to identity matrix </span>
 <span class="org-constant">glm</span>::<span class="org-type">mat4</span> <span class="org-variable-name">model</span><span class="org-rainbow-delimiters-depth-1">(</span>1.0<span class="org-rainbow-delimiters-depth-1">)</span>;

 <span class="org-comment-delimiter">// </span><span class="org-comment">Move to (X, Y) position </span>
 <span class="org-comment-delimiter">// </span><span class="org-comment">model = model * T_translate(_x, y, 0.0)</span>
 <span class="org-comment-delimiter">// </span><span class="org-comment">model = identity * T_translate(_x, y, 0.0) = T_translate(_x, y, 0.0)</span>
 model = <span class="org-constant">glm</span>::translate<span class="org-rainbow-delimiters-depth-1">(</span> model, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-2">(</span>_x, _y, 0.0<span class="org-rainbow-delimiters-depth-2">)</span>  <span class="org-rainbow-delimiters-depth-1">)</span>; 

 <span class="org-comment-delimiter">// </span><span class="org-comment">Scale object (increase or decrease object size)</span>
 <span class="org-comment-delimiter">// </span><span class="org-comment">model = model * T_scale</span>
 <span class="org-comment-delimiter">// </span><span class="org-comment">model = T_translate * T_scale</span>
 model =  <span class="org-constant">glm</span>::scale<span class="org-rainbow-delimiters-depth-1">(</span> model, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-2">(</span>_scale, _scale, _scale<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">)</span>;

 <span class="org-comment-delimiter">// </span><span class="org-comment">Rotate from a given angle around Z axis at current object X, Y  postion</span>
 <span class="org-comment-delimiter">// </span><span class="org-comment">model = model * T_rotation</span>
 <span class="org-comment-delimiter">// </span><span class="org-comment">model =  (T_translate * T_scale) * T_rot </span>
 model = <span class="org-constant">glm</span>::rotate<span class="org-rainbow-delimiters-depth-1">(</span> model, <span class="org-constant">glm</span>::radians<span class="org-rainbow-delimiters-depth-2">(</span>_angle<span class="org-rainbow-delimiters-depth-2">)</span>,  axis_Z<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
The final value of the model matrix, is product between the following
affine transforms: 
</p>

<div class="org-src-container">
<pre class="src src-text">model  =  Identity * T_translate * T_scale * T_rotation
model  =  T_translate * T_scale * T_rotation
</pre>
</div>
</div>
</div>

<div id="outline-container-org3b99c01" class="outline-4">
<h4 id="org3b99c01"><span class="section-number-4">1.7.2</span> Testing in CERN's Root REPL</h4>
<div class="outline-text-4" id="text-1-7-2">
<p>
<b>Download Library Source</b> 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ mkdir -p /tmp/temp &amp;&amp; <span class="org-builtin">cd</span> /temp

<span class="org-comment-delimiter"># </span><span class="org-comment">Download source code archive </span>
$ &gt;&gt; curl -o <span class="org-keyword">glm.zip</span> -L https://github.com/g-truc/glm/archive/master.zip

<span class="org-comment-delimiter"># </span><span class="org-comment">Extract code </span>
$ &gt;&gt; unzip  glm.zip

<span class="org-comment-delimiter"># </span><span class="org-comment">Enter the in the extracted directory </span>
$ &gt;&gt; cd glm-master/

<span class="org-comment-delimiter"># </span><span class="org-comment">List directory content </span>
$ &gt;&gt; ls
cmake/  CMakeLists.txt  copying.txt  doc/  glm/  manual.md  readme.md  test/  util/
</pre>
</div>

<p>
<b>Load the library in CERN's ROOT repl</b> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"> $ &gt;&gt; ~/Applications/root/bin/root 
ERROR in <span class="org-constant">cling</span>::<span class="org-constant">CIFactory</span>::createCI<span class="org-rainbow-delimiters-depth-1">()</span>: cannot extract standard library <span class="org-type">include</span> <span class="org-variable-name">paths</span><span class="org-negation-char">!</span>
<span class="org-function-name">Invoking</span>:
  LC_ALL=C ccache  -O2 -DNDEBUG -xc++ -E -v /dev/null 2&gt;&amp;1 | sed -n -e <span class="org-warning">'</span>/^.include/,$<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-warning">'</span> -e <span class="org-warning">'</span>/^ \/.*++/p<span class="org-warning">'</span> -e <span class="org-string">'}'</span>
Results was:
With exit code 0
   ------------------------------------------------------------------
  | Welcome to ROOT 6.22/02                        https:<span class="org-comment-delimiter">//</span><span class="org-comment">root.cern |</span>
  | <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">c</span><span class="org-rainbow-delimiters-depth-2">)</span> 1995-2020, The <span class="org-type">ROOT</span> <span class="org-variable-name">Team</span>; <span class="org-constant">conception</span>: R. Brun, F. Rademakers |
  | Built <span class="org-keyword">for</span> linuxx8664gcc on Aug 17 2020, 12:46:52                 |
  | From tags/v6-22-02@v6-22-02                                      |
  | Try <span class="org-warning">'</span>.help<span class="org-warning">'</span>, <span class="org-warning">'</span>.demo<span class="org-warning">'</span>, <span class="org-warning">'</span>.license<span class="org-warning">'</span>, <span class="org-warning">'</span>.credits<span class="org-warning">'</span>, <span class="org-warning">'</span>.quit<span class="org-string">'/'</span>.q<span class="org-warning">'</span>       |
   ------------------------------------------------------------------

root <span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> 

root <span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> .I . 

root <span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> .I . 
root <span class="org-rainbow-delimiters-depth-2">[</span>1<span class="org-rainbow-delimiters-depth-2">]</span> #<span class="org-type">include</span> <span class="org-rainbow-delimiters-depth-2">&lt;</span>glm/glm.hpp<span class="org-rainbow-delimiters-depth-2">&gt;</span>
root <span class="org-rainbow-delimiters-depth-2">[</span>2<span class="org-rainbow-delimiters-depth-2">]</span> #<span class="org-type">include</span> <span class="org-rainbow-delimiters-depth-2">&lt;</span>glm/gtc/matrix_transform.hpp<span class="org-rainbow-delimiters-depth-2">&gt;</span>
root <span class="org-rainbow-delimiters-depth-2">[</span>3<span class="org-rainbow-delimiters-depth-2">]</span> #<span class="org-type">include</span> <span class="org-rainbow-delimiters-depth-2">&lt;</span>glm/gtc/type_ptr.hpp<span class="org-rainbow-delimiters-depth-2">&gt;</span>
root <span class="org-rainbow-delimiters-depth-2">[</span>4<span class="org-rainbow-delimiters-depth-2">]</span> #<span class="org-type">include</span> <span class="org-rainbow-delimiters-depth-2">&lt;</span>glm/gtx/string_cast.hpp<span class="org-rainbow-delimiters-depth-2">&gt;</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Note: GLM matrices are stored in Column-major order </span>
<span class="org-type">void</span> show_matrix<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">label</span>, <span class="org-constant">glm</span>::<span class="org-type">mat4</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">m</span><span class="org-rainbow-delimiters-depth-2">){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n [MATRIX] "</span> &lt;&lt; label &lt;&lt; <span class="org-string">" = "</span> &lt;&lt; <span class="org-string">'\n'</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-3">(</span>3<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">size_t</span> <span class="org-variable-name">i</span> = 0; i &lt; 4; i++<span class="org-rainbow-delimiters-depth-3">)</span>
    <span class="org-rainbow-delimiters-depth-3">{</span>
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-type">size_t</span> <span class="org-variable-name">j</span> = 0; j &lt; 4; j++<span class="org-rainbow-delimiters-depth-4">)</span>
        <span class="org-rainbow-delimiters-depth-4">{</span>
            <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-5">(</span>8<span class="org-rainbow-delimiters-depth-5">)</span> &lt;&lt; m<span class="org-rainbow-delimiters-depth-5">[</span>j<span class="org-rainbow-delimiters-depth-5">][</span>i<span class="org-rainbow-delimiters-depth-5">]</span>;
        <span class="org-rainbow-delimiters-depth-4">}</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">'\n'</span>;
    <span class="org-rainbow-delimiters-depth-3">}</span>
<span class="org-rainbow-delimiters-depth-2">}</span>
</pre>
</div>



<p>
Construct a matrix from column vectors: 
</p>

\begin{equation}
   \text{colum}_0 = \begin{bmatrix}  25   \\ 40 \\   7 \\ 0    \end{bmatrix} \quad 
   \text{colum}_1 = \begin{bmatrix}   8   \\ 9  \\  10 \\ 0    \end{bmatrix} \quad 
   \text{colum}_2 = \begin{bmatrix}  -5   \\ 6  \\   9 \\ 0    \end{bmatrix} \quad 
   \text{colum}_3 = \begin{bmatrix} 100   \\ 50 \\  20 \\ 1    \end{bmatrix}
\end{equation}


\begin{equation}
   M = \begin{bmatrix} \text{colum}_0  &\text{colum}_1 & \text{colum}_2 & \text{colum}_3 \end{bmatrix}
\end{equation}

\begin{equation}
   M = \begin{bmatrix} 
            25  &  8  & -5  &  100 \\
            40  &  9  & 10  &   50 \\
             7  & 10  &  9  &   20 \\  
             0  &  0  &  0  &    1 \\            
       \end{bmatrix}
\end{equation}


<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-variable-name">col0</span> = <span class="org-constant">glm</span>::vec4<span class="org-rainbow-delimiters-depth-1">(</span>25, 40, 7, 0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">col1</span> = <span class="org-constant">glm</span>::vec4<span class="org-rainbow-delimiters-depth-1">(</span>8, 9, 10, 0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">col2</span> = <span class="org-constant">glm</span>::vec4<span class="org-rainbow-delimiters-depth-1">(</span>-5, 6, 9, 0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">col3</span> = <span class="org-constant">glm</span>::vec4<span class="org-rainbow-delimiters-depth-1">(</span>100, 50, 20, 1<span class="org-rainbow-delimiters-depth-1">)</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>9<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> M = <span class="org-constant">glm</span>::mat4<span class="org-rainbow-delimiters-depth-1">(</span>col0, col1, col2, col3<span class="org-rainbow-delimiters-depth-1">)</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>24<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"M"</span>, M<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> M = 
  25.000   8.000  -5.000 100.000
  40.000   9.000   6.000  50.000
   7.000  10.000   9.000  20.000
   0.000   0.000   0.000   1.000
</pre>
</div>

<p>
This matrix could also be constructed in the following mode: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"> <span class="org-keyword">auto</span> <span class="org-variable-name">MM</span> = <span class="org-constant">glm</span>::mat4<span class="org-rainbow-delimiters-depth-1">(</span>25, 40, 7, 0  ,8, 9, 10, 0  ,-5, 6, 9, 0 ,100, 50, 20, 1<span class="org-rainbow-delimiters-depth-1">)</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>27<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"MM"</span>, MM<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> MM = 
  25.000   8.000  -5.000 100.000
  40.000   9.000   6.000  50.000
   7.000  10.000   9.000  20.000
   0.000   0.000   0.000   1.000

<span class="org-comment-delimiter">// </span><span class="org-comment">Note: It shows the matrix columns, not the matix rows.</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>39<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span>M<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"mat4x4((25.000000, 40.000000, 7.000000, 0.000000), (8.000000, 9.000000, 10.000000, 0.000000), (-5.000000, 6.000000, 9.000000, 0.000000), (100.000000, 50.000000, 20.000000, 1.000000))"</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>40<span class="org-rainbow-delimiters-depth-1">]</span> 

</pre>
</div>

<p>
Extract columns from matrix MM:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">glm/gtc/matrix_access.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">auto</span> <span class="org-variable-name">col0</span> = <span class="org-constant">glm</span>::column<span class="org-rainbow-delimiters-depth-1">(</span>MM, 0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">col1</span> = <span class="org-constant">glm</span>::column<span class="org-rainbow-delimiters-depth-1">(</span>MM, 1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">col2</span> = <span class="org-constant">glm</span>::column<span class="org-rainbow-delimiters-depth-1">(</span>MM, 2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">col3</span> = <span class="org-constant">glm</span>::column<span class="org-rainbow-delimiters-depth-1">(</span>MM, 3<span class="org-rainbow-delimiters-depth-1">)</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>58<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span>col0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"vec4(25.000000, 40.000000, 7.000000, 0.000000)"</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>60<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span>col1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"vec4(8.000000, 9.000000, 10.000000, 0.000000)"</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>62<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span>col2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"vec4(-5.000000, 6.000000, 9.000000, 0.000000)"</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>64<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span>col3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"vec4(100.000000, 50.000000, 20.000000, 1.000000)"</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Get elements from column 0 (col0)</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>65<span class="org-rainbow-delimiters-depth-1">]</span> col0<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 25.0000f

root <span class="org-rainbow-delimiters-depth-1">[</span>66<span class="org-rainbow-delimiters-depth-1">]</span> col0<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 40.0000f

root <span class="org-rainbow-delimiters-depth-1">[</span>67<span class="org-rainbow-delimiters-depth-1">]</span> col0<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 7.00000f

root <span class="org-rainbow-delimiters-depth-1">[</span>68<span class="org-rainbow-delimiters-depth-1">]</span> col0<span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.00000f
</pre>
</div>

<p>
Extract rows from matrix MM: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-variable-name">row0</span> = <span class="org-constant">glm</span>::row<span class="org-rainbow-delimiters-depth-1">(</span>MM, 0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">row1</span> = <span class="org-constant">glm</span>::row<span class="org-rainbow-delimiters-depth-1">(</span>MM, 1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">row2</span> = <span class="org-constant">glm</span>::row<span class="org-rainbow-delimiters-depth-1">(</span>MM, 2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">row3</span> = <span class="org-constant">glm</span>::row<span class="org-rainbow-delimiters-depth-1">(</span>MM, 3<span class="org-rainbow-delimiters-depth-1">)</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>73<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span>row0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"vec4(25.000000, 8.000000, -5.000000, 100.000000)"</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>74<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span>row1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"vec4(40.000000, 9.000000, 6.000000, 50.000000)"</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>75<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span>row2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"vec4(7.000000, 10.000000, 9.000000, 20.000000)"</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>76<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span>row3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"vec4(0.000000, 0.000000, 0.000000, 1.000000)"</span>
</pre>
</div>

<p>
Modify matrix columns: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>77<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"MM"</span>, MM<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> MM = 
  25.000   8.000  -5.000 100.000
  40.000   9.000   6.000  50.000
   7.000  10.000   9.000  20.000
   0.000   0.000   0.000   1.000

root <span class="org-rainbow-delimiters-depth-1">[</span>80<span class="org-rainbow-delimiters-depth-1">]</span> MM<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> = <span class="org-constant">glm</span>::vec4<span class="org-rainbow-delimiters-depth-1">(</span>-90.f, 50.0f, 32.5f, 26.0f<span class="org-rainbow-delimiters-depth-1">)</span>


root <span class="org-rainbow-delimiters-depth-1">[</span>81<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"MM"</span>, MM<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> MM = 
 -90.000   8.000  -5.000 100.000
  50.000   9.000   6.000  50.000
  32.500  10.000   9.000  20.000
  26.000   0.000   0.000   1.000
</pre>
</div>


<p>
Obtain transpose matrix: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"> root <span class="org-rainbow-delimiters-depth-1">[</span>82<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> tmat = <span class="org-constant">glm</span>::transpose<span class="org-rainbow-delimiters-depth-1">(</span>MM<span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">mat</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>4, 4, <span class="org-type">float</span>, <span class="org-constant">glm</span>::<span class="org-constant">qualifier</span>::packed_highp<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f7b71f0c20c


 root <span class="org-rainbow-delimiters-depth-1">[</span>83<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"tmat"</span>, tmat<span class="org-rainbow-delimiters-depth-1">)</span>

  <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> tmat = 
  -90.000  50.000  32.500  26.000
    8.000   9.000  10.000   0.000
   -5.000   6.000   9.000   0.000
  100.000  50.000  20.000   1.000

<span class="org-comment-delimiter">// </span><span class="org-comment">----- Access first column elements (column 0) ----// </span>
<span class="org-comment-delimiter">//  </span><span class="org-comment">=&gt;&gt; The matrix is column-major order (Fortran-like data layout),</span>
<span class="org-comment-delimiter">//      </span><span class="org-comment">not C or C++ data-layout, which is row-major order </span>
<span class="org-comment-delimiter">//</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Tmat[j column-number][i row-number] </span>

<span class="org-comment-delimiter">// </span><span class="org-comment">----- Column 0 elements ----------// </span>

root <span class="org-rainbow-delimiters-depth-1">[</span>84<span class="org-rainbow-delimiters-depth-1">]</span> tmat<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">][</span>0<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> -90.0000f

root <span class="org-rainbow-delimiters-depth-1">[</span>85<span class="org-rainbow-delimiters-depth-1">]</span> tmat<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">][</span>0<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 50.0000f

root <span class="org-rainbow-delimiters-depth-1">[</span>86<span class="org-rainbow-delimiters-depth-1">]</span> tmat<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">][</span>0<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> -90.0000f

root <span class="org-rainbow-delimiters-depth-1">[</span>87<span class="org-rainbow-delimiters-depth-1">]</span> tmat<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">][</span>1<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 8.00000f

root <span class="org-rainbow-delimiters-depth-1">[</span>88<span class="org-rainbow-delimiters-depth-1">]</span> tmat<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">][</span>2<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> -5.00000f

root <span class="org-rainbow-delimiters-depth-1">[</span>89<span class="org-rainbow-delimiters-depth-1">]</span> tmat<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">][</span>3<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 100.000f
</pre>
</div>

<p>
Get pointer to first element: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>90<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-type">float</span>* ptr = <span class="org-constant">glm</span>::value_ptr<span class="org-rainbow-delimiters-depth-1">(</span>tmat<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f7b71f0c20c

root <span class="org-rainbow-delimiters-depth-1">[</span>91<span class="org-rainbow-delimiters-depth-1">]</span> ptr<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> -90.0000f

root <span class="org-rainbow-delimiters-depth-1">[</span>92<span class="org-rainbow-delimiters-depth-1">]</span> ptr<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 8.00000f

root <span class="org-rainbow-delimiters-depth-1">[</span>93<span class="org-rainbow-delimiters-depth-1">]</span> ptr<span class="org-rainbow-delimiters-depth-1">[</span>15<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.00000f

root <span class="org-rainbow-delimiters-depth-1">[</span>94<span class="org-rainbow-delimiters-depth-1">]</span> ptr<span class="org-rainbow-delimiters-depth-1">[</span>10<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 9.00000f

root <span class="org-rainbow-delimiters-depth-1">[</span>95<span class="org-rainbow-delimiters-depth-1">]</span> *<span class="org-rainbow-delimiters-depth-1">(</span>ptr + 1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 8.00000f

root <span class="org-rainbow-delimiters-depth-1">[</span>96<span class="org-rainbow-delimiters-depth-1">]</span> *<span class="org-rainbow-delimiters-depth-1">(</span>ptr + 10<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 9.00000f

root <span class="org-rainbow-delimiters-depth-1">[</span>97<span class="org-rainbow-delimiters-depth-1">]</span> *<span class="org-rainbow-delimiters-depth-1">(</span>ptr + 15<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.00000f
</pre>
</div>

<p>
Null 4x4 matrix: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>53<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> zero_4x4 = <span class="org-constant">glm</span>::mat4<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">mat</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>4, 4, <span class="org-type">float</span>, <span class="org-constant">glm</span>::<span class="org-constant">qualifier</span>::packed_highp<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f904e6c20e0

root <span class="org-rainbow-delimiters-depth-1">[</span>54<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"zero_4x4"</span>, zero_4x4<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> zero_4x4 = 
   0.000   0.000   0.000   0.000
   0.000   0.000   0.000   0.000
   0.000   0.000   0.000   0.000
   0.000   0.000   0.000   0.000
</pre>
</div>

<p>
Identity matrix: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>55<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> id_4x4 = <span class="org-constant">glm</span>::mat4<span class="org-rainbow-delimiters-depth-1">(</span>1.0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">mat</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>4, 4, <span class="org-type">float</span>, <span class="org-constant">glm</span>::<span class="org-constant">qualifier</span>::packed_highp<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f904e6c2120
root <span class="org-rainbow-delimiters-depth-1">[</span>56<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>56<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"id_4x4"</span>, id_4x4<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> id_4x4 = 
   1.000   0.000   0.000   0.000
   0.000   1.000   0.000   0.000
   0.000   0.000   1.000   0.000
   0.000   0.000   0.000   1.000
</pre>
</div>

<p>
Matrix translation coordinate transform: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>58<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> t1 = <span class="org-constant">glm</span>::translate<span class="org-rainbow-delimiters-depth-1">(</span>id_4x4, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-2">(</span>2.0, 10.0, 30.0<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">mat</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>4, 4, <span class="org-type">float</span>, <span class="org-constant">glm</span>::<span class="org-constant">qualifier</span>::packed_highp<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f904e6c2160

root <span class="org-rainbow-delimiters-depth-1">[</span>59<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"t1"</span>, t1<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> t1 = 
   1.000   0.000   0.000   2.000
   0.000   1.000   0.000  10.000
   0.000   0.000   1.000  30.000
   0.000   0.000   0.000   1.000


root <span class="org-rainbow-delimiters-depth-1">[</span>62<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> t2 = <span class="org-constant">glm</span>::translate<span class="org-rainbow-delimiters-depth-1">(</span>t1, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-2">(</span>-10, 100.0, 200.0<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">mat</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>4, 4, <span class="org-type">float</span>, <span class="org-constant">glm</span>::<span class="org-constant">qualifier</span>::packed_highp<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f904e6c21a0

root <span class="org-rainbow-delimiters-depth-1">[</span>63<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"t2"</span>, t2<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> t2 = 
   1.000   0.000   0.000  -8.000
   0.000   1.000   0.000 110.000
   0.000   0.000   1.000 230.000
   0.000   0.000   0.000   1.000
</pre>
</div>

<p>
Rotation around Z axis of 90 degrees: 
</p>

<ul class="org-ul">
<li>glm::mat4 glm::rotate(glm::mat4 const&amp; matrix, float angle_radians, glm::vec3 const&amp; axis)</li>
<li>Rotate around a given axis. The angle is given in radians.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>65<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">const</span> <span class="org-keyword">auto</span> axis_z = <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-1">(</span>0.0f, 0.0f, 1.0f<span class="org-rainbow-delimiters-depth-1">)</span>;
root <span class="org-rainbow-delimiters-depth-1">[</span>66<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">const</span> <span class="org-keyword">auto</span> axis_y = <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-1">(</span>0.0f, 1.0f, 0.0f<span class="org-rainbow-delimiters-depth-1">)</span>;
root <span class="org-rainbow-delimiters-depth-1">[</span>67<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">const</span> <span class="org-keyword">auto</span> axis_x = <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-1">(</span>1.0f, 0.0f, 0.0f<span class="org-rainbow-delimiters-depth-1">)</span>;


<span class="org-comment-delimiter">/*          </span><span class="org-comment">| cos(t)  -sin(t)   0   0  |</span>
<span class="org-comment"> *          | sin(t)   cos(t)   0   0  |</span>
<span class="org-comment"> *  Rz(t) = |  0        0       1   0  |</span>
<span class="org-comment"> *          |  0        0       0   1  |</span>
<span class="org-comment"> * </span>
<span class="org-comment"> *  </span>
<span class="org-comment"> *  t_rotZ = Rz(90) x id_4x4 = Rz(90)</span>
<span class="org-comment"> */</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>71<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> t_rotZ = <span class="org-constant">glm</span>::rotate<span class="org-rainbow-delimiters-depth-1">(</span>id_4x4, <span class="org-constant">glm</span>::radians<span class="org-rainbow-delimiters-depth-2">(</span>90.0f<span class="org-rainbow-delimiters-depth-2">)</span>, axis_z<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">mat</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>4, 4, <span class="org-type">float</span>, <span class="org-constant">glm</span>::<span class="org-constant">qualifier</span>::packed_highp<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f904e6c2204

root <span class="org-rainbow-delimiters-depth-1">[</span>72<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"t_rotZ"</span>, t_rotZ<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> t_rotZ = 
  -0.000  -1.000   0.000   0.000
   1.000  -0.000   0.000   0.000
   0.000   0.000   1.000   0.000
   0.000   0.000   0.000   1.000
root <span class="org-rainbow-delimiters-depth-1">[</span>73<span class="org-rainbow-delimiters-depth-1">]</span> 

 root <span class="org-rainbow-delimiters-depth-1">[</span>96<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span>t_rotZ<span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"mat4x4((-0.000000, 1.000000, 0.000000, 0.000000), ... "</span>
 root <span class="org-rainbow-delimiters-depth-1">[</span>97<span class="org-rainbow-delimiters-depth-1">]</span> 
</pre>
</div>

<p>
Scaling transformation: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>75<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> s1 = <span class="org-constant">glm</span>::scale<span class="org-rainbow-delimiters-depth-1">(</span>id_4x4, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-2">(</span>2.0, 2.0, 2.0<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">mat</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>4, 4, <span class="org-type">float</span>, <span class="org-constant">glm</span>::<span class="org-constant">qualifier</span>::packed_highp<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f904e6c2244

root <span class="org-rainbow-delimiters-depth-1">[</span>76<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"s1"</span>, s1<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> s1 = 
   2.000   0.000   0.000   0.000
   0.000   2.000   0.000   0.000
   0.000   0.000   2.000   0.000
   0.000   0.000   0.000   1.000

root <span class="org-rainbow-delimiters-depth-1">[</span>78<span class="org-rainbow-delimiters-depth-1">]</span> s1 = <span class="org-constant">glm</span>::scale<span class="org-rainbow-delimiters-depth-1">(</span>s1, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-2">(</span>5.0, 5.0, 5.0<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">mat</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f904e6c2244

root <span class="org-rainbow-delimiters-depth-1">[</span>79<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"s1"</span>, s1<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> s1 = 
  10.000   0.000   0.000   0.000
   0.000  10.000   0.000   0.000
   0.000   0.000  10.000   0.000
   0.000   0.000   0.000   1.000
root <span class="org-rainbow-delimiters-depth-1">[</span>80<span class="org-rainbow-delimiters-depth-1">]</span> 

<span class="org-comment-delimiter">// </span><span class="org-comment">Apply transform to vector: </span>

root <span class="org-rainbow-delimiters-depth-1">[</span>82<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> res = s1 * <span class="org-constant">glm</span>::vec4<span class="org-rainbow-delimiters-depth-1">(</span>2.0, 5.0, 10.0, 1.0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">vec</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>4, <span class="org-type">float</span>, <span class="org-constant">glm</span>::<span class="org-constant">qualifier</span>::packed_highp<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f904e6c2284

root <span class="org-rainbow-delimiters-depth-1">[</span>91<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span>res<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"vec4(20.000000, 50.000000, 100.000000, 1.000000)"</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>92<span class="org-rainbow-delimiters-depth-1">]</span> res<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 20.0000f

root <span class="org-rainbow-delimiters-depth-1">[</span>93<span class="org-rainbow-delimiters-depth-1">]</span> res<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 50.0000f

root <span class="org-rainbow-delimiters-depth-1">[</span>94<span class="org-rainbow-delimiters-depth-1">]</span> res<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 100.000f

root <span class="org-rainbow-delimiters-depth-1">[</span>95<span class="org-rainbow-delimiters-depth-1">]</span> res<span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.00000f
</pre>
</div>

<p>
Scaling transformation: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>97<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> s = <span class="org-constant">glm</span>::scale<span class="org-rainbow-delimiters-depth-1">(</span>id_4x4, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-2">(</span>4.0, 5.0, 6.0<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">mat</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>4, 4, <span class="org-type">float</span>, <span class="org-constant">glm</span>::<span class="org-constant">qualifier</span>::packed_highp<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f904e6c22a4

root <span class="org-rainbow-delimiters-depth-1">[</span>98<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"s"</span>, s<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> s = 
   4.000   0.000   0.000   0.000
   0.000   5.000   0.000   0.000
   0.000   0.000   6.000   0.000
   0.000   0.000   0.000   1.000
root <span class="org-rainbow-delimiters-depth-1">[</span>99<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>99<span class="org-rainbow-delimiters-depth-1">]</span> s = <span class="org-constant">glm</span>::translate<span class="org-rainbow-delimiters-depth-1">(</span>s, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-2">(</span>4, -5, 9<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">mat</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f904e6c22a4


root <span class="org-rainbow-delimiters-depth-1">[</span>100<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"s"</span>, s<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> s = 
   4.000   0.000   0.000  16.000
   0.000   5.000   0.000 -25.000
   0.000   0.000   6.000  54.000
   0.000   0.000   0.000   1.000
root <span class="org-rainbow-delimiters-depth-1">[</span>101<span class="org-rainbow-delimiters-depth-1">]</span> 


root <span class="org-rainbow-delimiters-depth-1">[</span>105<span class="org-rainbow-delimiters-depth-1">]</span> s = <span class="org-constant">glm</span>::scale<span class="org-rainbow-delimiters-depth-1">(</span>s, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-2">(</span>5.0, 2.0, 3.0<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">mat</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f904e6c22a4


root <span class="org-rainbow-delimiters-depth-1">[</span>106<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"s"</span>, s<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> s = 
  25.000   0.000   0.000  20.000
   0.000   4.000   0.000 -10.000
   0.000   0.000   9.000  27.000
   0.000   0.000   0.000   1.000
</pre>
</div>

<p>
Inverse matrix: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>111<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"s"</span>, s<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> s = 
  25.000   0.000   0.000  20.000
   0.000   4.000   0.000 -10.000
   0.000   0.000   9.000  27.000
   0.000   0.000   0.000   1.000

root <span class="org-rainbow-delimiters-depth-1">[</span>112<span class="org-rainbow-delimiters-depth-1">]</span> inv_s = <span class="org-constant">glm</span>::inverse<span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">mat</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>4, 4, <span class="org-type">float</span>, <span class="org-constant">glm</span>::<span class="org-constant">qualifier</span>::packed_highp<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f904e6c2324

root <span class="org-rainbow-delimiters-depth-1">[</span>113<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"inv_s"</span>, inv_s<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> inv_s = 
   0.040  -0.000   0.000  -0.800
  -0.000   0.250  -0.000   2.500
   0.000  -0.000   0.111  -3.000
  -0.000   0.000  -0.000   1.000
root <span class="org-rainbow-delimiters-depth-1">[</span>114<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>114<span class="org-rainbow-delimiters-depth-1">]</span> 

</pre>
</div>


<p>
<b>GLM Quaternions</b> 
</p>

<p>
Create an identity quaternion, which represents no rotation. 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>26<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> q = <span class="org-constant">glm</span>::quat<span class="org-rainbow-delimiters-depth-1">(</span>1.0, 0.0, 0.0, 0.0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">qua</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">float</span>, <span class="org-constant">glm</span>::<span class="org-constant">qualifier</span>::packed_highp<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fc8b47e6020

root <span class="org-rainbow-delimiters-depth-1">[</span>27<span class="org-rainbow-delimiters-depth-1">]</span> q.x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.00000f
root <span class="org-rainbow-delimiters-depth-1">[</span>28<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>28<span class="org-rainbow-delimiters-depth-1">]</span> q.y
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.00000f
root <span class="org-rainbow-delimiters-depth-1">[</span>29<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>29<span class="org-rainbow-delimiters-depth-1">]</span> q.z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.00000f
root <span class="org-rainbow-delimiters-depth-1">[</span>30<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>30<span class="org-rainbow-delimiters-depth-1">]</span> q.w
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.00000f
root <span class="org-rainbow-delimiters-depth-1">[</span>31<span class="org-rainbow-delimiters-depth-1">]</span> 
root <span class="org-rainbow-delimiters-depth-1">[</span>31<span class="org-rainbow-delimiters-depth-1">]</span> 
</pre>
</div>

<p>
Create a quaternion that represents a rotation of 90 degrees around Z
axis: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>39<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> qrot_z = <span class="org-constant">glm</span>::angleAxis<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::radians<span class="org-rainbow-delimiters-depth-2">(</span>90.0f<span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-2">{</span>0.0f, 0.0f, 1.0f<span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">qua</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">float</span>, <span class="org-constant">glm</span>::<span class="org-constant">qualifier</span>::packed_highp<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fc8b47e6050

root <span class="org-rainbow-delimiters-depth-1">[</span>40<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span>qrot_z<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"quat(0.707107, {0.000000, 0.000000, 0.707107})"</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>42<span class="org-rainbow-delimiters-depth-1">]</span> qrot_z.w
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.707107f

root <span class="org-rainbow-delimiters-depth-1">[</span>43<span class="org-rainbow-delimiters-depth-1">]</span> qrot_z.x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.00000f

root <span class="org-rainbow-delimiters-depth-1">[</span>44<span class="org-rainbow-delimiters-depth-1">]</span> qrot_z.y
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.00000f

root <span class="org-rainbow-delimiters-depth-1">[</span>45<span class="org-rainbow-delimiters-depth-1">]</span> qrot_z.z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.707107f
</pre>
</div>

<p>
Get quaternion angle: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">
<span class="org-comment-delimiter">// </span><span class="org-comment">Angle in radians.</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>61<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::angle<span class="org-rainbow-delimiters-depth-1">(</span>qrot_z<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.57080f

<span class="org-comment-delimiter">// </span><span class="org-comment">Angle in degrees </span>
root <span class="org-rainbow-delimiters-depth-1">[</span>62<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::angle<span class="org-rainbow-delimiters-depth-1">(</span>qrot_z<span class="org-rainbow-delimiters-depth-1">)</span> * 180.0 / M_PI
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 90.000003
</pre>
</div>

<p>
Get quaternion rotation axis vector: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>63<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> axis = <span class="org-constant">glm</span>::axis<span class="org-rainbow-delimiters-depth-1">(</span>qrot_z<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">vec</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>3, <span class="org-type">float</span>, <span class="org-constant">glm</span>::<span class="org-constant">qualifier</span>::packed_highp<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fc8b47e6150

root <span class="org-rainbow-delimiters-depth-1">[</span>64<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span>axis<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"vec3(0.000000, 0.000000, 1.000000)"</span>
</pre>
</div>

<p>
Determine quaternion conjugate: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Conjugate</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>68<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> res = <span class="org-constant">glm</span>::conjugate<span class="org-rainbow-delimiters-depth-1">(</span>qrot_z<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">qua</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">float</span>, <span class="org-constant">glm</span>::<span class="org-constant">qualifier</span>::packed_highp<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fc8b47e616c

root <span class="org-rainbow-delimiters-depth-1">[</span>69<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span>res<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"quat(0.707107, {-0.000000, -0.000000, -0.707107})"</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>71<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span> qrot_z * res <span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"quat(1.000000, {0.000000, 0.000000, 0.000000})"</span>
</pre>
</div>

<p>
Determin quaternion inverse: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>72<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-constant">glm</span>::inverse<span class="org-rainbow-delimiters-depth-2">(</span>qrot_z<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"quat(0.707107, {-0.000000, -0.000000, -0.707107})"</span>
</pre>
</div>

<p>
Computer quaternion norm (aka magnitude):
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>74<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::length<span class="org-rainbow-delimiters-depth-1">(</span>qrot_z<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.00000f
</pre>
</div>


<p>
Turn the previous quaternion in to a rotation matrix: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>47<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> TrotZ1 = <span class="org-constant">glm</span>::mat4_cast<span class="org-rainbow-delimiters-depth-1">(</span>qrot_z<span class="org-rainbow-delimiters-depth-1">)</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>48<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"TrotZ1"</span>, TrotZ1<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> TrotZ1 = 
   0.000  -1.000   0.000   0.000
   1.000   0.000   0.000   0.000
   0.000   0.000   1.000   0.000
   0.000   0.000   0.000   1.000

<span class="org-comment-delimiter">// </span><span class="org-comment">------------ Confirm result ------------//</span>
<span class="org-comment-delimiter">//</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>51<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> TrotZ2 = <span class="org-constant">glm</span>::rotate<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::mat4<span class="org-rainbow-delimiters-depth-2">(</span>1.0<span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">glm</span>::radians<span class="org-rainbow-delimiters-depth-2">(</span>90.0f<span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-2">(</span>0.0, 0.0, 1.0<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>52<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"TrotZ2"</span>, TrotZ2<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> TrotZ2 = 
  -0.000  -1.000   0.000   0.000
   1.000  -0.000   0.000   0.000
   0.000   0.000   1.000   0.000
   0.000   0.000   0.000   1.000

</pre>
</div>

<p>
Rotate a vector with the quaternion <span class="underline">qrot_z</span>: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>57<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> v = <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-1">{</span>1.0f, 0.0f, 0.0f<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">vec</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>3, <span class="org-type">float</span>, <span class="org-constant">glm</span>::<span class="org-constant">qualifier</span>::packed_highp<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fc8b47e6138

<span class="org-comment-delimiter">// </span><span class="org-comment">Rotating a vector just requires multiplication.</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>59<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> rotated_v = qrot_z * v
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">vec</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>3, <span class="org-type">float</span>, <span class="org-constant">glm</span>::<span class="org-constant">qualifier</span>::packed_highp<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fc8b47e6144

root <span class="org-rainbow-delimiters-depth-1">[</span>60<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span>rotated_v<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"vec3(0.000000, 1.000000, 0.000000)"</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Rotate the same vector with a rotation matrix. </span>
root <span class="org-rainbow-delimiters-depth-1">[</span>79<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span> TrotZ2 * <span class="org-constant">glm</span>::vec4<span class="org-rainbow-delimiters-depth-2">(</span>1.0, 0.0, 0.0, 0.0<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"vec4(-0.000000, 1.000000, 0.000000, 0.000000)"</span>
</pre>
</div>

<p>
New rotation around Y axis about 60 degrees. 
</p>

<div class="org-src-container">
<pre class="src src-cpp">root <span class="org-rainbow-delimiters-depth-1">[</span>80<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> q = qrot_z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">qua</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">float</span>, <span class="org-constant">glm</span>::<span class="org-constant">qualifier</span>::packed_highp<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fc8b47e617c

<span class="org-comment-delimiter">// </span><span class="org-comment">---------- Before rotation ------------</span>
<span class="org-comment-delimiter">//</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>81<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span> q <span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"quat(0.707107, {0.000000, 0.000000, 0.707107})"</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">-------- After rotation ----------------//</span>
<span class="org-comment-delimiter">//</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>84<span class="org-rainbow-delimiters-depth-1">]</span> q = q * <span class="org-constant">glm</span>::angleAxis<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::radians<span class="org-rainbow-delimiters-depth-2">(</span>60.0f<span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-2">{</span>0.0, 0.1, 0.0<span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">qua</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">float</span>, <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">qualifier</span><span class="org-rainbow-delimiters-depth-3">)</span>0U<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fc8b47e617c

root <span class="org-rainbow-delimiters-depth-1">[</span>85<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span> q <span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"quat(0.612372, {-0.035355, 0.035355, 0.612372})"</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">--------- Get Rotation Matrix -----------// </span>

root <span class="org-rainbow-delimiters-depth-1">[</span>86<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> m = <span class="org-constant">glm</span>::mat4_cast<span class="org-rainbow-delimiters-depth-1">(</span>q<span class="org-rainbow-delimiters-depth-1">)</span>

root <span class="org-rainbow-delimiters-depth-1">[</span>88<span class="org-rainbow-delimiters-depth-1">]</span> show_matrix<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"m"</span>, m<span class="org-rainbow-delimiters-depth-1">)</span>

 <span class="org-rainbow-delimiters-depth-1">[</span>MATRIX<span class="org-rainbow-delimiters-depth-1">]</span> m = 
   0.248  -0.752   0.000   0.000
   0.747   0.248   0.087   0.000
  -0.087   0.000   0.995   0.000
   0.000   0.000   0.000   1.000

<span class="org-comment-delimiter">// </span><span class="org-comment">-------- Get total rotation angle and axis ---------//</span>
<span class="org-comment-delimiter">// </span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Get new rotation axis </span>
root <span class="org-rainbow-delimiters-depth-1">[</span>89<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-keyword">auto</span> axis = <span class="org-constant">glm</span>::axis<span class="org-rainbow-delimiters-depth-1">(</span>q<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">glm</span>::<span class="org-type">vec</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>3, <span class="org-type">float</span>, <span class="org-constant">glm</span>::<span class="org-constant">qualifier</span>::packed_highp<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fc8b47e61cc

root <span class="org-rainbow-delimiters-depth-1">[</span>90<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span> axis <span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"vec3(-0.044721, 0.044721, 0.774597)"</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Get rotation angle around new axis in radians</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>91<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::angle<span class="org-rainbow-delimiters-depth-1">(</span>q<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.82348f

<span class="org-comment-delimiter">// </span><span class="org-comment">Get rotation angle around new axis in degrees </span>
root <span class="org-rainbow-delimiters-depth-1">[</span>92<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::angle<span class="org-rainbow-delimiters-depth-1">(</span>q<span class="org-rainbow-delimiters-depth-1">)</span> * 180.0 / M_PI
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 104.47752


<span class="org-comment-delimiter">//</span><span class="org-comment">--------- Get Yaw, Pitch and Roll angles --------------------//</span>
<span class="org-comment-delimiter">//</span>
root <span class="org-rainbow-delimiters-depth-1">[</span>94<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::yaw<span class="org-rainbow-delimiters-depth-1">(</span>q<span class="org-rainbow-delimiters-depth-1">)</span> * 180.0 / M_PI
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 4.9681836

root <span class="org-rainbow-delimiters-depth-1">[</span>95<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::pitch<span class="org-rainbow-delimiters-depth-1">(</span>q<span class="org-rainbow-delimiters-depth-1">)</span> * 180.0 / M_PI
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.0000000

root <span class="org-rainbow-delimiters-depth-1">[</span>96<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">glm</span>::roll<span class="org-rainbow-delimiters-depth-1">(</span>q<span class="org-rainbow-delimiters-depth-1">)</span> * 180.0 / M_PI
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 90.000003

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org785fc99" class="outline-3">
<h3 id="org785fc99"><span class="section-number-3">1.8</span> 2D Graphics - no VBO abstraction</h3>
<div class="outline-text-3" id="text-1-8">
<p>
The following code draws a square and a triangle using the OpenGL
retained mode API. Before the rendering takes place, data must be
upload to the VBO (Vertex Buffer Object), allocated on the GPU-side,
via <span class="underline">glBufferData()</span> call that sends the data to the previous bound VBO
through <span class="underline">glBindBuffer()</span> call. Then, on the rendering loop and on every
frame, the buffer data layout must described with
<span class="underline">glVertexAttribPointer()</span> before drawing via call to <span class="underline">glDrawArrays()</span>
subroutine, which draw vertices from the current bound buffer. 
</p>

<p>
Subroutines that modifies global state may cause unintended behavior,
so it is a good practice to unset the affected global state when the
current global state is no longer needed. For instance, if the current
VBO no longer needs to be bound, this global state can be disabled by
calling <i>glBindBuffer(GL_ARRAY_BUFFER, 0)</i>.
</p>


<p>
OpenGL subroutines used: 
</p>

<ul class="org-ul">
<li><a href="https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glGenBuffers.xhtml">glGenBuffers()</a> =&gt; Instantiate a buffer object.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">glGenBuffers</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">GLsizei</span> <span class="org-variable-name">n</span>, <span class="org-type">GLuint</span>* <span class="org-variable-name">buffers</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<ul class="org-ul">
<li><a href="https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glBindBuffer.xhtml">glBindBuffer()</a> =&gt; Bind some buffer object, a.k.a enable, only one
buffer can be bound at a time. (The VBO is a global state).</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">glBindBuffer</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">GLenum</span> <span class="org-variable-name">target</span>,<span class="org-type">nt</span> <span class="org-variable-name">buffer</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<ul class="org-ul">
<li><a href="https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glBufferData.xhtml">glBufferData()</a>  =&gt;&gt; Send data to current bound buffer object that
was bound via glBindBuffer() call.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">glBufferData</span><span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-type">GLenum</span>      <span class="org-variable-name">target</span>,
                   <span class="org-type">GLsizeiptr</span>  <span class="org-variable-name">size</span>,
                   <span class="org-keyword">const</span> <span class="org-type">void</span>* <span class="org-variable-name">data</span>,
                   <span class="org-type">GLenum</span>      <span class="org-variable-name">usage</span>
                   <span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<ul class="org-ul">
<li><a href="https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glEnableVertexAttribArray.xhtml">glEnableVertexAttribArray()</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">glEnableVertexAttribArray</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">GLuint</span> <span class="org-variable-name">index</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<ul class="org-ul">
<li><a href="https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glVertexAttribPointer.xhtml">glVertexAttribPointer()</a>
<ul class="org-ul">
<li>Describes the data layout of current bound buffer.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">glVertexAttribPointer</span><span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-type">GLuint</span>      <span class="org-variable-name">index</span>,
                            <span class="org-type">GLint</span>       <span class="org-variable-name">size</span>,
                            <span class="org-type">GLenum</span>      <span class="org-variable-name">type</span>,
                            <span class="org-type">GLboolean</span>   <span class="org-variable-name">normalized</span>,
                            <span class="org-type">GLsizei</span>     <span class="org-variable-name">stride</span>,
                            <span class="org-keyword">const</span> <span class="org-type">void</span>* <span class="org-variable-name">pointer</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<ul class="org-ul">
<li><a href="https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glDrawArrays.xhtml">glDrawArrays()</a> =&gt; Render OpenGL primitives from current bound
buffer object's data. Those primitives are: lines, triangles or
quads and so on.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">glDrawArrays</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">GLenum</span> <span class="org-variable-name">mode</span>, <span class="org-type">GLint</span> <span class="org-variable-name">first</span>, <span class="org-type">GLsizei</span> <span class="org-variable-name">count</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>


<p>
<b>Screenshot</b> 
</p>


<div class="figure">
<p><a href="images/opengl-draw2d-raw.png"><img src="images/opengl-draw2d-raw.png" alt="opengl-draw2d-raw.png" /></a>
</p>
</div>

<p>
<b>Source Code</b> 
</p>

<p>
File: <span class="underline">CMakeLists.txt</span> 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.5)
<span class="org-function-name">project</span>(GLFW_project)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD_REQUIRED ON)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment">#================ GLFW Settings  ===============#</span>

<span class="org-function-name">find_package</span>(OpenGL REQUIRED)

<span class="org-function-name">include</span>(FetchContent)

<span class="org-comment"># Set GLFW Options before FectchContent_MakeAvailable </span>
<span class="org-function-name">set</span>( GLFW_BUILD_EXAMPLES OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )
<span class="org-function-name">set</span>( GLFW_BUILD_TESTS    OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )
<span class="org-function-name">set</span>( GLFW_BUILD_DOCS     OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )
<span class="org-function-name">set</span>( GLFW_BUILD_INSTALL  OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )

<span class="org-comment"># Donwload GLFW library</span>
<span class="org-function-name">FetchContent_Declare</span>(
  glfwlib
  URL   https://github.com/glfw/glfw/releases/download/3.3.2/glfw-3.3.2.zip
)
<span class="org-function-name">FetchContent_MakeAvailable</span>(glfwlib)

       <span class="org-function-name">add_executable</span>( draw2d-raw  draw2d-raw.cpp )
<span class="org-function-name">target_link_libraries</span>( draw2d-raw  glfw OpenGL::GL GLU)
</pre>
</div>

<p>
File: <span class="underline">draw2d-raw.cpp</span> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Draw curve mapping buffer to the GPU.</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">array</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cassert</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">-------- OpenGL headers ---------//</span>
<span class="org-comment-delimiter">//</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">GL_GLEXT_PROTOTYPES</span> 1 <span class="org-comment-delimiter">// </span><span class="org-comment">Necessary for OpenGL &gt;= 3.0 functions</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">GL3_PROTOTYPES</span>      1 <span class="org-comment-delimiter">// </span><span class="org-comment">Necessary for OpenGL &gt;= 3.0 functions</span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GL/gl.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GLFW/glfw3.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">#include &lt;GL/glew.h&gt;</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GL/glu.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GL/glut.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>


<span class="org-keyword">struct</span> <span class="org-type">Vertex2D</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">GLfloat</span> <span class="org-variable-name">x</span>;
    <span class="org-type">GLfloat</span> <span class="org-variable-name">y</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">GLFWwindow</span>* <span class="org-variable-name">window</span>;

    <span class="org-comment-delimiter">/* </span><span class="org-comment">Initialize the library */</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>glfwInit<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-keyword">return</span> -1;

    glutInit<span class="org-rainbow-delimiters-depth-2">(</span>&amp;argc, argv<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">/* </span><span class="org-comment">Create a windowed mode window and its OpenGL context */</span>
    window = glfwCreateWindow<span class="org-rainbow-delimiters-depth-2">(</span>640, 480, <span class="org-string">"2D Drawing raw VBO buffers"</span>, <span class="org-constant">NULL</span>, <span class="org-constant">NULL</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>window<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        glfwTerminate<span class="org-rainbow-delimiters-depth-3">()</span>;
        <span class="org-keyword">return</span> -1;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">/* </span><span class="org-comment">Make the window's context current */</span>
    glfwMakeContextCurrent<span class="org-rainbow-delimiters-depth-2">(</span>window<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">glClearColor(0.0f, 0.5f, 0.6f, 1.0f);</span>
    glClearColor<span class="org-rainbow-delimiters-depth-2">(</span>0.0f, 0.0f, 0.0, 1.0f<span class="org-rainbow-delimiters-depth-2">)</span>;


    <span class="org-type">Vertex2D</span> <span class="org-variable-name">triangle_points</span><span class="org-rainbow-delimiters-depth-2">[</span>3<span class="org-rainbow-delimiters-depth-2">]</span> = <span class="org-rainbow-delimiters-depth-2">{</span>
        Vertex2D<span class="org-rainbow-delimiters-depth-3">{</span>-0.25,   -0.25<span class="org-rainbow-delimiters-depth-3">}</span>
      , Vertex2D<span class="org-rainbow-delimiters-depth-3">{</span> 0.00,   0.25<span class="org-rainbow-delimiters-depth-3">}</span>
      , Vertex2D<span class="org-rainbow-delimiters-depth-3">{</span> 0.25,  -0.25<span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-type">Vertex2D</span> <span class="org-variable-name">square_points</span><span class="org-rainbow-delimiters-depth-2">[</span>4<span class="org-rainbow-delimiters-depth-2">]</span> = <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-rainbow-delimiters-depth-3">{</span> -0.3,  -0.3 <span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span> -0.3,   0.3 <span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>  0.3,   0.3 <span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>  0.3,  -0.3 <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">================== Triangle Buffer ====================//</span>
    <span class="org-comment-delimiter">//</span>

    <span class="org-type">GLuint</span> <span class="org-variable-name">vbo_triangle_</span> = 0;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Create an OpenGL VBO buffer </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">=&gt;&gt; void glGenBuffers (GLsizei n, GLuint *buffers);</span>
    glGenBuffers<span class="org-rainbow-delimiters-depth-2">(</span>  1                <span class="org-comment-delimiter">// </span><span class="org-comment">Number of buffers that will be instantiated</span>
                 , &amp;vbo_triangle_   <span class="org-comment-delimiter">// </span><span class="org-comment">Address of first element or address of array </span>
                                    <span class="org-comment-delimiter">// </span><span class="org-comment">that results will be written to.</span>
                 <span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span> vbo_triangle_ != 0 <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Set this buffer as the current buffer - Only one buffer can be bound at a time. </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">=&gt;&gt; void glBindBuffer (GLenum target, GLuint buffer)</span>
    glBindBuffer<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, vbo_triangle_<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Upload data to current VBO buffer in GPU </span>
    glBufferData<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, <span class="org-keyword">sizeof</span><span class="org-rainbow-delimiters-depth-3">(</span>triangle_points<span class="org-rainbow-delimiters-depth-3">)</span>, triangle_points, GL_STATIC_DRAW<span class="org-rainbow-delimiters-depth-2">)</span>;   

    <span class="org-comment-delimiter">// </span><span class="org-comment">Unbind current buffer in order to avoid unintended behaviors</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">as the subroutine glBindBuffer() modifies has a global state.</span>
    glBindBuffer<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, 0<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">================ Square / Vertex Buffer Object 2 ==================//</span>
    <span class="org-comment-delimiter">//      </span>

    <span class="org-type">GLuint</span> <span class="org-variable-name">vbo_square_</span> = 0;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Instiate buffer - gets a handle or token for </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">a buffer allocated on GPU-side.</span>
    glGenBuffers<span class="org-rainbow-delimiters-depth-2">(</span>1, &amp;vbo_square_<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Check for error </span>
    assert<span class="org-rainbow-delimiters-depth-2">(</span> vbo_square_ != 0<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Bind Current buffer (Affects global state)</span>
    glBindBuffer<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, vbo_square_<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Upload data to the GPU </span>
    glBufferData<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, <span class="org-keyword">sizeof</span><span class="org-rainbow-delimiters-depth-3">(</span>square_points<span class="org-rainbow-delimiters-depth-3">)</span>, square_points, GL_STATIC_DRAW<span class="org-rainbow-delimiters-depth-2">)</span>;   
    <span class="org-comment-delimiter">// </span><span class="org-comment">Unbind buffer </span>
    glBindBuffer<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, 0<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">GLint</span> <span class="org-variable-name">shader_attr</span> = 0;

    <span class="org-comment-delimiter">//  </span><span class="org-comment">======= R E N D E R  - L O O P ============//</span>
    <span class="org-comment-delimiter">//</span>
    <span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-negation-char">!</span>glfwWindowShouldClose<span class="org-rainbow-delimiters-depth-3">(</span>window<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        glClear<span class="org-rainbow-delimiters-depth-3">(</span>GL_COLOR_BUFFER_BIT<span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">====== BEGIN RENDERING ============//</span>

            <span class="org-comment-delimiter">// </span><span class="org-comment">------------ Draw triangle --------------//</span>
            <span class="org-comment-delimiter">//</span>
            glBindBuffer<span class="org-rainbow-delimiters-depth-3">(</span>GL_ARRAY_BUFFER, vbo_triangle_<span class="org-rainbow-delimiters-depth-3">)</span>;
            glEnableVertexAttribArray<span class="org-rainbow-delimiters-depth-3">(</span>shader_attr<span class="org-rainbow-delimiters-depth-3">)</span>;

            <span class="org-comment-delimiter">// </span><span class="org-comment">Describe buffer data layout (binary layout)</span>
            <span class="org-comment-delimiter">// </span><span class="org-comment">=&gt;&gt; glVertexAttribPointer ( GLuint index, GLint size, GLenum type</span>
            <span class="org-comment-delimiter">//                           </span><span class="org-comment">, GLboolean normalized, GLsizei stride, const void *pointer);</span>
            <span class="org-comment-delimiter">//</span>
            glVertexAttribPointer<span class="org-rainbow-delimiters-depth-3">(</span>shader_attr <span class="org-comment-delimiter">// </span><span class="org-comment">GLint  index         =&gt; Shader attribute location, 0 for now </span>
                                , 2           <span class="org-comment-delimiter">// </span><span class="org-comment">GLint  size          =&gt; 2 components (X, Y) of type GLfloat</span>
                                , GL_FLOAT    <span class="org-comment-delimiter">// </span><span class="org-comment">GLemum type          =&gt; Type of each component  </span>
                                , GL_FALSE    <span class="org-comment-delimiter">// </span><span class="org-comment">GLboolean normalized  </span>
                                , 0           <span class="org-comment-delimiter">// </span><span class="org-comment">GLsizei stride</span>
                                , <span class="org-constant">nullptr</span>     <span class="org-comment-delimiter">// </span><span class="org-comment">const void* pointer </span>
                                <span class="org-rainbow-delimiters-depth-3">)</span>;
            <span class="org-comment-delimiter">// </span><span class="org-comment">Draw arrays using the content of buffer </span>
            <span class="org-comment-delimiter">// </span><span class="org-comment">Plot 1 triangle (each triangle has 3 vertices)</span>
            glDrawArrays<span class="org-rainbow-delimiters-depth-3">(</span>GL_TRIANGLES, 0, 3<span class="org-rainbow-delimiters-depth-3">)</span>;

            <span class="org-comment-delimiter">// </span><span class="org-comment">Disable global state </span>
            glBindBuffer<span class="org-rainbow-delimiters-depth-3">(</span>GL_ARRAY_BUFFER, 0<span class="org-rainbow-delimiters-depth-3">)</span>;
            glDisableVertexAttribArray<span class="org-rainbow-delimiters-depth-3">(</span>0<span class="org-rainbow-delimiters-depth-3">)</span>;

            <span class="org-comment-delimiter">//</span><span class="org-comment">------------ Draw Square -------------------------//</span>
            <span class="org-comment-delimiter">//</span>

<span class="org-preprocessor">            #if</span> 1
            glBindBuffer<span class="org-rainbow-delimiters-depth-3">(</span>GL_ARRAY_BUFFER, vbo_square_<span class="org-rainbow-delimiters-depth-3">)</span>;
            glEnableVertexAttribArray<span class="org-rainbow-delimiters-depth-3">(</span>shader_attr<span class="org-rainbow-delimiters-depth-3">)</span>;
            glVertexAttribPointer<span class="org-rainbow-delimiters-depth-3">(</span>0, 2, GL_FLOAT, GL_FALSE, 0, <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-3">)</span>;
            <span class="org-comment-delimiter">// </span><span class="org-comment">Plot 4 vertices </span>
            glDrawArrays<span class="org-rainbow-delimiters-depth-3">(</span>GL_LINE_LOOP, 0, 4<span class="org-rainbow-delimiters-depth-3">)</span>;

            <span class="org-comment-delimiter">// </span><span class="org-comment">Disable global state </span>
            glBindBuffer<span class="org-rainbow-delimiters-depth-3">(</span>GL_ARRAY_BUFFER, 0<span class="org-rainbow-delimiters-depth-3">)</span>;
            glDisableVertexAttribArray<span class="org-rainbow-delimiters-depth-3">(</span>shader_attr<span class="org-rainbow-delimiters-depth-3">)</span>;            
<span class="org-preprocessor">            #endif</span> 

        <span class="org-comment-delimiter">// </span><span class="org-comment">====== END RENDERING ==============//</span>

        <span class="org-comment-delimiter">/* </span><span class="org-comment">Swap front and back buffers */</span>
        glfwSwapBuffers<span class="org-rainbow-delimiters-depth-3">(</span>window<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">/* </span><span class="org-comment">Poll for and process events */</span>
        glfwPollEvents<span class="org-rainbow-delimiters-depth-3">()</span>;

        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, <span class="org-string">'Q'</span> <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
             <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [TRACE] User typed Q =&gt;&gt; Shutdown program. Ok. "</span> &lt;&lt; <span class="org-string">'\n'</span>;
             <span class="org-keyword">break</span>;
        <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    glfwTerminate<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0b9c635" class="outline-3">
<h3 id="org0b9c635"><span class="section-number-3">1.9</span> 2D Graphics - using VBO abstraction</h3>
<div class="outline-text-3" id="text-1-9">
<p>
This sample code draws a square, triangle and a chart using 2D
coordinates and ignoring the Z axis. 
</p>

<p>
Unlike legacy OpenGL (fixed-pipeline) that requires the calling code
to call primitive rendering subroutines on every frame, which has a
significant overhead, Modern OpenGL or retained-mode, uses buffer
objects for storing data on the GPU memory and shaders, programs that
runs on the GPU-side for processing vertexes and colors. The following
code uses <span class="underline">VertexBufferObject</span> class for encapsulating VBO - Vertex
Buffer Objects. The challenging of dealing with VBOs is that, many of
subroutines applicable to VBO modify global state or assume that some
global state should be set before calling the subroutine. The effect
of calling the many OpenGL subroutines depends on the state and the
order that they were called.
</p>

<p>
The code was tested on Ubuntu Linux 64 bits. On Windows, it requires
GLEW for loading OpenGL function pointers. 
</p>

<p>
<b>Screenshot:</b>
</p>


<div class="figure">
<p><a href="images/opengl-draw2d.png"><img src="images/opengl-draw2d.png" alt="opengl-draw2d.png" /></a>
</p>
<p><span class="figure-number">Figure 2: </span>OpenGL simple 2D redering with VBO.</p>
</div>


<p>
<b>Source Code</b> 
</p>


<p>
File: <span class="underline">CMakeLists.txt</span> 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.5)
<span class="org-function-name">project</span>(draw2d)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD_REQUIRED ON)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment">#================ GLFW Settings  ===============#</span>

<span class="org-function-name">find_package</span>(OpenGL REQUIRED)

<span class="org-function-name">include</span>(FetchContent)

<span class="org-comment"># Set GLFW Options before FectchContent_MakeAvailable </span>
<span class="org-function-name">set</span>( GLFW_BUILD_EXAMPLES OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )
<span class="org-function-name">set</span>( GLFW_BUILD_TESTS    OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )
<span class="org-function-name">set</span>( GLFW_BUILD_DOCS     OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )
<span class="org-function-name">set</span>( GLFW_BUILD_INSTALL  OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )

<span class="org-comment"># Donwload GLFW library</span>
<span class="org-function-name">FetchContent_Declare</span>(
  glfwlib
  URL   https://github.com/glfw/glfw/releases/download/3.3.2/glfw-3.3.2.zip
)
<span class="org-function-name">FetchContent_MakeAvailable</span>(glfwlib)

       <span class="org-function-name">add_executable</span>( draw2d  draw2d.cpp )
<span class="org-function-name">target_link_libraries</span>( draw2d  glfw OpenGL::GL GLU)
</pre>
</div>

<p>
File: <span class="underline">draw2d.cpp</span> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Draw curve mapping buffer to the GPU.</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">array</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">-------- OpenGL headers ---------//</span>
<span class="org-comment-delimiter">//</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">GL_GLEXT_PROTOTYPES</span> 1 <span class="org-comment-delimiter">// </span><span class="org-comment">Necessary for OpenGL &gt;= 3.0 functions</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">GL3_PROTOTYPES</span>      1 <span class="org-comment-delimiter">// </span><span class="org-comment">Necessary for OpenGL &gt;= 3.0 functions</span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GL/gl.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GLFW/glfw3.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">#include &lt;GL/glew.h&gt;</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GL/glu.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GL/glut.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Makes a class non copiable. </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Auomates the boilerplate code for </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">declaring a class as non-copiable </span>
<span class="org-preprocessor">#define</span> <span class="org-function-name">CL_NON_COPIABLE</span><span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-variable-name">className</span> <span class="org-rainbow-delimiters-depth-1">)</span>                  \
    <span class="org-keyword">public</span>:                                           \
    className<span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-type">className</span> <span class="org-keyword">const</span>&amp;<span class="org-rainbow-delimiters-depth-1">)</span> = <span class="org-keyword">delete</span>;            \
    <span class="org-type">className</span>&amp; <span class="org-keyword">operator</span><span class="org-variable-name">=</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">className</span> <span class="org-keyword">const</span>&amp;<span class="org-rainbow-delimiters-depth-1">)</span> = <span class="org-keyword">delete</span>; \
    <span class="org-keyword">private</span>:


<span class="org-comment-delimiter">// </span><span class="org-comment">Class for encapsulating VBO - Vertex-Buffer Objects </span>
<span class="org-keyword">class</span> <span class="org-type">VertexBufferObject</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Handle for Vertex-Buffer Object (Allocated on GPU memory)</span>
    <span class="org-type">GLuint</span>  <span class="org-variable-name">m_vbo</span> = 0;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Shader attribute location variable </span>
    <span class="org-type">GLuint</span> <span class="org-variable-name">m_attr_location</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Type of single component </span>
    <span class="org-type">GLenum</span>  <span class="org-variable-name">m_type</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Number of elements m_type of single component </span>
    <span class="org-type">GLsizei</span> <span class="org-variable-name">m_size</span>;    

    CL_NON_COPIABLE<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">VertexBufferObject</span><span class="org-rainbow-delimiters-depth-2">)</span>
<span class="org-function-name">public</span>:

    <span class="org-function-name">VertexBufferObject</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">GLuint</span> <span class="org-variable-name">shader_attr_loc</span> = 0<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span> 
        m_attr_location = shader_attr_loc;
        ::glGenBuffers<span class="org-rainbow-delimiters-depth-3">(</span>1, &amp;m_vbo<span class="org-rainbow-delimiters-depth-3">)</span>;  

        <span class="org-comment-delimiter">// </span><span class="org-comment">--- Buffer Object Data Layout parameters ------//</span>
        <span class="org-comment-delimiter">//</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Type of single component </span>
        <span class="org-type">GLenum</span>  <span class="org-variable-name">m_type</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Number of elements m_type of single component </span>
        <span class="org-type">GLsizei</span> <span class="org-variable-name">m_size</span>;        
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Destructor </span>
    ~<span class="org-function-name">VertexBufferObject</span><span class="org-rainbow-delimiters-depth-2">(){</span> <span class="org-keyword">this</span>-&gt;dispose<span class="org-rainbow-delimiters-depth-3">()</span>;  <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">GLuint</span> <span class="org-function-name">id</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> m_vbo; <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Delete current buffer when no longer in use </span>
    <span class="org-type">void</span> <span class="org-function-name">dispose</span><span class="org-rainbow-delimiters-depth-2">()</span> 
    <span class="org-rainbow-delimiters-depth-2">{</span>
        ::glDeleteBuffers<span class="org-rainbow-delimiters-depth-3">(</span>1, &amp;m_vbo<span class="org-rainbow-delimiters-depth-3">)</span>;
        m_vbo = 0;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Make this buffer active only one buffer can be active at a time.</span>
    <span class="org-type">void</span> <span class="org-function-name">bind</span><span class="org-rainbow-delimiters-depth-2">()</span> 
    <span class="org-rainbow-delimiters-depth-2">{</span> 
        glBindBuffer<span class="org-rainbow-delimiters-depth-3">(</span>GL_ARRAY_BUFFER, m_vbo<span class="org-rainbow-delimiters-depth-3">)</span>; 
        glEnableVertexAttribArray<span class="org-rainbow-delimiters-depth-3">(</span>m_attr_location<span class="org-rainbow-delimiters-depth-3">)</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Unbind current buffer in order to avoid unintended behavior </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">due to the global state. </span>
    <span class="org-type">void</span> <span class="org-function-name">unbind</span><span class="org-rainbow-delimiters-depth-2">()</span> 
    <span class="org-rainbow-delimiters-depth-2">{</span> 
        glBindBuffer<span class="org-rainbow-delimiters-depth-3">(</span>GL_ARRAY_BUFFER, 0<span class="org-rainbow-delimiters-depth-3">)</span>; 
        glDisableVertexAttribArray<span class="org-rainbow-delimiters-depth-3">(</span>m_attr_location<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Upload data to GPU - the data is often an array of POD types </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">POD (Plain-Old-Data) - any contiguous data without any internal pointer.</span>
    <span class="org-type">void</span> <span class="org-function-name">send_data</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">void</span>* <span class="org-variable-name">pData</span>, <span class="org-type">GLsizeiptr</span> <span class="org-variable-name">size</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">this</span>-&gt;bind<span class="org-rainbow-delimiters-depth-3">()</span>;    
        glBufferData<span class="org-rainbow-delimiters-depth-3">(</span>GL_ARRAY_BUFFER, size, pData, GL_STATIC_DRAW<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">this</span>-&gt;unbind<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Map buffer to GPU memory. This method allows sending data directly </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">to the VBO by writing to the returned pointer.</span>
    <span class="org-comment-delimiter">// </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">@param size - Byte amount of memory allocated on the GPU-side.</span>
    <span class="org-type">void</span>* <span class="org-function-name">map_buffer</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">GLsizeiptr</span> <span class="org-variable-name">size</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">this</span>-&gt;bind<span class="org-rainbow-delimiters-depth-3">()</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Just reserver data, do not copy vertex points to GPU memory. </span>
        glBufferData<span class="org-rainbow-delimiters-depth-3">(</span>GL_ARRAY_BUFFER, size, <span class="org-constant">nullptr</span>, GL_STATIC_DRAW<span class="org-rainbow-delimiters-depth-3">)</span>;   
        <span class="org-comment-delimiter">// </span><span class="org-comment">Obtain pointer to buffer mapped to GPU memory.</span>
        <span class="org-type">void</span>* <span class="org-variable-name">ptr</span> = glMapBuffer<span class="org-rainbow-delimiters-depth-3">(</span> GL_ARRAY_BUFFER, GL_WRITE_ONLY <span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">this</span>-&gt;unbind<span class="org-rainbow-delimiters-depth-3">()</span>;
        <span class="org-keyword">return</span> ptr;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>
    <span class="org-type">T</span>* <span class="org-function-name">map_buffer_t</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">GLsizeiptr</span> <span class="org-variable-name">size</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span> 
        <span class="org-keyword">return</span> <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">T</span>*<span class="org-rainbow-delimiters-depth-3">&gt;(</span><span class="org-keyword">this</span>-&gt;map_buffer<span class="org-rainbow-delimiters-depth-4">(</span>size<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Note: It is assumed that shader program is bound before </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">calling this function. </span>
    <span class="org-comment-delimiter">//</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">shader_attr_location =&gt; Is attribute location of the Vertex Shader</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">that will process the vertices.</span>
    <span class="org-type">void</span> <span class="org-function-name">set_data_layout</span><span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-type">GLenum</span> <span class="org-variable-name">type</span>, <span class="org-type">GLint</span> <span class="org-variable-name">size</span><span class="org-rainbow-delimiters-depth-2">)</span> 
    <span class="org-rainbow-delimiters-depth-2">{</span>
        m_type = type; 
        m_size = size;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">void</span> <span class="org-function-name">draw_arrays</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">GLenum</span> <span class="org-variable-name">draw_type</span>, <span class="org-type">GLuint</span> <span class="org-variable-name">count</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">this</span>-&gt;bind<span class="org-rainbow-delimiters-depth-3">()</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Describe data layout - binary format.</span>
        glVertexAttribPointer<span class="org-rainbow-delimiters-depth-3">(</span> m_attr_location, m_size, m_type, GL_FALSE, 0, <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Performs drawing </span>
        glDrawArrays<span class="org-rainbow-delimiters-depth-3">(</span> draw_type, 0, count<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">this</span>-&gt;unbind<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">struct</span> <span class="org-type">Vertex2D</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">GLfloat</span> <span class="org-variable-name">x</span>;
    <span class="org-type">GLfloat</span> <span class="org-variable-name">y</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">GLFWwindow</span>* <span class="org-variable-name">window</span>;

    <span class="org-comment-delimiter">/* </span><span class="org-comment">Initialize the library */</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>glfwInit<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-keyword">return</span> -1;

    glutInit<span class="org-rainbow-delimiters-depth-2">(</span>&amp;argc, argv<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">/* </span><span class="org-comment">Create a windowed mode window and its OpenGL context */</span>
    window = glfwCreateWindow<span class="org-rainbow-delimiters-depth-2">(</span>640, 480, <span class="org-string">"Sample 2D Drawing"</span>, <span class="org-constant">NULL</span>, <span class="org-constant">NULL</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>window<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        glfwTerminate<span class="org-rainbow-delimiters-depth-3">()</span>;
        <span class="org-keyword">return</span> -1;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">/* </span><span class="org-comment">Make the window's context current */</span>
    glfwMakeContextCurrent<span class="org-rainbow-delimiters-depth-2">(</span>window<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">glClearColor(0.0f, 0.5f, 0.6f, 1.0f);</span>
    glClearColor<span class="org-rainbow-delimiters-depth-2">(</span>0.0f, 0.0f, 0.0, 1.0f<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">constexpr</span> <span class="org-type">size_t</span> <span class="org-variable-name">NPOINTS</span> = 2000;

    <span class="org-comment-delimiter">//</span><span class="org-comment">------------- Vertex Buffer Object 1 -----------//</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">=&gt; Note: anything vertex should be within the range -1.0 to 1.0 </span>

    <span class="org-type">VertexBufferObject</span> <span class="org-variable-name">vbo_chart</span><span class="org-rainbow-delimiters-depth-2">{}</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Describe layout.</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Each vertex has 2 components (X, Y) of type GL_FLOAT </span>
    vbo_chart.set_data_layout<span class="org-rainbow-delimiters-depth-2">(</span>GL_FLOAT, 2<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">Vertex2D</span>* <span class="org-variable-name">chart</span> = vbo_chart.map_buffer_t<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">Vertex2D</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span> NPOINTS * <span class="org-keyword">sizeof</span><span class="org-rainbow-delimiters-depth-3">(</span>Vertex2D<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">float</span> <span class="org-variable-name">x</span> = 0.0;

    <span class="org-comment-delimiter">//  </span><span class="org-comment">Write data directly on GPU memory without copying any </span>
    <span class="org-comment-delimiter">//  </span><span class="org-comment">pre-allocated buffer on main-memory.</span>
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">size_t</span> <span class="org-variable-name">k</span> = 0; k &lt; NPOINTS; k++<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        x = <span class="org-rainbow-delimiters-depth-3">(</span>k - 1000.0<span class="org-rainbow-delimiters-depth-3">)</span> / 100.0;
        chart<span class="org-rainbow-delimiters-depth-3">[</span>k<span class="org-rainbow-delimiters-depth-3">]</span>.x = x;
        chart<span class="org-rainbow-delimiters-depth-3">[</span>k<span class="org-rainbow-delimiters-depth-3">]</span>.y = sin<span class="org-rainbow-delimiters-depth-3">(</span>x * 10.0<span class="org-rainbow-delimiters-depth-3">)</span> / <span class="org-rainbow-delimiters-depth-3">(</span>1.0 + x * x<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">------------- Triangle / Vertex Buffer Object 2 ------------//</span>
    <span class="org-comment-delimiter">//      </span>

    <span class="org-type">Vertex2D</span> <span class="org-variable-name">triangle_points</span><span class="org-rainbow-delimiters-depth-2">[</span>3<span class="org-rainbow-delimiters-depth-2">]</span> = <span class="org-rainbow-delimiters-depth-2">{</span>
        Vertex2D<span class="org-rainbow-delimiters-depth-3">{</span>-0.25,   -0.25 <span class="org-rainbow-delimiters-depth-3">}</span>
      , Vertex2D<span class="org-rainbow-delimiters-depth-3">{</span> 0.00,    0.25 <span class="org-rainbow-delimiters-depth-3">}</span>
      , Vertex2D<span class="org-rainbow-delimiters-depth-3">{</span> 0.25,   -0.25 <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-type">VertexBufferObject</span> <span class="org-variable-name">vbo_triangle</span><span class="org-rainbow-delimiters-depth-2">{}</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Each vertex has 2 coordinates of type GL_FLOAT </span>
    vbo_triangle.set_data_layout<span class="org-rainbow-delimiters-depth-2">(</span>GL_FLOAT, 2<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Upload data to GPU </span>
    vbo_triangle.send_data<span class="org-rainbow-delimiters-depth-2">(</span>triangle_points, <span class="org-keyword">sizeof</span><span class="org-rainbow-delimiters-depth-3">(</span>triangle_points<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;


    <span class="org-comment-delimiter">// </span><span class="org-comment">---------- Square / Vertex Buffer Object 2 ------------//</span>
    <span class="org-comment-delimiter">//      </span>

    <span class="org-type">Vertex2D</span> <span class="org-variable-name">square_points</span><span class="org-rainbow-delimiters-depth-2">[</span>4<span class="org-rainbow-delimiters-depth-2">]</span> = <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-rainbow-delimiters-depth-3">{</span> -0.3,  -0.3 <span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span> -0.3,   0.3 <span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>  0.3,   0.3 <span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>  0.3,  -0.3 <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">vbo_square</span> = VertexBufferObject<span class="org-rainbow-delimiters-depth-2">{}</span>;
    vbo_square.set_data_layout<span class="org-rainbow-delimiters-depth-2">(</span>GL_FLOAT, 2<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Upload data to GPU </span>
    vbo_square.send_data<span class="org-rainbow-delimiters-depth-2">(</span>square_points, <span class="org-keyword">sizeof</span><span class="org-rainbow-delimiters-depth-3">(</span>square_points<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;


    <span class="org-comment-delimiter">//  </span><span class="org-comment">======= R E N D E R  - L O O P ============//</span>
    <span class="org-comment-delimiter">//</span>
    <span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-negation-char">!</span>glfwWindowShouldClose<span class="org-rainbow-delimiters-depth-3">(</span>window<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        glClear<span class="org-rainbow-delimiters-depth-3">(</span>GL_COLOR_BUFFER_BIT<span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">====== BEGIN RENDERING ============//</span>

        vbo_chart.draw_arrays<span class="org-rainbow-delimiters-depth-3">(</span>GL_LINE_STRIP, NPOINTS<span class="org-rainbow-delimiters-depth-3">)</span>;
        vbo_triangle.draw_arrays<span class="org-rainbow-delimiters-depth-3">(</span>GL_TRIANGLES, 3<span class="org-rainbow-delimiters-depth-3">)</span>;
        vbo_square.draw_arrays<span class="org-rainbow-delimiters-depth-3">(</span>GL_LINE_LOOP, 4<span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">====== END RENDERING ==============//</span>

        <span class="org-comment-delimiter">/* </span><span class="org-comment">Swap front and back buffers */</span>
        glfwSwapBuffers<span class="org-rainbow-delimiters-depth-3">(</span>window<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">/* </span><span class="org-comment">Poll for and process events */</span>
        glfwPollEvents<span class="org-rainbow-delimiters-depth-3">()</span>;

        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, <span class="org-string">'Q'</span> <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
             <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [TRACE] User typed Q =&gt;&gt; Shutdown program. Ok. "</span> &lt;&lt; <span class="org-string">'\n'</span>;
             <span class="org-keyword">break</span>;
        <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    glfwTerminate<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcc82bd0" class="outline-3">
<h3 id="orgcc82bd0"><span class="section-number-3">1.10</span> 2D Graphics - using VAO</h3>
<div class="outline-text-3" id="text-1-10">
<p>
A VAO (Vertex Array Object) is an object that stores all the
information necessary to render a VBO (Vertex Buffer Object). For
instance, a VAO allows rendering the data, by performing the following
set of operations only once: 1 - binding the VAO; 2 - binding the
buffer via glBindBuffer() call; 3 - enabling the vertex attribute via
glEnableVertexAttribArray(); 4 - setting the data layout by calling
glVertexAttribPointer() subroutine. Without a VAO, all those
subroutines would need to be called on every frame rendering.
</p>

<p>
Algorithm for VAO usage: 
</p>

<ul class="org-ul">
<li>Setup</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Shader attribute location </span>
<span class="org-type">GLint</span> <span class="org-variable-name">shader_attr</span> = 1;

<span class="org-comment-delimiter">// </span><span class="org-comment">-------------- Setup VAO --------------------// </span>
<span class="org-comment-delimiter">// </span>
<span class="org-type">GLuint</span> <span class="org-variable-name">vao</span>;
glGenVertexArrays<span class="org-rainbow-delimiters-depth-1">(</span>1, &amp;vao<span class="org-rainbow-delimiters-depth-1">)</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">Instantiate VAO </span>

<span class="org-type">GLuint</span> <span class="org-variable-name">vbo</span>;
glGenBuffers<span class="org-rainbow-delimiters-depth-1">(</span>1, &amp;vbo<span class="org-rainbow-delimiters-depth-1">)</span>;              
<span class="org-comment-delimiter">// </span><span class="org-comment">Bind VBO (Recorded by VAO)</span>
glBindBuffer<span class="org-rainbow-delimiters-depth-1">(</span>GL_ARRAY_BUFFER, vbo<span class="org-rainbow-delimiters-depth-1">)</span>; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Upload data to GPU </span>
glBufferData<span class="org-rainbow-delimiters-depth-1">(</span>GL_ARRAY_BUFFER, buffer_size, buffer, GL_STATIC_DRAW<span class="org-rainbow-delimiters-depth-1">)</span>;  

glEnableVertexAttribArray<span class="org-rainbow-delimiters-depth-1">(</span>shader_attr<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Set buffer data layout (Recorded by VAO)</span>
glVertexAttribPointer<span class="org-rainbow-delimiters-depth-1">(</span>shader_attr, size, type, GL_FALSE, 0, <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">)</span>;    

<span class="org-comment-delimiter">// </span><span class="org-comment">------- Disable Global state ---------// </span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Unbind VAO </span>
glBindVertexArray<span class="org-rainbow-delimiters-depth-1">(</span>0<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Unbind VBO </span>
glBindBuffer<span class="org-rainbow-delimiters-depth-1">(</span>GL_ARRAY_BUFFER, vbo<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Disable current shader attribute </span>
glDisableVertexAttribArray<span class="org-rainbow-delimiters-depth-1">(</span>shader_attr<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<ul class="org-ul">
<li>Rendering loop</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">     ... ...         ... ...         ... ...
     ... ...         ... ...         ... ...      

<span class="org-comment-delimiter">//  </span><span class="org-comment">======= R E N D E R  - L O O P ============//</span>
<span class="org-comment-delimiter">//                                             </span><span class="org-comment">//</span>
<span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-negation-char">!</span>glfwWindowShouldClose<span class="org-rainbow-delimiters-depth-2">(</span>window<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    glClear<span class="org-rainbow-delimiters-depth-2">(</span>GL_COLOR_BUFFER_BIT<span class="org-rainbow-delimiters-depth-2">)</span>;
     ... ...         ... ...         ... ...
     ... ...         ... ...         ... ...

     glBindVertexArray<span class="org-rainbow-delimiters-depth-2">(</span>vao<span class="org-rainbow-delimiters-depth-2">)</span>;
     glDrawArrays<span class="org-rainbow-delimiters-depth-2">(</span>GL_LINE_LOOP, 0, NUMBER_OF_VERTICES<span class="org-rainbow-delimiters-depth-2">)</span>;

     glBindVertexArray<span class="org-rainbow-delimiters-depth-2">(</span>vao1<span class="org-rainbow-delimiters-depth-2">)</span>;
     glDrawArrays<span class="org-rainbow-delimiters-depth-2">(</span>GL_LINE_TRIANGLES, 0, NUMBER_OF_VERTICES_1<span class="org-rainbow-delimiters-depth-2">)</span>;

     glBindVertexArray<span class="org-rainbow-delimiters-depth-2">(</span>vao2<span class="org-rainbow-delimiters-depth-2">)</span>;
     glDrawArrays<span class="org-rainbow-delimiters-depth-2">(</span>GL_LINES, 0, NUMBER_OF_VERTICES_2<span class="org-rainbow-delimiters-depth-2">)</span>;

     ... ...         ... ...         ... ...
     ... ...         ... ...         ... ...

    <span class="org-comment-delimiter">/* </span><span class="org-comment">Swap front and back buffers */</span>
    glfwSwapBuffers<span class="org-rainbow-delimiters-depth-2">(</span>window<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">/* </span><span class="org-comment">Poll for and process events */</span>
    glfwPollEvents<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>


<p>
<b>Further Reading</b> 
</p>

<ul class="org-ul">
<li><a href="https://www.khronos.org/opengl/wiki/Tutorial2:_VAOs,_VBOs,_Vertex_and_Fragment_Shaders_(C_/_SDL)">Tutorial2: VAOs, VBOs, Vertex and Fragment Shaders (C / SDL) - OpenGL Wiki</a></li>

<li><a href="https://android-developers.googleblog.com/2015/10/game-performance-vertex-array-objects.html">Android Developers Blog: Game Performance: Vertex Array Objects</a></li>

<li><a href="https://android-developers.googleblog.com/2015/03/today-we-want-to-share-some-best.html">Android Developers Blog: Game Performance: Layout Qualifiers</a></li>

<li><a href="https://stackoverflow.com/questions/28270954/process-of-setting-up-a-vao-in-opengl">c++ - Process of setting up a VAO in OpenGL - Stack Overflow</a></li>

<li><a href="https://stackoverflow.com/questions/8923174/opengl-vao-best-practices">OpenGL VAO best practices - Stack Overflow</a></li>

<li><a href="https://computergraphics.stackexchange.com/questions/5895/what-is-an-opengl-vao-in-a-nutshell">vertex buffer object - What is an OpenGL VAO in a nutshell?</a>  -
Computer Graphics Stack Exchange</li>

<li><a href="https://gamedev.stackexchange.com/questions/92832/in-opengl-whats-quicker-lots-of-smaller-vaos-or-one-large-one-updated-each-fr">performance - In OpenGL what's quicker</a> - , lots of smaller VAOs,
or one large one updated each frame? - Game Development Stack
Exchange.</li>

<li><a href="https://stackoverflow.com/questions/18485381/opengl-how-many-vaos">OpenGL How Many VAOs - Stack Overflow</a></li>
</ul>


<p>
<b>Screenshot</b> 
</p>


<div class="figure">
<p><a href="images/opengl-draw2-vao.png"><img src="images/opengl-draw2-vao.png" alt="opengl-draw2-vao.png" /></a>
</p>
<p><span class="figure-number">Figure 3: </span>2D OpenGL draw using VAO - Vertex Array Object</p>
</div>

<p>
<b>Sample Code</b> 
</p>

<p>
File: CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.5)
<span class="org-function-name">project</span>(draw2d)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD_REQUIRED ON)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment">#================ GLFW Settings  ===============#</span>

<span class="org-function-name">find_package</span>(OpenGL REQUIRED)

<span class="org-function-name">include</span>(FetchContent)

<span class="org-comment"># Set GLFW Options before FectchContent_MakeAvailable </span>
<span class="org-function-name">set</span>( GLFW_BUILD_EXAMPLES OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )
<span class="org-function-name">set</span>( GLFW_BUILD_TESTS    OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )
<span class="org-function-name">set</span>( GLFW_BUILD_DOCS     OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )
<span class="org-function-name">set</span>( GLFW_BUILD_INSTALL  OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )

<span class="org-comment"># Donwload GLFW library</span>
<span class="org-function-name">FetchContent_Declare</span>(
  glfwlib
  URL   https://github.com/glfw/glfw/releases/download/3.3.2/glfw-3.3.2.zip
)
<span class="org-function-name">FetchContent_MakeAvailable</span>(glfwlib)

       <span class="org-function-name">add_executable</span>( draw2d-vao  draw2d-vao.cpp )
<span class="org-function-name">target_link_libraries</span>( draw2d-vao  glfw OpenGL::GL GLU)
</pre>
</div>

<p>
File: <span class="underline">draw2d-vao.cpp</span> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Draw curve mapping buffer to the GPU.</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">array</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cassert</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">-------- OpenGL headers ---------//</span>
<span class="org-comment-delimiter">//</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">GL_GLEXT_PROTOTYPES</span> 1 <span class="org-comment-delimiter">// </span><span class="org-comment">Necessary for OpenGL &gt;= 3.0 functions</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">GL3_PROTOTYPES</span>      1 <span class="org-comment-delimiter">// </span><span class="org-comment">Necessary for OpenGL &gt;= 3.0 functions</span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GL/gl.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GLFW/glfw3.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">#include &lt;GL/glew.h&gt;</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GL/glu.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GL/glut.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>


<span class="org-keyword">struct</span> <span class="org-type">Vertex2D</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">GLfloat</span> <span class="org-variable-name">x</span>;
    <span class="org-type">GLfloat</span> <span class="org-variable-name">y</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Upload buffer from main memory to GPU VBO </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">=&gt;&gt; Parameters VAO, VBO are allocated by the caller. </span>
<span class="org-type">void</span> <span class="org-function-name">send_buffer</span><span class="org-rainbow-delimiters-depth-1">(</span>   <span class="org-type">GLuint</span>* <span class="org-variable-name">pVao</span>        <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to VAO (Vertex Array Object) - allocated by caller </span>
                  , <span class="org-type">GLuint</span>* <span class="org-variable-name">pVbo</span>        <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to VBO (Vertex Buffer Object) - allocated by caller</span>
                  , <span class="org-type">GLsizei</span> <span class="org-variable-name">sizeBuffer</span>  <span class="org-comment-delimiter">// </span><span class="org-comment">Total buffer size in bytes</span>
                  , <span class="org-type">void</span>*   <span class="org-variable-name">pBufffer</span>    <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to buffer </span>
                  , <span class="org-type">GLint</span>   <span class="org-variable-name">shader_attr</span> <span class="org-comment-delimiter">// </span><span class="org-comment">Shader attribute location </span>
                  , <span class="org-type">GLint</span>   <span class="org-variable-name">size</span>        <span class="org-comment-delimiter">// </span><span class="org-comment">Number of coordinates of a given vertex                  </span>
                  , <span class="org-type">GLenum</span>  <span class="org-variable-name">type</span>        <span class="org-comment-delimiter">// </span><span class="org-comment">Type of each element coordinate </span>
                  <span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-type">void</span>* <span class="org-function-name">map_buffer</span><span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-type">GLuint</span>* <span class="org-variable-name">pVao</span>         <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to VAO - allocated by calling code.</span>
                , <span class="org-type">GLuint</span>* <span class="org-variable-name">pVbo</span>         <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to VBO - allocated by calling code.</span>
                , <span class="org-type">GLsizei</span> <span class="org-variable-name">data_size</span>    <span class="org-comment-delimiter">// </span><span class="org-comment">Total size in bytes that is allocated to buffer </span>
                , <span class="org-type">GLint</span>   <span class="org-variable-name">shader_attr</span>  <span class="org-comment-delimiter">// </span><span class="org-comment">Shadder attribute location id (0 - zero) is there is no shader.</span>
                , <span class="org-type">GLint</span>   <span class="org-variable-name">size</span>         <span class="org-comment-delimiter">// </span><span class="org-comment">Number of component of each vertex </span>
                , <span class="org-type">GLenum</span>  <span class="org-variable-name">type</span>         <span class="org-comment-delimiter">// </span><span class="org-comment">Type of each vertex element </span>
                <span class="org-rainbow-delimiters-depth-1">)</span>;


<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">GLFWwindow</span>* <span class="org-variable-name">window</span>;

    <span class="org-comment-delimiter">/* </span><span class="org-comment">Initialize the library */</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>glfwInit<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-keyword">return</span> -1;

    glutInit<span class="org-rainbow-delimiters-depth-2">(</span>&amp;argc, argv<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">/* </span><span class="org-comment">Create a windowed mode window and its OpenGL context */</span>
    window = glfwCreateWindow<span class="org-rainbow-delimiters-depth-2">(</span>640, 480, <span class="org-string">"2D Drawing using VAO"</span>, <span class="org-constant">NULL</span>, <span class="org-constant">NULL</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>window<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        glfwTerminate<span class="org-rainbow-delimiters-depth-3">()</span>;
        <span class="org-keyword">return</span> -1;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">/* </span><span class="org-comment">Make the window's context current */</span>
    glfwMakeContextCurrent<span class="org-rainbow-delimiters-depth-2">(</span>window<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">glClearColor(0.0f, 0.5f, 0.6f, 1.0f);</span>
    glClearColor<span class="org-rainbow-delimiters-depth-2">(</span>0.0f, 0.0f, 0.0, 1.0f<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Shader attribute location (default 0)</span>
    <span class="org-type">GLint</span> <span class="org-variable-name">shader_attr</span> = 0;


    <span class="org-comment-delimiter">// </span><span class="org-comment">================ Square / Vertex Buffer Object 2 ==================//</span>
    <span class="org-comment-delimiter">//      </span>

    <span class="org-type">Vertex2D</span> <span class="org-variable-name">square_points</span><span class="org-rainbow-delimiters-depth-2">[</span>4<span class="org-rainbow-delimiters-depth-2">]</span> = <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-rainbow-delimiters-depth-3">{</span> -0.3,  -0.3 <span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span> -0.3,   0.3 <span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>  0.3,   0.3 <span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>  0.3,  -0.3 <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-type">GLuint</span> <span class="org-variable-name">vao_square</span> = 0; 
    <span class="org-type">GLuint</span> <span class="org-variable-name">vbo_square</span> = 0;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Upload square_points buffer data to GPU </span>
    send_buffer<span class="org-rainbow-delimiters-depth-2">(</span> &amp;vao_square, &amp;vbo_square, <span class="org-keyword">sizeof</span><span class="org-rainbow-delimiters-depth-3">(</span>square_points<span class="org-rainbow-delimiters-depth-3">)</span>
                , square_points, shader_attr, 2, GL_FLOAT <span class="org-rainbow-delimiters-depth-2">)</span>;

    assert<span class="org-rainbow-delimiters-depth-2">(</span> vao_square != 0 <span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span> vbo_square != 0 <span class="org-rainbow-delimiters-depth-2">)</span>;    

    <span class="org-constant">std</span>::fprintf<span class="org-rainbow-delimiters-depth-2">(</span> stderr, <span class="org-string">" [TRACE] vao_square = %d, vbo_square = %d \n"</span>
                 , vao_square, vbo_square<span class="org-rainbow-delimiters-depth-2">)</span>;


    <span class="org-comment-delimiter">// </span><span class="org-comment">============== Circle / Vertex Buffer Object 3 ==================//</span>
    <span class="org-comment-delimiter">//      </span>
    <span class="org-type">GLuint</span> <span class="org-variable-name">vao_circle</span> = 0; 
    <span class="org-type">GLuint</span> <span class="org-variable-name">vbo_circle</span> = 0;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Number of vertices to used to render the circle. </span>
    <span class="org-keyword">constexpr</span> <span class="org-type">size_t</span> <span class="org-variable-name">N_CIRCLE</span> = 100;
    <span class="org-keyword">constexpr</span> <span class="org-type">float</span>  <span class="org-variable-name">PI</span>       = 3.1415927;
    <span class="org-keyword">const</span>     <span class="org-type">float</span>  <span class="org-variable-name">radius</span>   = 0.75;

    <span class="org-comment-delimiter">// </span><span class="org-comment">C-style cast should not be used here </span>
    <span class="org-type">Vertex2D</span>* <span class="org-variable-name">pCursor</span> = <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Vertex2D</span>*<span class="org-rainbow-delimiters-depth-2">)</span> map_buffer<span class="org-rainbow-delimiters-depth-2">(</span> &amp;vao_circle, &amp;vbo_circle, <span class="org-type">N_CIRCLE</span> * <span class="org-keyword">sizeof</span><span class="org-rainbow-delimiters-depth-3">(</span>Vertex2D<span class="org-rainbow-delimiters-depth-3">)</span>
                                              , shader_attr, 2, GL_FLOAT <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">float</span> <span class="org-variable-name">angle</span> = 0.0;
    <span class="org-keyword">const</span> <span class="org-type">float</span> <span class="org-variable-name">step</span> = 2 * PI / N_CIRCLE;

    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">size_t</span> <span class="org-variable-name">n</span> = 0; n &lt; N_CIRCLE; n++<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        pCursor<span class="org-rainbow-delimiters-depth-3">[</span>n<span class="org-rainbow-delimiters-depth-3">]</span>.x = radius * cosf<span class="org-rainbow-delimiters-depth-3">(</span> angle <span class="org-rainbow-delimiters-depth-3">)</span>;
        pCursor<span class="org-rainbow-delimiters-depth-3">[</span>n<span class="org-rainbow-delimiters-depth-3">]</span>.y = radius * sinf<span class="org-rainbow-delimiters-depth-3">(</span> angle <span class="org-rainbow-delimiters-depth-3">)</span>;
        angle = angle + step;
    <span class="org-rainbow-delimiters-depth-2">}</span>


    <span class="org-comment-delimiter">//  </span><span class="org-comment">======= R E N D E R  - L O O P ============//</span>
    <span class="org-comment-delimiter">//                                             </span><span class="org-comment">//</span>
    <span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-negation-char">!</span>glfwWindowShouldClose<span class="org-rainbow-delimiters-depth-3">(</span>window<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        glClear<span class="org-rainbow-delimiters-depth-3">(</span>GL_COLOR_BUFFER_BIT<span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">====== BEGIN RENDERING ============//</span>

            <span class="org-comment-delimiter">//</span><span class="org-comment">------------ Draw Square -------------------------//</span>
            <span class="org-comment-delimiter">//            </span>
             glBindVertexArray<span class="org-rainbow-delimiters-depth-3">(</span>vao_square<span class="org-rainbow-delimiters-depth-3">)</span>;
            <span class="org-comment-delimiter">// </span><span class="org-comment">Plot 4 vertices </span>
            glDrawArrays<span class="org-rainbow-delimiters-depth-3">(</span>GL_LINE_LOOP, 0, 4<span class="org-rainbow-delimiters-depth-3">)</span>;
            <span class="org-comment-delimiter">// </span><span class="org-comment">Unbind vao (restore global state to default value)</span>
            glBindVertexArray<span class="org-rainbow-delimiters-depth-3">(</span>0<span class="org-rainbow-delimiters-depth-3">)</span>;

            <span class="org-comment-delimiter">//</span><span class="org-comment">------------ Draw Circle -------------------------//</span>
            <span class="org-comment-delimiter">//            </span>
            glBindVertexArray<span class="org-rainbow-delimiters-depth-3">(</span>vao_circle<span class="org-rainbow-delimiters-depth-3">)</span>;
            glDrawArrays<span class="org-rainbow-delimiters-depth-3">(</span>GL_LINE_LOOP, 0, N_CIRCLE<span class="org-rainbow-delimiters-depth-3">)</span>;
            glBindVertexArray<span class="org-rainbow-delimiters-depth-3">(</span>0<span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">====== END RENDERING ==============//</span>

        <span class="org-comment-delimiter">/* </span><span class="org-comment">Swap front and back buffers */</span>
        glfwSwapBuffers<span class="org-rainbow-delimiters-depth-3">(</span>window<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">/* </span><span class="org-comment">Poll for and process events */</span>
        glfwPollEvents<span class="org-rainbow-delimiters-depth-3">()</span>;

        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, <span class="org-string">'Q'</span> <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
             <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [TRACE] User typed Q =&gt;&gt; Shutdown program. Ok. "</span> &lt;&lt; <span class="org-string">'\n'</span>;
             <span class="org-keyword">break</span>;
        <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">---------- Dispose Buffer Objects ---------// </span>
    glDeleteBuffers<span class="org-rainbow-delimiters-depth-2">(</span>1, &amp;vbo_square<span class="org-rainbow-delimiters-depth-2">)</span>;
    glDeleteBuffers<span class="org-rainbow-delimiters-depth-2">(</span>1, &amp;vbo_circle<span class="org-rainbow-delimiters-depth-2">)</span>;

    glfwTerminate<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">---------- I M P L E M E N T A T I O N S ------------------// </span>
<span class="org-comment-delimiter">//                                                            </span><span class="org-comment">// </span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Upload buffer from main memory to GPU VBO </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">=&gt;&gt; Parameters VAO, VBO are allocated by the caller. </span>
<span class="org-type">void</span> <span class="org-function-name">send_buffer</span><span class="org-rainbow-delimiters-depth-1">(</span>   <span class="org-type">GLuint</span>* <span class="org-variable-name">pVao</span>        <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to VAO (Vertex Array Object) - allocated by caller </span>
                  , <span class="org-type">GLuint</span>* <span class="org-variable-name">pVbo</span>        <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to VBO (Vertex Buffer Object) - allocated by caller</span>
                  , <span class="org-type">GLsizei</span> <span class="org-variable-name">sizeBuffer</span>  <span class="org-comment-delimiter">// </span><span class="org-comment">Total buffer size in bytes</span>
                  , <span class="org-type">void</span>*   <span class="org-variable-name">pBufffer</span>    <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to buffer </span>
                  , <span class="org-type">GLint</span>   <span class="org-variable-name">shader_attr</span> <span class="org-comment-delimiter">// </span><span class="org-comment">Shader attribute location id </span>
                  , <span class="org-type">GLint</span>   <span class="org-variable-name">size</span>        <span class="org-comment-delimiter">// </span><span class="org-comment">Number of coordinates of a given vertex</span>
                  , <span class="org-type">GLenum</span>  <span class="org-variable-name">type</span>        <span class="org-comment-delimiter">// </span><span class="org-comment">Type of each element coordinate                   </span>
                  <span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    assert<span class="org-rainbow-delimiters-depth-2">(</span>pVao != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span>pVbo != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">GLuint</span>&amp; <span class="org-variable-name">vao</span> = *pVao;
    <span class="org-type">GLuint</span>&amp; <span class="org-variable-name">vbo</span> = *pVbo;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Generate and bind current VAO (Vertex Array Object)</span>
    glGenVertexArrays<span class="org-rainbow-delimiters-depth-2">(</span>1, &amp;vao<span class="org-rainbow-delimiters-depth-2">)</span>;
    glBindVertexArray<span class="org-rainbow-delimiters-depth-2">(</span>vao<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Generate and bind current VBO (Vertex Buffer Object)</span>
    glGenBuffers<span class="org-rainbow-delimiters-depth-2">(</span>1, &amp;vbo<span class="org-rainbow-delimiters-depth-2">)</span>;
    glBindBuffer<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, vbo<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Upload data to current VBO buffer in GPU </span>
    glBufferData<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, sizeBuffer, pBufffer, GL_STATIC_DRAW<span class="org-rainbow-delimiters-depth-2">)</span>;   

    glEnableVertexAttribArray<span class="org-rainbow-delimiters-depth-2">(</span>shader_attr<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Set data layout - how data will be interpreted.</span>
    glVertexAttribPointer<span class="org-rainbow-delimiters-depth-2">(</span>shader_attr, size, type, GL_FALSE, 0, <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">------ Disable Global state set by this function -----//</span>
    <span class="org-comment-delimiter">// </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Unbind VAO </span>
    glBindVertexArray<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Unbind VBO </span>
    glBindBuffer<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, vbo<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Disable current shader attribute </span>
    glDisableVertexAttribArray<span class="org-rainbow-delimiters-depth-2">(</span>shader_attr<span class="org-rainbow-delimiters-depth-2">)</span>;

<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span>* <span class="org-function-name">map_buffer</span><span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-type">GLuint</span>* <span class="org-variable-name">pVao</span>         <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to VAO - allocated by calling code.</span>
                , <span class="org-type">GLuint</span>* <span class="org-variable-name">pVbo</span>         <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to VBO - allocated by calling code.</span>
                , <span class="org-type">GLsizei</span> <span class="org-variable-name">data_size</span>    <span class="org-comment-delimiter">// </span><span class="org-comment">Total size in bytes that is allocated to buffer </span>
                , <span class="org-type">GLint</span>   <span class="org-variable-name">shader_attr</span>  <span class="org-comment-delimiter">// </span><span class="org-comment">Shadder attribute location id (0 - zero) is there is no shader.</span>
                , <span class="org-type">GLint</span>   <span class="org-variable-name">size</span>         <span class="org-comment-delimiter">// </span><span class="org-comment">Number of component of each vertex </span>
                , <span class="org-type">GLenum</span>  <span class="org-variable-name">type</span>         <span class="org-comment-delimiter">// </span><span class="org-comment">Type of each vertex element </span>
                <span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">GLuint</span>&amp; <span class="org-variable-name">vao</span> = *pVao;
    <span class="org-type">GLuint</span>&amp; <span class="org-variable-name">vbo</span> = *pVbo;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Generate and bind current VAO (Vertex Array Object)</span>
    glGenVertexArrays<span class="org-rainbow-delimiters-depth-2">(</span>1, &amp;vao<span class="org-rainbow-delimiters-depth-2">)</span>;
    glBindVertexArray<span class="org-rainbow-delimiters-depth-2">(</span>vao<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Generate and bind current VBO (Vertex Buffer Object)</span>
    glGenBuffers<span class="org-rainbow-delimiters-depth-2">(</span>1, &amp;vbo<span class="org-rainbow-delimiters-depth-2">)</span>;
    glBindBuffer<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, vbo<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">/** </span><span class="org-comment">See: https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glMapBuffer.xhtml</span>
<span class="org-comment">     *  Khronos Group: "glMapBuffer and glMapNamedBuffer map the entire data store of </span>
<span class="org-comment">     *  a specified buffer object into the client's address space. The data can then be directly </span>
<span class="org-comment">     *  read and/or written relative to the returned pointer, </span>
<span class="org-comment">     *  depending on the specified access policy."</span>
<span class="org-comment">     */</span>
    glBufferData<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, data_size, <span class="org-constant">nullptr</span>, GL_STATIC_DRAW<span class="org-rainbow-delimiters-depth-2">)</span>;   
    <span class="org-type">void</span>* <span class="org-variable-name">pbuffer</span> = glMapBuffer<span class="org-rainbow-delimiters-depth-2">(</span> GL_ARRAY_BUFFER, GL_WRITE_ONLY <span class="org-rainbow-delimiters-depth-2">)</span>;

    glEnableVertexAttribArray<span class="org-rainbow-delimiters-depth-2">(</span>shader_attr<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Set data layout - how data will be interpreted.</span>
    glVertexAttribPointer<span class="org-rainbow-delimiters-depth-2">(</span>shader_attr, size, type, GL_FALSE, 0, <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;    

    <span class="org-comment-delimiter">// </span><span class="org-comment">------ Disable Global state set by this function -----//</span>
    <span class="org-comment-delimiter">// </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Unbind VAO </span>
    glBindVertexArray<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Unbind VBO </span>
    glBindBuffer<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, vbo<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Disable current shader attribute </span>
    glDisableVertexAttribArray<span class="org-rainbow-delimiters-depth-2">(</span>shader_attr<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">------- Return --------------------------------------//</span>
    <span class="org-keyword">return</span> pbuffer;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org277a55c" class="outline-3">
<h3 id="org277a55c"><span class="section-number-3">1.11</span> 2D Graphics - using shaders</h3>
<div class="outline-text-3" id="text-1-11">
<p>
OpenGL retained mode (programmable pipeline) uses shaders, which are
programs that uses GLSL (OpenGL shading language) programming
language, runs on the GPU (Graphics Processing Unit). A vertex shader
performs vertex coordinate transformations on all vertices and colors
received from VBO - Vertex Buffer Objects. The fragment shader runs
after the vertex shader and deals with vertice texture and color
computations.
</p>

<p>
A vertex shader has the following features: 
</p>

<ul class="org-ul">
<li>Data types:
<ul class="org-ul">
<li>float =&gt; Float IEEE754 32 bits floating point scalar.</li>
<li>vec2 =&gt; Vector of 2 coordinates</li>
<li>vec3 =&gt; Vector of 3 coordinates</li>
<li>vec4 =&gt; Vector of 4 coordinates</li>
<li>mat2 =&gt; 2x2 matrix</li>
<li>mat4 =&gt; 4x4 homogeneous coordinate matrix</li>
<li>mat3 =&gt; 3x3 matrix</li>
</ul></li>

<li><span class="underline">uniform variables</span> =&gt; Shader variables declared with <span class="underline">uniform</span> storage
qualifier. They allow passing data, such as transformation
matrices, vectors or scalar values, from the C++-side to the shader
program. Uniform variables can be used for passing the model matrix,
camera matrix and projection matrix to the shader.
<ul class="org-ul">
<li>Declaration example: 'uniform mat4 u_model;'</li>
</ul></li>

<li><span class="underline">attribute variables</span> =&gt; Used for passing vertices or color
coordinates from VBOs (Vertex Buffer Objects). Those variables are
only accessible in the shader.
<ul class="org-ul">
<li>Declaration example: 'layout ( location = 2)  in vec2 position;'</li>
</ul></li>

<li><span class="underline">Output</span> =&gt; Shader programs uses pre-defined global variables for
output, for instance, <span class="underline">gl_Position</span>, which sets the current vertex
position in clip-space (NDC - Normalized Device Coordinates).</li>
</ul>



<p>
<b>Documentation</b>
</p>

<ul class="org-ul">
<li><a href="https://www.khronos.org/opengl/wiki/Core_Language_(GLSL)">Core Language (GLSL) - OpenGL Wiki</a> / Khronos Group.
<ul class="org-ul">
<li>Syntax of GLSL (OpenGL shading language)</li>
</ul></li>

<li><a href="https://www.khronos.org/opengl/wiki/Data_Type_(GLSL)">Data Type (GLSL) - OpenGL Wiki</a> / Khronos Group</li>

<li><a href="https://en.wikipedia.org/wiki/OpenGL_Shading_Language">OpenGL Shading Language - Wikipedia</a></li>

<li><a href="https://www.khronos.org/opengl/wiki/Shader">Shader - OpenGL Wiki</a> / Khronos Group</li>

<li><a href="https://www.khronos.org/opengl/wiki/Vertex_Shader">Vertex Shader - OpenGL Wiki</a> / Khronos Group</li>

<li><a href="https://www.khronos.org/opengl/wiki/Fragment_Shader">Fragment Shader - OpenGL Wiki</a> / Khronos Group</li>

<li><a href="https://www.khronos.org/opengl/wiki/Uniform_(GLSL)">Uniform (GLSL) - OpenGL Wiki</a> / Khronos Group
<ul class="org-ul">
<li>Discusses shader uniform variables.</li>
</ul></li>

<li><a href="https://www.khronos.org/opengl/wiki/Layout_Qualifier_(GLSL)">Layout Qualifier (GLSL) - OpenGL Wiki</a> / Khronos Group
<ul class="org-ul">
<li>Shader attribute index (attribute location)</li>
</ul></li>

<li><a href="https://www.khronos.org/opengl/wiki/Geometry_Shader">Geometry Shader - OpenGL Wiki</a> / Khronos Group.</li>

<li><a href="https://www.khronos.org/opengl/wiki/Shader_Compilation">Shader Compilation - OpenGL Wiki</a> / Khronos Group.</li>

<li><a href="https://www.khronos.org/opengl/wiki/Vertex_Rendering">Vertex Rendering - OpenGL Wiki</a></li>

<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Data">Data in WebGL - Web APIs | MDN</a> / Mozilla 
<ul class="org-ul">
<li>Explanation of shader's attribute variables and shader's uniform
variables.</li>
</ul></li>
</ul>

<p>
<b>Source Code</b>  
</p>

<p>
Summary:
</p>

<ul class="org-ul">
<li>This sample application, draws many 4 triangles from a 2 VBO
(Vertex Buffer Object) and a single VAO (Vertex Array Object). The
application uses a vertex shader for performing coordinate
transformation for every triangle and drawing them at different
position with different rotation angles around Z axis. The triangle
'triangleD' follows the mouse position while the triangle
'triangleB' rotates acoording to the mouse position.</li>

<li>The vertex shader has two attributes variables ('position' and
'color') and two uniform variables u_model, that contains the model
matrix from every rendered object, and u_projection, which contains
the projection matrix.</li>
</ul>

<p>
Screenshot: 
</p>


<div class="figure">
<p><a href="images/opengl-draw2d-shader.png"><img src="images/opengl-draw2d-shader.png" alt="opengl-draw2d-shader.png" /></a>
</p>
</div>


<p>
<span class="underline">Vertex Shader</span> - Source Code (Extraced from <span class="underline">draw2d-shader.cpp</span>)
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#version</span> 330 core 

<span class="org-comment-delimiter">// </span><span class="org-comment">Supplied by GPU - attribute location (id = 2) </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">contains a (X, Y) vertex</span>
layout <span class="org-rainbow-delimiters-depth-1">(</span> location = 2<span class="org-rainbow-delimiters-depth-1">)</span>  in <span class="org-type">vec2</span> <span class="org-variable-name">position</span>;
layout <span class="org-rainbow-delimiters-depth-1">(</span> location = 1 <span class="org-rainbow-delimiters-depth-1">)</span> in <span class="org-type">vec3</span> <span class="org-variable-name">color</span>;     <span class="org-comment-delimiter">// </span><span class="org-comment">Contains (Red, Green, Blue) components</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Output to fragment shader </span>
out <span class="org-type">vec3</span> <span class="org-variable-name">out_color</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Model matrix =&gt; projection coordinates from the local space (model space)</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">to view space .</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Transform 4x4 matrix - supplied by the C++ side. </span>
uniform <span class="org-type">mat4</span> <span class="org-variable-name">u_model</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Projection matrix =&gt; projections camera-space coordinates </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">to clip-space coordinates. (-1.0 to 1.0) range.</span>
uniform <span class="org-type">mat4</span> <span class="org-variable-name">u_projection</span>;

<span class="org-type">void</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">gl_Position =&gt; Global output variable that holds the </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">the current vertex position. It is a vector of </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">components (X, Y, Z = 0, W = ignored)</span>
    gl_Position = u_projection * u_model * vec4<span class="org-rainbow-delimiters-depth-2">(</span>position, 0, 1.0<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Forward to fragment shader </span>
    out_color = color;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<span class="underline">Fragment Shader</span> -  Source Code (Extracted from <span class="underline">draw2d-shader.cpp</span>)
</p>


<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#version</span> 330 

<span class="org-comment-delimiter">// </span><span class="org-comment">This color comes from Vertex shader </span>
in <span class="org-type">vec3</span> <span class="org-variable-name">out_color</span>;

<span class="org-type">void</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Set vertex colors</span>
    gl_FragColor = vec4<span class="org-rainbow-delimiters-depth-2">(</span>out_color, 1.0<span class="org-rainbow-delimiters-depth-2">)</span>;

<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
File: <span class="underline">CMakeLists.txt</span>
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.5)
<span class="org-function-name">project</span>(GLFW_project)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD_REQUIRED ON)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment">#================ GLFW Settings  ===============#</span>

<span class="org-function-name">find_package</span>(OpenGL REQUIRED)

<span class="org-function-name">include</span>(FetchContent)

<span class="org-comment"># Set GLFW Options before FectchContent_MakeAvailable </span>
<span class="org-function-name">set</span>( GLFW_BUILD_EXAMPLES OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )
<span class="org-function-name">set</span>( GLFW_BUILD_TESTS    OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )
<span class="org-function-name">set</span>( GLFW_BUILD_DOCS     OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )
<span class="org-function-name">set</span>( GLFW_BUILD_INSTALL  OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )

<span class="org-comment"># Donwload GLFW library</span>
<span class="org-function-name">FetchContent_Declare</span>(
  glfwlib
  URL   https://github.com/glfw/glfw/releases/download/3.3.2/glfw-3.3.2.zip
)
<span class="org-function-name">FetchContent_MakeAvailable</span>(glfwlib)

<span class="org-comment"># Download GLM (OpenGL math library for matrix and vectors transformation)</span>
<span class="org-function-name">FetchContent_Declare</span>(
  glm  
  URL  https://github.com/g-truc/glm/archive/0.9.8.zip
)
<span class="org-function-name">FetchContent_MakeAvailable</span>(glm)

<span class="org-function-name">message</span>( [DEBUG] <span class="org-string">" glm_SOURCE_DIR = ${</span><span class="org-variable-name">glm_SOURCE_DIR</span><span class="org-string">} "</span>)
<span class="org-function-name">include_directories</span>(${<span class="org-variable-name">glm_SOURCE_DIR</span>})

  <span class="org-comment"># ======= TARGETS ===========================#</span>

       <span class="org-function-name">add_executable</span>( draw2d-shader  draw2d-shader.cpp   )
<span class="org-function-name">target_link_libraries</span>( draw2d-shader  glfw OpenGL::GL GLU )
</pre>
</div>

<p>
File: <span class="underline">draw2d-shader.cpp</span> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Draw many colored triangles from a single VBO (Vertex Buffer Object)</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">array</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">-------- OpenGL headers ---------//</span>
<span class="org-comment-delimiter">//</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">GL_GLEXT_PROTOTYPES</span> 1 <span class="org-comment-delimiter">// </span><span class="org-comment">Necessary for OpenGL &gt;= 3.0 functions</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">GL3_PROTOTYPES</span>      1 <span class="org-comment-delimiter">// </span><span class="org-comment">Necessary for OpenGL &gt;= 3.0 functions</span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GL/gl.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GLFW/glfw3.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">#include &lt;GL/glew.h&gt;</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GL/glu.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">--------- OpenGL Math Librar ------------//</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">glm/glm.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">glm/gtc/matrix_transform.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">glm/gtc/type_ptr.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">glm/gtx/string_cast.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Compile some  shader </span>
<span class="org-type">void</span> <span class="org-function-name">compile_shader</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">GLuint</span> <span class="org-variable-name">m_program</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">code</span>, <span class="org-type">GLenum</span> <span class="org-variable-name">type</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Send data from memory to GPU VBO memory </span>
<span class="org-type">void</span> <span class="org-function-name">send_buffer</span><span class="org-rainbow-delimiters-depth-1">(</span>   <span class="org-type">GLuint</span>* <span class="org-variable-name">pVao</span>        <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to VAO (Vertex Array Object) - allocated by caller </span>
                  , <span class="org-type">GLuint</span>* <span class="org-variable-name">pVbo</span>        <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to VBO (Vertex Buffer Object) - allocated by caller</span>
                  , <span class="org-type">GLsizei</span> <span class="org-variable-name">sizeBuffer</span>  <span class="org-comment-delimiter">// </span><span class="org-comment">Total buffer size in bytes</span>
                  , <span class="org-type">void</span>*   <span class="org-variable-name">pBufffer</span>    <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to buffer </span>
                  , <span class="org-type">GLint</span>   <span class="org-variable-name">shader_attr</span> <span class="org-comment-delimiter">// </span><span class="org-comment">Shader attribute location id </span>
                  , <span class="org-type">GLint</span>   <span class="org-variable-name">size</span>        <span class="org-comment-delimiter">// </span><span class="org-comment">Number of coordinates of a given vertex</span>
                  , <span class="org-type">GLenum</span>  <span class="org-variable-name">type</span>        <span class="org-comment-delimiter">// </span><span class="org-comment">Type of each element coordinate                   </span>
                  <span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">------------ Basic Data Structures -----------// </span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Wrapper for 2D vertex coordinates </span>
<span class="org-keyword">struct</span> <span class="org-type">Vertex2D</span><span class="org-rainbow-delimiters-depth-1">{</span>  <span class="org-type">GLfloat</span> <span class="org-variable-name">x</span>, <span class="org-variable-name">y</span>;  <span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Wrapper for RGB colors </span>
<span class="org-keyword">struct</span> <span class="org-type">ColorRGB</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-type">GLfloat</span> <span class="org-variable-name">r</span>, <span class="org-variable-name">g</span>, <span class="org-variable-name">b</span>; <span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">constexpr</span> <span class="org-type">ColorRGB</span> <span class="org-variable-name">COLOR_R</span> = <span class="org-rainbow-delimiters-depth-1">{</span> 1.0, 0.0, 0.0  <span class="org-rainbow-delimiters-depth-1">}</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">Red </span>
<span class="org-keyword">constexpr</span> <span class="org-type">ColorRGB</span> <span class="org-variable-name">COLOR_G</span> = <span class="org-rainbow-delimiters-depth-1">{</span> 0.0, 1.0, 0.0  <span class="org-rainbow-delimiters-depth-1">}</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">Green </span>
<span class="org-keyword">constexpr</span> <span class="org-type">ColorRGB</span> <span class="org-variable-name">COLOR_B</span> = <span class="org-rainbow-delimiters-depth-1">{</span> 0.0, 0.0, 1.0  <span class="org-rainbow-delimiters-depth-1">}</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">Blue </span>


<span class="org-keyword">class</span> <span class="org-type">Model_Triangle</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Object position in World Coordinates</span>
    <span class="org-type">float</span> <span class="org-variable-name">_x</span> = 0.0, <span class="org-variable-name">_y</span> = 0.0; 
    <span class="org-comment-delimiter">// </span><span class="org-comment">Scale </span>
    <span class="org-type">float</span> <span class="org-variable-name">_scale</span> = 1.0;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Rotation angle around z axis</span>
    <span class="org-type">float</span> <span class="org-variable-name">_angle</span> = 0.0;

<span class="org-function-name">public</span>:
    <span class="org-function-name">Model_Triangle</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">scale</span> = 1.0<span class="org-rainbow-delimiters-depth-2">){</span>   <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">void</span> <span class="org-function-name">rotate</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">angle</span><span class="org-rainbow-delimiters-depth-2">)</span>          <span class="org-rainbow-delimiters-depth-2">{</span> _angle = angle; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">void</span> <span class="org-function-name">translate</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">x</span> , <span class="org-type">float</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span> _x = x; _y = y; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">void</span> <span class="org-function-name">scale</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">scale</span><span class="org-rainbow-delimiters-depth-2">)</span>           <span class="org-rainbow-delimiters-depth-2">{</span> _scale = scale; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">void</span> <span class="org-function-name">zoom</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">factor</span><span class="org-rainbow-delimiters-depth-2">)</span>           <span class="org-rainbow-delimiters-depth-2">{</span>  _scale = factor + _scale; <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Render/draw this object </span>
    <span class="org-type">void</span> <span class="org-function-name">render</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">GLuint</span> <span class="org-variable-name">vao</span>, <span class="org-type">GLint</span>  <span class="org-variable-name">u_model</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">Reset model matrix to indentiy matrix </span>
        <span class="org-constant">glm</span>::<span class="org-type">mat4</span> <span class="org-variable-name">_model</span><span class="org-rainbow-delimiters-depth-3">(</span>1.0<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Scale object (increase or decrease object size)</span>
        _model =  <span class="org-constant">glm</span>::scale<span class="org-rainbow-delimiters-depth-3">(</span> _model, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-4">(</span>_scale, _scale, _scale<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Move to (X, Y) position </span>
        _model = <span class="org-constant">glm</span>::translate<span class="org-rainbow-delimiters-depth-3">(</span> _model, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-4">(</span>_x, _y, 0.0<span class="org-rainbow-delimiters-depth-4">)</span>  <span class="org-rainbow-delimiters-depth-3">)</span>; 
        <span class="org-comment-delimiter">// </span><span class="org-comment">Rotate from a given angle around Z axis at current object X, Y  postion</span>
        _model = <span class="org-constant">glm</span>::rotate<span class="org-rainbow-delimiters-depth-3">(</span> _model, <span class="org-constant">glm</span>::<span class="org-type">radians</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">_angle</span><span class="org-rainbow-delimiters-depth-4">)</span>, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-4">(</span>0, 0, 1<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Set shader uniform variable.</span>
        glUniformMatrix4fv<span class="org-rainbow-delimiters-depth-3">(</span> 
            <span class="org-comment-delimiter">// </span><span class="org-comment">Shader uniform variable location </span>
            u_model  
            <span class="org-comment-delimiter">// </span><span class="org-comment">Number of matrices that will be set </span>
            , 1
            <span class="org-comment-delimiter">// </span><span class="org-comment">GL_FALSE =&gt; Matrix is in column-major order (Fortran matrix layout)</span>
            <span class="org-comment-delimiter">// </span><span class="org-comment">GL_TRUE  =&gt; Matrix is in row-major order (C, C++ array, matrix layout)</span>
            , GL_FALSE
            <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to first element transform matrix (homogeneous coordinate)</span>
            , <span class="org-constant">glm</span>::<span class="org-type">value_ptr</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">_model</span><span class="org-rainbow-delimiters-depth-4">)</span> 
        <span class="org-rainbow-delimiters-depth-3">)</span>;
        glBindVertexArray<span class="org-rainbow-delimiters-depth-3">(</span>vao<span class="org-rainbow-delimiters-depth-3">)</span>;        
        <span class="org-comment-delimiter">// </span><span class="org-comment">Draw 3 vertices </span>
        glDrawArrays<span class="org-rainbow-delimiters-depth-3">(</span>GL_TRIANGLES, 0, 3<span class="org-rainbow-delimiters-depth-3">)</span>;        
        <span class="org-comment-delimiter">// </span><span class="org-comment">Disable global state </span>
        glBindVertexArray<span class="org-rainbow-delimiters-depth-3">(</span>0<span class="org-rainbow-delimiters-depth-3">)</span>;        
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;


<span class="org-comment-delimiter">// </span><span class="org-comment">Global variable [WARNING] - Vulnerable to global "initialization fiasco" </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">undefined behavior.</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">Cursor_Callback</span> = <span class="org-constant">std</span>::function<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">GLFWwindow</span>* <span class="org-variable-name">window</span>, <span class="org-type">double</span> <span class="org-variable-name">xpos</span>, <span class="org-type">double</span> <span class="org-variable-name">ypos</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;()</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>

    <span class="org-comment-delimiter">/* </span><span class="org-comment">Initialize the library */</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>glfwInit<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> -1; <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">OpenGL Core Profile </span>
    glfwWindowHint<span class="org-rainbow-delimiters-depth-2">(</span>GLFW_CONTEXT_VERSION_MAJOR, 3<span class="org-rainbow-delimiters-depth-2">)</span>;
    glfwWindowHint<span class="org-rainbow-delimiters-depth-2">(</span>GLFW_CONTEXT_VERSION_MINOR, 3<span class="org-rainbow-delimiters-depth-2">)</span>;
    glfwWindowHint<span class="org-rainbow-delimiters-depth-2">(</span>GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE<span class="org-rainbow-delimiters-depth-2">)</span>;

    glfwSetErrorCallback<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">int</span> <span class="org-variable-name">error</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">description</span><span class="org-rainbow-delimiters-depth-3">)</span>
                         <span class="org-rainbow-delimiters-depth-3">{</span>
                            <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [GLFW ERROR] "</span> &lt;&lt; error 
                                      &lt;&lt; <span class="org-string">": "</span> &lt;&lt; description 
                                      &lt;&lt; <span class="org-constant">std</span>::endl;
                         <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">GLFWwindow</span>* <span class="org-variable-name">window</span> = glfwCreateWindow<span class="org-rainbow-delimiters-depth-2">(</span>640, 480, <span class="org-string">"2D Drawing with Shader"</span>, <span class="org-constant">NULL</span>, <span class="org-constant">NULL</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>window<span class="org-rainbow-delimiters-depth-2">){</span> glfwTerminate<span class="org-rainbow-delimiters-depth-3">()</span>; <span class="org-keyword">return</span> -1; <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">OpenGL context </span>
    glfwMakeContextCurrent<span class="org-rainbow-delimiters-depth-2">(</span>window<span class="org-rainbow-delimiters-depth-2">)</span>;
    glClearColor<span class="org-rainbow-delimiters-depth-2">(</span>0.0f, 0.5f, 0.6f, 1.0f<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Mouse move callback </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Note: It is only possible to pass non-capturing lambda to this callback.</span>
    glfwSetCursorPosCallback<span class="org-rainbow-delimiters-depth-2">(</span> window
                            , <span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">GLFWwindow</span>* <span class="org-variable-name">window</span>, <span class="org-type">double</span> <span class="org-variable-name">xpos</span>, <span class="org-type">double</span> <span class="org-variable-name">ypos</span><span class="org-rainbow-delimiters-depth-3">)</span>
                              <span class="org-rainbow-delimiters-depth-3">{</span>
                                  <span class="org-comment-delimiter">// </span><span class="org-comment">Forward call to global variable std::function&lt;&gt; </span>
                                  <span class="org-comment-delimiter">// </span><span class="org-comment">(Function object)</span>
                                  Cursor_Callback<span class="org-rainbow-delimiters-depth-4">(</span>window, xpos, ypos<span class="org-rainbow-delimiters-depth-4">)</span>;
                              <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">====== S H A D E R - C O M P I L A T I O N ====//</span>
    <span class="org-comment-delimiter">//                                                </span><span class="org-comment">// </span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Note: The shader source code is at the end of file.</span>
    <span class="org-keyword">extern</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">code_vertex_shader</span>;
    <span class="org-keyword">extern</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">code_frag_shader</span>;

    <span class="org-type">GLuint</span> <span class="org-variable-name">prog</span> = glCreateProgram<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Compile shader code </span>
    compile_shader<span class="org-rainbow-delimiters-depth-2">(</span>prog, code_vertex_shader, GL_VERTEX_SHADER  <span class="org-rainbow-delimiters-depth-2">)</span> ;    
    compile_shader<span class="org-rainbow-delimiters-depth-2">(</span>prog, code_frag_shader,   GL_FRAGMENT_SHADER <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Bind current shader (enable it). Only one shader of the same type can </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">be bound at a time. For instance, only a single vertex shader can </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">be enabled at a time</span>
    glUseProgram<span class="org-rainbow-delimiters-depth-2">(</span>prog<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Get shader uniform variable location for projection matrix</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">See shader code: "uniform mat4 projection;"</span>
    <span class="org-keyword">const</span> <span class="org-type">GLint</span> <span class="org-variable-name">u_proj</span>  = glGetUniformLocation<span class="org-rainbow-delimiters-depth-2">(</span>prog, <span class="org-string">"u_projection"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span> u_proj &gt;= 0 &amp;&amp; <span class="org-string">"Failed to find uniform variable"</span> <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Get shader uniform variable  location for model matrix.</span>
    <span class="org-keyword">const</span> <span class="org-type">GLint</span> <span class="org-variable-name">u_model</span>  = glGetUniformLocation<span class="org-rainbow-delimiters-depth-2">(</span>prog, <span class="org-string">"u_model"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span> u_model &gt;= 0 &amp;&amp; <span class="org-string">"Failed to find uniform variable"</span> <span class="org-rainbow-delimiters-depth-2">)</span>;    

    <span class="org-comment-delimiter">// </span><span class="org-comment">Get shader attribute location - the function glGetAttribLocation - returns (-1) on error.</span>
    <span class="org-keyword">const</span> <span class="org-type">GLint</span> <span class="org-variable-name">attr_position</span> = glGetAttribLocation<span class="org-rainbow-delimiters-depth-2">(</span>prog, <span class="org-string">"position"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span> attr_position &gt;= 0 &amp;&amp; <span class="org-string">"Failed to get attribute location"</span> <span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::fprintf<span class="org-rainbow-delimiters-depth-2">(</span>stderr, <span class="org-string">" [TRACE] Attribute location attr_position = %d \n"</span>
                , attr_position<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Get shader index of color attribute variable.</span>
    <span class="org-keyword">const</span> <span class="org-type">GLint</span> <span class="org-variable-name">attr_color</span> = glGetAttribLocation<span class="org-rainbow-delimiters-depth-2">(</span>prog, <span class="org-string">"color"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span> attr_color &gt;= 0<span class="org-rainbow-delimiters-depth-2">)</span>;


    <span class="org-comment-delimiter">// </span><span class="org-comment">====== U P L O A D - TO - G P U =========================// </span>
    <span class="org-comment-delimiter">//                                                          </span><span class="org-comment">//</span>

    <span class="org-keyword">constexpr</span> <span class="org-type">size_t</span> <span class="org-variable-name">NUM_VERTICES</span> = 3;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Array of triangle vertex coordinates (X, Y)</span>
    <span class="org-type">Vertex2D</span> <span class="org-variable-name">vertices</span><span class="org-rainbow-delimiters-depth-2">[</span>NUM_VERTICES<span class="org-rainbow-delimiters-depth-2">]</span> = <span class="org-rainbow-delimiters-depth-2">{</span> 
      <span class="org-rainbow-delimiters-depth-3">{</span>  0.0,   0.2<span class="org-rainbow-delimiters-depth-3">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">Vertex 0  (x =  0.0 ; y =  0.5)</span>
    , <span class="org-rainbow-delimiters-depth-3">{</span> -0.2,  -0.2<span class="org-rainbow-delimiters-depth-3">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">Vertex 1  (x = -0.5 ; y = -0.5)</span>
    , <span class="org-rainbow-delimiters-depth-3">{</span>  0.2,  -0.2<span class="org-rainbow-delimiters-depth-3">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">Vertex 2  (x =  0.5 ; y = -0.5)</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-type">ColorRGB</span> <span class="org-variable-name">colors</span><span class="org-rainbow-delimiters-depth-2">[</span>NUM_VERTICES<span class="org-rainbow-delimiters-depth-2">]</span> = <span class="org-rainbow-delimiters-depth-2">{</span> 
          COLOR_R   <span class="org-comment-delimiter">// </span><span class="org-comment">Color of vertex 0</span>
        , COLOR_B   <span class="org-comment-delimiter">// </span><span class="org-comment">Color of vertex 1 </span>
        , COLOR_G   <span class="org-comment-delimiter">// </span><span class="org-comment">Color of vertex 2 </span>
    <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Always initialize with zero (0), otherwise, the values</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">of those variables will be undefined. (Undefine Behavior)</span>
    <span class="org-type">GLuint</span> <span class="org-variable-name">vao_triangle</span> = 0;
    <span class="org-type">GLuint</span> <span class="org-variable-name">vbo_vertices</span> = 0;
    <span class="org-type">GLuint</span> <span class="org-variable-name">vbo_colors</span>   = 0;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Send vertices to GPU VBO (vbo_vertices)</span>
    send_buffer<span class="org-rainbow-delimiters-depth-2">(</span>  &amp;vao_triangle    <span class="org-comment-delimiter">// </span><span class="org-comment">Ponter to VAO [OUTPUT]</span>
                , &amp;vbo_vertices    <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer VBO   [OUTPUT]</span>
                , <span class="org-keyword">sizeof</span><span class="org-rainbow-delimiters-depth-3">(</span>vertices<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-comment-delimiter">// </span><span class="org-comment">Size of buffer sent to GPU (VBO memory)</span>
                , vertices         <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to buffer </span>
                , attr_position    <span class="org-comment-delimiter">// </span><span class="org-comment">Shader attribute location </span>
                , 2                <span class="org-comment-delimiter">// </span><span class="org-comment">Each vertex has 2 coordinates (X, Y)</span>
                , GL_FLOAT         <span class="org-comment-delimiter">// </span><span class="org-comment">Each vertex coordinate has type GLfloat (float)</span>
                <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Send colors to GPU VBO (vbo_colors)</span>
    send_buffer<span class="org-rainbow-delimiters-depth-2">(</span>  &amp;vao_triangle   <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer Vertex Array object</span>
                , &amp;vbo_colors     <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer Vertex buffer object handle (aka token)</span>
                , <span class="org-keyword">sizeof</span><span class="org-rainbow-delimiters-depth-3">(</span>colors<span class="org-rainbow-delimiters-depth-3">)</span>  <span class="org-comment-delimiter">// </span><span class="org-comment">Buffer size </span>
                , colors          <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to buffer (addrress of first buffer element)</span>
                , attr_color      <span class="org-comment-delimiter">// </span><span class="org-comment">Shader attribute location </span>
                , 3               <span class="org-comment-delimiter">// </span><span class="org-comment">Each color has 3 coordinates (R, G, B)</span>
                , GL_FLOAT        <span class="org-comment-delimiter">// </span><span class="org-comment">Each color coordiante has type GLfloat</span>
                <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">============== Set Shader Uniform Variables =============// </span>
    <span class="org-comment-delimiter">//                                                          </span><span class="org-comment">// </span>

    <span class="org-type">int</span> <span class="org-variable-name">width</span>, <span class="org-variable-name">height</span>;
    glfwGetWindowSize<span class="org-rainbow-delimiters-depth-2">(</span>window, &amp;width, &amp;height<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Window aspect ratio</span>
    <span class="org-type">float</span> <span class="org-variable-name">aspect</span> = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>width<span class="org-rainbow-delimiters-depth-2">)</span> / height;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Identity matrix </span>
    <span class="org-keyword">const</span> <span class="org-keyword">auto</span> identity = <span class="org-constant">glm</span>::mat4<span class="org-rainbow-delimiters-depth-2">(</span>1.0<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Projection matrix - orthogonal projection for compensating </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">the aspect ratio.</span>
    <span class="org-constant">glm</span>::<span class="org-type">mat4</span> <span class="org-variable-name">Tproj</span> = <span class="org-constant">glm</span>::ortho<span class="org-rainbow-delimiters-depth-2">(</span>-aspect, aspect, -1.0f, 1.0f, -1.0f, 1.0f<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Set projection matrix uniform variable</span>
    glUniformMatrix4fv<span class="org-rainbow-delimiters-depth-2">(</span>u_proj, 1, GL_FALSE, <span class="org-constant">glm</span>::value_ptr<span class="org-rainbow-delimiters-depth-3">(</span>Tproj<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Set model matrix uniform variable</span>
    glUniformMatrix4fv<span class="org-rainbow-delimiters-depth-2">(</span>u_model, 1, GL_FALSE, <span class="org-constant">glm</span>::value_ptr<span class="org-rainbow-delimiters-depth-3">(</span>identity<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Instatiate objects that will be rendered </span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">triangleA</span> = Model_Triangle<span class="org-rainbow-delimiters-depth-2">{}</span>;
    triangleA.scale<span class="org-rainbow-delimiters-depth-2">(</span>0.50<span class="org-rainbow-delimiters-depth-2">)</span>;
    triangleA.rotate<span class="org-rainbow-delimiters-depth-2">(</span>122<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">triangleB</span> = Model_Triangle<span class="org-rainbow-delimiters-depth-2">{}</span>;
    triangleB.translate<span class="org-rainbow-delimiters-depth-2">(</span>-0.20, 0.30<span class="org-rainbow-delimiters-depth-2">)</span>;
    triangleB.rotate<span class="org-rainbow-delimiters-depth-2">(</span>50<span class="org-rainbow-delimiters-depth-2">)</span>;
    triangleB.scale<span class="org-rainbow-delimiters-depth-2">(</span>1.8<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">triangleC</span> = Model_Triangle<span class="org-rainbow-delimiters-depth-2">{}</span>;
    triangleC.translate<span class="org-rainbow-delimiters-depth-2">(</span>0.20, 0.20<span class="org-rainbow-delimiters-depth-2">)</span>;
    triangleC.rotate<span class="org-rainbow-delimiters-depth-2">(</span>35<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Follows mouse coordinate </span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">triangleD</span> = Model_Triangle<span class="org-rainbow-delimiters-depth-2">{}</span>;
    triangleD.translate<span class="org-rainbow-delimiters-depth-2">(</span>-0.60, -0.50<span class="org-rainbow-delimiters-depth-2">)</span>;
    triangleD.scale<span class="org-rainbow-delimiters-depth-2">(</span>1.50<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">triangleD.scale(1.2);</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">triangleD.rotate(40);    </span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">--------- Set mouse callback ----------// </span>

    <span class="org-keyword">constexpr</span> <span class="org-type">float</span> <span class="org-variable-name">PI</span> = 3.1415926536f;
    <span class="org-keyword">constexpr</span> <span class="org-type">float</span> <span class="org-variable-name">FACTOR_RAD_TO_DEG</span> = 180.0 / PI;

    Cursor_Callback = <span class="org-rainbow-delimiters-depth-2">[</span>&amp;<span class="org-rainbow-delimiters-depth-2">](</span><span class="org-type">GLFWwindow</span>* <span class="org-variable-name">window</span>, <span class="org-type">double</span> <span class="org-variable-name">xpos</span>, <span class="org-type">double</span> <span class="org-variable-name">ypos</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Mouse normalized coordinate </span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">=&gt;&gt; see: https://stackoverflow.com/questions/23870750/</span>
        <span class="org-type">float</span> <span class="org-variable-name">xMouse</span> = -1.0f + 2.0f * xpos / width;
        <span class="org-type">float</span> <span class="org-variable-name">yMouse</span> =  1.0f - 2.0f * ypos / height;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Angle in degrees between X axis vector(1, 0, 0) and poit (xMouse, yMouse, 0) position.</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Note: atan2f() returns angle in radians. </span>
        <span class="org-type">float</span> <span class="org-variable-name">angle</span> = atan2f<span class="org-rainbow-delimiters-depth-3">(</span>yMouse, xMouse<span class="org-rainbow-delimiters-depth-3">)</span> * FACTOR_RAD_TO_DEG ;
        fprintf<span class="org-rainbow-delimiters-depth-3">(</span>stderr, <span class="org-string">" [TRACE] Angle = %f \n"</span>, angle<span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Triangle D follows mouse position</span>
        triangleD.translate<span class="org-rainbow-delimiters-depth-3">(</span>xMouse, yMouse<span class="org-rainbow-delimiters-depth-3">)</span>;
        triangleD.rotate<span class="org-rainbow-delimiters-depth-3">(</span>angle<span class="org-rainbow-delimiters-depth-3">)</span>;

        triangleB.rotate<span class="org-rainbow-delimiters-depth-3">(</span>angle<span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Show mouse position</span>
         <span class="org-comment-delimiter">// </span><span class="org-comment">std::fprintf(stderr, " [MOUSE] x = %f ; y = %f \n", xMouse, yMouse);</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-comment-delimiter">//  </span><span class="org-comment">======= R E N D E R  - L O O P ============//</span>
    <span class="org-comment-delimiter">//                                             </span><span class="org-comment">//</span>
    <span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-negation-char">!</span>glfwWindowShouldClose<span class="org-rainbow-delimiters-depth-3">(</span>window<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        glClear<span class="org-rainbow-delimiters-depth-3">(</span>GL_COLOR_BUFFER_BIT<span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">====== BEGIN RENDERING ============//</span>

            triangleA.render<span class="org-rainbow-delimiters-depth-3">(</span>vao_triangle, u_model<span class="org-rainbow-delimiters-depth-3">)</span>;
            triangleB.render<span class="org-rainbow-delimiters-depth-3">(</span>vao_triangle, u_model<span class="org-rainbow-delimiters-depth-3">)</span>;
            triangleC.render<span class="org-rainbow-delimiters-depth-3">(</span>vao_triangle, u_model<span class="org-rainbow-delimiters-depth-3">)</span>;
            triangleD.render<span class="org-rainbow-delimiters-depth-3">(</span>vao_triangle, u_model<span class="org-rainbow-delimiters-depth-3">)</span>;

            <span class="org-comment-delimiter">//</span><span class="org-comment">std::fprintf(stderr, " [TRACE] Redraw screen \n");</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">====== END RENDERING ==============//</span>

        <span class="org-comment-delimiter">/* </span><span class="org-comment">Swap front and back buffers */</span>
        glfwSwapBuffers<span class="org-rainbow-delimiters-depth-3">(</span>window<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">/* </span><span class="org-comment">Poll for and process events */</span>
        glfwPollEvents<span class="org-rainbow-delimiters-depth-3">()</span>;

        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, <span class="org-string">'Q'</span> <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
             <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [TRACE] User typed Q =&gt;&gt; Shutdown program. Ok. "</span> &lt;&lt; <span class="org-string">'\n'</span>;
             <span class="org-keyword">break</span>;
        <span class="org-rainbow-delimiters-depth-3">}</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">Increase scale by 10%</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, <span class="org-string">'A'</span> <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">){</span> triangleD.zoom<span class="org-rainbow-delimiters-depth-4">(</span>+0.10<span class="org-rainbow-delimiters-depth-4">)</span>; <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Decrease scale by 10%</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, <span class="org-string">'B'</span> <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">){</span> triangleD.zoom<span class="org-rainbow-delimiters-depth-4">(</span>-0.10<span class="org-rainbow-delimiters-depth-4">)</span>; <span class="org-rainbow-delimiters-depth-3">}</span>


    <span class="org-rainbow-delimiters-depth-2">}</span>

    glfwTerminate<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-keyword">return</span> 0;

<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">--- End of main() -----//</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Minimal vertex shader =&gt;&gt; Runs on the GPU and processes each vertex.</span>
<span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">code_vertex_shader</span> = R<span class="org-default">"</span><span class="org-string">(    </span>
<span class="org-string">    #version 330 core </span>

<span class="org-string">    // Supplied by GPU - attribute location (id = 2) </span>
<span class="org-string">    // contains a (X, Y) vertex</span>
<span class="org-string">    layout ( location = 2)  in vec2 position;</span>
<span class="org-string">    layout ( location = 1 ) in vec3 color;     // Contains (Red, Green, Blue) components</span>

<span class="org-string">    // Output to fragment shader </span>
<span class="org-string">    out vec3 out_color;</span>

<span class="org-string">    // Model matrix =&gt; projection coordinates from the local space (model space)</span>
<span class="org-string">    // to view space .</span>
<span class="org-string">    // Transform 4x4 matrix - supplied by the C++ side. </span>
<span class="org-string">    uniform mat4 u_model;</span>

<span class="org-string">    // Projection matrix =&gt; projections camera-space coordinates </span>
<span class="org-string">    // to clip-space coordinates. (-1.0 to 1.0) range.</span>
<span class="org-string">    uniform mat4 u_projection;</span>

<span class="org-string">    void main()</span>
<span class="org-string">    {</span>
<span class="org-string">        // gl_Position =&gt; Global output variable that holds the </span>
<span class="org-string">        // the current vertex position. It is a vector of </span>
<span class="org-string">        // components (X, Y, Z = 0, W = ignored)</span>
<span class="org-string">        gl_Position = u_projection * u_model * vec4(position, 0, 1.0);</span>

<span class="org-string">        // Forward to fragment shader </span>
<span class="org-string">        out_color = color;</span>
<span class="org-string">    }</span>

<span class="org-string">)</span><span class="org-default">"</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Fragment shader source code </span>
<span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">code_frag_shader</span> = R<span class="org-default">"</span><span class="org-string">(</span>
<span class="org-string">    #version 330 </span>

<span class="org-string">    // This color comes from Vertex shader </span>
<span class="org-string">    in vec3 out_color;</span>

<span class="org-string">    void main()</span>
<span class="org-string">    {</span>
<span class="org-string">        // Set vertex colors</span>
<span class="org-string">        gl_FragColor = vec4(out_color, 1.0);</span>

<span class="org-string">    }</span>
<span class="org-string">)</span><span class="org-default">"</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">====== I M P L E M E N T A T I O N S ==========// </span>

<span class="org-type">void</span> <span class="org-function-name">compile_shader</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">GLuint</span> <span class="org-variable-name">m_program</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">code</span>, <span class="org-type">GLenum</span> <span class="org-variable-name">type</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">GLint</span> <span class="org-variable-name">shader_id</span> = glCreateShader<span class="org-rainbow-delimiters-depth-2">(</span> type <span class="org-rainbow-delimiters-depth-2">)</span>;
    glShaderSource<span class="org-rainbow-delimiters-depth-2">(</span>shader_id, 1, &amp;code, <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    glCompileShader<span class="org-rainbow-delimiters-depth-2">(</span>shader_id<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">GLint</span> <span class="org-variable-name">is_compiled</span> = GL_FALSE;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Check shader compilation result </span>
    glGetShaderiv<span class="org-rainbow-delimiters-depth-2">(</span>shader_id, GL_COMPILE_STATUS, &amp;is_compiled<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">If there is any shader compilation result, </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">print the error message.</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span> is_compiled == GL_FALSE<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-type">GLint</span> <span class="org-variable-name">length</span>;
        glGetShaderiv<span class="org-rainbow-delimiters-depth-3">(</span>shader_id, GL_INFO_LOG_LENGTH, &amp;length<span class="org-rainbow-delimiters-depth-3">)</span>;
        assert<span class="org-rainbow-delimiters-depth-3">(</span> length &gt; 0 <span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">out</span><span class="org-rainbow-delimiters-depth-3">(</span>length + 1, 0x00<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">GLint</span> <span class="org-variable-name">chars_written</span>;
        glGetShaderInfoLog<span class="org-rainbow-delimiters-depth-3">(</span>shader_id, length, &amp;chars_written, out.data<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [SHADER ERROR] = "</span> &lt;&lt; out &lt;&lt; <span class="org-string">'\n'</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Abort the exection of current process. </span>
        <span class="org-constant">std</span>::abort<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>          

    glAttachShader<span class="org-rainbow-delimiters-depth-2">(</span>m_program, shader_id<span class="org-rainbow-delimiters-depth-2">)</span>;   
    glDeleteShader<span class="org-rainbow-delimiters-depth-2">(</span>shader_id<span class="org-rainbow-delimiters-depth-2">)</span>;
    glLinkProgram<span class="org-rainbow-delimiters-depth-2">(</span>m_program<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">GLint</span> <span class="org-variable-name">link_status</span> = GL_FALSE;
    glGetProgramiv<span class="org-rainbow-delimiters-depth-2">(</span>m_program, GL_LINK_STATUS, &amp;link_status<span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span> link_status != GL_FALSE <span class="org-rainbow-delimiters-depth-2">)</span>;   
    <span class="org-comment-delimiter">// </span><span class="org-comment">glUseProgram(m_program);         </span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Upload buffer from main memory to GPU VBO </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">=&gt;&gt; Parameters VAO, VBO are allocated by the caller. </span>
<span class="org-type">void</span> <span class="org-function-name">send_buffer</span><span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-type">GLuint</span>* <span class="org-variable-name">pVao</span>, <span class="org-type">GLuint</span>* <span class="org-variable-name">pVbo</span>, <span class="org-type">GLsizei</span> <span class="org-variable-name">sizeBuffer</span>
                , <span class="org-type">void</span>* <span class="org-variable-name">pBufffer</span>, <span class="org-type">GLint</span>   <span class="org-variable-name">shader_attr</span>, <span class="org-type">GLint</span> <span class="org-variable-name">size</span>
                , <span class="org-type">GLenum</span> <span class="org-variable-name">type</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    assert<span class="org-rainbow-delimiters-depth-2">(</span>pVao != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span>pVbo != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">GLuint</span>&amp; <span class="org-variable-name">vao</span> = *pVao;
    <span class="org-type">GLuint</span>&amp; <span class="org-variable-name">vbo</span> = *pVbo;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Generate and bind current VAO (Vertex Array Object)</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>vao == 0<span class="org-rainbow-delimiters-depth-2">){</span> glGenVertexArrays<span class="org-rainbow-delimiters-depth-3">(</span>1, &amp;vao<span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
    glBindVertexArray<span class="org-rainbow-delimiters-depth-2">(</span>vao<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Generate and bind current VBO (Vertex Buffer Object)</span>
    glGenBuffers<span class="org-rainbow-delimiters-depth-2">(</span>1, &amp;vbo<span class="org-rainbow-delimiters-depth-2">)</span>;
    glBindBuffer<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, vbo<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Upload data to current VBO buffer in GPU </span>
    glBufferData<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, sizeBuffer, pBufffer, GL_STATIC_DRAW<span class="org-rainbow-delimiters-depth-2">)</span>;   

    glEnableVertexAttribArray<span class="org-rainbow-delimiters-depth-2">(</span>shader_attr<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Set data layout - how data will be interpreted.</span>
    glVertexAttribPointer<span class="org-rainbow-delimiters-depth-2">(</span>shader_attr, size, type, GL_FALSE, 0, <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">------ Disable Global state set by this function -----//</span>
    <span class="org-comment-delimiter">// </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Unbind VAO </span>
    glBindVertexArray<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Unbind VBO </span>
    glBindBuffer<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, vbo<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Disable current shader attribute </span>
    glDisableVertexAttribArray<span class="org-rainbow-delimiters-depth-2">(</span>shader_attr<span class="org-rainbow-delimiters-depth-2">)</span>;

<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4bfd914" class="outline-3">
<h3 id="org4bfd914"><span class="section-number-3">1.12</span> 3D Graphics - Rotating cube</h3>
<div class="outline-text-3" id="text-1-12">
<p>
This sample application contains: two cubes; two grid planes for
visual reference; a coordinate axis for visual debugging and a camera
that always points to the origin. The camera has the following
controls: right arrow, rotates the camera's position in a
counterclockwise way around Y axis (red line); if left arrow is typed,
the camera position rotates in a clockwise way around Y axis (red
line). If up arrow is typed, the camera position moves in the positive
direction of Y axis. If down arrow is typed, the reverse
happens. 
</p>

<p>
<b>Screenshots</b> 
</p>


<div class="figure">
<p><a href="images/opengl-draw3d-rotating-cube1.png"><img src="images/opengl-draw3d-rotating-cube1.png" alt="opengl-draw3d-rotating-cube1.png" /></a>
</p>
</div>


<div class="figure">
<p><a href="images/opengl-draw3d-rotating-cube2.png"><img src="images/opengl-draw3d-rotating-cube2.png" alt="opengl-draw3d-rotating-cube2.png" /></a>
</p>
</div>

<p>
<b>Project Files</b> 
</p>

<p>
Vertex Shader Code: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#version</span> 330 core 

layout <span class="org-rainbow-delimiters-depth-1">(</span> location = 0<span class="org-rainbow-delimiters-depth-1">)</span>  in <span class="org-type">vec3</span> <span class="org-variable-name">position</span>;
layout <span class="org-rainbow-delimiters-depth-1">(</span> location = 1<span class="org-rainbow-delimiters-depth-1">)</span> in <span class="org-type">vec3</span> <span class="org-variable-name">color</span>;   
out <span class="org-type">vec3</span> <span class="org-variable-name">out_color</span>;
uniform <span class="org-type">mat4</span> <span class="org-variable-name">u_model</span>;       <span class="org-comment-delimiter">// </span><span class="org-comment">Model matrix </span>
uniform <span class="org-type">mat4</span> <span class="org-variable-name">u_view</span>;        <span class="org-comment-delimiter">// </span><span class="org-comment">Camera's view matrix    </span>
uniform <span class="org-type">mat4</span> <span class="org-variable-name">u_projection</span>;  <span class="org-comment-delimiter">// </span><span class="org-comment">Camera's projection matrix </span>

<span class="org-type">void</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    gl_Position = u_projection * u_view * u_model * vec4<span class="org-rainbow-delimiters-depth-2">(</span>position, 1.0<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Forward to fragment shader </span>
    out_color = color; <span class="org-comment-delimiter">// </span><span class="org-comment">vec3(0.56, 0.6, 0.0);</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Fragment Shader Code: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#version</span> 330 

<span class="org-comment-delimiter">// </span><span class="org-comment">This color comes from Vertex shader </span>
in <span class="org-type">vec3</span> <span class="org-variable-name">out_color</span>;

<span class="org-type">void</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Set vertex colors</span>
    gl_FragColor =  vec4<span class="org-rainbow-delimiters-depth-2">(</span>out_color, 1.0<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">gl_FragColor = vec4(0.3, 0.6, 0.0, 1.0);</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
File: CmakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.5)
<span class="org-function-name">project</span>(GLFW_project)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD_REQUIRED ON)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment">#================ GLFW Settings  ===============#</span>

<span class="org-function-name">find_package</span>(OpenGL REQUIRED)

<span class="org-function-name">include</span>(FetchContent)

<span class="org-comment"># Set GLFW Options before FectchContent_MakeAvailable </span>
<span class="org-function-name">set</span>( GLFW_BUILD_EXAMPLES OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )
<span class="org-function-name">set</span>( GLFW_BUILD_TESTS    OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )
<span class="org-function-name">set</span>( GLFW_BUILD_DOCS     OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )
<span class="org-function-name">set</span>( GLFW_BUILD_INSTALL  OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )

<span class="org-comment"># Donwload GLFW library</span>
<span class="org-function-name">FetchContent_Declare</span>(
  glfwlib
  URL   https://github.com/glfw/glfw/releases/download/3.3.2/glfw-3.3.2.zip
)
<span class="org-function-name">FetchContent_MakeAvailable</span>(glfwlib)

<span class="org-comment"># Download GLM (OpenGL math library for matrix and vectors transformation)</span>
<span class="org-function-name">FetchContent_Declare</span>(
  glm  
  URL  https://github.com/g-truc/glm/archive/0.9.8.zip
)
<span class="org-function-name">FetchContent_MakeAvailable</span>(glm)

<span class="org-function-name">message</span>( [DEBUG] <span class="org-string">" glm_SOURCE_DIR = ${</span><span class="org-variable-name">glm_SOURCE_DIR</span><span class="org-string">} "</span>)
<span class="org-function-name">include_directories</span>(${<span class="org-variable-name">glm_SOURCE_DIR</span>})

  <span class="org-comment"># ======= TARGETS ===========================#</span>

       <span class="org-function-name">add_executable</span>( draw3d-cube  draw2d-cube.cpp   )
<span class="org-function-name">target_link_libraries</span>( draw3d-cube  glfw OpenGL::GL GLU )
</pre>
</div>

<p>
File: draw3d-cube.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Draw many colored triangles from a single VBO (Vertex Buffer Object)</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">array</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">-------- OpenGL headers ---------//</span>
<span class="org-comment-delimiter">//</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">GL_GLEXT_PROTOTYPES</span> 1 <span class="org-comment-delimiter">// </span><span class="org-comment">Necessary for OpenGL &gt;= 3.0 functions</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">GL3_PROTOTYPES</span>      1 <span class="org-comment-delimiter">// </span><span class="org-comment">Necessary for OpenGL &gt;= 3.0 functions</span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GL/gl.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GLFW/glfw3.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">#include &lt;GL/glew.h&gt;</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GL/glu.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">--------- OpenGL Math Librar ------------//</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">glm/glm.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">glm/gtc/matrix_transform.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">glm/gtc/type_ptr.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">glm/gtx/string_cast.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">#define GLUT_ENABLED </span>

<span class="org-preprocessor">#if</span> <span class="org-preprocessor">defined</span><span class="org-rainbow-delimiters-depth-1">(</span>GLUT_ENABLED<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-preprocessor">    #include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GL/glut.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#endif</span> 

<span class="org-preprocessor">#define</span> <span class="org-function-name">GL_CHECK</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">funcall</span><span class="org-rainbow-delimiters-depth-1">)</span>\
    <span class="org-keyword">do</span> <span class="org-rainbow-delimiters-depth-1">{</span> \
        <span class="org-rainbow-delimiters-depth-2">(</span>funcall<span class="org-rainbow-delimiters-depth-2">)</span>; \
        <span class="org-type">GLint</span> <span class="org-variable-name">error</span> = glGetError<span class="org-rainbow-delimiters-depth-2">()</span>;  \
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>error == GL_NO_ERROR<span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">break</span>; <span class="org-rainbow-delimiters-depth-2">}</span> \
        <span class="org-constant">std</span>::fprintf<span class="org-rainbow-delimiters-depth-2">(</span>stderr, <span class="org-string">" [OPENGL ERROR] Error code = %d ; line = %d ; call = '%s'  \n"</span> \
                      , error, __LINE__, #funcall <span class="org-rainbow-delimiters-depth-2">)</span>; \
        abort<span class="org-rainbow-delimiters-depth-2">()</span>; \
    <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-1">(</span>0<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-type">GLFWwindow</span>* <span class="org-function-name">make_glfwWindowi</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span>  <span class="org-variable-name">width</span>, <span class="org-type">int</span> <span class="org-variable-name">height</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">title</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Compile some  shader </span>
<span class="org-type">void</span> <span class="org-function-name">compile_shader</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">GLuint</span> <span class="org-variable-name">m_program</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">code</span>, <span class="org-type">GLenum</span> <span class="org-variable-name">type</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Send data from memory to GPU VBO memory </span>
<span class="org-type">void</span> <span class="org-function-name">send_buffer</span><span class="org-rainbow-delimiters-depth-1">(</span>   <span class="org-type">GLuint</span>* <span class="org-variable-name">pVao</span>        <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to VAO (Vertex Array Object) - allocated by caller </span>
                  , <span class="org-type">GLuint</span>* <span class="org-variable-name">pVbo</span>        <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to VBO (Vertex Buffer Object) - allocated by caller</span>
                  , <span class="org-type">GLsizei</span> <span class="org-variable-name">sizeBuffer</span>  <span class="org-comment-delimiter">// </span><span class="org-comment">Total buffer size in bytes</span>
                  , <span class="org-type">void</span>*   <span class="org-variable-name">pBufffer</span>    <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to buffer </span>
                  , <span class="org-type">GLint</span>   <span class="org-variable-name">shader_attr</span> <span class="org-comment-delimiter">// </span><span class="org-comment">Shader attribute location id </span>
                  , <span class="org-type">GLint</span>   <span class="org-variable-name">size</span>        <span class="org-comment-delimiter">// </span><span class="org-comment">Number of coordinates of a given vertex</span>
                  , <span class="org-type">GLenum</span>  <span class="org-variable-name">type</span>        <span class="org-comment-delimiter">// </span><span class="org-comment">Type of each element coordinate                   </span>
                  <span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">------------ Basic Data Structures -----------// </span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Wrapper for 2D vertex coordinates </span>
<span class="org-keyword">struct</span> <span class="org-type">Vertex3D</span><span class="org-rainbow-delimiters-depth-1">{</span>  <span class="org-type">GLfloat</span> <span class="org-variable-name">x</span>, <span class="org-variable-name">y</span>, <span class="org-variable-name">z</span>;  <span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Wrapper for RGB colors </span>
<span class="org-keyword">struct</span> <span class="org-type">ColorRGB</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-type">GLfloat</span> <span class="org-variable-name">r</span>, <span class="org-variable-name">g</span>, <span class="org-variable-name">b</span>; <span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">struct</span> <span class="org-type">Geometry</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">Vertex3D</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">vertices</span>;
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">ColorRGB</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">colors</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">struct</span> <span class="org-type">RenderObject</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">GLuint</span>     <span class="org-variable-name">u_model</span>;     <span class="org-comment-delimiter">// </span><span class="org-comment">Shader uniform variable for model matrix </span>
    <span class="org-type">GLuint</span>     <span class="org-variable-name">vao</span>;         <span class="org-comment-delimiter">// </span><span class="org-comment">Vertex Array object</span>
    <span class="org-constant">glm</span>::<span class="org-type">mat4</span>  <span class="org-variable-name">model</span>;       <span class="org-comment-delimiter">// </span><span class="org-comment">Object model matrix </span>
    <span class="org-type">GLenum</span>     <span class="org-variable-name">draw_type</span>;   <span class="org-comment-delimiter">// </span><span class="org-comment">Draw type </span>
    <span class="org-type">GLint</span>      <span class="org-variable-name">n_vertices</span>;  <span class="org-comment-delimiter">// </span><span class="org-comment">Number of vertices</span>

    <span class="org-function-name">RenderObject</span><span class="org-rainbow-delimiters-depth-2">(){</span> model = <span class="org-constant">glm</span>::mat4<span class="org-rainbow-delimiters-depth-3">(</span>1.0<span class="org-rainbow-delimiters-depth-3">)</span>;  <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Explicit copy constructor</span>
    <span class="org-function-name">RenderObject</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">RenderObject</span>&amp;<span class="org-rainbow-delimiters-depth-2">)</span> = <span class="org-keyword">default</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Explicit copy assignment operator</span>
    <span class="org-type">RenderObject</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">=</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">RenderObject</span>&amp;<span class="org-rainbow-delimiters-depth-2">)</span> = <span class="org-keyword">default</span>;

    <span class="org-type">void</span> <span class="org-function-name">render</span><span class="org-rainbow-delimiters-depth-2">()</span> 
    <span class="org-rainbow-delimiters-depth-2">{</span>
        glUniformMatrix4fv<span class="org-rainbow-delimiters-depth-3">(</span>u_model, 1, GL_FALSE, <span class="org-constant">glm</span>::<span class="org-type">value_ptr</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">model</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
        glBindVertexArray<span class="org-rainbow-delimiters-depth-3">(</span>vao<span class="org-rainbow-delimiters-depth-3">)</span>;            
        glDrawArrays<span class="org-rainbow-delimiters-depth-3">(</span>draw_type, 0, n_vertices<span class="org-rainbow-delimiters-depth-3">)</span>;        
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;


<span class="org-type">Geometry</span> <span class="org-function-name">make_grid_geometry</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">size_t</span> <span class="org-variable-name">n_grid</span>, <span class="org-type">float</span> <span class="org-variable-name">dx</span>, <span class="org-keyword">const</span> <span class="org-type">ColorRGB</span>&amp; <span class="org-variable-name">color</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">Geometry</span> <span class="org-function-name">make_cube_geometry</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span> <span class="org-variable-name">w</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-keyword">constexpr</span> <span class="org-type">ColorRGB</span> <span class="org-variable-name">color_red</span>   = <span class="org-rainbow-delimiters-depth-1">{</span>1.0, 0.0, 0.0<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-keyword">constexpr</span> <span class="org-type">ColorRGB</span> <span class="org-variable-name">color_green</span> = <span class="org-rainbow-delimiters-depth-1">{</span>0.0, 1.0, 0.0<span class="org-rainbow-delimiters-depth-1">}</span>;        
<span class="org-keyword">constexpr</span> <span class="org-type">ColorRGB</span> <span class="org-variable-name">color_blue</span>  = <span class="org-rainbow-delimiters-depth-1">{</span>0.0, 0.0, 1.0<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-keyword">constexpr</span> <span class="org-type">ColorRGB</span> <span class="org-variable-name">color_yelllow</span>    = <span class="org-rainbow-delimiters-depth-1">{</span> 0.80,  1.000, 0.100 <span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-keyword">constexpr</span> <span class="org-type">ColorRGB</span> <span class="org-variable-name">color_gray</span>       = <span class="org-rainbow-delimiters-depth-1">{</span> 0.47,  0.390, 0.380 <span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-keyword">constexpr</span> <span class="org-type">ColorRGB</span> <span class="org-variable-name">color_dark_green</span> = <span class="org-rainbow-delimiters-depth-1">{</span> 0.027, 0.392, 0.050 <span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-keyword">constexpr</span> <span class="org-type">ColorRGB</span> <span class="org-variable-name">color_dark_blue</span>  = <span class="org-rainbow-delimiters-depth-1">{</span> 0.109, 0.066, 0.411 <span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Send vertices to GPU </span>
<span class="org-type">void</span> <span class="org-function-name">send_vertices</span><span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-type">GLuint</span>* <span class="org-variable-name">pVao</span>, <span class="org-type">GLuint</span>* <span class="org-variable-name">pVbo</span>,  <span class="org-type">GLint</span> <span class="org-variable-name">shader_attr</span>
                ,   <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">Vertex3D</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>&amp; <span class="org-variable-name">vertices</span> <span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span> 
    send_buffer<span class="org-rainbow-delimiters-depth-2">(</span>pVao, pVbo, <span class="org-keyword">sizeof</span><span class="org-rainbow-delimiters-depth-3">(</span>Vertex3D<span class="org-rainbow-delimiters-depth-3">)</span> * vertices.size<span class="org-rainbow-delimiters-depth-3">()</span>, vertices.data<span class="org-rainbow-delimiters-depth-3">()</span>, shader_attr, 3, GL_FLOAT <span class="org-rainbow-delimiters-depth-2">)</span>; 
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Send color coordinates to GPU </span>
<span class="org-type">void</span> <span class="org-function-name">send_colors</span><span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-type">GLuint</span>* <span class="org-variable-name">pVao</span>, <span class="org-type">GLuint</span>* <span class="org-variable-name">pVbo</span>,  <span class="org-type">GLint</span> <span class="org-variable-name">shader_attr</span>
                ,   <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">ColorRGB</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>&amp; <span class="org-variable-name">vertices</span> <span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    send_buffer<span class="org-rainbow-delimiters-depth-2">(</span>pVao, pVbo, <span class="org-keyword">sizeof</span><span class="org-rainbow-delimiters-depth-3">(</span>Vertex3D<span class="org-rainbow-delimiters-depth-3">)</span> * vertices.size<span class="org-rainbow-delimiters-depth-3">()</span>, vertices.data<span class="org-rainbow-delimiters-depth-3">()</span>, shader_attr, 3, GL_FLOAT <span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">struct</span> <span class="org-type">Camera</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Current location of camera in world coordinates</span>
    <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-variable-name">cam_eye</span>  = <span class="org-rainbow-delimiters-depth-2">{</span> 2.0, 4.0, 5.0 <span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Point to where the camera is looking at in world coordinates. </span>
    <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-variable-name">cam_targ</span> = <span class="org-rainbow-delimiters-depth-2">{</span> 0.0, 0.0, 0.0  <span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Current  camera up vector (orientation) - Y axis (default)</span>
    <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-variable-name">cam_up</span> = <span class="org-rainbow-delimiters-depth-2">{</span> 0.0, 1.0, 0.0 <span class="org-rainbow-delimiters-depth-2">}</span>;    

    <span class="org-comment-delimiter">// </span><span class="org-comment">Field of view</span>
    <span class="org-type">float</span> <span class="org-variable-name">fov_angle</span> = <span class="org-constant">glm</span>::radians<span class="org-rainbow-delimiters-depth-2">(</span>60.0<span class="org-rainbow-delimiters-depth-2">)</span>; 
    <span class="org-comment-delimiter">// </span><span class="org-comment">Aspect ratio </span>
    <span class="org-type">float</span> <span class="org-variable-name">aspect</span>   = 1.0;
    <span class="org-type">float</span> <span class="org-variable-name">zFar</span>     = 20.0;
    <span class="org-type">float</span> <span class="org-variable-name">zNear</span>    = 0.1; 

    <span class="org-comment-delimiter">// </span><span class="org-comment">ID of shader's view uniform variable - for setting view matrix</span>
    <span class="org-type">GLuint</span> <span class="org-variable-name">shader_uniform_view</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">ID of shader's projection uniform variable for setting projection matrix.</span>
    <span class="org-type">GLuint</span> <span class="org-variable-name">shader_uniform_proj</span>;

    <span class="org-function-name">Camera</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">GLuint</span> <span class="org-variable-name">uniform_view</span>, <span class="org-type">GLuint</span> <span class="org-variable-name">uniform_proj</span>, <span class="org-type">float</span> <span class="org-variable-name">aspect</span><span class="org-rainbow-delimiters-depth-2">)</span>:
        shader_uniform_view<span class="org-rainbow-delimiters-depth-2">(</span>uniform_view<span class="org-rainbow-delimiters-depth-2">)</span>
      , shader_uniform_proj<span class="org-rainbow-delimiters-depth-2">(</span>uniform_proj<span class="org-rainbow-delimiters-depth-2">)</span>
      , aspect<span class="org-rainbow-delimiters-depth-2">(</span>aspect<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>  update_view<span class="org-rainbow-delimiters-depth-3">()</span>;  <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">void</span> <span class="org-function-name">update_view</span><span class="org-rainbow-delimiters-depth-2">()</span> 
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Create View matrix that maps from world-space coordinates to </span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">camera-space coordinates</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">Tview</span> = <span class="org-constant">glm</span>::lookAt<span class="org-rainbow-delimiters-depth-3">(</span>cam_eye, cam_targ, cam_up<span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Create projection matrix coordinates that maps from </span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">camera-space coordinates to NDC (Normalized Device Coordinates).</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">Tproj</span> = <span class="org-constant">glm</span>::perspective<span class="org-rainbow-delimiters-depth-3">(</span> fov_angle
                                     , aspect
                                     , zNear
                                     , zFar <span class="org-rainbow-delimiters-depth-3">)</span>;      
        <span class="org-comment-delimiter">// </span><span class="org-comment">Set shader uniform variables.</span>
        glUniformMatrix4fv<span class="org-rainbow-delimiters-depth-3">(</span>shader_uniform_view, 1, GL_FALSE, <span class="org-constant">glm</span>::<span class="org-type">value_ptr</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">Tview</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
        glUniformMatrix4fv<span class="org-rainbow-delimiters-depth-3">(</span>shader_uniform_proj, 1, GL_FALSE, <span class="org-constant">glm</span>::<span class="org-type">value_ptr</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">Tproj</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;

    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Rotate camera around Y axis </span>
    <span class="org-type">void</span> <span class="org-function-name">rotate_y</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">angle</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-type">float</span> <span class="org-variable-name">a</span> = <span class="org-constant">glm</span>::radians<span class="org-rainbow-delimiters-depth-3">(</span>angle<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">float</span> <span class="org-variable-name">C</span> = cosf<span class="org-rainbow-delimiters-depth-3">(</span>a<span class="org-rainbow-delimiters-depth-3">)</span>, <span class="org-variable-name">S</span> = sinf<span class="org-rainbow-delimiters-depth-3">(</span>a<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">float</span> <span class="org-variable-name">x</span> = <span class="org-keyword">this</span>-&gt;cam_eye.x;
        <span class="org-type">float</span> <span class="org-variable-name">y</span> = <span class="org-keyword">this</span>-&gt;cam_eye.y;
        <span class="org-type">float</span> <span class="org-variable-name">z</span> = <span class="org-keyword">this</span>-&gt;cam_eye.z;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Apply Y-axis rotation matrix directly to Y axis.</span>
        <span class="org-keyword">this</span>-&gt;cam_eye.x = x * C + z * S;
        <span class="org-keyword">this</span>-&gt;cam_eye.y = y;
        <span class="org-keyword">this</span>-&gt;cam_eye.z = -x * S + z * C;
        <span class="org-keyword">this</span>-&gt;update_view<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>

    <span class="org-comment-delimiter">/* </span><span class="org-comment">Initialize the library */</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>glfwInit<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> -1; <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-preprocessor">    #if</span> <span class="org-preprocessor">defined</span><span class="org-rainbow-delimiters-depth-2">(</span>GLUT_ENABLED<span class="org-rainbow-delimiters-depth-2">)</span>
        glutInit<span class="org-rainbow-delimiters-depth-2">(</span>&amp;argc, argv<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-preprocessor">    #endif</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">====== S H A D E R - C O M P I L A T I O N ====//</span>
    <span class="org-comment-delimiter">//                                                </span><span class="org-comment">// </span>

    <span class="org-type">GLFWwindow</span>* <span class="org-variable-name">window</span> = make_glfwWindowi<span class="org-rainbow-delimiters-depth-2">(</span>640, 480, <span class="org-string">"Draw Cube 3D"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Note: The shader source code is at the end of file.</span>
    <span class="org-keyword">extern</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">code_vertex_shader</span>;
    <span class="org-keyword">extern</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">code_frag_shader</span>;

    <span class="org-type">GLuint</span> <span class="org-variable-name">prog</span> = glCreateProgram<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Compile shader code </span>
    compile_shader<span class="org-rainbow-delimiters-depth-2">(</span>prog, code_vertex_shader, GL_VERTEX_SHADER  <span class="org-rainbow-delimiters-depth-2">)</span> ;    
    compile_shader<span class="org-rainbow-delimiters-depth-2">(</span>prog, code_frag_shader,   GL_FRAGMENT_SHADER <span class="org-rainbow-delimiters-depth-2">)</span>;
    glUseProgram<span class="org-rainbow-delimiters-depth-2">(</span>prog<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Get shader uniform variable location for projection matrix</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">See shader code: "uniform mat4 projection;"</span>
    <span class="org-keyword">const</span> <span class="org-type">GLint</span> <span class="org-variable-name">u_proj</span>  = glGetUniformLocation<span class="org-rainbow-delimiters-depth-2">(</span>prog, <span class="org-string">"u_projection"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span> u_proj &gt;= 0 &amp;&amp; <span class="org-string">"Failed to find u_projection uniform variable"</span> <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">const</span> <span class="org-type">GLint</span> <span class="org-variable-name">u_view</span> = glGetUniformLocation<span class="org-rainbow-delimiters-depth-2">(</span>prog, <span class="org-string">"u_view"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span> u_proj &gt;= 0 &amp;&amp; <span class="org-string">"Failed to find u_view uniform variable"</span> <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Get shader uniform variable  location for model matrix.</span>
    <span class="org-keyword">const</span> <span class="org-type">GLint</span> <span class="org-variable-name">u_model</span>  = glGetUniformLocation<span class="org-rainbow-delimiters-depth-2">(</span>prog, <span class="org-string">"u_model"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span> u_model &gt;= 0 &amp;&amp; <span class="org-string">"Failed to find uniform variable"</span> <span class="org-rainbow-delimiters-depth-2">)</span>;    

    <span class="org-comment-delimiter">// </span><span class="org-comment">Get shader attribute location - the function glGetAttribLocation - returns (-1) on error.</span>
    <span class="org-keyword">const</span> <span class="org-type">GLint</span> <span class="org-variable-name">attr_position</span> = glGetAttribLocation<span class="org-rainbow-delimiters-depth-2">(</span>prog, <span class="org-string">"position"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span> attr_position &gt;= 0 &amp;&amp; <span class="org-string">"Failed to get attribute location"</span> <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Get shader attribute of color </span>
    <span class="org-keyword">const</span> <span class="org-type">GLint</span> <span class="org-variable-name">attr_color</span> = glGetAttribLocation<span class="org-rainbow-delimiters-depth-2">(</span>prog, <span class="org-string">"color"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span> attr_color &lt; 0<span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-constant">std</span>::fprintf<span class="org-rainbow-delimiters-depth-3">(</span>stderr, <span class="org-string">" [WARNING] Shader color attribute location not found. \n"</span><span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span>;


    <span class="org-comment-delimiter">// </span><span class="org-comment">====== U P L O A D - TO - G P U =========================// </span>
    <span class="org-comment-delimiter">//                                                          </span><span class="org-comment">//</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">----- Upload Cube vertices and colors ----------------//</span>
        <span class="org-type">Geometry</span> <span class="org-variable-name">cube_geometry</span> = make_cube_geometry<span class="org-rainbow-delimiters-depth-2">(</span>0.3<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">GLuint</span> <span class="org-variable-name">vao_cube</span>     = 0;
    <span class="org-type">GLuint</span> <span class="org-variable-name">vbo_vertices</span> = 0;
    <span class="org-type">GLuint</span> <span class="org-variable-name">vbo_colors</span>   = 0;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Upload geometry cube data to GPU</span>
    send_vertices<span class="org-rainbow-delimiters-depth-2">(</span>&amp;vao_cube, &amp;vbo_vertices, attr_position, cube_geometry.vertices<span class="org-rainbow-delimiters-depth-2">)</span>;
    send_colors<span class="org-rainbow-delimiters-depth-2">(</span>&amp;vao_cube, &amp;vbo_colors, attr_color, cube_geometry.colors<span class="org-rainbow-delimiters-depth-2">)</span>;    
    <span class="org-constant">std</span>::fprintf<span class="org-rainbow-delimiters-depth-2">(</span>stderr, <span class="org-string">" [TRACE] vao_cube = %d \n"</span>, vao_cube <span class="org-rainbow-delimiters-depth-2">)</span>;    

    <span class="org-comment-delimiter">// </span><span class="org-comment">------- Upload grid vertices and colors ------------------//</span>
    <span class="org-type">Geometry</span> <span class="org-variable-name">grid_geometry</span> = make_grid_geometry<span class="org-rainbow-delimiters-depth-2">(</span>20, 0.1f, ColorRGB<span class="org-rainbow-delimiters-depth-3">{</span>0.0f, 0.9f, 0.5f<span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">GLuint</span> <span class="org-variable-name">vao_grid</span> = 0;
    <span class="org-type">GLuint</span> <span class="org-variable-name">vbo_grid_vertices</span> = 0;
    send_vertices<span class="org-rainbow-delimiters-depth-2">(</span>&amp;vao_grid, &amp;vbo_grid_vertices, attr_position, grid_geometry.vertices<span class="org-rainbow-delimiters-depth-2">)</span>;
    send_colors<span class="org-rainbow-delimiters-depth-2">(</span>&amp;vao_grid, &amp;vbo_grid_vertices, attr_color, grid_geometry.colors<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">----- X, Y, Z axis for visual debugging ----------------</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">X axis (GREEN) ; Y axis (RED); Z axis (BLUE)</span>
    <span class="org-type">GLuint</span> <span class="org-variable-name">vao_axis</span> = 0; 
    <span class="org-type">GLuint</span> <span class="org-variable-name">vbo_axis_vertices</span> = 0;
    <span class="org-type">GLuint</span> <span class="org-variable-name">vbo_axis_colors</span> = 0;
    <span class="org-type">float</span> <span class="org-variable-name">axis_len</span> = 5.0;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Each two points represents a unconnected line (GL_LINES)</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">Vertex3D</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">axis_vertices</span> <span class="org-rainbow-delimiters-depth-2">{</span>        
        <span class="org-comment-delimiter">// </span><span class="org-comment">Line for X axis - from (0.0, 0.0, 0.0) to (axis_len, 0.0, 0.0)</span>
          Vertex3D<span class="org-rainbow-delimiters-depth-3">{</span>0.0f, 0.0f, 0.0f<span class="org-rainbow-delimiters-depth-3">}</span>, Vertex3D<span class="org-rainbow-delimiters-depth-3">{</span>axis_len, 0.0f, 0.0f<span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Line for Y axis </span>
        , Vertex3D<span class="org-rainbow-delimiters-depth-3">{</span>0.0f, 0.0f, 0.0f<span class="org-rainbow-delimiters-depth-3">}</span>, Vertex3D<span class="org-rainbow-delimiters-depth-3">{</span>0.0f, axis_len, 0.0f<span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Line for Z axis </span>
        , Vertex3D<span class="org-rainbow-delimiters-depth-3">{</span>0.0f, 0.0f, 0.0f<span class="org-rainbow-delimiters-depth-3">}</span>, Vertex3D<span class="org-rainbow-delimiters-depth-3">{</span>0.0f, 0.0, axis_len<span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">axis_colors</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">ColorRGB</span><span class="org-rainbow-delimiters-depth-2">&gt;{</span>
          <span class="org-comment-delimiter">// </span><span class="org-comment">Color of X axis line </span>
          color_green, color_green
          <span class="org-comment-delimiter">// </span><span class="org-comment">Color of Y axis line </span>
         , color_red,  color_red
          <span class="org-comment-delimiter">// </span><span class="org-comment">Color of Z axis line </span>
         , color_blue, color_blue
    <span class="org-rainbow-delimiters-depth-2">}</span>;

    send_vertices<span class="org-rainbow-delimiters-depth-2">(</span>&amp;vao_axis, &amp;vbo_axis_vertices, attr_position, axis_vertices<span class="org-rainbow-delimiters-depth-2">)</span>;
    send_colors<span class="org-rainbow-delimiters-depth-2">(</span>&amp;vao_axis,   &amp;vbo_axis_colors,   attr_color,    axis_colors  <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">============== Set Shader Uniform Variables =============// </span>
    <span class="org-comment-delimiter">//                                                          </span><span class="org-comment">// </span>

    <span class="org-type">int</span> <span class="org-variable-name">width</span>, <span class="org-variable-name">height</span>;
    glfwGetWindowSize<span class="org-rainbow-delimiters-depth-2">(</span>window, &amp;width, &amp;height<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Window aspect ratio</span>
    <span class="org-type">float</span> <span class="org-variable-name">aspect</span> = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>width<span class="org-rainbow-delimiters-depth-2">)</span> / height;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Identity matrix </span>
    <span class="org-keyword">const</span> <span class="org-keyword">auto</span> identity = <span class="org-constant">glm</span>::mat4<span class="org-rainbow-delimiters-depth-2">(</span>1.0<span class="org-rainbow-delimiters-depth-2">)</span>;


    <span class="org-comment-delimiter">// </span><span class="org-comment">Set projection matrix uniform variable</span>
    glUniformMatrix4fv<span class="org-rainbow-delimiters-depth-2">(</span>u_proj, 1, GL_FALSE, <span class="org-constant">glm</span>::value_ptr<span class="org-rainbow-delimiters-depth-3">(</span>identity<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">==== R E N D E R I N G - O B J E C T S ==========================//</span>
    <span class="org-comment-delimiter">//                                                                  </span><span class="org-comment">//</span>

    <span class="org-type">RenderObject</span> <span class="org-variable-name">cube1</span><span class="org-rainbow-delimiters-depth-2">{}</span>;
    cube1.vao        = vao_cube;
    cube1.u_model    = u_model;    
    cube1.draw_type  = GL_QUADS;
    cube1.n_vertices = 24;
    <span class="org-comment-delimiter">// </span><span class="org-comment">cube1.model = glm::scale(cube1.model, glm::vec3(0.5, 0.5, 0.5));</span>
    cube1.model = <span class="org-constant">glm</span>::translate<span class="org-rainbow-delimiters-depth-2">(</span>cube1.model, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-3">(</span>0.2, 1.20, +0.4<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;        
    cube1.model = <span class="org-constant">glm</span>::rotate<span class="org-rainbow-delimiters-depth-2">(</span>cube1.model, <span class="org-constant">glm</span>::radians<span class="org-rainbow-delimiters-depth-3">(</span>45.0f<span class="org-rainbow-delimiters-depth-3">)</span>, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-3">(</span>1.0, 1.0, 0.0<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Call copy constructor (copy all data from cube1)</span>
    <span class="org-type">RenderObject</span> <span class="org-variable-name">cube2</span> = cube1;
    cube2.model = <span class="org-constant">glm</span>::mat4<span class="org-rainbow-delimiters-depth-2">(</span>1.0<span class="org-rainbow-delimiters-depth-2">)</span>;
    cube2.model = <span class="org-constant">glm</span>::translate<span class="org-rainbow-delimiters-depth-2">(</span>cube2.model, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-3">(</span>-1.20, 1.2, 0.4<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;        
    cube2.model = <span class="org-constant">glm</span>::scale<span class="org-rainbow-delimiters-depth-2">(</span>cube2.model, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-3">(</span>1.5, 1.5, 1.5<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;        
    <span class="org-comment-delimiter">// </span><span class="org-comment">cube2.model = glm::rotate(cube2.model, glm::radians(60.0f), glm::vec3(1.0, 0.0, 1.0));     </span>


    <span class="org-comment-delimiter">// </span><span class="org-comment">Grid in the plane containing the axis X and Y </span>
    <span class="org-type">RenderObject</span> <span class="org-variable-name">grid_xy</span><span class="org-rainbow-delimiters-depth-2">{}</span>;
    grid_xy.vao        = vao_grid;
    grid_xy.u_model    = u_model;
    grid_xy.draw_type  = GL_LINES; <span class="org-comment-delimiter">// </span><span class="org-comment">Unconnected lines</span>
    grid_xy.n_vertices = grid_geometry.vertices.size<span class="org-rainbow-delimiters-depth-2">()</span>;
    grid_xy.model = <span class="org-constant">glm</span>::translate<span class="org-rainbow-delimiters-depth-2">(</span>grid_xy.model, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-3">(</span>0.0, 1.5, -2.2<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">//</span><span class="org-comment">grid_xy.model = glm::scale(grid_xy.model, glm::vec3(4.0, 4.0, 4.0));</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Grid in the plane which contains the axis X and Z </span>
    <span class="org-type">RenderObject</span> <span class="org-variable-name">grid_xz</span> = grid_xy;
    grid_xz.model = <span class="org-constant">glm</span>::mat4<span class="org-rainbow-delimiters-depth-2">(</span>1.0<span class="org-rainbow-delimiters-depth-2">)</span>;
    grid_xz.model = <span class="org-constant">glm</span>::rotate<span class="org-rainbow-delimiters-depth-2">(</span>grid_xz.model, <span class="org-constant">glm</span>::radians<span class="org-rainbow-delimiters-depth-3">(</span>-90.0f<span class="org-rainbow-delimiters-depth-3">)</span>, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-3">(</span>1.0, 0.0, 0.0<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>; 
     <span class="org-comment-delimiter">// </span><span class="org-comment">grid_xz.model = glm::scale(grid_xz.model, glm::vec3(4.0, 4.0, 4.0));</span>


    <span class="org-comment-delimiter">// </span><span class="org-comment">Axis which is positioned at the origin of WCS (World Coordinate System)</span>
    <span class="org-type">RenderObject</span> <span class="org-variable-name">axis_world</span>;
    axis_world.u_model   = u_model;
    axis_world.vao       = vao_axis;
    axis_world.draw_type = GL_LINES;
    axis_world.n_vertices = axis_vertices.size<span class="org-rainbow-delimiters-depth-2">()</span>;   


    <span class="org-type">Camera</span> <span class="org-variable-name">camera</span><span class="org-rainbow-delimiters-depth-2">(</span>u_view, u_proj, width / height<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">//  </span><span class="org-comment">======= R E N D E R  - L O O P ============//</span>
    <span class="org-comment-delimiter">//                                             </span><span class="org-comment">//</span>
    <span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-negation-char">!</span>glfwWindowShouldClose<span class="org-rainbow-delimiters-depth-3">(</span>window<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        glClear<span class="org-rainbow-delimiters-depth-3">(</span>GL_COLOR_BUFFER_BIT  | GL_DEPTH_BUFFER_BIT<span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">====== BEGIN RENDERING ============//</span>

            <span class="org-comment-delimiter">// </span><span class="org-comment">GL_CHECK( ::glutWireTeapot(0.50) );</span>

            <span class="org-comment-delimiter">// </span><span class="org-comment">------ Draw Grid ----------</span>
            axis_world.render<span class="org-rainbow-delimiters-depth-3">()</span>;
            grid_xy.render<span class="org-rainbow-delimiters-depth-3">()</span>;
            grid_xz.render<span class="org-rainbow-delimiters-depth-3">()</span>;        
            cube1.render<span class="org-rainbow-delimiters-depth-3">()</span>;
            cube2.render<span class="org-rainbow-delimiters-depth-3">()</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">====== END RENDERING ==============//</span>

        <span class="org-comment-delimiter">/* </span><span class="org-comment">Swap front and back buffers */</span>
        glfwSwapBuffers<span class="org-rainbow-delimiters-depth-3">(</span>window<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">/* </span><span class="org-comment">Poll for and process events */</span>
        glfwWaitEvents<span class="org-rainbow-delimiters-depth-3">()</span>;

        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, <span class="org-string">'Q'</span> <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
             <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [TRACE] User typed Q =&gt;&gt; Shutdown program. Ok. "</span> &lt;&lt; <span class="org-string">'\n'</span>;
             <span class="org-keyword">break</span>;
        <span class="org-rainbow-delimiters-depth-3">}</span>

        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, GLFW_KEY_RIGHT <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">){</span> camera.rotate_y<span class="org-rainbow-delimiters-depth-4">(</span>+10.0<span class="org-rainbow-delimiters-depth-4">)</span>; <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, GLFW_KEY_LEFT  <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">){</span> camera.rotate_y<span class="org-rainbow-delimiters-depth-4">(</span>-10.0<span class="org-rainbow-delimiters-depth-4">)</span>; <span class="org-rainbow-delimiters-depth-3">}</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">Move camera up (positive Y axis)</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, GLFW_KEY_UP  <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">){</span> 
            camera.cam_eye.y += 0.5; 
            camera.update_view<span class="org-rainbow-delimiters-depth-4">()</span>;
        <span class="org-rainbow-delimiters-depth-3">}</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">Move camera down (negative Y axis)</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, GLFW_KEY_DOWN  <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span> 
            camera.cam_eye.y -= 0.5; 
            camera.update_view<span class="org-rainbow-delimiters-depth-4">()</span>;            
        <span class="org-rainbow-delimiters-depth-3">}</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">Rotate cube 1 in counter counter clockwise way around Y axis</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, <span class="org-string">'A'</span>  <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>  
            cube1.model = <span class="org-constant">glm</span>::rotate<span class="org-rainbow-delimiters-depth-4">(</span> cube1.model, <span class="org-constant">glm</span>::radians<span class="org-rainbow-delimiters-depth-5">(</span>+10.0f<span class="org-rainbow-delimiters-depth-5">)</span>, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-5">(</span>0.0, 1.0, 0.0<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-4">)</span>;
        <span class="org-rainbow-delimiters-depth-3">}</span>        
        <span class="org-comment-delimiter">// </span><span class="org-comment">Rotate cube 1 in counter clockwise way around Y axis</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, <span class="org-string">'S'</span>  <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>     
            cube1.model = <span class="org-constant">glm</span>::rotate<span class="org-rainbow-delimiters-depth-4">(</span> cube1.model, <span class="org-constant">glm</span>::radians<span class="org-rainbow-delimiters-depth-5">(</span>-10.0f<span class="org-rainbow-delimiters-depth-5">)</span>, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-5">(</span>0.0, 1.0, 0.0<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-4">)</span>;
        <span class="org-rainbow-delimiters-depth-3">}</span>    

        <span class="org-comment-delimiter">// </span><span class="org-comment">Rotate cube 1 in counter counter clockwise way around X axis (positive rotation)</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, <span class="org-string">'Z'</span>  <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>  
            cube1.model = <span class="org-constant">glm</span>::rotate<span class="org-rainbow-delimiters-depth-4">(</span> cube1.model, <span class="org-constant">glm</span>::radians<span class="org-rainbow-delimiters-depth-5">(</span>+10.0f<span class="org-rainbow-delimiters-depth-5">)</span>, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-5">(</span>1.0, 0.0, 0.0<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-4">)</span>;
        <span class="org-rainbow-delimiters-depth-3">}</span>           
        <span class="org-comment-delimiter">// </span><span class="org-comment">Rotate cube 1 in counter counter clockwise way around X axis (negative rotation)</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, <span class="org-string">'X'</span>  <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>  
            cube1.model = <span class="org-constant">glm</span>::rotate<span class="org-rainbow-delimiters-depth-4">(</span> cube1.model, <span class="org-constant">glm</span>::radians<span class="org-rainbow-delimiters-depth-5">(</span>-10.0f<span class="org-rainbow-delimiters-depth-5">)</span>, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-5">(</span>1.0, 0.0, 0.0<span class="org-rainbow-delimiters-depth-5">)</span> <span class="org-rainbow-delimiters-depth-4">)</span>;
        <span class="org-rainbow-delimiters-depth-3">}</span>           


    <span class="org-rainbow-delimiters-depth-2">}</span>

    glfwTerminate<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-keyword">return</span> 0;

<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">--- End of main() -----//</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">---------- S H A D E R - P R O G R A M S  -------------------------//</span>
<span class="org-comment-delimiter">//</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Minimal vertex shader =&gt;&gt; Runs on the GPU and processes each vertex.</span>
<span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">code_vertex_shader</span> = R<span class="org-default">"</span><span class="org-string">(    </span>
<span class="org-string">    #version 330 core </span>

<span class="org-string">    layout ( location = 0)  in vec3 position;</span>
<span class="org-string">    layout ( location = 1) in vec3 color;   </span>
<span class="org-string">    out vec3 out_color;</span>
<span class="org-string">    uniform mat4 u_model;       // Model matrix </span>
<span class="org-string">    uniform mat4 u_view;        // Camera's view matrix    </span>
<span class="org-string">    uniform mat4 u_projection;  // Camera's projection matrix </span>

<span class="org-string">    void main()</span>
<span class="org-string">    {</span>
<span class="org-string">        gl_Position = u_projection * u_view * u_model * vec4(position, 1.0);</span>

<span class="org-string">        // Forward to fragment shader </span>
<span class="org-string">        out_color = color; // vec3(0.56, 0.6, 0.0);</span>
<span class="org-string">    }</span>

<span class="org-string">)</span><span class="org-default">"</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Fragment shader source code </span>
<span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">code_frag_shader</span> = R<span class="org-default">"</span><span class="org-string">(</span>
<span class="org-string">    #version 330 </span>

<span class="org-string">    // This color comes from Vertex shader </span>
<span class="org-string">    in vec3 out_color;</span>

<span class="org-string">    void main()</span>
<span class="org-string">    {</span>
<span class="org-string">        // Set vertex colors</span>
<span class="org-string">        gl_FragColor =  vec4(out_color, 1.0);</span>
<span class="org-string">        // gl_FragColor = vec4(0.3, 0.6, 0.0, 1.0);</span>
<span class="org-string">    }</span>
<span class="org-string">)</span><span class="org-default">"</span>;


    <span class="org-comment-delimiter">// </span><span class="org-comment">====== I M P L E M E N T A T I O N S ==========// </span>

<span class="org-type">GLFWwindow</span>* 
<span class="org-function-name">make_glfwWindowi</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span>  <span class="org-variable-name">width</span>, <span class="org-type">int</span> <span class="org-variable-name">height</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">title</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>

    glfwSetErrorCallback<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">int</span> <span class="org-variable-name">error</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">description</span><span class="org-rainbow-delimiters-depth-3">)</span>
                         <span class="org-rainbow-delimiters-depth-3">{</span> <span class="org-constant">std</span>::fprintf<span class="org-rainbow-delimiters-depth-4">(</span> stderr, <span class="org-string">" [GLFW ERROR] Error = %d ; Description = %s \n"</span>
                                        , error, description<span class="org-rainbow-delimiters-depth-4">)</span>;
                         <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">GLFWwindow</span>* <span class="org-variable-name">window</span> = glfwCreateWindow<span class="org-rainbow-delimiters-depth-2">(</span>width, height, title, <span class="org-constant">NULL</span>, <span class="org-constant">NULL</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span> window != <span class="org-constant">nullptr</span> &amp;&amp; <span class="org-string">"Failed  to create Window"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">OpenGL context </span>
    glfwMakeContextCurrent<span class="org-rainbow-delimiters-depth-2">(</span>window<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Pain whole screen as black - dark screen colors are better </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">for avoding eye strain due long hours staring on monitor.</span>
    glClearColor<span class="org-rainbow-delimiters-depth-2">(</span>0.0f, 0.0f, 0.0f, 1.0f<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Set - OpenGL Core Profile - version 3.3</span>
    GL_CHECK<span class="org-rainbow-delimiters-depth-2">(</span> glfwWindowHint<span class="org-rainbow-delimiters-depth-3">(</span>GLFW_CONTEXT_VERSION_MAJOR, 3<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span>; 
    GL_CHECK<span class="org-rainbow-delimiters-depth-2">(</span> glfwWindowHint<span class="org-rainbow-delimiters-depth-3">(</span>GLFW_CONTEXT_VERSION_MINOR, 3<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span>;
    GL_CHECK<span class="org-rainbow-delimiters-depth-2">(</span> glfwWindowHint<span class="org-rainbow-delimiters-depth-3">(</span>GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span>;

    GL_CHECK<span class="org-rainbow-delimiters-depth-2">(</span> glEnable<span class="org-rainbow-delimiters-depth-3">(</span>GL_COLOR_MATERIAL<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span>;
    GL_CHECK<span class="org-rainbow-delimiters-depth-2">(</span> glEnable<span class="org-rainbow-delimiters-depth-3">(</span>GL_DEPTH_TEST<span class="org-rainbow-delimiters-depth-3">)</span>     <span class="org-rainbow-delimiters-depth-2">)</span>;
    GL_CHECK<span class="org-rainbow-delimiters-depth-2">(</span> glEnable<span class="org-rainbow-delimiters-depth-3">(</span>GL_BLEND<span class="org-rainbow-delimiters-depth-3">)</span>          <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">return</span> window;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-function-name">compile_shader</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">GLuint</span> <span class="org-variable-name">m_program</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">code</span>, <span class="org-type">GLenum</span> <span class="org-variable-name">type</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">GLint</span> <span class="org-variable-name">shader_id</span> = glCreateShader<span class="org-rainbow-delimiters-depth-2">(</span> type <span class="org-rainbow-delimiters-depth-2">)</span>;
    glShaderSource<span class="org-rainbow-delimiters-depth-2">(</span>shader_id, 1, &amp;code, <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    glCompileShader<span class="org-rainbow-delimiters-depth-2">(</span>shader_id<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">GLint</span> <span class="org-variable-name">is_compiled</span> = GL_FALSE;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Check shader compilation result </span>
    glGetShaderiv<span class="org-rainbow-delimiters-depth-2">(</span>shader_id, GL_COMPILE_STATUS, &amp;is_compiled<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">If there is any shader compilation result, </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">print the error message.</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span> is_compiled == GL_FALSE<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-type">GLint</span> <span class="org-variable-name">length</span>;
        glGetShaderiv<span class="org-rainbow-delimiters-depth-3">(</span>shader_id, GL_INFO_LOG_LENGTH, &amp;length<span class="org-rainbow-delimiters-depth-3">)</span>;
        assert<span class="org-rainbow-delimiters-depth-3">(</span> length &gt; 0 <span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">out</span><span class="org-rainbow-delimiters-depth-3">(</span>length + 1, 0x00<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">GLint</span> <span class="org-variable-name">chars_written</span>;
        glGetShaderInfoLog<span class="org-rainbow-delimiters-depth-3">(</span>shader_id, length, &amp;chars_written, out.data<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [SHADER ERROR] = "</span> &lt;&lt; out &lt;&lt; <span class="org-string">'\n'</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Abort the exection of current process. </span>
        <span class="org-constant">std</span>::abort<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>          

    glAttachShader<span class="org-rainbow-delimiters-depth-2">(</span>m_program, shader_id<span class="org-rainbow-delimiters-depth-2">)</span>;   
    glDeleteShader<span class="org-rainbow-delimiters-depth-2">(</span>shader_id<span class="org-rainbow-delimiters-depth-2">)</span>;
    glLinkProgram<span class="org-rainbow-delimiters-depth-2">(</span>m_program<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">GLint</span> <span class="org-variable-name">link_status</span> = GL_FALSE;
    glGetProgramiv<span class="org-rainbow-delimiters-depth-2">(</span>m_program, GL_LINK_STATUS, &amp;link_status<span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span> link_status != GL_FALSE <span class="org-rainbow-delimiters-depth-2">)</span>;   
    <span class="org-comment-delimiter">// </span><span class="org-comment">glUseProgram(m_program);         </span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Upload buffer from main memory to GPU VBO </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">=&gt;&gt; Parameters VAO, VBO are allocated by the caller. </span>
<span class="org-type">void</span> <span class="org-function-name">send_buffer</span><span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-type">GLuint</span>* <span class="org-variable-name">pVao</span>, <span class="org-type">GLuint</span>* <span class="org-variable-name">pVbo</span>, <span class="org-type">GLsizei</span> <span class="org-variable-name">sizeBuffer</span>
                , <span class="org-type">void</span>* <span class="org-variable-name">pBufffer</span>, <span class="org-type">GLint</span>   <span class="org-variable-name">shader_attr</span>, <span class="org-type">GLint</span> <span class="org-variable-name">size</span>
                , <span class="org-type">GLenum</span> <span class="org-variable-name">type</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    assert<span class="org-rainbow-delimiters-depth-2">(</span>pVao != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span>pVbo != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">GLuint</span>&amp; <span class="org-variable-name">vao</span> = *pVao;
    <span class="org-type">GLuint</span>&amp; <span class="org-variable-name">vbo</span> = *pVbo;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Generate and bind current VAO (Vertex Array Object)</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>vao == 0<span class="org-rainbow-delimiters-depth-2">){</span> glGenVertexArrays<span class="org-rainbow-delimiters-depth-3">(</span>1, &amp;vao<span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
    glBindVertexArray<span class="org-rainbow-delimiters-depth-2">(</span>vao<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Generate and bind current VBO (Vertex Buffer Object)</span>
    glGenBuffers<span class="org-rainbow-delimiters-depth-2">(</span>1, &amp;vbo<span class="org-rainbow-delimiters-depth-2">)</span>;
    glBindBuffer<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, vbo<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Upload data to current VBO buffer in GPU </span>
    glBufferData<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, sizeBuffer, pBufffer, GL_STATIC_DRAW<span class="org-rainbow-delimiters-depth-2">)</span>;   
    glEnableVertexAttribArray<span class="org-rainbow-delimiters-depth-2">(</span>shader_attr<span class="org-rainbow-delimiters-depth-2">)</span>;    
    <span class="org-comment-delimiter">// </span><span class="org-comment">Set data layout - how data will be interpreted.</span>
    glVertexAttribPointer<span class="org-rainbow-delimiters-depth-2">(</span>shader_attr, size, type, GL_FALSE, 0, <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">------ Disable Global state set by this function -----//</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Unbind VAO </span>
    glBindVertexArray<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Unbind VBO </span>
    glBindBuffer<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, vbo<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Disable current shader attribute </span>
    glDisableVertexAttribArray<span class="org-rainbow-delimiters-depth-2">(</span>shader_attr<span class="org-rainbow-delimiters-depth-2">)</span>;

<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-type">Geometry</span>
<span class="org-function-name">make_grid_geometry</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">size_t</span> <span class="org-variable-name">n_grid</span>, <span class="org-type">float</span> <span class="org-variable-name">dx</span>, <span class="org-keyword">const</span> <span class="org-type">ColorRGB</span>&amp; <span class="org-variable-name">color</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">Vertex3D</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">grid_vertices</span>;
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">ColorRGB</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">grid_colors</span> ;

    <span class="org-type">float</span> <span class="org-variable-name">dy</span> = dx;
    <span class="org-type">float</span> <span class="org-variable-name">grid_w</span>  = n_grid * dx;
    <span class="org-type">float</span> <span class="org-variable-name">grid_h</span>  = n_grid * dy;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Draw horizontal lines - parallel to X axis </span>
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">size_t</span> <span class="org-variable-name">n</span> = 0; n &lt; 2 * n_grid; n++<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Line Vertex A (BEGIN)</span>
        grid_vertices.push_back<span class="org-rainbow-delimiters-depth-3">(</span> Vertex3D<span class="org-rainbow-delimiters-depth-4">{</span> -grid_w, dy * n - grid_h, 0 <span class="org-rainbow-delimiters-depth-4">}</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Color of vertex A </span>
        grid_colors.push_back<span class="org-rainbow-delimiters-depth-3">(</span>color<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Line Vertex B (END)</span>
        grid_vertices.push_back<span class="org-rainbow-delimiters-depth-3">(</span> Vertex3D<span class="org-rainbow-delimiters-depth-4">{</span> +grid_w, dy * n - grid_h, 0  <span class="org-rainbow-delimiters-depth-4">}</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Color of vertex B</span>
        grid_colors.push_back<span class="org-rainbow-delimiters-depth-3">(</span>color<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

     <span class="org-comment-delimiter">// </span><span class="org-comment">Draw horizontal lines - parallel to Y axis </span>
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">size_t</span> <span class="org-variable-name">n</span> = 0; n &lt; 2 * n_grid; n++<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Line point A (BEGIN)</span>
        grid_vertices.push_back<span class="org-rainbow-delimiters-depth-3">(</span> Vertex3D<span class="org-rainbow-delimiters-depth-4">{</span> dx * n - grid_w, -grid_h, 0 <span class="org-rainbow-delimiters-depth-4">}</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Color of Vertex A </span>
        grid_colors.push_back<span class="org-rainbow-delimiters-depth-3">(</span>color<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Line pojnt B (END)</span>
        grid_vertices.push_back<span class="org-rainbow-delimiters-depth-3">(</span> Vertex3D<span class="org-rainbow-delimiters-depth-4">{</span> dx * n - grid_w, +grid_h, 0  <span class="org-rainbow-delimiters-depth-4">}</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Color of Vertex B </span>
        grid_colors.push_back<span class="org-rainbow-delimiters-depth-3">(</span>color<span class="org-rainbow-delimiters-depth-3">)</span>;

    <span class="org-rainbow-delimiters-depth-2">}</span>    

    <span class="org-keyword">return</span> Geometry<span class="org-rainbow-delimiters-depth-2">{</span> grid_vertices, grid_colors <span class="org-rainbow-delimiters-depth-2">}</span>;

<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">Geometry</span> 
<span class="org-function-name">make_cube_geometry</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span> <span class="org-variable-name">w</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>   
    <span class="org-comment-delimiter">// </span><span class="org-comment">Array of cube vertex coordinates (X, Y)</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">vertices</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">Vertex3D</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Top face {y = w}</span>
        <span class="org-rainbow-delimiters-depth-3">{</span> w, w, -w<span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>-w, w, -w<span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>-w, w,  w<span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span> w, w,  w<span class="org-rainbow-delimiters-depth-3">}</span>

      <span class="org-comment-delimiter">// </span><span class="org-comment">Bottom face , {y = -w}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span> w, -w,  w<span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>-w, -w,  w<span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>-w, -w, -w<span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span> w, -w, -w<span class="org-rainbow-delimiters-depth-3">}</span>

      <span class="org-comment-delimiter">// </span><span class="org-comment">Front face  , {z = w}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span> w,  w, w<span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>-w,  w, w<span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>-w, -w, w<span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span> w, -w, w<span class="org-rainbow-delimiters-depth-3">}</span>

      <span class="org-comment-delimiter">// </span><span class="org-comment">Back face , {z = -w}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span> w, -w, -w<span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>-w, -w, -w<span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>-w,  w, -w<span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span> w,  w, -w<span class="org-rainbow-delimiters-depth-3">}</span>

      <span class="org-comment-delimiter">// </span><span class="org-comment">Left face , {x = -w}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>-w,  w,  w<span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>-w,  w, -w<span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>-w, -w, -w<span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>-w, -w,  w<span class="org-rainbow-delimiters-depth-3">}</span>

      <span class="org-comment-delimiter">// </span><span class="org-comment">Right face , {x = w}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>w,  w, -w<span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>w,  w,  w<span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>w, -w,  w<span class="org-rainbow-delimiters-depth-3">}</span>
      , <span class="org-rainbow-delimiters-depth-3">{</span>w, -w, -w<span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">std::fprintf(stderr, " [TRACE] Number of cube vertices = %zu \n", cube_vertices.size() );</span>

    <span class="org-keyword">auto</span> <span class="org-variable-name">colors</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">ColorRGB</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span> 
           color_red
        ,  color_red
        ,  color_red
        ,  color_red

        , color_blue
        , color_blue
        , color_blue
        , color_blue

        , color_green
        , color_green
        , color_green
        , color_green

        , color_gray
        , color_gray
        , color_gray
        , color_gray

        , color_dark_green
        , color_dark_green
        , color_dark_green
        , color_dark_green

        , color_dark_blue
        , color_dark_blue
        , color_dark_blue
        , color_dark_blue
    <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-keyword">return</span> Geometry<span class="org-rainbow-delimiters-depth-2">{</span> vertices, colors <span class="org-rainbow-delimiters-depth-2">}</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org5b28d92" class="outline-3">
<h3 id="org5b28d92"><span class="section-number-3">1.13</span> 3D Graphics - Quaternion</h3>
<div class="outline-text-3" id="text-1-13">
<p>
The class Transform has the fields, position for setting the object
position in world-coordinates; scale for adjusting object size and
rotation, which is a quaternion for encoding rotation around an
arbitrary axis. The use of quaternions saves the usage of many matrix
multiplications for each transform and also allows easier accumulation
of intermediate rotations. 
</p>

<p>
Quaternions are also used in the camera class for providing
YRP (Yaw-Pitch-Roll) camera rotation and free movement in the
space. The keys arrow-left, arrow-right rotates the direction to where
camera is looking at to right or to the left. The key arrow-up, moves
the camera position in the direction to where the camera is looking
at. The key arrow-down moves the camera in the backward direction to
where the camera is looking at. The key 'S' rotates the camera up, the
key 'D' rotates the camera down. 
</p>

<p>
The scene, has a blue square on the plane XY; a green square on plane
XZ; a teapot and torus. The torus can be moved, scaled and rotated in
the space by just changing its transform object parameters. By typing
the key 'B', the teapot scale is increased, and by typing 'N' its
scale is decrease. The keys 'J', 'L' rotates the teapot around the Y
axis. The key 'P' moves the teapot up across Y axis. The key 'O' moves
the teapot down across the Y axis. 
</p>

<p>
Note: This code requires the GLUT library which provides the sample
wireframe teapot and torus. 
</p>

<p>
<b>Screenshots</b> 
</p>


<div class="figure">
<p><a href="images/opengl-draw3d-camera1.png"><img src="images/opengl-draw3d-camera1.png" alt="opengl-draw3d-camera1.png" /></a> 
</p>
</div>


<div class="figure">
<p><a href="images/opengl-draw3d-camera2.png"><img src="images/opengl-draw3d-camera2.png" alt="opengl-draw3d-camera2.png" /></a>
</p>
</div>


<p>
<b>Code Highlights</b> 
</p>

<p>
Transform class using quaternion: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">
<span class="org-comment-delimiter">// </span><span class="org-comment">Transform object that combines - translation, scale and rotation (quaternion)</span>
<span class="org-keyword">struct</span> <span class="org-type">Transform</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">glm</span>::<span class="org-type">vec4</span> <span class="org-variable-name">position</span> = <span class="org-rainbow-delimiters-depth-2">{</span>0.0, 0.0, 0.0, 1.0<span class="org-rainbow-delimiters-depth-2">}</span>; 
    <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-variable-name">scale</span>    = <span class="org-rainbow-delimiters-depth-2">{</span>1.0, 1.0, 1.0<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-constant">glm</span>::<span class="org-type">quat</span> <span class="org-variable-name">rotation</span> = <span class="org-rainbow-delimiters-depth-2">{</span>1.0, 0.0, 0.0, 0.0<span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-type">void</span> <span class="org-function-name">set_scale</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">k</span><span class="org-rainbow-delimiters-depth-2">){</span> scale<span class="org-rainbow-delimiters-depth-3">[</span>0<span class="org-rainbow-delimiters-depth-3">]</span>  = k; scale<span class="org-rainbow-delimiters-depth-3">[</span>1<span class="org-rainbow-delimiters-depth-3">]</span> = k;  scale<span class="org-rainbow-delimiters-depth-3">[</span>2<span class="org-rainbow-delimiters-depth-3">]</span>  = k;  <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">void</span> <span class="org-function-name">add_scale</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">k</span><span class="org-rainbow-delimiters-depth-2">){</span> scale<span class="org-rainbow-delimiters-depth-3">[</span>0<span class="org-rainbow-delimiters-depth-3">]</span> += k; scale<span class="org-rainbow-delimiters-depth-3">[</span>1<span class="org-rainbow-delimiters-depth-3">]</span> += k; scale<span class="org-rainbow-delimiters-depth-3">[</span>2<span class="org-rainbow-delimiters-depth-3">]</span> += k;  <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">void</span> <span class="org-function-name">set_position</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">x</span>, <span class="org-type">float</span> <span class="org-variable-name">y</span>, <span class="org-type">float</span> <span class="org-variable-name">z</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>  <span class="org-keyword">this</span>-&gt;position = <span class="org-constant">glm</span>::vec4<span class="org-rainbow-delimiters-depth-3">(</span>x, y, z, 1.0<span class="org-rainbow-delimiters-depth-3">)</span>;  <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-type">void</span> <span class="org-function-name">set_rotation</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">angle</span>, <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">axis</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">this</span>-&gt;rotation = <span class="org-constant">glm</span>::angleAxis<span class="org-rainbow-delimiters-depth-3">(</span> <span class="org-constant">glm</span>::<span class="org-type">radians</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">angle</span><span class="org-rainbow-delimiters-depth-4">)</span>, axis <span class="org-rainbow-delimiters-depth-3">)</span>;  <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">void</span> <span class="org-function-name">translate</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">dx</span>, <span class="org-type">float</span> <span class="org-variable-name">dy</span>, <span class="org-type">float</span> <span class="org-variable-name">dz</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span> 
        <span class="org-keyword">this</span>-&gt;position<span class="org-rainbow-delimiters-depth-3">[</span>0<span class="org-rainbow-delimiters-depth-3">]</span> += dx; 
        <span class="org-keyword">this</span>-&gt;position<span class="org-rainbow-delimiters-depth-3">[</span>1<span class="org-rainbow-delimiters-depth-3">]</span> += dy; 
        <span class="org-keyword">this</span>-&gt;position<span class="org-rainbow-delimiters-depth-3">[</span>2<span class="org-rainbow-delimiters-depth-3">]</span> += dz; 
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Rotation increment. </span>
    <span class="org-type">void</span> <span class="org-function-name">rotate</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">angle</span>, <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">axis</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">q</span> = <span class="org-constant">glm</span>::angleAxis<span class="org-rainbow-delimiters-depth-3">(</span> <span class="org-constant">glm</span>::<span class="org-type">radians</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">angle</span><span class="org-rainbow-delimiters-depth-4">)</span>, axis <span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">this</span>-&gt;rotation = q * <span class="org-keyword">this</span>-&gt;rotation;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Get model affine transform - comprised of scale, translation and translation. </span>
    <span class="org-constant">glm</span>::<span class="org-type">mat4</span> <span class="org-function-name">transform</span><span class="org-rainbow-delimiters-depth-2">()</span> 
    <span class="org-rainbow-delimiters-depth-2">{</span>   
        <span class="org-comment-delimiter">// </span><span class="org-comment">Get transformation matrix from quaternion </span>
        <span class="org-constant">glm</span>::<span class="org-type">mat4</span> <span class="org-variable-name">trf</span> = <span class="org-constant">glm</span>::mat4_cast<span class="org-rainbow-delimiters-depth-3">(</span>rotation<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Multiply all elements of column X axis scale </span>
        trf<span class="org-rainbow-delimiters-depth-3">[</span>0<span class="org-rainbow-delimiters-depth-3">]</span> = scale<span class="org-rainbow-delimiters-depth-3">[</span>0<span class="org-rainbow-delimiters-depth-3">]</span> * <span class="org-constant">glm</span>::column<span class="org-rainbow-delimiters-depth-3">(</span>trf, 0<span class="org-rainbow-delimiters-depth-3">)</span>;
        trf<span class="org-rainbow-delimiters-depth-3">[</span>1<span class="org-rainbow-delimiters-depth-3">]</span> = scale<span class="org-rainbow-delimiters-depth-3">[</span>1<span class="org-rainbow-delimiters-depth-3">]</span> * <span class="org-constant">glm</span>::column<span class="org-rainbow-delimiters-depth-3">(</span>trf, 1<span class="org-rainbow-delimiters-depth-3">)</span>;
        trf<span class="org-rainbow-delimiters-depth-3">[</span>2<span class="org-rainbow-delimiters-depth-3">]</span> = scale<span class="org-rainbow-delimiters-depth-3">[</span>2<span class="org-rainbow-delimiters-depth-3">]</span> * <span class="org-constant">glm</span>::column<span class="org-rainbow-delimiters-depth-3">(</span>trf, 2<span class="org-rainbow-delimiters-depth-3">)</span>;
        trf<span class="org-rainbow-delimiters-depth-3">[</span>3<span class="org-rainbow-delimiters-depth-3">]</span> = position;
        <span class="org-keyword">return</span> trf;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Camera class using quaternions for rotating the camera: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">struct</span> <span class="org-type">Camera</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Current location of camera in world coordinates</span>
    <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-variable-name">eye</span>  = <span class="org-rainbow-delimiters-depth-2">{</span> 2.0, 4.0, 5.0 <span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Direction to where camera is looking at.  </span>
    <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-variable-name">forward</span> =  <span class="org-rainbow-delimiters-depth-2">{</span>-1.0, 0.0, -1.0 <span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Current  camera up vector (orientation) - Y axis (default)</span>
    <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-variable-name">up</span> = <span class="org-rainbow-delimiters-depth-2">{</span> 0.0, 1.0, 0.0 <span class="org-rainbow-delimiters-depth-2">}</span>;    

    <span class="org-comment-delimiter">// </span><span class="org-comment">Field of view</span>
    <span class="org-type">float</span> <span class="org-variable-name">fov_angle</span> = <span class="org-constant">glm</span>::radians<span class="org-rainbow-delimiters-depth-2">(</span>60.0<span class="org-rainbow-delimiters-depth-2">)</span>; 
    <span class="org-comment-delimiter">// </span><span class="org-comment">Aspect ratio </span>
    <span class="org-type">float</span> <span class="org-variable-name">aspect</span>   = 1.0;
    <span class="org-type">float</span> <span class="org-variable-name">zFar</span>     = 20.0;
    <span class="org-type">float</span> <span class="org-variable-name">zNear</span>    = 0.1; 

    <span class="org-comment-delimiter">// </span><span class="org-comment">ID of shader's view uniform variable - for setting view matrix</span>
    <span class="org-type">GLuint</span> <span class="org-variable-name">shader_uniform_view</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">ID of shader's projection uniform variable for setting projection matrix.</span>
    <span class="org-type">GLuint</span> <span class="org-variable-name">shader_uniform_proj</span>;

    <span class="org-function-name">Camera</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">GLuint</span> <span class="org-variable-name">uniform_view</span>, <span class="org-type">GLuint</span> <span class="org-variable-name">uniform_proj</span>, <span class="org-type">float</span> <span class="org-variable-name">aspect</span><span class="org-rainbow-delimiters-depth-2">)</span>:
        shader_uniform_view<span class="org-rainbow-delimiters-depth-2">(</span>uniform_view<span class="org-rainbow-delimiters-depth-2">)</span>, shader_uniform_proj<span class="org-rainbow-delimiters-depth-2">(</span>uniform_proj<span class="org-rainbow-delimiters-depth-2">)</span>, aspect<span class="org-rainbow-delimiters-depth-2">(</span>aspect<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>  update_view<span class="org-rainbow-delimiters-depth-3">()</span>;  <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">void</span> <span class="org-function-name">update_view</span><span class="org-rainbow-delimiters-depth-2">()</span> 
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Point to where camera is looking at. </span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">cam_at</span> = <span class="org-keyword">this</span>-&gt;eye + <span class="org-keyword">this</span>-&gt;forward;    
        <span class="org-comment-delimiter">// </span><span class="org-comment">Create View matrix (maps from world-space to camera-space)</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">Tview</span> = <span class="org-constant">glm</span>::lookAt<span class="org-rainbow-delimiters-depth-3">(</span>eye, cam_at, up<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Create projection matrix maps - camera-space to NDC (Normalized Device Coordinates).</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">Tproj</span> = <span class="org-constant">glm</span>::perspective<span class="org-rainbow-delimiters-depth-3">(</span> fov_angle, aspect, zNear, zFar <span class="org-rainbow-delimiters-depth-3">)</span>;      
        <span class="org-comment-delimiter">// </span><span class="org-comment">Set shader uniform variables.</span>
        glUniformMatrix4fv<span class="org-rainbow-delimiters-depth-3">(</span>shader_uniform_view, 1, GL_FALSE, <span class="org-constant">glm</span>::<span class="org-type">value_ptr</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">Tview</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
        glUniformMatrix4fv<span class="org-rainbow-delimiters-depth-3">(</span>shader_uniform_proj, 1, GL_FALSE, <span class="org-constant">glm</span>::<span class="org-type">value_ptr</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">Tproj</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;          
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Rotate around camera's Up vecto. </span>
    <span class="org-type">void</span> <span class="org-function-name">rotate_yaw</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">angle</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>   
        <span class="org-comment-delimiter">// </span><span class="org-comment">Build quaternion from axis angle </span>
        <span class="org-constant">glm</span>::<span class="org-type">quat</span> <span class="org-variable-name">q</span> = <span class="org-constant">glm</span>::angleAxis<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">glm</span>::<span class="org-type">radians</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">angle</span><span class="org-rainbow-delimiters-depth-4">)</span>, <span class="org-keyword">this</span>-&gt;up<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Rotate current forward vector </span>
        forward = forward * q; 
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [FORWARD VECTOR ] "</span> &lt;&lt; <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-3">(</span>forward<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-string">'\n'</span>;
        <span class="org-keyword">this</span>-&gt;update_view<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Rotate around camera's pitch axis (X axis) elevate camera view.</span>
    <span class="org-type">void</span> <span class="org-function-name">rotate_pitch</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">angle</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-variable-name">axis</span> = <span class="org-constant">glm</span>::cross<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">this</span>-&gt;up, <span class="org-keyword">this</span>-&gt;forward<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Build quaternion from axis angle </span>
        <span class="org-constant">glm</span>::<span class="org-type">quat</span> <span class="org-variable-name">q</span> = <span class="org-constant">glm</span>::angleAxis<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">glm</span>::<span class="org-type">radians</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">angle</span><span class="org-rainbow-delimiters-depth-4">)</span>, axis<span class="org-rainbow-delimiters-depth-3">)</span>;   
        forward = q * forward;      
        <span class="org-keyword">this</span>-&gt;update_view<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">void</span> <span class="org-function-name">rotate_roll</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">angle</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">glm</span>::<span class="org-type">quat</span> <span class="org-variable-name">q</span> = <span class="org-constant">glm</span>::angleAxis<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">glm</span>::<span class="org-type">radians</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">angle</span><span class="org-rainbow-delimiters-depth-4">)</span>, <span class="org-keyword">this</span>-&gt;forward<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">this</span>-&gt;up = q * <span class="org-keyword">this</span>-&gt;up;
        <span class="org-keyword">this</span>-&gt;update_view<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Move at forward vector direction (to where camera is looking at). </span>
    <span class="org-type">void</span> <span class="org-function-name">move_forward</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">factor</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">this</span>-&gt;eye = <span class="org-keyword">this</span>-&gt;eye + factor * <span class="org-keyword">this</span>-&gt;forward;
        <span class="org-keyword">this</span>-&gt;update_view<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Move camera to specific point in the space. </span>
    <span class="org-type">void</span> <span class="org-function-name">set_position</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">dx</span>, <span class="org-type">float</span> <span class="org-variable-name">dy</span>, <span class="org-type">float</span> <span class="org-variable-name">dz</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">this</span>-&gt;eye = <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-3">(</span>dx, dy, dz<span class="org-rainbow-delimiters-depth-3">)</span>; 
        <span class="org-keyword">this</span>-&gt;update_view<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Set position to where camera is looking at. </span>
    <span class="org-type">void</span> <span class="org-function-name">look_at</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">glm</span>::<span class="org-type">vec3</span>&amp; <span class="org-variable-name">at</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span> 
        <span class="org-keyword">this</span>-&gt;forward = at - <span class="org-keyword">this</span>-&gt;eye; 
        <span class="org-keyword">this</span>-&gt;update_view<span class="org-rainbow-delimiters-depth-3">()</span>;  
    <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>


<p>
<b>Files</b> 
</p>

<p>
Vertex Shader Code: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#version</span> 330 core 

layout <span class="org-rainbow-delimiters-depth-1">(</span> location = 0<span class="org-rainbow-delimiters-depth-1">)</span>  in <span class="org-type">vec3</span> <span class="org-variable-name">position</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">layout ( location = 1) in vec3 color;   </span>
out <span class="org-type">vec3</span> <span class="org-variable-name">out_color</span>;
uniform <span class="org-type">mat4</span> <span class="org-variable-name">u_model</span>;       <span class="org-comment-delimiter">// </span><span class="org-comment">Model matrix </span>
uniform <span class="org-type">mat4</span> <span class="org-variable-name">u_view</span>;        <span class="org-comment-delimiter">// </span><span class="org-comment">Camera's view matrix    </span>
uniform <span class="org-type">mat4</span> <span class="org-variable-name">u_projection</span>;  <span class="org-comment-delimiter">// </span><span class="org-comment">Camera's projection matrix </span>
uniform <span class="org-type">vec3</span> <span class="org-variable-name">u_color</span>;       <span class="org-comment-delimiter">// </span><span class="org-comment">Unique color to all vertices set by the C++-side</span>

<span class="org-type">void</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    gl_Position = u_projection * u_view * u_model * vec4<span class="org-rainbow-delimiters-depth-2">(</span>position, 1.0<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Forward to fragment shader </span>
    out_color = u_color;  <span class="org-comment-delimiter">// </span><span class="org-comment">color; // vec3(0.56, 0.6, 0.0);</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Fragment Shader Code:  
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#version</span> 330 

in <span class="org-type">vec3</span> <span class="org-variable-name">out_color</span>;

<span class="org-type">void</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Set vertex colors</span>
    gl_FragColor =  vec4<span class="org-rainbow-delimiters-depth-2">(</span>out_color, 1.0<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
File: <span class="underline">CMakeLists.txt</span> 
</p>


<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.5)
<span class="org-function-name">project</span>(GLFW_project)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD_REQUIRED ON)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment">#================ GLFW Settings  ===============#</span>

<span class="org-function-name">find_package</span>(OpenGL REQUIRED)

<span class="org-function-name">include</span>(FetchContent)

<span class="org-comment"># Set GLFW Options before FectchContent_MakeAvailable </span>
<span class="org-function-name">set</span>( GLFW_BUILD_EXAMPLES OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )
<span class="org-function-name">set</span>( GLFW_BUILD_TESTS    OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )
<span class="org-function-name">set</span>( GLFW_BUILD_DOCS     OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )
<span class="org-function-name">set</span>( GLFW_BUILD_INSTALL  OFF CACHE BOOL  <span class="org-string">"GLFW lib only"</span> )

<span class="org-comment"># Donwload GLFW library</span>
<span class="org-function-name">FetchContent_Declare</span>(
  glfwlib
  URL   https://github.com/glfw/glfw/releases/download/3.3.2/glfw-3.3.2.zip
)
<span class="org-function-name">FetchContent_MakeAvailable</span>(glfwlib)

<span class="org-comment"># Download GLM (OpenGL math library for matrix and vectors transformation)</span>
<span class="org-function-name">FetchContent_Declare</span>(
  glm  
  URL  https://github.com/g-truc/glm/archive/0.9.8.zip
)
<span class="org-function-name">FetchContent_MakeAvailable</span>(glm)

<span class="org-function-name">message</span>( [DEBUG] <span class="org-string">" glm_SOURCE_DIR = ${</span><span class="org-variable-name">glm_SOURCE_DIR</span><span class="org-string">} "</span>)
<span class="org-function-name">include_directories</span>(${<span class="org-variable-name">glm_SOURCE_DIR</span>})

  <span class="org-comment"># ======= TARGETS ===========================#</span>

       <span class="org-function-name">add_executable</span>( draw3d-camera  draw3d-camera.cpp        )
<span class="org-function-name">target_link_libraries</span>( draw3d-camera  glfw OpenGL::GL GLU glut )
</pre>
</div>


<p>
File: <span class="underline">draw3d-camera.cpp</span>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">array</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">-------- OpenGL headers ---------//</span>
<span class="org-comment-delimiter">//</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">GL_GLEXT_PROTOTYPES</span> 1 <span class="org-comment-delimiter">// </span><span class="org-comment">Necessary for OpenGL &gt;= 3.0 functions</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">GL3_PROTOTYPES</span>      1 <span class="org-comment-delimiter">// </span><span class="org-comment">Necessary for OpenGL &gt;= 3.0 functions</span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GL/gl.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GLFW/glfw3.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">#include &lt;GL/glew.h&gt;</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GL/glu.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">--------- OpenGL Math Librar ------------//</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">glm/glm.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">glm/gtc/matrix_transform.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">glm/gtc/type_ptr.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">glm/gtx/string_cast.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">glm/gtc/matrix_access.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#define</span> <span class="org-variable-name">GLUT_ENABLED</span> 

<span class="org-preprocessor">#if</span> <span class="org-preprocessor">defined</span><span class="org-rainbow-delimiters-depth-1">(</span>GLUT_ENABLED<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-preprocessor">    #include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GL/glut.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#endif</span> 

<span class="org-type">GLFWwindow</span>* <span class="org-function-name">make_glfwWindowi</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span>  <span class="org-variable-name">width</span>, <span class="org-type">int</span> <span class="org-variable-name">height</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">title</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Compile some  shader </span>
<span class="org-type">void</span> <span class="org-function-name">compile_shader</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">GLuint</span> <span class="org-variable-name">m_program</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">code</span>, <span class="org-type">GLenum</span> <span class="org-variable-name">type</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">------------ Basic Data Structures -----------// </span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Wrapper for 2D vertex coordinates </span>
<span class="org-keyword">struct</span> <span class="org-type">Vertex3D</span><span class="org-rainbow-delimiters-depth-1">{</span>  <span class="org-type">GLfloat</span> <span class="org-variable-name">x</span>, <span class="org-variable-name">y</span>, <span class="org-variable-name">z</span>;  <span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Wrapper for RGB colors </span>
<span class="org-keyword">struct</span> <span class="org-type">ColorRGB</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-type">GLfloat</span> <span class="org-variable-name">r</span>, <span class="org-variable-name">g</span>, <span class="org-variable-name">b</span>; <span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Transform object that combines - translation, scale and rotation (quaternion)</span>
<span class="org-keyword">struct</span> <span class="org-type">Transform</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">glm</span>::<span class="org-type">vec4</span> <span class="org-variable-name">position</span> = <span class="org-rainbow-delimiters-depth-2">{</span>0.0, 0.0, 0.0, 1.0<span class="org-rainbow-delimiters-depth-2">}</span>; 
    <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-variable-name">scale</span>    = <span class="org-rainbow-delimiters-depth-2">{</span>1.0, 1.0, 1.0<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-constant">glm</span>::<span class="org-type">quat</span> <span class="org-variable-name">rotation</span> = <span class="org-rainbow-delimiters-depth-2">{</span>1.0, 0.0, 0.0, 0.0<span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-type">void</span> <span class="org-function-name">set_scale</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">k</span><span class="org-rainbow-delimiters-depth-2">){</span> scale<span class="org-rainbow-delimiters-depth-3">[</span>0<span class="org-rainbow-delimiters-depth-3">]</span>  = k; scale<span class="org-rainbow-delimiters-depth-3">[</span>1<span class="org-rainbow-delimiters-depth-3">]</span> = k;  scale<span class="org-rainbow-delimiters-depth-3">[</span>2<span class="org-rainbow-delimiters-depth-3">]</span>  = k;  <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">void</span> <span class="org-function-name">add_scale</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">k</span><span class="org-rainbow-delimiters-depth-2">){</span> scale<span class="org-rainbow-delimiters-depth-3">[</span>0<span class="org-rainbow-delimiters-depth-3">]</span> += k; scale<span class="org-rainbow-delimiters-depth-3">[</span>1<span class="org-rainbow-delimiters-depth-3">]</span> += k; scale<span class="org-rainbow-delimiters-depth-3">[</span>2<span class="org-rainbow-delimiters-depth-3">]</span> += k;  <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">void</span> <span class="org-function-name">set_position</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">x</span>, <span class="org-type">float</span> <span class="org-variable-name">y</span>, <span class="org-type">float</span> <span class="org-variable-name">z</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>  <span class="org-keyword">this</span>-&gt;position = <span class="org-constant">glm</span>::vec4<span class="org-rainbow-delimiters-depth-3">(</span>x, y, z, 1.0<span class="org-rainbow-delimiters-depth-3">)</span>;  <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-type">void</span> <span class="org-function-name">set_rotation</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">angle</span>, <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">axis</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">this</span>-&gt;rotation = <span class="org-constant">glm</span>::angleAxis<span class="org-rainbow-delimiters-depth-3">(</span> <span class="org-constant">glm</span>::<span class="org-type">radians</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">angle</span><span class="org-rainbow-delimiters-depth-4">)</span>, axis <span class="org-rainbow-delimiters-depth-3">)</span>;  <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">void</span> <span class="org-function-name">translate</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">dx</span>, <span class="org-type">float</span> <span class="org-variable-name">dy</span>, <span class="org-type">float</span> <span class="org-variable-name">dz</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span> 
        <span class="org-keyword">this</span>-&gt;position<span class="org-rainbow-delimiters-depth-3">[</span>0<span class="org-rainbow-delimiters-depth-3">]</span> += dx; 
        <span class="org-keyword">this</span>-&gt;position<span class="org-rainbow-delimiters-depth-3">[</span>1<span class="org-rainbow-delimiters-depth-3">]</span> += dy; 
        <span class="org-keyword">this</span>-&gt;position<span class="org-rainbow-delimiters-depth-3">[</span>2<span class="org-rainbow-delimiters-depth-3">]</span> += dz; 
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Rotation increment. </span>
    <span class="org-type">void</span> <span class="org-function-name">rotate</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">angle</span>, <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">axis</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">q</span> = <span class="org-constant">glm</span>::angleAxis<span class="org-rainbow-delimiters-depth-3">(</span> <span class="org-constant">glm</span>::<span class="org-type">radians</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">angle</span><span class="org-rainbow-delimiters-depth-4">)</span>, axis <span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">this</span>-&gt;rotation = q * <span class="org-keyword">this</span>-&gt;rotation;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Get model affine transform - comprised of scale, translation and translation. </span>
    <span class="org-constant">glm</span>::<span class="org-type">mat4</span> <span class="org-function-name">transform</span><span class="org-rainbow-delimiters-depth-2">()</span> 
    <span class="org-rainbow-delimiters-depth-2">{</span>   
        <span class="org-comment-delimiter">// </span><span class="org-comment">Get transformation matrix from quaternion </span>
        <span class="org-constant">glm</span>::<span class="org-type">mat4</span> <span class="org-variable-name">trf</span> = <span class="org-constant">glm</span>::mat4_cast<span class="org-rainbow-delimiters-depth-3">(</span>rotation<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Multiply all elements of column X axis scale </span>
        trf<span class="org-rainbow-delimiters-depth-3">[</span>0<span class="org-rainbow-delimiters-depth-3">]</span> = scale<span class="org-rainbow-delimiters-depth-3">[</span>0<span class="org-rainbow-delimiters-depth-3">]</span> * <span class="org-constant">glm</span>::column<span class="org-rainbow-delimiters-depth-3">(</span>trf, 0<span class="org-rainbow-delimiters-depth-3">)</span>;
        trf<span class="org-rainbow-delimiters-depth-3">[</span>1<span class="org-rainbow-delimiters-depth-3">]</span> = scale<span class="org-rainbow-delimiters-depth-3">[</span>1<span class="org-rainbow-delimiters-depth-3">]</span> * <span class="org-constant">glm</span>::column<span class="org-rainbow-delimiters-depth-3">(</span>trf, 1<span class="org-rainbow-delimiters-depth-3">)</span>;
        trf<span class="org-rainbow-delimiters-depth-3">[</span>2<span class="org-rainbow-delimiters-depth-3">]</span> = scale<span class="org-rainbow-delimiters-depth-3">[</span>2<span class="org-rainbow-delimiters-depth-3">]</span> * <span class="org-constant">glm</span>::column<span class="org-rainbow-delimiters-depth-3">(</span>trf, 2<span class="org-rainbow-delimiters-depth-3">)</span>;
        trf<span class="org-rainbow-delimiters-depth-3">[</span>3<span class="org-rainbow-delimiters-depth-3">]</span> = position;
        <span class="org-keyword">return</span> trf;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">struct</span> <span class="org-type">Camera</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Current location of camera in world coordinates</span>
    <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-variable-name">eye</span>  = <span class="org-rainbow-delimiters-depth-2">{</span> 2.0, 4.0, 5.0 <span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Direction to where camera is looking at.  </span>
    <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-variable-name">forward</span> =  <span class="org-rainbow-delimiters-depth-2">{</span>-1.0, -1.0, -1.0 <span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Current  camera up vector (orientation) - Y axis (default)</span>
    <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-variable-name">up</span> = <span class="org-rainbow-delimiters-depth-2">{</span> 0.0, 1.0, 0.0 <span class="org-rainbow-delimiters-depth-2">}</span>;    

    <span class="org-comment-delimiter">// </span><span class="org-comment">Field of view</span>
    <span class="org-type">float</span> <span class="org-variable-name">fov_angle</span> = <span class="org-constant">glm</span>::radians<span class="org-rainbow-delimiters-depth-2">(</span>60.0<span class="org-rainbow-delimiters-depth-2">)</span>; 
    <span class="org-comment-delimiter">// </span><span class="org-comment">Aspect ratio </span>
    <span class="org-type">float</span> <span class="org-variable-name">aspect</span>   = 1.0;
    <span class="org-type">float</span> <span class="org-variable-name">zFar</span>     = 20.0;
    <span class="org-type">float</span> <span class="org-variable-name">zNear</span>    = 0.1; 

    <span class="org-comment-delimiter">// </span><span class="org-comment">ID of shader's view uniform variable - for setting view matrix</span>
    <span class="org-type">GLuint</span> <span class="org-variable-name">shader_uniform_view</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">ID of shader's projection uniform variable for setting projection matrix.</span>
    <span class="org-type">GLuint</span> <span class="org-variable-name">shader_uniform_proj</span>;

    <span class="org-function-name">Camera</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">GLuint</span> <span class="org-variable-name">uniform_view</span>, <span class="org-type">GLuint</span> <span class="org-variable-name">uniform_proj</span>, <span class="org-type">float</span> <span class="org-variable-name">aspect</span><span class="org-rainbow-delimiters-depth-2">)</span>:
        shader_uniform_view<span class="org-rainbow-delimiters-depth-2">(</span>uniform_view<span class="org-rainbow-delimiters-depth-2">)</span>, shader_uniform_proj<span class="org-rainbow-delimiters-depth-2">(</span>uniform_proj<span class="org-rainbow-delimiters-depth-2">)</span>, aspect<span class="org-rainbow-delimiters-depth-2">(</span>aspect<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>  update_view<span class="org-rainbow-delimiters-depth-3">()</span>;  <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">void</span> <span class="org-function-name">update_view</span><span class="org-rainbow-delimiters-depth-2">()</span> 
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Point to where camera is looking at. </span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">cam_at</span> = <span class="org-keyword">this</span>-&gt;eye + <span class="org-keyword">this</span>-&gt;forward;    
        <span class="org-comment-delimiter">// </span><span class="org-comment">Create View matrix (maps from world-space to camera-space)</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">Tview</span> = <span class="org-constant">glm</span>::lookAt<span class="org-rainbow-delimiters-depth-3">(</span>eye, cam_at, up<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Create projection matrix maps - camera-space to NDC (Normalized Device Coordinates).</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">Tproj</span> = <span class="org-constant">glm</span>::perspective<span class="org-rainbow-delimiters-depth-3">(</span> fov_angle, aspect, zNear, zFar <span class="org-rainbow-delimiters-depth-3">)</span>;      
        <span class="org-comment-delimiter">// </span><span class="org-comment">Set shader uniform variables.</span>
        glUniformMatrix4fv<span class="org-rainbow-delimiters-depth-3">(</span>shader_uniform_view, 1, GL_FALSE, <span class="org-constant">glm</span>::<span class="org-type">value_ptr</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">Tview</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
        glUniformMatrix4fv<span class="org-rainbow-delimiters-depth-3">(</span>shader_uniform_proj, 1, GL_FALSE, <span class="org-constant">glm</span>::<span class="org-type">value_ptr</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">Tproj</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;          
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Rotate around camera's Up vecto. </span>
    <span class="org-type">void</span> <span class="org-function-name">rotate_yaw</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">angle</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>   
        <span class="org-comment-delimiter">// </span><span class="org-comment">Build quaternion from axis angle </span>
        <span class="org-constant">glm</span>::<span class="org-type">quat</span> <span class="org-variable-name">q</span> = <span class="org-constant">glm</span>::angleAxis<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">glm</span>::<span class="org-type">radians</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">angle</span><span class="org-rainbow-delimiters-depth-4">)</span>, <span class="org-keyword">this</span>-&gt;up<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Rotate current forward vector </span>
        forward = forward * q; 
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [FORWARD VECTOR ] "</span> &lt;&lt; <span class="org-constant">glm</span>::to_string<span class="org-rainbow-delimiters-depth-3">(</span>forward<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-string">'\n'</span>;
        <span class="org-keyword">this</span>-&gt;update_view<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Rotate around camera's pitch axis (X axis) elevate camera view.</span>
    <span class="org-type">void</span> <span class="org-function-name">rotate_pitch</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">angle</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-variable-name">axis</span> = <span class="org-constant">glm</span>::cross<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">this</span>-&gt;up, <span class="org-keyword">this</span>-&gt;forward<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Build quaternion from axis angle </span>
        <span class="org-constant">glm</span>::<span class="org-type">quat</span> <span class="org-variable-name">q</span> = <span class="org-constant">glm</span>::angleAxis<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">glm</span>::<span class="org-type">radians</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">angle</span><span class="org-rainbow-delimiters-depth-4">)</span>, axis<span class="org-rainbow-delimiters-depth-3">)</span>;   
        forward = q * forward;      
        <span class="org-keyword">this</span>-&gt;update_view<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">void</span> <span class="org-function-name">rotate_roll</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">angle</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">glm</span>::<span class="org-type">quat</span> <span class="org-variable-name">q</span> = <span class="org-constant">glm</span>::angleAxis<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">glm</span>::<span class="org-type">radians</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-variable-name">angle</span><span class="org-rainbow-delimiters-depth-4">)</span>, <span class="org-keyword">this</span>-&gt;forward<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">this</span>-&gt;up = q * <span class="org-keyword">this</span>-&gt;up;
        <span class="org-keyword">this</span>-&gt;update_view<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Move at forward vector direction (to where camera is looking at). </span>
    <span class="org-type">void</span> <span class="org-function-name">move_forward</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">factor</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">this</span>-&gt;eye = <span class="org-keyword">this</span>-&gt;eye + factor * <span class="org-keyword">this</span>-&gt;forward;
        <span class="org-keyword">this</span>-&gt;update_view<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Move camera to specific point in the space. </span>
    <span class="org-type">void</span> <span class="org-function-name">set_position</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">float</span> <span class="org-variable-name">dx</span>, <span class="org-type">float</span> <span class="org-variable-name">dy</span>, <span class="org-type">float</span> <span class="org-variable-name">dz</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">this</span>-&gt;eye = <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-3">(</span>dx, dy, dz<span class="org-rainbow-delimiters-depth-3">)</span>; 
        <span class="org-keyword">this</span>-&gt;update_view<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Set position to where camera is looking at. </span>
    <span class="org-type">void</span> <span class="org-function-name">look_at</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">glm</span>::<span class="org-type">vec3</span>&amp; <span class="org-variable-name">at</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span> 
        <span class="org-keyword">this</span>-&gt;forward = at - <span class="org-keyword">this</span>-&gt;eye; 
        <span class="org-keyword">this</span>-&gt;update_view<span class="org-rainbow-delimiters-depth-3">()</span>;  
    <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">void</span> <span class="org-function-name">send_buffer</span><span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-type">GLuint</span>* <span class="org-variable-name">pVao</span>, <span class="org-type">GLuint</span>* <span class="org-variable-name">pVbo</span>, <span class="org-type">GLsizei</span> <span class="org-variable-name">sizeBuffer</span>
        , <span class="org-type">void</span>* <span class="org-variable-name">pBufffer</span>, <span class="org-type">GLint</span>   <span class="org-variable-name">shader_attr</span>, <span class="org-type">GLint</span> <span class="org-variable-name">size</span>, <span class="org-type">GLenum</span> <span class="org-variable-name">type</span><span class="org-rainbow-delimiters-depth-1">)</span>;


<span class="org-keyword">constexpr</span> <span class="org-type">ColorRGB</span> <span class="org-variable-name">color_red</span>   = <span class="org-rainbow-delimiters-depth-1">{</span>1.0, 0.0, 0.0<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-keyword">constexpr</span> <span class="org-type">ColorRGB</span> <span class="org-variable-name">color_green</span> = <span class="org-rainbow-delimiters-depth-1">{</span>0.0, 1.0, 0.0<span class="org-rainbow-delimiters-depth-1">}</span>;        
<span class="org-keyword">constexpr</span> <span class="org-type">ColorRGB</span> <span class="org-variable-name">color_blue</span>  = <span class="org-rainbow-delimiters-depth-1">{</span>0.0, 0.0, 1.0<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-keyword">constexpr</span> <span class="org-type">ColorRGB</span> <span class="org-variable-name">color_yelllow</span>    = <span class="org-rainbow-delimiters-depth-1">{</span> 0.80,  1.000, 0.100 <span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-keyword">constexpr</span> <span class="org-type">ColorRGB</span> <span class="org-variable-name">color_gray</span>       = <span class="org-rainbow-delimiters-depth-1">{</span> 0.47,  0.390, 0.380 <span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-keyword">constexpr</span> <span class="org-type">ColorRGB</span> <span class="org-variable-name">color_dark_green</span> = <span class="org-rainbow-delimiters-depth-1">{</span> 0.027, 0.392, 0.050 <span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-keyword">constexpr</span> <span class="org-type">ColorRGB</span> <span class="org-variable-name">color_dark_blue</span>  = <span class="org-rainbow-delimiters-depth-1">{</span> 0.109, 0.066, 0.411 <span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-keyword">constexpr</span> <span class="org-type">ColorRGB</span> <span class="org-variable-name">color_white</span>      = <span class="org-rainbow-delimiters-depth-1">{</span> 1.0, 1.0, 1.0 <span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">const</span> <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-variable-name">AXIS_X</span> = <span class="org-rainbow-delimiters-depth-1">{</span> 1.0, 0.0, 0.0 <span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-keyword">const</span> <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-variable-name">AXIS_Y</span> = <span class="org-rainbow-delimiters-depth-1">{</span> 0.0, 1.0, 0.0 <span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-keyword">const</span> <span class="org-constant">glm</span>::<span class="org-type">vec3</span> <span class="org-variable-name">AXIS_Z</span> = <span class="org-rainbow-delimiters-depth-1">{</span> 0.0, 0.0, 1.0 <span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>

    <span class="org-comment-delimiter">/* </span><span class="org-comment">Initialize the library */</span>
    <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>glfwInit<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> -1; <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-preprocessor">    #if</span> <span class="org-preprocessor">defined</span><span class="org-rainbow-delimiters-depth-2">(</span>GLUT_ENABLED<span class="org-rainbow-delimiters-depth-2">)</span>
        glutInit<span class="org-rainbow-delimiters-depth-2">(</span>&amp;argc, argv<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-preprocessor">    #endif</span>
                                              <span class="org-comment-delimiter">// </span>
    <span class="org-type">GLFWwindow</span>* <span class="org-variable-name">window</span> = make_glfwWindowi<span class="org-rainbow-delimiters-depth-2">(</span>640, 480, <span class="org-string">"OpenGL quaternion"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Note: The shader source code is at the end of file.</span>
    <span class="org-keyword">extern</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">code_vertex_shader</span>;
    <span class="org-keyword">extern</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">code_frag_shader</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">====== S H A D E R - C O M P I L A T I O N ====//</span>
    <span class="org-comment-delimiter">//</span>
    <span class="org-type">GLuint</span> <span class="org-variable-name">prog</span> = glCreateProgram<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Compile shader code </span>
    compile_shader<span class="org-rainbow-delimiters-depth-2">(</span>prog, code_vertex_shader, GL_VERTEX_SHADER  <span class="org-rainbow-delimiters-depth-2">)</span> ;    
    compile_shader<span class="org-rainbow-delimiters-depth-2">(</span>prog, code_frag_shader,   GL_FRAGMENT_SHADER <span class="org-rainbow-delimiters-depth-2">)</span>;
    glUseProgram<span class="org-rainbow-delimiters-depth-2">(</span>prog<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">--------- Shader Uniform Variables -------//</span>
    <span class="org-keyword">const</span> <span class="org-type">GLint</span> <span class="org-variable-name">u_proj</span>  = glGetUniformLocation<span class="org-rainbow-delimiters-depth-2">(</span>prog, <span class="org-string">"u_projection"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">const</span> <span class="org-type">GLint</span> <span class="org-variable-name">u_view</span>  = glGetUniformLocation<span class="org-rainbow-delimiters-depth-2">(</span>prog, <span class="org-string">"u_view"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">const</span> <span class="org-type">GLint</span> <span class="org-variable-name">u_model</span> = glGetUniformLocation<span class="org-rainbow-delimiters-depth-2">(</span>prog, <span class="org-string">"u_model"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">const</span> <span class="org-type">GLint</span> <span class="org-variable-name">u_color</span> = glGetUniformLocation<span class="org-rainbow-delimiters-depth-2">(</span>prog, <span class="org-string">"u_color"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span> u_color &gt;= 0 <span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">------- Shader attribute locations -------//</span>
    <span class="org-keyword">const</span> <span class="org-type">GLint</span> <span class="org-variable-name">attr_position</span> = glGetAttribLocation<span class="org-rainbow-delimiters-depth-2">(</span>prog, <span class="org-string">"position"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">const</span> <span class="org-type">GLint</span> <span class="org-variable-name">attr_color</span>    = glGetAttribLocation<span class="org-rainbow-delimiters-depth-2">(</span>prog, <span class="org-string">"color"</span><span class="org-rainbow-delimiters-depth-2">)</span>;


    <span class="org-comment-delimiter">// </span><span class="org-comment">============== Set Shader Uniform Variables =============// </span>
    <span class="org-comment-delimiter">//                                                          </span><span class="org-comment">// </span>

    <span class="org-type">int</span> <span class="org-variable-name">width</span>, <span class="org-variable-name">height</span>;
    glfwGetWindowSize<span class="org-rainbow-delimiters-depth-2">(</span>window, &amp;width, &amp;height<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Window aspect ratio</span>
    <span class="org-type">float</span> <span class="org-variable-name">aspect</span> = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>width<span class="org-rainbow-delimiters-depth-2">)</span> / height;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Identity matrix </span>
    <span class="org-keyword">const</span> <span class="org-keyword">auto</span> identity = <span class="org-constant">glm</span>::mat4<span class="org-rainbow-delimiters-depth-2">(</span>1.0<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Set projection matrix uniform variable</span>
    glUniformMatrix4fv<span class="org-rainbow-delimiters-depth-2">(</span>u_proj, 1, GL_FALSE, <span class="org-constant">glm</span>::value_ptr<span class="org-rainbow-delimiters-depth-3">(</span>identity<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">====== U P L O A D - TO - G P U =========================//  </span>

    <span class="org-type">Camera</span> <span class="org-variable-name">camera</span><span class="org-rainbow-delimiters-depth-2">(</span>u_view, u_proj, width / height<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Plane XY grid (vertical) - contains axis X and Y </span>
    <span class="org-type">Transform</span> <span class="org-variable-name">model_grid_xy</span>;
    model_grid_xy.set_position<span class="org-rainbow-delimiters-depth-2">(</span>0.0, 0.0, -2.0<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Plane XZ grid (horizontal) - contains axis X and Z</span>
    <span class="org-type">Transform</span> <span class="org-variable-name">model_grid_xz</span>;
    model_grid_xz.set_rotation<span class="org-rainbow-delimiters-depth-2">(</span>90.0f, AXIS_X<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">Transform</span> <span class="org-variable-name">model_teapot</span>;
    model_teapot.set_scale<span class="org-rainbow-delimiters-depth-2">(</span>0.4<span class="org-rainbow-delimiters-depth-2">)</span>;
    model_teapot.set_position<span class="org-rainbow-delimiters-depth-2">(</span>0.0, 0.50, 0.2<span class="org-rainbow-delimiters-depth-2">)</span>;
    model_teapot.set_rotation<span class="org-rainbow-delimiters-depth-2">(</span>-90.0, <span class="org-constant">glm</span>::vec3<span class="org-rainbow-delimiters-depth-3">(</span>1.0, 0.0, 0.0<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span>;


    <span class="org-keyword">auto</span> <span class="org-variable-name">plane_vertices</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">Vertex3D</span><span class="org-rainbow-delimiters-depth-2">&gt;{</span>
          <span class="org-rainbow-delimiters-depth-3">{</span>0.0, 0.0, 0.0<span class="org-rainbow-delimiters-depth-3">}</span>, <span class="org-rainbow-delimiters-depth-3">{</span>4.0, 0.0, 0.0<span class="org-rainbow-delimiters-depth-3">}</span>
        , <span class="org-rainbow-delimiters-depth-3">{</span>4.0, 0.0, 4.0<span class="org-rainbow-delimiters-depth-3">}</span> ,<span class="org-rainbow-delimiters-depth-3">{</span>0.0, 0.0, 4.0<span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-type">GLuint</span> <span class="org-variable-name">vao_plane</span>          = 0; 
    <span class="org-type">GLuint</span> <span class="org-variable-name">vbo_plane_vertices</span> = 0; 
    send_buffer<span class="org-rainbow-delimiters-depth-2">(</span> &amp;vao_plane, &amp;vbo_plane_vertices, <span class="org-keyword">sizeof</span><span class="org-rainbow-delimiters-depth-3">(</span>Vertex3D<span class="org-rainbow-delimiters-depth-3">)</span> * plane_vertices.size<span class="org-rainbow-delimiters-depth-3">()</span>
                , plane_vertices.data<span class="org-rainbow-delimiters-depth-3">()</span>, attr_position, 3, GL_FLOAT <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">Transform</span> <span class="org-variable-name">model_plane_xz</span>; 
    model_plane_xz.set_position<span class="org-rainbow-delimiters-depth-2">(</span>-2, 0, -2<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">Transform</span> <span class="org-variable-name">model_plane_xy</span>; 
    model_plane_xy.set_position<span class="org-rainbow-delimiters-depth-2">(</span>-2, 0, -2<span class="org-rainbow-delimiters-depth-2">)</span>;
    model_plane_xy.set_rotation<span class="org-rainbow-delimiters-depth-2">(</span>-90.0, AXIS_X<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">Transform</span> <span class="org-variable-name">model_torus</span>;
    model_torus.set_position<span class="org-rainbow-delimiters-depth-2">(</span>-3, 2, 0<span class="org-rainbow-delimiters-depth-2">)</span>;
    model_torus.rotate<span class="org-rainbow-delimiters-depth-2">(</span>90.0, AXIS_Y<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">//  </span><span class="org-comment">======= R E N D E R  - L O O P ============//</span>
    <span class="org-comment-delimiter">//                                             </span><span class="org-comment">//</span>
    <span class="org-keyword">while</span> <span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-negation-char">!</span>glfwWindowShouldClose<span class="org-rainbow-delimiters-depth-3">(</span>window<span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        glClear<span class="org-rainbow-delimiters-depth-3">(</span>GL_COLOR_BUFFER_BIT  | GL_DEPTH_BUFFER_BIT<span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">====== BEGIN RENDERING ============//</span>

            <span class="org-comment-delimiter">// </span><span class="org-comment">---- Draw horizontal plane XZ (square) ------------//</span>
            glUniformMatrix4fv<span class="org-rainbow-delimiters-depth-3">(</span>u_model, 1, GL_FALSE, <span class="org-constant">glm</span>::value_ptr<span class="org-rainbow-delimiters-depth-4">(</span>model_plane_xz.transform<span class="org-rainbow-delimiters-depth-5">()</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
            glUniform3fv<span class="org-rainbow-delimiters-depth-3">(</span>u_color, 1, &amp;color_green.r <span class="org-rainbow-delimiters-depth-3">)</span>;
            glBindVertexArray<span class="org-rainbow-delimiters-depth-3">(</span>vao_plane<span class="org-rainbow-delimiters-depth-3">)</span>;            
            glDrawArrays<span class="org-rainbow-delimiters-depth-3">(</span>GL_QUADS, 0, 4 <span class="org-rainbow-delimiters-depth-3">)</span>;     

            <span class="org-comment-delimiter">// </span><span class="org-comment">---- Draw vertical plane XY (square) ------------//</span>
            glUniformMatrix4fv<span class="org-rainbow-delimiters-depth-3">(</span>u_model, 1, GL_FALSE, <span class="org-constant">glm</span>::value_ptr<span class="org-rainbow-delimiters-depth-4">(</span>model_plane_xy.transform<span class="org-rainbow-delimiters-depth-5">()</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
            glUniform3fv<span class="org-rainbow-delimiters-depth-3">(</span>u_color, 1, &amp;color_blue.r <span class="org-rainbow-delimiters-depth-3">)</span>;
            glBindVertexArray<span class="org-rainbow-delimiters-depth-3">(</span>vao_plane<span class="org-rainbow-delimiters-depth-3">)</span>;            
            glDrawArrays<span class="org-rainbow-delimiters-depth-3">(</span>GL_QUADS, 0, 4 <span class="org-rainbow-delimiters-depth-3">)</span>;    

            <span class="org-comment-delimiter">// </span><span class="org-comment">----- Draw teapot over plane -----------------------//</span>
            glUniformMatrix4fv<span class="org-rainbow-delimiters-depth-3">(</span>u_model, 1, GL_FALSE, <span class="org-constant">glm</span>::value_ptr<span class="org-rainbow-delimiters-depth-4">(</span>model_teapot.transform<span class="org-rainbow-delimiters-depth-5">()</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
            glUniform3fv<span class="org-rainbow-delimiters-depth-3">(</span>u_color, 1, &amp;color_red.r <span class="org-rainbow-delimiters-depth-3">)</span>;
            glutWireTeapot<span class="org-rainbow-delimiters-depth-3">(</span>2.5<span class="org-rainbow-delimiters-depth-3">)</span>;

            <span class="org-comment-delimiter">// </span><span class="org-comment">----- Draw Torus ------------------------------------//</span>
            glUniformMatrix4fv<span class="org-rainbow-delimiters-depth-3">(</span>u_model, 1, GL_FALSE, <span class="org-constant">glm</span>::value_ptr<span class="org-rainbow-delimiters-depth-4">(</span>model_torus.transform<span class="org-rainbow-delimiters-depth-5">()</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
            glUniform3fv<span class="org-rainbow-delimiters-depth-3">(</span>u_color, 1, &amp;color_dark_green.r <span class="org-rainbow-delimiters-depth-3">)</span>;
            glutWireTorus<span class="org-rainbow-delimiters-depth-3">(</span>1.0f, 2.00f, 32, 32<span class="org-rainbow-delimiters-depth-3">)</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">====== END RENDERING ==============//</span>

        <span class="org-comment-delimiter">/* </span><span class="org-comment">Swap front and back buffers */</span>
        glfwSwapBuffers<span class="org-rainbow-delimiters-depth-3">(</span>window<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">/* </span><span class="org-comment">Poll for and process events */</span>
        glfwWaitEvents<span class="org-rainbow-delimiters-depth-3">()</span>;

        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, <span class="org-string">'Q'</span> <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
             <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [TRACE] User typed Q =&gt;&gt; Shutdown program. Ok. "</span> &lt;&lt; <span class="org-string">'\n'</span>;
             <span class="org-keyword">break</span>;
        <span class="org-rainbow-delimiters-depth-3">}</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">Rotate camera around its Z axis or forward vector</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, <span class="org-string">'T'</span><span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">){</span> camera.rotate_roll<span class="org-rainbow-delimiters-depth-4">(</span>+5.0<span class="org-rainbow-delimiters-depth-4">)</span>;  <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, <span class="org-string">'Y'</span><span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">){</span> camera.rotate_roll<span class="org-rainbow-delimiters-depth-4">(</span>-5.0<span class="org-rainbow-delimiters-depth-4">)</span>; <span class="org-rainbow-delimiters-depth-3">}</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">Rotate camera around its local X axis </span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, <span class="org-string">'S'</span><span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">){</span> camera.rotate_pitch<span class="org-rainbow-delimiters-depth-4">(</span>+5.0<span class="org-rainbow-delimiters-depth-4">)</span>; <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, <span class="org-string">'D'</span><span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">){</span> camera.rotate_pitch<span class="org-rainbow-delimiters-depth-4">(</span>-5.0<span class="org-rainbow-delimiters-depth-4">)</span>; <span class="org-rainbow-delimiters-depth-3">}</span>


        <span class="org-comment-delimiter">// </span><span class="org-comment">Rotate camera. </span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, GLFW_KEY_UP <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS   <span class="org-rainbow-delimiters-depth-3">){</span> camera.move_forward<span class="org-rainbow-delimiters-depth-4">(</span>+0.2<span class="org-rainbow-delimiters-depth-4">)</span>;  <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, GLFW_KEY_DOWN <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS <span class="org-rainbow-delimiters-depth-3">){</span> camera.move_forward<span class="org-rainbow-delimiters-depth-4">(</span>-0.2<span class="org-rainbow-delimiters-depth-4">)</span>;  <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, GLFW_KEY_RIGHT<span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS  <span class="org-rainbow-delimiters-depth-3">){</span> camera.rotate_yaw<span class="org-rainbow-delimiters-depth-4">(</span>+10.0<span class="org-rainbow-delimiters-depth-4">)</span>;   <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, GLFW_KEY_LEFT <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS  <span class="org-rainbow-delimiters-depth-3">){</span> camera.rotate_yaw<span class="org-rainbow-delimiters-depth-4">(</span>-10.0<span class="org-rainbow-delimiters-depth-4">)</span>;   <span class="org-rainbow-delimiters-depth-3">}</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">Reset camera - look at origin  </span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window, <span class="org-string">'R'</span> <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS  <span class="org-rainbow-delimiters-depth-3">){</span> 
            camera.up = AXIS_Y;
            camera.set_position<span class="org-rainbow-delimiters-depth-4">(</span>4.0, 3.0, 2.5<span class="org-rainbow-delimiters-depth-4">)</span>;
            camera.look_at<span class="org-rainbow-delimiters-depth-4">(</span> <span class="org-rainbow-delimiters-depth-5">{</span>0.0, 0.0, 0.0<span class="org-rainbow-delimiters-depth-5">}</span> <span class="org-rainbow-delimiters-depth-4">)</span>;   
        <span class="org-rainbow-delimiters-depth-3">}</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">Rotate teapot </span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window,  <span class="org-string">'H'</span> <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS   <span class="org-rainbow-delimiters-depth-3">){</span> model_teapot.rotate<span class="org-rainbow-delimiters-depth-4">(</span>+10.0, AXIS_Y<span class="org-rainbow-delimiters-depth-4">)</span> ;  <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window,  <span class="org-string">'K'</span> <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS   <span class="org-rainbow-delimiters-depth-3">){</span> model_teapot.rotate<span class="org-rainbow-delimiters-depth-4">(</span>-10.0, AXIS_Y<span class="org-rainbow-delimiters-depth-4">)</span> ;  <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Move teapot up and down across Y axis </span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window,  <span class="org-string">'P'</span> <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS   <span class="org-rainbow-delimiters-depth-3">){</span> model_teapot.translate<span class="org-rainbow-delimiters-depth-4">(</span>0.0, +0.1, 0.0<span class="org-rainbow-delimiters-depth-4">)</span> ;  <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window,  <span class="org-string">'O'</span> <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS   <span class="org-rainbow-delimiters-depth-3">){</span> model_teapot.translate<span class="org-rainbow-delimiters-depth-4">(</span>0.0, -0.1, 0.0<span class="org-rainbow-delimiters-depth-4">)</span> ;  <span class="org-rainbow-delimiters-depth-3">}</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">Decrease or increase Teapot size </span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window,  <span class="org-string">'B'</span> <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS   <span class="org-rainbow-delimiters-depth-3">){</span> model_teapot.add_scale<span class="org-rainbow-delimiters-depth-4">(</span>+0.1<span class="org-rainbow-delimiters-depth-4">)</span> ;  <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span> glfwGetKey<span class="org-rainbow-delimiters-depth-4">(</span>window,  <span class="org-string">'N'</span> <span class="org-rainbow-delimiters-depth-4">)</span> == GLFW_PRESS   <span class="org-rainbow-delimiters-depth-3">){</span> model_teapot.add_scale<span class="org-rainbow-delimiters-depth-4">(</span>-0.1<span class="org-rainbow-delimiters-depth-4">)</span> ;  <span class="org-rainbow-delimiters-depth-3">}</span>

    <span class="org-rainbow-delimiters-depth-2">}</span>

    glfwTerminate<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-keyword">return</span> 0;

<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">--- End of main() -----//</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">---------- S H A D E R - P R O G R A M S  -------------------------//</span>
<span class="org-comment-delimiter">//</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Minimal vertex shader =&gt;&gt; Runs on the GPU and processes each vertex.</span>
<span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">code_vertex_shader</span> = R<span class="org-default">"</span><span class="org-string">(    </span>
<span class="org-string">    #version 330 core </span>

<span class="org-string">    layout ( location = 0)  in vec3 position;</span>
<span class="org-string">    // layout ( location = 1) in vec3 color;   </span>
<span class="org-string">    out vec3 out_color;</span>
<span class="org-string">    uniform mat4 u_model;       // Model matrix </span>
<span class="org-string">    uniform mat4 u_view;        // Camera's view matrix    </span>
<span class="org-string">    uniform mat4 u_projection;  // Camera's projection matrix </span>
<span class="org-string">    uniform vec3 u_color;       // Unique color to all vertices set by the C++-side</span>

<span class="org-string">    void main()</span>
<span class="org-string">    {</span>
<span class="org-string">        gl_Position = u_projection * u_view * u_model * vec4(position, 1.0);</span>
<span class="org-string">        // Forward to fragment shader </span>
<span class="org-string">        out_color = u_color;  // color; // vec3(0.56, 0.6, 0.0);</span>
<span class="org-string">    }</span>

<span class="org-string">)</span><span class="org-default">"</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Fragment shader source code </span>
<span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">code_frag_shader</span> = R<span class="org-default">"</span><span class="org-string">(</span>
<span class="org-string">    #version 330 </span>

<span class="org-string">    in vec3 out_color;</span>

<span class="org-string">    void main()</span>
<span class="org-string">    {</span>
<span class="org-string">        // Set vertex colors</span>
<span class="org-string">        gl_FragColor =  vec4(out_color, 1.0);</span>
<span class="org-string">    }</span>
<span class="org-string">)</span><span class="org-default">"</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">====== I M P L E M E N T A T I O N S ==========// </span>

<span class="org-type">GLFWwindow</span>* 
<span class="org-function-name">make_glfwWindowi</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span>  <span class="org-variable-name">width</span>, <span class="org-type">int</span> <span class="org-variable-name">height</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">title</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>

    glfwSetErrorCallback<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">int</span> <span class="org-variable-name">error</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">description</span><span class="org-rainbow-delimiters-depth-3">)</span>
                         <span class="org-rainbow-delimiters-depth-3">{</span> <span class="org-constant">std</span>::fprintf<span class="org-rainbow-delimiters-depth-4">(</span> stderr, <span class="org-string">" [GLFW ERROR] Error = %d ; Description = %s \n"</span>
                                        , error, description<span class="org-rainbow-delimiters-depth-4">)</span>;
                         <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">GLFWwindow</span>* <span class="org-variable-name">window</span> = glfwCreateWindow<span class="org-rainbow-delimiters-depth-2">(</span>width, height, title, <span class="org-constant">NULL</span>, <span class="org-constant">NULL</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span> window != <span class="org-constant">nullptr</span> &amp;&amp; <span class="org-string">"Failed  to create Window"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">OpenGL context </span>
    glfwMakeContextCurrent<span class="org-rainbow-delimiters-depth-2">(</span>window<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Pain whole screen as black - dark screen colors are better </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">for avoding eye strain due long hours staring on monitor.</span>
    glClearColor<span class="org-rainbow-delimiters-depth-2">(</span>0.0f, 0.0f, 0.0f, 1.0f<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Set - OpenGL Core Profile - version 3.3</span>
    glfwWindowHint<span class="org-rainbow-delimiters-depth-2">(</span>GLFW_CONTEXT_VERSION_MAJOR, 3<span class="org-rainbow-delimiters-depth-2">)</span>;
    glfwWindowHint<span class="org-rainbow-delimiters-depth-2">(</span>GLFW_CONTEXT_VERSION_MINOR, 3<span class="org-rainbow-delimiters-depth-2">)</span>;
    glfwWindowHint<span class="org-rainbow-delimiters-depth-2">(</span>GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE<span class="org-rainbow-delimiters-depth-2">)</span>;

    glEnable<span class="org-rainbow-delimiters-depth-2">(</span>GL_COLOR_MATERIAL<span class="org-rainbow-delimiters-depth-2">)</span>;
    glEnable<span class="org-rainbow-delimiters-depth-2">(</span>GL_DEPTH_TEST<span class="org-rainbow-delimiters-depth-2">)</span>;
    glEnable<span class="org-rainbow-delimiters-depth-2">(</span>GL_BLEND<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">return</span> window;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-function-name">compile_shader</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">GLuint</span> <span class="org-variable-name">m_program</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">code</span>, <span class="org-type">GLenum</span> <span class="org-variable-name">type</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">GLint</span> <span class="org-variable-name">shader_id</span> = glCreateShader<span class="org-rainbow-delimiters-depth-2">(</span> type <span class="org-rainbow-delimiters-depth-2">)</span>;
    glShaderSource<span class="org-rainbow-delimiters-depth-2">(</span>shader_id, 1, &amp;code, <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    glCompileShader<span class="org-rainbow-delimiters-depth-2">(</span>shader_id<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">GLint</span> <span class="org-variable-name">is_compiled</span> = GL_FALSE;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Check shader compilation result </span>
    glGetShaderiv<span class="org-rainbow-delimiters-depth-2">(</span>shader_id, GL_COMPILE_STATUS, &amp;is_compiled<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">If there is any shader compilation result, </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">print the error message.</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span> is_compiled == GL_FALSE<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [ERROR] Shader compilation error. "</span> &lt;&lt; <span class="org-string">'\n'</span>;
        <span class="org-constant">std</span>::abort<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>          

    glAttachShader<span class="org-rainbow-delimiters-depth-2">(</span>m_program, shader_id<span class="org-rainbow-delimiters-depth-2">)</span>;   
    glDeleteShader<span class="org-rainbow-delimiters-depth-2">(</span>shader_id<span class="org-rainbow-delimiters-depth-2">)</span>;
    glLinkProgram<span class="org-rainbow-delimiters-depth-2">(</span>m_program<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">GLint</span> <span class="org-variable-name">link_status</span> = GL_FALSE;
    glGetProgramiv<span class="org-rainbow-delimiters-depth-2">(</span>m_program, GL_LINK_STATUS, &amp;link_status<span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span> link_status != GL_FALSE <span class="org-rainbow-delimiters-depth-2">)</span>;   
    <span class="org-comment-delimiter">// </span><span class="org-comment">glUseProgram(m_program);         </span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Upload buffer from main memory to GPU VBO </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">=&gt;&gt; Parameters VAO, VBO are allocated by the caller. </span>
<span class="org-type">void</span> <span class="org-function-name">send_buffer</span><span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-type">GLuint</span>* <span class="org-variable-name">pVao</span>, <span class="org-type">GLuint</span>* <span class="org-variable-name">pVbo</span>, <span class="org-type">GLsizei</span> <span class="org-variable-name">sizeBuffer</span>
                , <span class="org-type">void</span>* <span class="org-variable-name">pBufffer</span>, <span class="org-type">GLint</span>   <span class="org-variable-name">shader_attr</span>, <span class="org-type">GLint</span> <span class="org-variable-name">size</span>
                , <span class="org-type">GLenum</span> <span class="org-variable-name">type</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    assert<span class="org-rainbow-delimiters-depth-2">(</span>pVao != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    assert<span class="org-rainbow-delimiters-depth-2">(</span>pVbo != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">GLuint</span>&amp; <span class="org-variable-name">vao</span> = *pVao;
    <span class="org-type">GLuint</span>&amp; <span class="org-variable-name">vbo</span> = *pVbo;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Generate and bind current VAO (Vertex Array Object)</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>vao == 0<span class="org-rainbow-delimiters-depth-2">){</span> glGenVertexArrays<span class="org-rainbow-delimiters-depth-3">(</span>1, &amp;vao<span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
    glBindVertexArray<span class="org-rainbow-delimiters-depth-2">(</span>vao<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Generate and bind current VBO (Vertex Buffer Object)</span>
    glGenBuffers<span class="org-rainbow-delimiters-depth-2">(</span>1, &amp;vbo<span class="org-rainbow-delimiters-depth-2">)</span>;
    glBindBuffer<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, vbo<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Upload data to current VBO buffer in GPU </span>
    glBufferData<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, sizeBuffer, pBufffer, GL_STATIC_DRAW<span class="org-rainbow-delimiters-depth-2">)</span>;   
    glEnableVertexAttribArray<span class="org-rainbow-delimiters-depth-2">(</span>shader_attr<span class="org-rainbow-delimiters-depth-2">)</span>;    
    <span class="org-comment-delimiter">// </span><span class="org-comment">Set data layout - how data will be interpreted.</span>
    glVertexAttribPointer<span class="org-rainbow-delimiters-depth-2">(</span>shader_attr, size, type, GL_FALSE, 0, <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">------ Disable Global state set by this function -----//</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Unbind VAO </span>
    glBindVertexArray<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Unbind VBO </span>
    glBindBuffer<span class="org-rainbow-delimiters-depth-2">(</span>GL_ARRAY_BUFFER, vbo<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Disable current shader attribute </span>
    glDisableVertexAttribArray<span class="org-rainbow-delimiters-depth-2">(</span>shader_attr<span class="org-rainbow-delimiters-depth-2">)</span>;

<span class="org-rainbow-delimiters-depth-1">}</span>q
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2021-02-20 sáb 17:41</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
