<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2018-11-27 Tue 02:04 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CPP / C++ Notes</title>
<meta name="generator" content="Org mode" />
<meta name="description" content="cpp c++ code examples, demonstrations, design pattern and integration."
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
<link href="theme/org-nav-theme.css" rel="stylesheet">
<script src="theme/org-nav-theme.js"></script>
<link rel="icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">CPP / C++ Notes</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org73734b6">1. Understanding C++</a>
<ul>
<li><a href="#org7b7da8d">1.1. C++ Benefits and Costs</a></li>
<li><a href="#org475ddd4">1.2. C++ Language features</a></li>
<li><a href="#org79243a9">1.3. Big Picture - Technology Landscape</a></li>
<li><a href="#org10b1e06">1.4. C++ Comparison with Java and C#</a></li>
<li><a href="#org6dbc936">1.5. Comparison C X C++(CPP)</a></li>
<li><a href="#org21714dc">1.6. C++ New Features and Standards</a></li>
<li><a href="#org7984dee">1.7. Minimal C++ Programs</a>
<ul>
<li><a href="#org9a7558f">1.7.1. Simple minimal C++ program</a></li>
<li><a href="#org2390c5e">1.7.2. Variations of main function</a></li>
</ul>
</li>
<li><a href="#org137cce1">1.8. Simple Variable Definition and Initialization</a></li>
<li><a href="#org9cc6380">1.9. Control Structures</a>
<ul>
<li><a href="#org8caa21c">1.9.1. ternary operator - question mark (?)</a></li>
<li><a href="#org0750893">1.9.2. if-else</a></li>
<li><a href="#orgd18f6b4">1.9.3. switch case</a></li>
<li><a href="#org32250d5">1.9.4. for loop</a></li>
<li><a href="#orgaf7d322">1.9.5. while loop</a></li>
<li><a href="#org8c88af6">1.9.6. do - while loop</a></li>
</ul>
</li>
<li><a href="#orgb87e350">1.10. Basic Console IO</a>
<ul>
<li><a href="#orgc1904b5">1.10.1. Overview</a></li>
<li><a href="#org56dc592">1.10.2. Example - Old C-IO functions</a></li>
<li><a href="#org9f37197">1.10.3. Example - Reading from Console</a></li>
<li><a href="#orgb497035">1.10.4. Basic IO program</a></li>
</ul>
</li>
<li><a href="#org7a27886">1.11. <span class="todo TODO">TODO</span> Functions/Procedures</a>
<ul>
<li><a href="#org665ee38">1.11.1. Overview</a></li>
<li><a href="#org4dbb067">1.11.2. Simple function with all possible declarations</a></li>
<li><a href="#org2215312">1.11.3. Functions with default parameters</a></li>
<li><a href="#org699d63d">1.11.4. Function overload</a></li>
<li><a href="#org69fe5c5">1.11.5. Functions with static variables - stateful functions</a></li>
</ul>
</li>
<li><a href="#org9981472">1.12. String Manipulation</a>
<ul>
<li><a href="#orga463507">1.12.1. Class std::string</a></li>
<li><a href="#org0b2eaae">1.12.2. Concatenate string literals</a></li>
<li><a href="#org771bf8b">1.12.3. Numerical Parsers Functions (C++11)</a></li>
<li><a href="#org7be3425">1.12.4. Function to_string (C++11)</a></li>
<li><a href="#org102da04">1.12.5. Printing to string with std::stringstream</a></li>
<li><a href="#orgc2d62c0">1.12.6. <span class="todo TODO">TODO</span> Parsing strings with std::stringstream</a></li>
<li><a href="#org176ff7e">1.12.7. Transform string to uppercase or lowercase</a></li>
<li><a href="#org855804b">1.12.8. Check whether a string contains substring</a></li>
<li><a href="#org63ecb6f">1.12.9. Search and replace</a></li>
<li><a href="#org315d342">1.12.10. Character Testing</a></li>
<li><a href="#orgd6b2283">1.12.11. Split string by delimiter</a></li>
<li><a href="#org13c5948">1.12.12. Extract quoted string (C++14)</a></li>
<li><a href="#orged9fb49">1.12.13. Parse comma separated value - CSV row</a></li>
</ul>
</li>
<li><a href="#orgc9bd17c">1.13. C++11 - Uniform Initialization</a></li>
<li><a href="#orge25f1fe">1.14. Iterator based loops and for-range based loops</a>
<ul>
<li><a href="#org3f85c3d">1.14.1. Iterator based loop</a></li>
<li><a href="#org6fed43c">1.14.2. For-range based loops</a></li>
</ul>
</li>
<li><a href="#org13c0c8a">1.15. C++11 - Scoped Enum</a></li>
<li><a href="#orge6cb1d8">1.16. Functor Function-Object and higher order functions</a></li>
<li><a href="#org39fae48">1.17. Lambda Functions</a>
<ul>
<li><a href="#org3642b38">1.17.1. Overview</a></li>
<li><a href="#orgd87d986">1.17.2. Basic Examples</a></li>
<li><a href="#orgf16b2d1">1.17.3. Self-executable lambda for complex initialization</a></li>
<li><a href="#org43adc99">1.17.4. Universal function adapter - std::bind</a></li>
</ul>
</li>
<li><a href="#org88f38d4">1.18. OOP Simple Class</a></li>
<li><a href="#org7c4259b">1.19. Conversion Constructor X Explicit Constructor - explicit keyword</a></li>
<li><a href="#orge461d95">1.20. OOP Value Semantics X Reference Semantics</a></li>
<li><a href="#org1f42be6">1.21. <span class="todo TODO">TODO</span> Memory Allocation - Stack X Heap</a>
<ul>
<li><a href="#orgab877cd">1.21.1. Program/Process memory</a></li>
<li><a href="#orgd13581d">1.21.2. stack Allocation - Automatic Variables</a></li>
<li><a href="#orgbf6db14">1.21.3. Dynamic/Heap Allocation</a></li>
<li><a href="#org6f0f7b2">1.21.4. Limits of stack and heap allocation</a></li>
<li><a href="#orgb04475c">1.21.5. References and further reading</a></li>
</ul>
</li>
<li><a href="#org3decf15">1.22. OOP Object Lifecycle</a></li>
<li><a href="#org545d51c">1.23. OOP Polymorphism and Inheritance</a>
<ul>
<li><a href="#org397a23f">1.23.1. Overview</a></li>
<li><a href="#org5817e8f">1.23.2. OOP - Dynamic Polymorphism in deep</a></li>
<li><a href="#org0f3cfe3">1.23.3. Dynamic Polymorphism example - code</a></li>
<li><a href="#org1788112">1.23.4. STL containers and polymorphism</a></li>
</ul>
</li>
<li><a href="#orgfcfde53">1.24. <span class="todo TODO">TODO</span> OOP Multiple Inheritance</a>
<ul>
<li><a href="#org278a4e7">1.24.1. Ambiguity resolution</a></li>
<li><a href="#org4c8afcd">1.24.2. <span class="todo TODO">TODO</span> OOP Diamond problem</a></li>
<li><a href="#org2961412">1.24.3. References and further reading:</a></li>
</ul>
</li>
<li><a href="#orgc5b921f">1.25. Type Casting / Type Conversion</a>
<ul>
<li><a href="#org45d6a34">1.25.1. Overview</a></li>
<li><a href="#org8bd1379">1.25.2. Example: Old C-Style Casting:</a></li>
<li><a href="#org33d7299">1.25.3. Example: Static Casting</a></li>
<li><a href="#orga359edf">1.25.4. Example: Reinterpret Cast</a></li>
<li><a href="#orge96348a">1.25.5. Example: Const cast</a></li>
<li><a href="#orgfa4147e">1.25.6. References and further reading</a></li>
</ul>
</li>
<li><a href="#orgb34ece5">1.26. OOP RTTI - Runtime Type Identification</a>
<ul>
<li><a href="#org04748fb">1.26.1. Overview</a></li>
<li><a href="#org0f0a6ab">1.26.2. Operator typeid</a></li>
<li><a href="#orge42b4ae">1.26.3. Operator dynamic_cast</a></li>
</ul>
</li>
<li><a href="#org2233faf">1.27. Namespaces</a>
<ul>
<li><a href="#org881a2f9">1.27.1. Summary</a></li>
<li><a href="#org042525b">1.27.2. Examples</a></li>
</ul>
</li>
<li><a href="#orgac6e71a">1.28. Error Handling and Exceptions</a>
<ul>
<li><a href="#orgc70e11a">1.28.1. Overview</a></li>
<li><a href="#org7d34df0">1.28.2. Exception Basics</a></li>
<li><a href="#orgd570224">1.28.3. Custom Exceptions</a></li>
<li><a href="#org2610401">1.28.4. Example - code</a></li>
</ul>
</li>
<li><a href="#orgd702373">1.29. Pointer to Function or Function Pointer</a>
<ul>
<li><a href="#org2fd9058">1.29.1. Overview</a></li>
<li><a href="#org27834ca">1.29.2. Function Pointer Declaration</a></li>
<li><a href="#orgbf787a2">1.29.3. Function Pointer Callbacks</a></li>
</ul>
</li>
<li><a href="#org415759e">1.30. Pointer to Class Member Function</a></li>
<li><a href="#org7e8fce8">1.31. Pointer to Class Member Variable</a>
<ul>
<li><a href="#org5822848">1.31.1. Summary</a></li>
<li><a href="#orga0ae294">1.31.2. Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<ul class="org-ul">
<li><a href='index.html'>Index</a></li>
</ul>

<div id="outline-container-org73734b6" class="outline-2">
<h2 id="org73734b6"><span class="section-number-2">1</span> Understanding C++</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org7b7da8d" class="outline-3">
<h3 id="org7b7da8d"><span class="section-number-3">1.1</span> C++ Benefits and Costs</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Some C++ compelling features which sets it apart from most
programming languages are: 
</p>

<p>
<b>Advatanges</b>:
</p>

<ul class="org-ul">
<li>Compilation to native code - makes the code faster as it does not
need to be interpreted and easier to deploye as the number of
dependencies are minimized. Another advantage of native code is the
obfuscation for free what makes it hard and more costly to reverse
engineer.</li>

<li>High Performance and zero-cost abstractions.</li>

<li>Hardware portability and compiler availability for many processor
and hardware architechtures. C++ has the widest range of processor
support, so it can run on mainstream x86, desktop processors;
mobile phone ARM-based CPUs; GPUs; embedded processors and
microcontrollers.</li>

<li>Direct access to the operating system C-API and system calls.</li>

<li>Interoperability with C libraries.</li>

<li>Direct Access to Memory which is important on embedded systems for
accessing memory-mapped IO devices.</li>

<li><b>Perfomance-oriented language:</b> C++ has many features which can help
get the maximum performance as possible from the hardware:
<ul class="org-ul">
<li>Native Code Compilation</li>
<li>Strong static typing</li>
<li>Compiler optimizations</li>
<li>Inline functions</li>
<li>Templates</li>
<li>Pointers</li>
<li>Lack of garbage collector</li>
<li>Lots of optimized standard data structures (STL containers)</li>
<li>Inline-assembly -&gt; The inline-assembly support is compiler
specific and not required by the standard. Assembly is also
processor-specific and not portable.</li>
</ul></li>
</ul>

<p>
<b>Disadvantages:</b>
</p>

<ul class="org-ul">
<li>Language complexity</li>

<li>Compiler's cryptic error messages.</li>

<li>Lack of garbage collector. While the lack of this feature can help
to achieve better performance and efficiency, it requires manual
memory management which can be error prone and lead to memory
leaks. However, smart pointers and RAAI technique can help to solve
this issue.</li>

<li>Lack of a comprehensive standard library.
<ul class="org-ul">
<li>The standard library still lacks lots of libraries that other
programming languages take for granted such as CSV parsers, XML
parsers, database drivers, graphical user interfaces and so on.</li>
</ul></li>

<li>ABI - Application Binary Interface Issues - due the
non-standardized ABI, it is almost impossible to link object-code
(aka compiled code) compiled with different compilers. This is why,
unlike Java and C#,  there is almost no pre-compiled libraries for
C++ what makes the binary reuse hard.</li>

<li>Lack of agreed package manager.
<ul class="org-ul">
<li>While there are many C++ package, there still no standard one
yet. Due to ABI issues, C++ package managers only provide
packages in source format andd don't provide precompiled packages
as shared libraries or static libraries as Java package manager
do.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org475ddd4" class="outline-3">
<h3 id="org475ddd4"><span class="section-number-3">1.2</span> C++ Language features</h3>
<div class="outline-text-3" id="text-1-2">
<p>
C++ Supported Paradigms: 
</p>

<ul class="org-ul">
<li><span class="underline">Imperative / Procedural</span> as C and Pascal</li>

<li><span class="underline">Object Oriented</span></li>

<li><span class="underline">Functional Programmign</span> since C++11 with the introduction type
deduction (auto keyword) and lambda functions.</li>

<li><span class="underline">Generic Programming</span> - Template metaprogramming, a combination of
statically typed duck-typing and lisp-like metaprogramming that
allows efficient code generation at compile-time.</li>
</ul>

<p>
Other Features: 
</p>

<ul class="org-ul">
<li>Automatic memory management.</li>
<li>No garbage collector.</li>
<li>Low level access to system and operating system services or API in
a similar way to C.</li>
</ul>

<p>
Domains where C++ is used: 
</p>

<ul class="org-ul">
<li>System Programming - It means, operating systems, device drivers,
hardware interfacing, USB drivers &#x2026;</li>
<li>Embedded Systems</li>
<li>3D game engines and AAA (triple-A) games.</li>
<li>High Performance Computing (HPC)</li>
<li>High perfomance numerical simulation.</li>
<li>High Perfomance reusable libraries and software components</li>
<li>Physics</li>
<li>High Energy Physics - See CERN</li>
</ul>
</div>
</div>

<div id="outline-container-org79243a9" class="outline-3">
<h3 id="org79243a9"><span class="section-number-3">1.3</span> Big Picture - Technology Landscape</h3>
<div class="outline-text-3" id="text-1-3">
<p>
<b>Operating System</b>
</p>

<ul class="org-ul">
<li><b>Desktop:</b>
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Windows_NT">Windows</a> (WindowsNT family) - Most used Desktop operating
system for games, enterprise and specialized tools.</li>
<li><a href="https://en.wikipedia.org/wiki/Linux">Linux</a> (U-nix like) - Most used on servers, data centers and
super computers. Powers the internet.</li>
<li><a href="https://en.wikipedia.org/wiki/Berkeley_Software_Distribution">BSD Family</a> (U-nix like) - <a href="https://en.wikipedia.org/wiki/FreeBSD">FreeBSD</a>, <a href="https://en.wikipedia.org/wiki/OpenBSD">OpenBSD</a>, <a href="https://en.wikipedia.org/wiki/NetBSD">NetBSD</a></li>
<li>Mac OSX (U-nix like)</li>
</ul></li>
<li><b>Consumer Mobile Devices:</b>
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Android_(operating_system)">Android</a> (Linux Kernel + Bionic =&gt; BSD-derived C-library
replacing GNU C-Library GLIBC + Dalvik virtual machine replacing
JVM)</li>
<li><a href="https://en.wikipedia.org/wiki/IOS">iOS</a> (U-nix lilke)</li>
</ul></li>
<li><a href="https://en.wikipedia.org/wiki/Real-time_operating_system">(RTOS)</a> <b>Real Time OSes for embedded systems</b>
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/VxWorks">VxWorks</a></li>
<li><a href="https://en.wikipedia.org/wiki/QNX">QNX</a></li>
</ul></li>
</ul>

<p>
<b>Hardwares</b>
</p>

<ul class="org-ul">
<li>Vanialla Desktop processors Intel-x86 or Amd-x86-x64 processors</li>
<li>Embedded Processors</li>
<li>Microncontrollers</li>
<li>GPU - Graphical Processing Units</li>
<li>DSP =&gt; Digital Signal Processing</li>
</ul>

<p>
<b>Processor Architectures</b>
</p>

<ul class="org-ul">
<li>Most used for personal computers (based on x86)
<ul class="org-ul">
<li>Intel x86     - 32 bits.</li>
<li>AMD/Inteal 64 - 64 bits.</li>
</ul></li>
<li>Most used for embedded systems and mobile devices.
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/ARM_architecture">ARM Core</a> (32 bits) - Widely used in Smartphones, PDAs, Tablets,
Printers and so on. Note: ARM is not an specific processor, it
is a CPU architechture designed by the <a href="https://en.wikipedia.org/wiki/Arm_Holdings">Arm company</a> and licensed
to IC (Integrated Circuit Manufacturers) which embbeds the CPU
in their devices. So, the ARM-based CPUs, embedded processors
and microncontrollers are produced by many manufacturers which
makes them highly available and cost effective.</li>
<li><b>Power PC</b> (Former Motorola)</li>
</ul></li>
</ul>


<p>
<b>Graphical Stack</b> - Outline of the most common graphical interface systems.
</p>

<ul class="org-ul">
<li>X Windows System - X11 - XServer/Xlib Unix (Linux, BSD, FreeBSD)</li>
<li>Windows API / Microsoft Windows OS</li>
<li>MacOSX  - Cocoa</li>
</ul>

<p>
<b>Main C/C++ GUI - Graphical User Interfaces Libraries and APIs</b>
</p>

<ul class="org-ul">
<li><b>QT toolkit</b> / C++ - Cross Platform. QT is the most supported cross
platform toolkit, but it is hard to be called from languages
other than C++ as it is written in C++ and this language doesn't
have a standard ABI (Application Binary Interface).</li>
<li><b>GTK</b> / C with C++ inteface - Cross platform, most common in Linux OS.</li>
<li><b>Windows API</b>. / Only available on Windows.</li>
<li><b>Cocoa</b> / MacOSX - Not cross platform. It is only available on MacOSX.</li>
<li><a href="https://en.wikipedia.org/wiki/X_Window_System">X-Windows Systems</a> (XServer/X11 + XLib) - Most low level graphical user
interface library on Linux, BSD and others. Note: In Linux and
BSD, the graphical user interface is not part of the Kernel.</li>
</ul>

<p>
<b>Native Executable Formats</b>
</p>

<ul class="org-ul">
<li>Windows / .exe, *.dll files         (PE32)</li>
<li>Linux   / No extension, *.so files  (ELF)</li>
<li>MacOSX  / *.dylib                   (MachO)</li>
</ul>

<p>
<b>Tooling</b>
</p>

<ul class="org-ul">
<li><span class="underline">Compilers</span>

<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/GNU_Compiler_Collection">GCC</a> - Gnu C/C++ Compiler (g++) (Stard Compiler of many Linux distributions)</li>

<li><a href="https://en.wikipedia.org/wiki/MinGW">Mingw</a> - GCC compiler (g++) ported to Windows operating system.</li>

<li><a href="https://en.wikipedia.org/wiki/Microsoft_Visual_C++">Microsoft Visual C++</a> - C/C++ compiler - MSVC, aka VC++ (cl.exe)</li>

<li><a href="https://en.wikipedia.org/wiki/Clang">LLVM/Clang</a> (Clang++)</li>

<li><a href="https://en.wikipedia.org/wiki/Intel_C++_Compiler">Intel C++ Compiler</a></li>

<li>PGI Compiler (Portland Group)</li>

<li>Proprietary compilers for embedded Devices:
<ul class="org-ul">
<li>Many embedded devices such as microcontrollers, embedded
processors and DSPs have proprietary compilers provided by
device manufactures. Example: <a href="https://en.wikipedia.org/wiki/MPLAB">MPLAB</a></li>
</ul></li>
</ul></li>

<li>Building Tools
<ul class="org-ul">
<li>Cmake</li>
<li>MSBuild</li>
<li>Ninja</li>
<li>Make 
<ul class="org-ul">
<li>NMake =&gt; Windows implementation</li>
<li>GNU Make (GMake) =&gt; GNU/Linux implementation of Make</li>
<li>BSD Make =&gt; BSD Implementation of Make</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org10b1e06" class="outline-3">
<h3 id="org10b1e06"><span class="section-number-3">1.4</span> C++ Comparison with Java and C#</h3>
<div class="outline-text-3" id="text-1-4">
<p>
General overview: Unlike most object oriented languages such as Java
and C#, C++ doesn't have a class hierarchy, single inheritance,
garbage collection and a comprehensive standard library. However in
some situations, C++ benefits such as direct access to the operating
system, memory, system calls and low level; interoperability with C
libraries; and above all, high performance computing may offset the
language complexity costs.
</p>

<p>
This table shows a comparison between C++ and mainstreams object
oriented programming languages like Java and C#.
</p>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Feature</th>
<th scope="col" class="org-left">C++</th>
<th scope="col" class="org-left">Java</th>
<th scope="col" class="org-left">C# - .NET</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Native Code</td>
<td class="org-left">Yes</td>
<td class="org-left">No</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">JIT - Just-In-Time Compilation</td>
<td class="org-left">No  - No needed, since C++ is native.</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Virtual Machine</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Garbage Collection</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Memory Management</td>
<td class="org-left">semi-automatic</td>
<td class="org-left">auto</td>
<td class="org-left">auto</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>Object Oriented Features</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">OOP - Object Oriented</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Class Hierarchy</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Reflection</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Single Inheritance</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Multiple Inheritance</td>
<td class="org-left">Yes</td>
<td class="org-left">No</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">Properties</td>
<td class="org-left">No</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Inner classes, aka nested classes</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Anonymous classes</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">Operator Overloading</td>
<td class="org-left">Yes</td>
<td class="org-left">Not</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Marshalling</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Conditional Compilation - preprocessor</td>
<td class="org-left">Yes</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Lambda functions</td>
<td class="org-left">Yes  - since C++11</td>
<td class="org-left">Yes - since Java 8</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Generics</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">*Template metaprogramming</td>
<td class="org-left">Yes</td>
<td class="org-left">No</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">Dependency, package manager</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>Standard Library Features</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Broad Cross Platform Support</td>
<td class="org-left">No - Provided by boost library.</td>
<td class="org-left">Yes</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">GUI toolkit in standard library</td>
<td class="org-left">No</td>
<td class="org-left">Yes - Swing, JavaFX</td>
<td class="org-left">Yes - WinForms, WPF</td>
</tr>

<tr>
<td class="org-left">Collection Library</td>
<td class="org-left">Yes - STL.</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Sockets</td>
<td class="org-left">No - Provided Boost library.</td>
<td class="org-left">No</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">Threads</td>
<td class="org-left">Yes. Since, C++11</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">File System</td>
<td class="org-left">C++ 11 -&gt; No, C++17 -&gt; Yes.</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
<b>Notes and observations:</b>
</p>

<ul class="org-ul">
<li><span class="underline">Class Hierarchy</span> =&gt; In Java, every object inherits from the root
class java.lang.Object. Objects can be cased from its Class or to
'Object'. It also allows put multiple unrelated java objects in the
same container. C# too has a root class System.Object from which
all classes inherits:
<ul class="org-ul">
<li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html">Object (Java Platform SE 7 )</a></li>
<li><a href="https://docs.microsoft.com/en-us/dotnet/api/system.object.-ctor?view=netframework-4.7.2#System_Object__ctor">Object Constructor (System) | Microsoft Docs</a></li>
<li><a href="https://en.wikibooks.org/wiki/Java_Programming/Generics">Generics - Wikibooks, open books for an open world</a></li>
</ul></li>

<li><span class="underline">Virtual Machine</span> =&gt; The <a href="https://en.wikipedia.org/wiki/C%2B%2B/CLI">C++/CLI</a> implementation, also known as
Managed C++ runs in the .NET virtual machine and has garbarge
collector. But this implementation is only supported on Windows.</li>

<li><span class="underline">C++ DO have package managers</span> such as <a href="https://conan.io/">Conan</a>, <a href="http://www.buckaroo.pm/">Buckaroo</a> and <a href="https://docs.microsoft.com/en-us/cpp/vcpkg?view=vs-2017">Vcpkg</a>. But
they are not standard and not widely adopted. In addition, C++
package managers generally don't provide pre-compiled packages as
Java and C# / .NET. Actually, due to non standard ABI - Application
Binary Interface issues, they only provide source packages that are
compiled locally. As far it is known, the C++ package managers also
don't provide a way to install C-shared libraries dependencies
locally such as GNU-scientific library, Opengl, OpenCV, Gtk,
Blas-Lapack shared libraries and so on.</li>
</ul>


<p>
<b>Main Differences between C++ and other languages</b>
</p>

<ul class="org-ul">
<li><span class="underline">Value Semantics</span>
<ul class="org-ul">
<li>Classes are trated as primitive types by default.</li>
</ul></li>

<li><span class="underline">Stack or Heap Allocation</span>
<ul class="org-ul">
<li>Objects can be allocated on the stack and on the heap.</li>
</ul></li>

<li><span class="underline">No Garbage Collection</span>
<ul class="org-ul">
<li>Although, there is no garbage collection, the memory management
can be performed in semi-automatic way by using smart pointers
from C++11 unique_ptr or shared_ptr. The shared_ptr can emulate
garbage collectors as it uses an internal reference counter.</li>
</ul></li>

<li><span class="underline">Deterministic Destructor</span>
<ul class="org-ul">
<li>The destructor method is always called when an object goes out of
scope or an exception happens.</li>
</ul></li>

<li><span class="underline">Many types of constructors</span>
<ul class="org-ul">
<li>C++ has the default constructor, copy constructor and move
constructor.</li>
</ul></li>

<li><span class="underline">Many types of inheritance</span>
<ul class="org-ul">
<li>public, protected, private and virtual inheritance.</li>
</ul></li>

<li><span class="underline">Template Metaprogramming / Generic Programming</span>
<ul class="org-ul">
<li>Which allows generics and type-safe code generation with zero
rutime overhead.</li>
</ul></li>

<li><span class="underline">Pointers</span>
<ul class="org-ul">
<li>Most languages doesn't provide access to pointers and calling C-libraries directly.</li>
</ul></li>

<li><span class="underline">Minimal standard library</span>
<ul class="org-ul">
<li>Lacks many things other languages have for granted such as
database drivers, sockets, SSL/TSL, file system, user interfaces
and so on. Note: only on C++17 that C++ has file system access
derived from Boost.FileSystem the standard library.</li>
</ul></li>
</ul>

<p>
<b>C++ Terminology</b> 
</p>

<p>
C++ has a different terminology from mainstream programming languages
which is shown in the following table.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">C++</th>
<th scope="col" class="org-left">Other OOP Languages</th>
<th scope="col" class="org-left">Comment</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">i.e: Java, Python, &#x2026;</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Class</td>
<td class="org-left">Class</td>
<td class="org-left">C++ class' fields and methods are private by default.</td>
</tr>

<tr>
<td class="org-left">Struct</td>
<td class="org-left">Class</td>
<td class="org-left">A C++ is the same as a Class, but fields and methods are public by default.</td>
</tr>

<tr>
<td class="org-left">Class or Struct</td>
<td class="org-left">Abstract Class</td>
<td class="org-left">A C++ abstract class have at least one <span class="underline">virtual function</span>.</td>
</tr>

<tr>
<td class="org-left">Class or Struct</td>
<td class="org-left">Interface</td>
<td class="org-left">A C++ interface is a class signature with only pure virtual functions (abstract methods.)</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Member Function</td>
<td class="org-left">Instance methods</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Static Member Function</td>
<td class="org-left">Static method</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Virtual Functions</td>
<td class="org-left">-</td>
<td class="org-left">Only methods annoted with virtual  can overriden by subclasses</td>
</tr>

<tr>
<td class="org-left">Non Virtual Functions</td>
<td class="org-left">-</td>
<td class="org-left">Methods without <span class="underline">virtual</span> annotation cannot be overriden by subclasses.</td>
</tr>

<tr>
<td class="org-left">Pure Virtual Function</td>
<td class="org-left">Abstract method (method without implementation)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">STL Containers</td>
<td class="org-left">Collection library - Lists, Maps, Tuples &#x2026;</td>
<td class="org-left">C++ name its collections as containters</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>


<p>
<b>Java X C++ Collections Comparison</b>
</p>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Java</th>
<th scope="col" class="org-left">C++</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">java.util.ArrayList</td>
<td class="org-left">std::vector</td>
</tr>

<tr>
<td class="org-left">java.util.LinkedList</td>
<td class="org-left">std::list</td>
</tr>

<tr>
<td class="org-left">java.util.Stack</td>
<td class="org-left">std::stack</td>
</tr>

<tr>
<td class="org-left">java.util.Queue</td>
<td class="org-left">std::queue</td>
</tr>

<tr>
<td class="org-left">java.util.Deque</td>
<td class="org-left">std::deque</td>
</tr>

<tr>
<td class="org-left">java.util.TreeSet</td>
<td class="org-left">std::set</td>
</tr>

<tr>
<td class="org-left">java.util.HashSet</td>
<td class="org-left">std::unordered_set</td>
</tr>

<tr>
<td class="org-left">java.util.TreeMap</td>
<td class="org-left">std::map</td>
</tr>

<tr>
<td class="org-left">java.util.HashMap</td>
<td class="org-left">std::unordered_map</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>


<p>
See: 
</p>
<ul class="org-ul">
<li><a href='C++ - CPP Programming/CppFor Java Programmers - Hans Dulimatra.pdf'>CppFor Java Programmers - Hans Dulimatra.pdf</a></li>
<li><a href="https://en.wikiversity.org/wiki/Java_Collections_Overview">Java Collections Overview - Wikiversity</a></li>
</ul>
</div>
</div>

<div id="outline-container-org6dbc936" class="outline-3">
<h3 id="org6dbc936"><span class="section-number-3">1.5</span> Comparison C X C++(CPP)</h3>
<div class="outline-text-3" id="text-1-5">
<p>
One of the most compelling advantages of C++ is the compatibility with
C programming language and the ability to interoperate with C code and
C shared libraries. The interoperability with C is necessary as it is
the fundamental language of system programming which most operating
systems, programming languages and domain-specific shared libraries
such as GSL (GNU Scientific Library) or OpengGL are implemented. In
addition, most operating system APIs and services are available or
exposed in C.
</p>

<p>
While previous knowledge of C is not required for learning C++, it is
still necessary to know at least how to read C code in order to access
it from C++ or to create high level C++ wrappers to it. 
</p>

<p>
Note: C++ is not C with classes, it is complete different language,
however it inherits many concepts from C and supports a subset from C
and it is even possible to compile many C code with a C++ compiler.
</p>

<p>
Some applications implemented in C:
</p>

<ul class="org-ul">
<li>Linux Kernel</li>
<li>Free BSD operating system</li>
<li>Windows API - Win32</li>
<li>U-nix sockets API.</li>
<li>OpenGL</li>
<li>Gtk GUI Toolkit</li>
<li>X-Windows System</li>
<li>Python Programming Language (CPython Interpreter)</li>
<li>Ruby Programming Language</li>
<li>Lua Programming Language</li>
</ul>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Feature</th>
<th scope="col" class="org-left">C++ / CPP - C Plus Plus</th>
<th scope="col" class="org-left">C</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Creator</td>
<td class="org-left">Bjarne Stroustrup</td>
<td class="org-left">Dennis Ritchie</td>
</tr>

<tr>
<td class="org-left">Paradigms</td>
<td class="org-left">Imperative, Object Orientated, Gneric / Meta programming and Functional</td>
<td class="org-left">Procedural / Imperative</td>
</tr>

<tr>
<td class="org-left">Some use cases</td>
<td class="org-left">High Performance Computing, Embedded Systems, Games, &#x2026;</td>
<td class="org-left">System programming and embedded systems &#x2026;</td>
</tr>

<tr>
<td class="org-left">Standard ABI</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Collection Library (Containers)</td>
<td class="org-left">Yes - STL (standard) and others.</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">Garbage Collector</td>
<td class="org-left">No</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">Memory Management</td>
<td class="org-left">Manual and Semi automatic (provided by smart pointers.)</td>
<td class="org-left">Manual</td>
</tr>

<tr>
<td class="org-left">Error Handling Mechanism</td>
<td class="org-left">Function return values, global flags and exceptions.</td>
<td class="org-left">Function return values and  global flags such as errno</td>
</tr>

<tr>
<td class="org-left">Exceptions</td>
<td class="org-left">Yes</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">Namespaces</td>
<td class="org-left">Yes</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">File Extensions</td>
<td class="org-left">.cpp (c++ source code) and .hpp (c++ header file).</td>
<td class="org-left">.c (C-source code) and .h (header file)</td>
</tr>

<tr>
<td class="org-left">Metaprogramming facilities</td>
<td class="org-left">Macros + Templates + Inline Functions + Contexptr</td>
<td class="org-left">Macros</td>
</tr>

<tr>
<td class="org-left">String Manipulation</td>
<td class="org-left">std::string</td>
<td class="org-left">C doesn't have string types, just array of characters.</td>
</tr>

<tr>
<td class="org-left">Direct Access to Memory</td>
<td class="org-left">yes - using <code>reinterpret_cast</code> or C-style casting.</td>
<td class="org-left">yes - using C-style casting.</td>
</tr>

<tr>
<td class="org-left">Run barebones without OS</td>
<td class="org-left">yes</td>
<td class="org-left">yes - C has more compillers for embedded devices than C++.</td>
</tr>

<tr>
<td class="org-left">Threads in standard library</td>
<td class="org-left">Yes - since C++11</td>
<td class="org-left">No - It is platform dependent.</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>Direct Access to Memory:
<ul class="org-ul">
<li>Note: It means direct access to a memory location given by its
address. This feature is used for accessing <a href="https://en.wikipedia.org/wiki/Memory-mapped_I/O">memory mapped IO</a> in
embedded systems and low level system programming.</li>
</ul></li>
</ul>

<p>
<b>File Extensions</b>
</p>

<ul class="org-ul">
<li>Source Files
<ul class="org-ul">
<li>*.cpp - C++ source files.</li>
<li>*.hpp - C++ header files.</li>
<li>*.o   - Object Code</li>
</ul></li>

<li>Windows
<ul class="org-ul">
<li>*.exe - PE32 - Windows Executable</li>
<li>*.dll - Windows Shared Library</li>
</ul></li>

<li>Unix (Linux, BSD &#x2026;)
<ul class="org-ul">
<li>(No extension or *.bin) - ELF - Unix Executable</li>
<li>*.so - Unix Shared Library</li>
</ul></li>
</ul>

<p>
<b>Primitive Data Types</b>
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Type</th>
<th scope="col" class="org-left">stdint.h type</th>
<th scope="col" class="org-right">Size (Bytes)</th>
<th scope="col" class="org-right">Size (Bits)</th>
<th scope="col" class="org-left">Range</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">bool</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">1</td>
<td class="org-right">8</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Boolean 0 (false) or 1 (true)</td>
</tr>

<tr>
<td class="org-left">char</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">1</td>
<td class="org-right">8</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Ascii character</td>
</tr>

<tr>
<td class="org-left">unsigned char</td>
<td class="org-left">uint8_t</td>
<td class="org-right">1</td>
<td class="org-right">8</td>
<td class="org-left">0 to 255</td>
<td class="org-left">1 byte integer</td>
</tr>

<tr>
<td class="org-left">signed char</td>
<td class="org-left">int8_t</td>
<td class="org-right">1</td>
<td class="org-right">8</td>
<td class="org-left">-128 to 127</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">short</td>
<td class="org-left">int16_t</td>
<td class="org-right">2</td>
<td class="org-right">16</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">16 bits signed integer</td>
</tr>

<tr>
<td class="org-left">unsigned short</td>
<td class="org-left">uint16_t</td>
<td class="org-right">2</td>
<td class="org-right">16</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">int</td>
<td class="org-left">int32_t</td>
<td class="org-right">4</td>
<td class="org-right">32</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">32 bits signed integer</td>
</tr>

<tr>
<td class="org-left">unsigned int</td>
<td class="org-left">uint32_t</td>
<td class="org-right">4</td>
<td class="org-right">32</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">32 bits unsigned integer</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">float</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">4</td>
<td class="org-right">32</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">32 bits IEEE 754 single-precision float point number</td>
</tr>

<tr>
<td class="org-left">double</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">8</td>
<td class="org-right">64</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">64 bits IEEE 754 double-precision float point Number</td>
</tr>

<tr>
<td class="org-left">long double</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">10</td>
<td class="org-right">80</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Extended precision non-IEEE float point number</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>


<ul class="org-ul">
<li>Note: The type char can be understood as an 8-bits integer.</li>
</ul>
</div>
</div>

<div id="outline-container-org21714dc" class="outline-3">
<h3 id="org21714dc"><span class="section-number-3">1.6</span> C++ New Features and Standards</h3>
<div class="outline-text-3" id="text-1-6">
<ul class="org-ul">
<li><b>C++11</b>
<ul class="org-ul">
<li>C++11 Working Draft  <a href="http://wg21.link/n3242">http://wg21.link/n3242</a></li>
<li>See:
<ul class="org-ul">
<li><a href="https://isocpp.org/wiki/faq/cpp11-language#auto">C++11 Language Extensions  General Features, C++ FAQ</a></li>
<li><a href="http://www.windowscpp.com/CPP11FAQ.htm">http://www.windowscpp.com/CPP11FAQ.htm</a></li>
</ul></li>
<li>Features which supports Functional Programming 
<ul class="org-ul">
<li>auto keyworkd for type deduction (aka type inference)
<ul class="org-ul">
<li>Which relieves the developer from writing all types and
simplifies the code.</li>
</ul></li>
<li>Lambda functions and std::function
<ul class="org-ul">
<li>Introduces the functional programming paradigm in C++ allowing
users to write higher-order functions and reusable algorithms.</li>
</ul></li>
<li>Tuples
<ul class="org-ul">
<li>allows returning multiple values</li>
</ul></li>
<li>Move Semantics:
<ul class="org-ul">
<li>Transfer resource ownership from temporary objects. This
feature removes the runtime overhead of temporary objects and
also allows to return containers such as vectors, string and
etc from functions without runtime overhed or deep copy.</li>
</ul></li>
</ul></li>
<li>Library Support 
<ul class="org-ul">
<li>Smart Pointers =&gt; <code>unique_ptr</code> and <code>shared_ptr</code>
<ul class="org-ul">
<li>Provides memory and resource management making the programs
less prone to memory or resource leaks. Those pointers
implments the RAII (Resource Acquisition is Initialization)
idiom which takes advantage of C++ deterministic destructor for
releasing resources no longer needed.</li>
</ul></li>
<li>Regex</li>
<li>Cross-platform concurrency features.
<ul class="org-ul">
<li>Example: threads, monitors and locks which works on all
supported platforms and operating systems.</li>
</ul></li>
</ul></li>
<li>Misc
<ul class="org-ul">
<li>nullpr - type-safe null pointer</li>
<li>Ranged-based loop</li>
</ul></li>
<li>Compile-time metaprogramming features 
<ul class="org-ul">
<li>Variadic Templates</li>
<li>Contexpr
<ul class="org-ul">
<li>Allows compile-time computations such as computing
random numbers, encrypting string at runtime or generating
look-up tables.</li>
</ul></li>
<li>Static assert</li>
<li>String literals</li>
<li>User-defined literals</li>
</ul></li>
</ul></li>
<li><b>C++14</b>
<ul class="org-ul">
<li>C++14 Working Draft - <a href="http://wg21.link/n4296">http://wg21.link/n4296</a></li>
<li>See: <a href="https://isocpp.org/wiki/faq/cpp14-language">C++14 Language Extensions, C++ FAQ</a></li>
<li><span class="underline">Binary Literals</span>: int x = 0b1001001 -&gt; This feature is useful for
embedded systems and dealing with bitmasks and hardware
registers.</li>
<li><span class="underline">Digit Separators</span> - allows to write the number pi = 3.1415927 as pi = 3.141'592'7</li>
<li><span class="underline">Generalized return type deduction</span>.</li>
<li>decltype(auto)</li>
<li>Genric Lambda - Now it is possible to use the keyword auto for
deducing or infering the type of lambda arguments.</li>
<li>Variable Templates</li>
<li><span class="underline">Extended Constexpr</span> - contexpr functions can have loops, mutating
variables and don't need to be recursive as it was before,
consequently constexpr is able to peform more complex
compile-time computations.</li>
<li>[ [ deprecated ] ] attribute -&gt; enables annotating an entity as
deprecated and prints a compilation warn if a deprecated entity
is used.</li>
</ul></li>
<li><b>C++17</b>
<ul class="org-ul">
<li>C++17 Working Draft - <a href="http://wg21.link/n4659">http://wg21.link/n4659</a></li>
<li>See:
<ul class="org-ul">
<li><a href="http://www.cppstd17.com/">http://www.cppstd17.com/</a></li>
<li><a href="https://isocpp.org/wiki/faq/cpp17-language">https://isocpp.org/wiki/faq/cpp17-language</a></li>
<li><a href="https://www.infoworld.com/article/3044727/application-development/qa-bjarne-stroustrup-previews-c-17.html">Q&amp;A: Bjarne Stroustrup previews C++ 17 | InfoWorld</a></li>
</ul></li>
<li>std::any</li>
<li>std::variant</li>
<li>std::optional</li>
<li>key, value decomposition</li>
<li>Parallel algorithms</li>
<li>structured bindings</li>
<li>nested namespaces</li>
<li>File system libraries</li>
<li>&#x2026; and much more &#x2026;!!</li>
</ul></li>
<li><b>C++20</b> - Coming soon.</li>
</ul>

<p>
Compiler Support: 
</p>

<ul class="org-ul">
<li><a href="https://en.cppreference.com/w/cpp/compiler_support">C++ compiler support - cppreference.com</a></li>
<li><a href="https://www.gnu.org/software/gcc/projects/cxx-status.html">C++ Standards Support in GCC - GNU Project - Free Software Foundation (FSF)</a></li>
<li><a href="https://software.intel.com/en-us/articles/c17-features-supported-by-intel-c-compiler">C++17 Features Supported by Intel C++ Compiler | Intel Software</a></li>
<li><a href="https://docs.microsoft.com/en-us/cpp/visual-cpp-language-conformance?view=vs-2017">Visual C++ Language Conformance | Microsoft Docs</a></li>
</ul>
</div>
</div>
<div id="outline-container-org7984dee" class="outline-3">
<h3 id="org7984dee"><span class="section-number-3">1.7</span> Minimal C++ Programs</h3>
<div class="outline-text-3" id="text-1-7">
</div>
<div id="outline-container-org9a7558f" class="outline-4">
<h4 id="org9a7558f"><span class="section-number-4">1.7.1</span> Simple minimal C++ program</h4>
<div class="outline-text-4" id="text-1-7-1">
<ul class="org-ul">
<li>File: <a href="src/minimal-program1.cpp">file:src/minimal-program1.cpp</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Hello world user"</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Enter your name: "</span>;
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span>;
    <span class="org-constant">std</span>::getline<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::cin, name<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Be welcome to C++ land: "</span> &lt;&lt; name &lt;&lt; <span class="org-string">"\n"</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Wait user type a single character</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">"Type RETURN to exit"</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Read a character from standard input (console)</span>
    <span class="org-constant">std</span>::cin.get<span class="org-rainbow-delimiters-depth-2">()</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Status code</span>
    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Note: The following code is necessary to allow inspecting the program
output on Windows after the user click at it. This code prevents the
program from exiting immediately by asking the user to type Return key
to proceed. It is not necessary on Linux or any other U*nix-like
operating system such as Mac OSX or BSD.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">"Type RETURN to exit"</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Read a character from standard input (console)</span>
<span class="org-function-name">std</span>::cin.get<span class="org-rainbow-delimiters-depth-1">()</span>;
</pre>
</div>

<p>
The main() function returns 0 (zero) as <span class="underline">status code</span> for indicating
that the program was terminated gracefully or any value other than
zero indicate that program was terminated with failure.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">return</span> 0;
</pre>
</div>

<p>
The main function could aso return: 
</p>

<ul class="org-ul">
<li>To indicate success. Same as returning (0).</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Same as 0 </span>
<span class="org-keyword">return</span> EXIT_SUCCESS; 
</pre>
</div>

<ul class="org-ul">
<li>To indicate failure. Same as returning (1)</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">return</span> EXIT_FAILURE;
</pre>
</div>


<p>
<b>Compiling and running:</b>
</p>

<ul class="org-ul">
<li>Compilation flags: 
<ul class="org-ul">
<li>-o &lt;filename&gt;
<ul class="org-ul">
<li>=&gt; Sets the name of the executable generated by the
compiler. If executable name is not set, the compiler will
generate the file a.out on *Nix like systems (Linux, MacOSX,
FreeBSD and etc.) or a.exe on Windows.</li>
</ul></li>
<li>-std=c++14
<ul class="org-ul">
<li>=&gt; Enable C++14 Features. It could also be -std=c++11 (for
C++11 features), -std=c++1z (for C++17 features)</li>
</ul></li>
<li>-g
<ul class="org-ul">
<li>=&gt; Generate debug symbols</li>
</ul></li>
<li>-Wall
<ul class="org-ul">
<li>Increase verbosity level.</li>
</ul></li>
</ul></li>

<li>Compiling with Clang
<ul class="org-ul">
<li>=&gt; Clang compiler provides better error diagnosing and more
user friendly debug messages than other compilers.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">$ clang++ minimal-program1.cpp -o <span class="org-keyword">minimal-program1.bin</span> -g -std=c++14 -Wall 
</pre>
</div>

<ul class="org-ul">
<li>Compiling with GCC</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">$ g++ minimal-program1.cpp -o <span class="org-keyword">minimal-program1.bin</span> -g -std=c++14 -Wall  
</pre>
</div>

<ul class="org-ul">
<li>Compiling on Windows with Mingw (GCC for Windows) 
<ul class="org-ul">
<li>On Windows, the executable can be run by just clicking on it.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">$ g++ minimal-program1.cpp -o <span class="org-keyword">minimal-program1.exe</span> -g -std=c++14 -Wall 
<span class="org-comment-delimiter">// </span><span class="org-comment">On Console (cmd.exe)</span>
$ minimal-program1.exe 
<span class="org-comment-delimiter">// </span><span class="org-comment">Or </span>
</pre>
</div>

<p>
The compilation produces a <b>native executable</b> with: 
</p>

<ul class="org-ul">
<li>Specific <span class="underline">binary format</span> required by operating system. On Linux,
Android and BSD variants this format is <span class="underline">ELF</span> (Executable Linkable
Format); on Windows, this binary format is <span class="underline">PE32</span> or <span class="underline">PE64</span> (Portable
Executable) and on MacOSX this format is <span class="underline">MachO</span>.</li>

<li><span class="underline">Specifc machine code</span> (Instruction set) for the processor
architecture the program was compiled. The most common processor
architecture used in servers and desktop computers are Intel-x86
and Amd-x86-x64. For consumer mobile devices, the most common
processors are the <span class="underline">ARM-based processors</span> that are used in many
Android-based phones, IPhone, IPad and etc.</li>

<li>Specific <span class="underline">system-calls</span> and library calls for the operating system the
program was compiled for.</li>

<li>Additional Notes:

<ul class="org-ul">
<li>A compiled C++ program generally cannot be run in other operating
because different operating systems have different binary
executable formats, different systems calls and core libraries.</li>

<li>The Wine project allows running programs compiled on Windows on
U-nix like operating systems, including Linux, BSD and MacOSX by
translating the PE32 binary format and the Windows system-calls
to the host OS system call.</li>

<li>C++ programs can also be compiled to run <a href="https://en.wikipedia.org/wiki/Bare_machine">bare metal</a>, it means
without any operating system. This type of compilation is widely
used for embedded systems, microcontrollers, firmwares, BIOs,
operating systems and so on.</li>
</ul></li>
</ul>

<p>
<b>Running:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp">$ ./minimal-program1.bin 
Hello world user
Enter your name: Somebody <span class="org-keyword">else</span>
Be welcome to C++ land: Somebody <span class="org-keyword">else</span>

Type RETURN to exit
</pre>
</div>
</div>
</div>
<div id="outline-container-org2390c5e" class="outline-4">
<h4 id="org2390c5e"><span class="section-number-4">1.7.2</span> Variations of main function</h4>
<div class="outline-text-4" id="text-1-7-2">
</div>
<ol class="org-ol">
<li><a id="orgb7190e1"></a>Overview<br />
<div class="outline-text-5" id="text-1-7-2-1">
<p>
The main function can have the following variations: 
</p>

<ul class="org-ul">
<li>Simple main function.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>;
</pre>
</div>

<ul class="org-ul">
<li>Main function with command line arguments</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span> **<span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<ul class="org-ul">
<li>Main function with command line arguments and environment
variables.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span> **<span class="org-variable-name">argv</span>, <span class="org-type">char</span> **<span class="org-variable-name">environ</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>
</div>
</li>
<li><a id="org22e8453"></a>Example: Minimal program with command line arguments<br />
<div class="outline-text-5" id="text-1-7-2-2">
<p>
Exmaple: Command line arguments. 
</p>

<ul class="org-ul">
<li>File: <a href="src/minimal-program2.cpp">file:src/minimal-program2.cpp</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span> **<span class="org-variable-name">argv</span>, <span class="org-type">char</span> **<span class="org-variable-name">environ</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>argc &lt; 2<span class="org-rainbow-delimiters-depth-2">){</span>
       <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"Error: invalid command line argument. Expected -args or -env "</span>
                 &lt;&lt; <span class="org-string">"\n"</span>;
       <span class="org-comment-delimiter">// </span><span class="org-comment">Exit  immediately (return 1)</span>
       <span class="org-keyword">return</span> EXIT_FAILURE; 
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-3">(</span>argv<span class="org-rainbow-delimiters-depth-4">[</span>1<span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">)</span> == <span class="org-string">"-args"</span><span class="org-rainbow-delimiters-depth-2">){</span>
       <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Number of command line arguments = "</span> &lt;&lt; argc &lt;&lt; <span class="org-string">"\n"</span>;
       <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"argv[0] = "</span> &lt;&lt; argv<span class="org-rainbow-delimiters-depth-3">[</span>0<span class="org-rainbow-delimiters-depth-3">]</span> &lt;&lt; <span class="org-string">"\n"</span>;
       <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span>;
       <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Showing command line arguments:"</span> &lt;&lt; <span class="org-string">"\n"</span>;
       <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"+-----------------------------+"</span> &lt;&lt; <span class="org-string">"\n"</span>;
       <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; argc; i++<span class="org-rainbow-delimiters-depth-3">)</span>
               <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"argv["</span> &lt;&lt; i &lt;&lt; <span class="org-string">"] = "</span> &lt;&lt; argv<span class="org-rainbow-delimiters-depth-3">[</span>i<span class="org-rainbow-delimiters-depth-3">]</span> &lt;&lt; <span class="org-string">"\n"</span>;      
       <span class="org-keyword">return</span> EXIT_SUCCESS;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-3">(</span>argv<span class="org-rainbow-delimiters-depth-4">[</span>1<span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">)</span> == <span class="org-string">"-env"</span><span class="org-rainbow-delimiters-depth-2">){</span>
       <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Show environment variables"</span> &lt;&lt; <span class="org-string">"\n"</span>;
       <span class="org-type">char</span>** <span class="org-variable-name">env</span> = environ;
       <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-3">(</span>*<span class="org-rainbow-delimiters-depth-4">(</span>env++<span class="org-rainbow-delimiters-depth-4">)</span> != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-3">)</span>
               <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; env = "</span> &lt;&lt; *env &lt;&lt; <span class="org-string">"\n"</span>;
       <span class="org-keyword">return</span> EXIT_SUCCESS;

    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"Error: invalid argument &lt;"</span> &lt;&lt;  argv<span class="org-rainbow-delimiters-depth-2">[</span>1<span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; <span class="org-string">"&gt; "</span> &lt;&lt;<span class="org-string">"\n"</span>;     
    <span class="org-comment-delimiter">// </span><span class="org-comment">return 1</span>
    <span class="org-keyword">return</span> EXIT_FAILURE;
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Compiling: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ clang++ minimal-program2.cpp -o <span class="org-keyword">minimal-program2.bin</span> -g -std=c++1z -Wall
</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">
<pre class="src src-text">$ ./minimal-program2.bin 
Error: invalid command line argument. Expected -args or -env 

$ ./minimal-program2.bin -args opt1 opt2 key=value
Number of command line arguments = 5
argv[0] = ./minimal-program2.bin

Showing command line arguments:
+-----------------------------+
argv[0] = ./minimal-program2.bin
argv[1] = -args
argv[2] = opt1
argv[3] = opt2
argv[4] = key=value

$ ./minimal-program2.bin sadsad
Error: invalid argument &lt;sadsad&gt; 

$ ./minimal-program2.bin -env
Show environment variables
 =&gt; env = LD_LIBRARY_PATH=:/home/archbox/opt/root/lib:/home/archbox/opt...
 =&gt; env = XDG_MENU_PREFIX=gnome-
 =&gt; env = MODULES_RUN_QUARANTINE=LD_LIBRARY_PATH
 =&gt; env = LANG=en_CA.UTF-8
 =&gt; env = GDM_LANG=en_CA.UTF-8
 =&gt; env = HISTCONTROL=ignoredups
 =&gt; env = DISPLAY=:0
 =&gt; env = HOSTNAME=localhost.localdomain
 =&gt; env = OLDPWD=/home/archbox/Documents/projects/learn.cpp
 =&gt; env = GNOME_SHELL_SESSION_MODE=classic
 ... ... ... 
 =&gt; env = MODULES_CMD=/usr/share/Modules/libexec/modulecmd.tcl
 =&gt; env = USER=archbox
 =&gt; env = ENV=/usr/share/Modules/init/profile.sh
 =&gt; env = PAGER=cat
 =&gt; env = DESKTOP_SESSION=gnome-classic
 ... ... ... 
</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-org137cce1" class="outline-3">
<h3 id="org137cce1"><span class="section-number-3">1.8</span> Simple Variable Definition and Initialization</h3>
<div class="outline-text-3" id="text-1-8">
<p>
Simple variable definition: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">int</span> i;
&gt;&gt; <span class="org-type">int</span> ix = 200;

&gt;&gt; i
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 0

&gt;&gt; ix
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 200
&gt;&gt; 

&gt;&gt; <span class="org-keyword">const</span> <span class="org-type">char</span> * s1  = <span class="org-string">" refresh memory about C++"</span> ;
&gt;&gt; s1
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">" refresh memory about C++"</span>

&gt;&gt; <span class="org-type">char</span> s2 <span class="org-rainbow-delimiters-depth-1">[]</span>  = <span class="org-string">" refresh memory about C++"</span> ;
&gt;&gt; s2
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span> <span class="org-rainbow-delimiters-depth-2">[</span>26<span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">" refresh memory about C++"</span>
&gt;&gt; 
</pre>
</div>

<p>
Multiple variable default initialization in same line: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-variable-name">y</span>, <span class="org-variable-name">z</span>;

&gt;&gt; x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.0000000
&gt;&gt; y
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.0000000
&gt;&gt; z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.0000000
</pre>
</div>

<p>
Multiple variables initialization at same line: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">double</span> <span class="org-variable-name">xx</span> = 3.1515, <span class="org-variable-name">yy</span> = 3 * xx + 3.0, <span class="org-variable-name">zz</span> = xx * 2 + yy;

&gt;&gt; xx
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 3.1515000
&gt;&gt; yy
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 12.454500
&gt;&gt; zz
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 18.757500
&gt;&gt; 

<span class="org-type">double</span> xa<span class="org-rainbow-delimiters-depth-1">{</span>3.1515<span class="org-rainbow-delimiters-depth-1">}</span>, ya<span class="org-rainbow-delimiters-depth-1">{</span>3 * xa + 3.0<span class="org-rainbow-delimiters-depth-1">}</span>, za<span class="org-rainbow-delimiters-depth-1">{</span>xa * 2 + ya<span class="org-rainbow-delimiters-depth-1">}</span>;

&gt;&gt; xa
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 3.1515000
&gt;&gt; ya
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 12.454500
&gt;&gt; za
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 18.757500
&gt;&gt; 
</pre>
</div>

<p>
Multiple initialization with assignment: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-variable-name">y</span>, <span class="org-variable-name">z</span>;
&gt;&gt; x = y = z = 3.0;
&gt;&gt; x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 3.0000000
&gt;&gt; y
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 3.0000000
&gt;&gt; z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 3.0000000
&gt;&gt; 

<span class="org-function-name">std</span>::string s1, s2, s3;

&gt;&gt; s1 = s2 = s3 = <span class="org-string">"remember c++"</span>;
&gt;&gt; s1
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"remember c++"</span>
&gt;&gt; s2
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"remember c++"</span>
&gt;&gt; s2
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"remember c++"</span>
&gt;&gt; 
</pre>
</div>
</div>
</div>

<div id="outline-container-org9cc6380" class="outline-3">
<h3 id="org9cc6380"><span class="section-number-3">1.9</span> Control Structures</h3>
<div class="outline-text-3" id="text-1-9">
</div>
<div id="outline-container-org8caa21c" class="outline-4">
<h4 id="org8caa21c"><span class="section-number-4">1.9.1</span> ternary operator - question mark (?)</h4>
<div class="outline-text-4" id="text-1-9-1">
<p>
Unlike the if-else statement, the ternary operator (?) or question
mark operator, can solve return a value, although it cannot have
complex statements like if-else. In functional languages like Lisp,
Scala or Haskell, the if-else operator always is evaluated and returns
</p>

<p>
Limitation: The ternary operator cannot have complex statements like
if-else.
</p>

<p>
Syntax:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-rainbow-delimiters-depth-1">{</span>VARIABLE<span class="org-rainbow-delimiters-depth-1">}</span> = <span class="org-rainbow-delimiters-depth-1">{</span>CONDITION<span class="org-rainbow-delimiters-depth-1">}</span> ? <span class="org-rainbow-delimiters-depth-1">{</span>RETURN-IF-TRUE<span class="org-rainbow-delimiters-depth-1">}</span> : <span class="org-rainbow-delimiters-depth-1">{</span>RETURN-IF-FASLE<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Example:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">true</span> ? <span class="org-string">"true"</span> : <span class="org-string">"false"</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"true"</span>
&gt;&gt; <span class="org-constant">false</span> ? <span class="org-string">"true"</span> : <span class="org-string">"false"</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"false"</span>

&gt;&gt; <span class="org-type">int</span> x;
&gt;&gt; x = <span class="org-constant">true</span> ? 10 : 25
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 10
&gt;&gt; x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 10

&gt;&gt; x = <span class="org-constant">false</span> ? 10 : 25
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 25
&gt;&gt;
&gt;&gt;

&gt;&gt; <span class="org-constant">std</span>::string s;
&gt;&gt; x = 10;
&gt;&gt; s = <span class="org-rainbow-delimiters-depth-1">(</span>x &lt; 15<span class="org-rainbow-delimiters-depth-1">)</span> ? <span class="org-string">"true"</span> : <span class="org-string">"false"</span>
<span class="org-string">"true"</span>

&gt;&gt; x = 100;
&gt;&gt; s = <span class="org-rainbow-delimiters-depth-1">(</span>x &lt; 15<span class="org-rainbow-delimiters-depth-1">)</span> ? <span class="org-string">"true"</span> : <span class="org-string">"false"</span>
<span class="org-string">"false"</span>
&gt;&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-org0750893" class="outline-4">
<h4 id="org0750893"><span class="section-number-4">1.9.2</span> if-else</h4>
<div class="outline-text-4" id="text-1-9-2">
</div>
<ol class="org-ol">
<li><a id="orga957dbe"></a>True and false<br />
<div class="outline-text-5" id="text-1-9-2-1">
<p>
In C++, everything equal to zero is false and everything other than
zero is true.
</p>

<ul class="org-ul">
<li>Booleans</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">bool</span> flag;

<span class="org-comment-delimiter">// </span><span class="org-comment">Size - 1 byte</span>
&gt;&gt; <span class="org-keyword">sizeof</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 1

&gt;&gt; flag = <span class="org-constant">false</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Booleans are actually numbers</span>
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"flag = "</span> &lt;&lt; flag &lt;&lt; <span class="org-string">"\n"</span>;
flag = 0

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"flag = "</span> &lt;&lt; <span class="org-constant">std</span>::boolalpha &lt;&lt; flag &lt;&lt; <span class="org-string">"\n"</span>;
flag = <span class="org-constant">false</span>
&gt;&gt;

&gt;&gt; flag = <span class="org-constant">true</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">True</span>
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"flag = "</span> &lt;&lt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>flag<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
flag = 1
&gt;&gt;

</pre>
</div>

<ul class="org-ul">
<li>Booleans - If-else</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">bool</span> flag;

&gt;&gt; flag = <span class="org-constant">false</span>;
&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>flag<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; True"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; False"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
 =&gt; False

&gt;&gt; flag  = <span class="org-constant">true</span>;
&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>flag<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; True"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; False"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
 =&gt; True
&gt;&gt;
</pre>
</div>

<ul class="org-ul">
<li>Char</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">char</span> <span class="org-variable-name">x</span>;

&gt;&gt; x = <span class="org-string">'\0'</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">Null character</span>
&gt;&gt;  <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; True"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; False"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
 =&gt; False

&gt;&gt; x = 0x00; <span class="org-comment-delimiter">// </span><span class="org-comment">Ascii code of null character</span>
&gt;&gt;  <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; True"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; False"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
 =&gt; False

&gt;&gt; x = <span class="org-string">'a'</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'a'</span>
&gt;&gt;  <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; True"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; False"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
 =&gt; True
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Integers:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-variable-name">n</span> = 10;

&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>n<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; True"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; False"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
 =&gt; True
&gt;&gt;

&gt;&gt; n = 0;
&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>n<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; True"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; False"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
 =&gt; False
&gt;&gt;
</pre>
</div>

<ul class="org-ul">
<li>Double:
<ul class="org-ul">
<li>Note: Float pointers should never be tested by comparison.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">double</span> num;

&gt;&gt; num = 12.3;
&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>num<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; True"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; False"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
 =&gt; True

&gt;&gt; num = 0.0;
&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>num<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; True"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; False"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
 =&gt; False
</pre>
</div>

<ul class="org-ul">
<li>Pointers:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">double</span>* ptr;

&gt;&gt; ptr = <span class="org-constant">nullptr</span>;
&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>ptr<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; True"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; False"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
 =&gt; False

&gt;&gt; <span class="org-type">double</span> m;
&gt;&gt; ptr = &amp;m
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f14ccfce020

&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>ptr<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; True"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; False"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
 =&gt; True
&gt;&gt;

&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; True"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; False"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
 =&gt; False

&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">NULL</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; True"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; False"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
 =&gt; False
</pre>
</div>
</div>
</li>

<li><a id="orgce879ff"></a>Returning value from if-else statements (C++11)<br />
<div class="outline-text-5" id="text-1-9-2-2">
<p>
The C++ if-else statement cannot return a value or be evaluated to a
value as the if-else statement in Lisp, Scheme, Scala, Haskell and
other functional languages. Despite that the ternary operator (?) can
be evaluated to some value, it cannot contain complex expressions as
if-else statements.
</p>

<p>
<b>if-else in Scala</b>
</p>

<div class="org-src-container">
<pre class="src src-scala">
<span class="org-comment-delimiter">// </span><span class="org-comment">========&gt;&gt;&gt; EXPERIMENT 1 ==============//</span>
<span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">x</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">0.0</span>;
<span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">n</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>;

scala&gt; x <span class="org-keyword">=</span> <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>n &gt; <span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">256.0</span> <span class="org-keyword">else</span> <span class="org-constant">300.0</span>
<span class="org-function-name">x</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">300.0</span>

scala&gt; n <span class="org-keyword">=</span> <span class="org-constant">200</span>
<span class="org-function-name">n</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">200</span>

scala&gt; x <span class="org-keyword">=</span> <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>n &gt; <span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">256.0</span> <span class="org-keyword">else</span> <span class="org-constant">300.0</span>
<span class="org-function-name">x</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">256.0</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">========&gt;&gt;&gt; EXPERIMENT 2 ==============//</span>

n <span class="org-keyword">=</span> <span class="org-constant">50</span>
scala&gt; x <span class="org-keyword">=</span>  <span class="org-constant">400</span> + <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>n &gt; <span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span> println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Return 256.0"</span><span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-constant">256</span>  <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-2">{</span> println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Return 300.0"</span><span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-constant">300.0</span><span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Return</span> <span class="org-constant">300.0</span>
<span class="org-function-name">x</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">700.0</span>

scala&gt; x <span class="org-keyword">=</span>  <span class="org-constant">400</span> + <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>n &gt; <span class="org-constant">100</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span> println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Return 256.0"</span><span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-constant">256</span>  <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-2">{</span> println<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Return 300.0"</span><span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-constant">300.0</span><span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-constant">Return</span> <span class="org-constant">256.0</span>
<span class="org-function-name">x</span><span class="org-keyword">:</span> <span class="org-type">Double</span> <span class="org-keyword">=</span> <span class="org-constant">656.0</span>

</pre>
</div>

<p>
<b>if-else in C++</b>
</p>

<p>
Desired functionality, however the following code doesn't work.
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">double</span> x;
&gt;&gt; <span class="org-type">int</span> n;
&gt;&gt; 
&gt;&gt; n = 10;

<span class="org-comment-delimiter">// </span><span class="org-comment">Compilation error! It doesn't work in C++ </span>
&gt;&gt; x = <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>n &gt; 100<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 
         <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Return 256"</span><span class="org-rainbow-delimiters-depth-2">)</span>;  
         <span class="org-keyword">return</span> 256.0;<span class="org-rainbow-delimiters-depth-1">}</span> 
      <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span> 
         <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Return 300.0"</span><span class="org-rainbow-delimiters-depth-2">)</span>; 
         <span class="org-keyword">return</span> 300.0; 
      <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">ROOT_prompt_4</span>:1:5: error: expected expression
x = <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>n &gt; 100<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Return 256"</span><span class="org-rainbow-delimiters-depth-2">)</span>;  <span class="org-keyword">return</span> 256.0;<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::pu...
    ^
&gt;&gt; 
</pre>
</div>

<p>
It could also be as shown in the following code, however, it requires
modifying the variable x in more than one place. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">double</span> <span class="org-variable-name">x</span>;
<span class="org-type">int</span> <span class="org-variable-name">n</span>; 

n = 200;

<span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>n &gt; 100<span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Return 256"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
  x = 256.0;
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Return 300"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
  x = 300.0 
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Solution: Wrap the if-else statement into a self-executing lambda
expression. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">T</span> <span class="org-variable-name">result</span>;

result = <span class="org-rainbow-delimiters-depth-1">[</span>&amp;<span class="org-rainbow-delimiters-depth-1">](){</span>
              <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>CONDITION<span class="org-rainbow-delimiters-depth-2">){</span>
                 <span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">COMPTATIONS</span>...<span class="org-variable-name">FALSE</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>;
                 <span class="org-keyword">return</span> VALUE-TRUE;
              <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                 <span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">COMPTATIONS</span>...<span class="org-variable-name">ELSE</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>;
                 <span class="org-keyword">return</span> VALUE-FALSE;
              <span class="org-rainbow-delimiters-depth-2">}</span>          
          <span class="org-rainbow-delimiters-depth-1">}()</span>;
</pre>
</div>

<p>
An alternative way is to wrap the if-else statement into a
function. The advantage of this solution is that the computation can
be reused in multiple different places in the code.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">T1</span> <span class="org-variable-name">input1</span>;
<span class="org-type">T2</span> <span class="org-variable-name">input2</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">The computation is wrapped into a lambda function (thunk)</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">,depends on inputs input1, input2, ... as inputs.</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">computation</span> = <span class="org-rainbow-delimiters-depth-1">[</span>&amp;<span class="org-rainbow-delimiters-depth-1">](){</span>
               <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>CONDITION<span class="org-rainbow-delimiters-depth-3">(</span>input1, input2 ...<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">){</span>
                   <span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">COMPTATIONS</span>...<span class="org-variable-name">FALSE</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>;
                   <span class="org-keyword">return</span> VALUE-TRUE;
                <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                   <span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">COMPTATIONS</span>...<span class="org-variable-name">ELSE</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>;
                    <span class="org-keyword">return</span> VALUE-FALSE;
                <span class="org-rainbow-delimiters-depth-2">}</span>            
           <span class="org-rainbow-delimiters-depth-1">}</span>;

input1 = value1A;
input2 = value1B;
<span class="org-type">Result</span> <span class="org-variable-name">result1</span> = computation<span class="org-rainbow-delimiters-depth-1">()</span>;

input1 = value1B;
input2 = value1B;
<span class="org-type">Result</span> <span class="org-variable-name">result2</span> = computation<span class="org-rainbow-delimiters-depth-1">()</span>;
</pre>
</div>

<p>
Example: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">double</span> <span class="org-variable-name">x</span>;
<span class="org-type">int</span> <span class="org-variable-name">n</span>;

n = 50;

&gt;&gt; x = <span class="org-rainbow-delimiters-depth-1">[</span>&amp;<span class="org-rainbow-delimiters-depth-1">](){</span> <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>n &gt; 100<span class="org-rainbow-delimiters-depth-2">)</span>  <span class="org-rainbow-delimiters-depth-2">{</span>
               <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">" [LOG] Return 256"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
               <span class="org-keyword">return</span> 256.0;
        <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-2">{</span> 
               <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">" [LOG] Return 300.0"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
               <span class="org-keyword">return</span> 300.0;
        <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">}()</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Return 300.0

&gt;&gt; x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 300.00000
&gt;&gt; 

n = 400;

&gt;&gt; x = <span class="org-rainbow-delimiters-depth-1">[</span>&amp;<span class="org-rainbow-delimiters-depth-1">](){</span> <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>n &gt; 100<span class="org-rainbow-delimiters-depth-2">)</span>  <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">" [LOG] Return 256"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-keyword">return</span> 256.0;
        <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-2">{</span> 
                <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">" [LOG] Return 300.0"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-keyword">return</span> 300.0;
        <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">}()</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Return 256

</pre>
</div>

<p>
Further Reading: 
</p>

<ul class="org-ul">
<li><a href="https://herbsutter.com/2013/04/05/complex-initialization-for-a-const-variable/">Complex initialization for a const variable | Sutters Mill</a></li>
<li><a href="https://www.reddit.com/r/cpp/comments/62k8b0/lambda_initialization_trick_add_syntactic_sugar/">Lambda initialization trick, add syntactic sugar? : cpp</a></li>
<li><a href="https://stackoverflow.com/questions/15581662/is-it-possible-to-initialize-static-variable-with-lambda">c++ - is it possible to initialize static variable with lambda? - Stack Overflow</a></li>
</ul>
</div>
</li>
</ol>
</div>

<div id="outline-container-orgd18f6b4" class="outline-4">
<h4 id="orgd18f6b4"><span class="section-number-4">1.9.3</span> switch case</h4>
<div class="outline-text-4" id="text-1-9-3">
<p>
Swich case statements can only be used with numbers, characters or
Enums. They cannot be used for processing strings or classes.
</p>

<p>
<b>Example 1</b>: Print month based on its number.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">printMonth1</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-keyword">const</span> <span class="org-type">char</span> <span class="org-variable-name">nl</span> = <span class="org-string">'\n'</span>;
     <span class="org-keyword">switch</span><span class="org-rainbow-delimiters-depth-2">(</span>n<span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-keyword">case</span> 1:  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"JAN"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">case</span> 2:  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"FEB"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">case</span> 3:  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"MAR"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">case</span> 4:  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"APR"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;           
        <span class="org-keyword">case</span> 5:  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"MAY"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">case</span> 6:  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"JUN"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">case</span> 7:  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"JUL"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">case</span> 8:  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"AUG"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">case</span> 9:  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"SEP"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">case</span> 10: <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"OCT"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">case</span> 11: <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"NOV"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">case</span> 12: <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"DEC"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">default</span>: <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Error: invalid month."</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; printMonth1<span class="org-rainbow-delimiters-depth-1">(</span>1<span class="org-rainbow-delimiters-depth-1">)</span>
JAN
&gt;&gt; printMonth1<span class="org-rainbow-delimiters-depth-1">(</span>2<span class="org-rainbow-delimiters-depth-1">)</span>
FEB
&gt;&gt; printMonth1<span class="org-rainbow-delimiters-depth-1">(</span>12<span class="org-rainbow-delimiters-depth-1">)</span>
DEC
&gt;&gt; printMonth1<span class="org-rainbow-delimiters-depth-1">(</span>100<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Error</span>: invalid month.
&gt;&gt; printMonth1<span class="org-rainbow-delimiters-depth-1">(</span>-1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Error</span>: invalid month.
&gt;&gt; 
</pre>
</div>

<p>
or 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">printMonth2</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-keyword">const</span> <span class="org-type">char</span> <span class="org-variable-name">nl</span> = <span class="org-string">'\n'</span>;
     <span class="org-keyword">switch</span><span class="org-rainbow-delimiters-depth-2">(</span>n<span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-keyword">case</span> 1:  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"JAN"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">case</span> 2:  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"FEB"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">case</span> 3:  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"MAR"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">case</span> 4:  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"APR"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;           
        <span class="org-keyword">case</span> 5:  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"MAY"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">case</span> 6:  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"JUN"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">case</span> 7:  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"JUL"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">case</span> 8:  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"AUG"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">case</span> 9:  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"SEP"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">case</span> 10: <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"OCT"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">case</span> 11: <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"NOV"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
        <span class="org-keyword">case</span> 12: <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"DEC"</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Error: invalid month."</span> &lt;&lt; nl; <span class="org-keyword">break</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Example 2</b> : Return month name as a string based on month number.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">std::string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-function-name">std</span>::string getMonth<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-keyword">switch</span><span class="org-rainbow-delimiters-depth-2">(</span>n<span class="org-rainbow-delimiters-depth-2">){</span>
         <span class="org-keyword">case</span> 1:  <span class="org-keyword">return</span> <span class="org-string">"JAN"</span>;
         <span class="org-keyword">case</span> 2:  <span class="org-keyword">return</span> <span class="org-string">"FEB"</span>;
         <span class="org-keyword">case</span> 3:  <span class="org-keyword">return</span> <span class="org-string">"MAR"</span>;
         <span class="org-keyword">case</span> 4:  <span class="org-keyword">return</span> <span class="org-string">"APR"</span>;
         <span class="org-keyword">case</span> 5:  <span class="org-keyword">return</span> <span class="org-string">"MAY"</span>;
         <span class="org-keyword">case</span> 6:  <span class="org-keyword">return</span> <span class="org-string">"JUN"</span>;
         <span class="org-keyword">case</span> 7:  <span class="org-keyword">return</span> <span class="org-string">"JUL"</span>;
         <span class="org-keyword">case</span> 8:  <span class="org-keyword">return</span> <span class="org-string">"AUG"</span>;
         <span class="org-keyword">case</span> 9:  <span class="org-keyword">return</span> <span class="org-string">"SEP"</span>;
         <span class="org-keyword">case</span> 10: <span class="org-keyword">return</span> <span class="org-string">"OCT"</span>;
         <span class="org-keyword">case</span> 11: <span class="org-keyword">return</span> <span class="org-string">"NOV"</span>;
         <span class="org-keyword">case</span> 12: <span class="org-keyword">return</span> <span class="org-string">"DEC"</span>;
         <span class="org-keyword">default</span>:
                 <span class="org-keyword">throw</span> <span class="org-constant">std</span>::domain_error<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: invalid month"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Test code: 
</p>

<ul class="org-ul">
<li>Online compiler: <a href="https://rextester.com/TKA23321">https://rextester.com/TKA23321</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::string month;    
month = getMonth<span class="org-rainbow-delimiters-depth-1">(</span>1<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"Month = "</span> &lt;&lt; month &lt;&lt; <span class="org-string">"\n"</span>;     
month = getMonth<span class="org-rainbow-delimiters-depth-1">(</span>4<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"Month = "</span> &lt;&lt; month &lt;&lt; <span class="org-string">"\n"</span>;    

<span class="org-keyword">try</span><span class="org-rainbow-delimiters-depth-1">{</span>
    month = getMonth<span class="org-rainbow-delimiters-depth-2">(</span>100<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Month = "</span> &lt;&lt; month &lt;&lt; <span class="org-string">"\n"</span>;    
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">catch</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">domain_error</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"An error has happened = "</span> &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">Month = JAN
Month = APR
An error has happened = Error: invalid month
</pre>
</div>

<p>
<b>Example 3</b>: Switch-case for string input. 
</p>

<p>
As switch-case control structure cannot be used with std::string
input, the best approach is to use if-else statements, if-statements
with early return or hash tables.
</p>

<ul class="org-ul">
<li>Solution 1: If statements with early return.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">getDayOfWeekNum</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">weekDay</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>weekDay == <span class="org-string">"Sun"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">return</span> 1;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>weekDay == <span class="org-string">"Mon"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">return</span> 2;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>weekDay == <span class="org-string">"Tue"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">return</span> 3;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>weekDay == <span class="org-string">"Wed"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">return</span> 4;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>weekDay == <span class="org-string">"Thu"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">return</span> 5;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>weekDay == <span class="org-string">"Fri"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">return</span> 6;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>weekDay == <span class="org-string">"Sat"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">return</span> 7;
    <span class="org-keyword">return</span> -1;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; getDayOfWeekNum<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Sun"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 1
&gt;&gt; getDayOfWeekNum<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Tue"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 3
&gt;&gt; getDayOfWeekNum<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Fri"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 6
&gt;&gt; getDayOfWeekNum<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> -1
&gt;&gt; getDayOfWeekNum<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Error"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> -1
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Solution 2: A hash table or dictionary.</li>
</ul>

<p>
Note: <i>Static variables inside functions are initialized only once and
retains their current state</i> between function calls. They are similar
to global variables, but static variables are only visible inside the
function they are defined.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">map</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">getDayOfWeekNum2</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">weekDay</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-keyword">static</span> <span class="org-keyword">auto</span> <span class="org-variable-name">week_table</span> = <span class="org-constant">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"Sun"</span>, 1<span class="org-rainbow-delimiters-depth-3">}</span>, <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"Mon"</span>, 2<span class="org-rainbow-delimiters-depth-3">}</span>, <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"Tue"</span>, 3<span class="org-rainbow-delimiters-depth-3">}</span>, <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"Wed"</span>, 4<span class="org-rainbow-delimiters-depth-3">}</span>,
       <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"Thu"</span>, 5<span class="org-rainbow-delimiters-depth-3">}</span>, <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"Fri"</span>, 6<span class="org-rainbow-delimiters-depth-3">}</span>, <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"Sat"</span>, 7<span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>week_table.find<span class="org-rainbow-delimiters-depth-3">(</span>weekDay<span class="org-rainbow-delimiters-depth-3">)</span> != week_table.end<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
       <span class="org-keyword">return</span> week_table<span class="org-rainbow-delimiters-depth-2">[</span>weekDay<span class="org-rainbow-delimiters-depth-2">]</span>;  
    <span class="org-keyword">return</span> -1;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; getDayOfWeekNum2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Sun"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 1
&gt;&gt; getDayOfWeekNum2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Mon"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 2
&gt;&gt; getDayOfWeekNum2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Monasd"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> -1
&gt;&gt; 
</pre>
</div>
</div>
</div>

<div id="outline-container-org32250d5" class="outline-4">
<h4 id="org32250d5"><span class="section-number-4">1.9.4</span> for loop</h4>
<div class="outline-text-4" id="text-1-9-4">
<ul class="org-ul">
<li>Basic for-loop</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">x</span> = 0; x &lt; 5; x++<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
       <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" x = "</span> &lt;&lt; x &lt;&lt; <span class="org-string">"\n"</span>;
   <span class="org-rainbow-delimiters-depth-1">}</span>
 x = 0
 x = 1
 x = 2
 x = 3
 x = 4

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span> = -10.0; x &lt;= 10.0; x += 2.5<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" x = "</span> &lt;&lt; x &lt;&lt; <span class="org-string">"\n"</span>;
   <span class="org-rainbow-delimiters-depth-1">}</span>
 x = -10
 x = -7.5
 x = -5
 x = -2.5
 x = 0
 x = 2.5
 x = 5
 x = 7.5
 x = 10
&gt;&gt;

</pre>
</div>

<ul class="org-ul">
<li>Infinity loop</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span>;;<span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" It is an infinity loop"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
 It is an infinity loop
 It is an infinity loop
 It is an infinity loop
 It is an <span class="org-type">infinity</span> <span class="org-variable-name">loop</span>
 .,.. ... ... ...
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaf7d322" class="outline-4">
<h4 id="orgaf7d322"><span class="section-number-4">1.9.5</span> while loop</h4>
<div class="outline-text-4" id="text-1-9-5">
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cstdio</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

&gt;&gt; n = 0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 0

&gt;&gt; <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-1">(</span>n &lt; 5<span class="org-rainbow-delimiters-depth-1">){</span>  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"n = "</span> &lt;&lt; n++ &lt;&lt; <span class="org-string">"\n"</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
n = 0
n = 1
n = 2
n = 3
n = 4

&gt;&gt; <span class="org-type">int</span> j = 0;
&gt;&gt; <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-1">(</span>j++ &lt; 5<span class="org-rainbow-delimiters-depth-1">){</span>  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"j = "</span> &lt;&lt; j &lt;&lt; <span class="org-string">"\n"</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
j = 1
j = 2
j = 3
j = 4
j = 5
&gt;&gt; j = 0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 0

&gt;&gt; <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-1">(</span>++j &lt; 5<span class="org-rainbow-delimiters-depth-1">){</span>  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"j = "</span> &lt;&lt; j &lt;&lt; <span class="org-string">"\n"</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
j = 1
j = 2
j = 3
j = 4
&gt;&gt;
</pre>
</div>

<p>
Infinity lop:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" It is an infinity loop"</span> &lt;&lt; <span class="org-string">"\n"</span>;<span class="org-rainbow-delimiters-depth-1">}</span>
It is an infinity loop
It is an infinity loop
It is an <span class="org-type">infinity</span> <span class="org-variable-name">loop</span>
... ... ... ..
</pre>
</div>
</div>
</div>

<div id="outline-container-org8c88af6" class="outline-4">
<h4 id="org8c88af6"><span class="section-number-4">1.9.6</span> do - while loop</h4>
<div class="outline-text-4" id="text-1-9-6">
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-variable-name">z</span> = -10;

<span class="org-comment-delimiter">// </span><span class="org-comment">Single line</span>
&gt;&gt; <span class="org-keyword">do</span><span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" z = "</span> &lt;&lt; z &lt;&lt; <span class="org-string">"\n"</span>; z++; <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-1">(</span>z &lt; 0<span class="org-rainbow-delimiters-depth-1">)</span>
 z = -10
 z = -9
 z = -8
 z = -7
 z = -6
 z = -5
 z = -4
 z = -3
 z = -2
 z = -1
&gt;&gt;

<span class="org-comment-delimiter">// </span><span class="org-comment">Multiple Lines</span>
<span class="org-keyword">do</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" z = "</span> &lt;&lt; z &lt;&lt; <span class="org-string">"\n"</span>;
    z++;
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-1">(</span>z &lt; 0<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgb87e350" class="outline-3">
<h3 id="orgb87e350"><span class="section-number-3">1.10</span> Basic Console IO</h3>
<div class="outline-text-3" id="text-1-10">
</div>
<div id="outline-container-orgc1904b5" class="outline-4">
<h4 id="orgc1904b5"><span class="section-number-4">1.10.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-10-1">
<p>
C++ input/output system is object oriented which means that it is
possible to write input-agnostic or output-agnostic code which can be
reused without any rewritten for reading data from console, file,
string and other end-points.
</p>

<p>
C++ Has the following global objects for performing IO. 
</p>

<ul class="org-ul">
<li><b>std::cout</b> 
<ul class="org-ul">
<li>(stdout) Standard output stream used for displaying program output.</li>
</ul></li>

<li><b>std::cerr</b> 
<ul class="org-ul">
<li>(stderr) Stadnard error output stream used for displaying program
error and logging output. It prints by default to the
console. The output of the stream std::cerr (stderr) can be separated from
std::cout (stdout) output by redirecting the stederr output to a
log file or discarding it.</li>
</ul></li>

<li><b>std::clog</b>
<ul class="org-ul">
<li>(stderr) =&gt; Standard logging output stream.</li>
</ul></li>

<li><b>std::cin</b>  =&gt; Basic Input stream or stdin. Used for reading data
from console.</li>
</ul>

<p>
Operators: 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Name</th>
<th scope="col" class="org-left">Operator</th>
<th scope="col" class="org-left">Parent class</th>
<th scope="col" class="org-left">Derived Classes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Insertion Operator</td>
<td class="org-left">&lt;&lt;</td>
<td class="org-left">std::ostream / Output</td>
<td class="org-left">std::cout, std::cerr, std::ofstream</td>
</tr>

<tr>
<td class="org-left">Extraction Operator</td>
<td class="org-left">&gt;&gt;</td>
<td class="org-left">std::istream / Input</td>
<td class="org-left">std::cin, std::ifstream, std::sstringstream</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org56dc592" class="outline-4">
<h4 id="org56dc592"><span class="section-number-4">1.10.2</span> Example - Old C-IO functions</h4>
<div class="outline-text-4" id="text-1-10-2">
<p>
Sometimes the old C-IO functions such as printf, puts and perror may
be convenient due to its simplicity and less verbosity.
</p>

<ul class="org-ul">
<li>Header: <a href="https://en.cppreference.com/w/cpp/header/cstdio">&lt;cstdio&gt;</a></li>
</ul>

<p>
Functions puts, perror 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">C++ header equivalent to C &lt;stdio.h&gt;</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cstdio</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Print to STDOUT (cout)</span>
&gt;&gt; <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" =&gt; System programming."</span><span class="org-rainbow-delimiters-depth-1">)</span>;
 =&gt; System programming.

<span class="org-comment-delimiter">// </span><span class="org-comment">Print to STDERR (cerr)</span>
&gt;&gt; <span class="org-constant">std</span>::perror<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" =&gt; Print error and logging to stderr."</span><span class="org-rainbow-delimiters-depth-1">)</span>;
 =&gt; Print error <span class="org-keyword">and</span> logging to stderr.: No such file <span class="org-keyword">or</span> directory


<span class="org-comment-delimiter">// </span><span class="org-comment">Write to file (disk file, or pseudo-files such as stderr or stdout)</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">U-nix where C comes from see everything as files. </span>

&gt;&gt; <span class="org-constant">std</span>::fputs<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Hello world\n"</span>, stdout<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">Hello</span> <span class="org-variable-name">world</span>
&gt;&gt; <span class="org-constant">std</span>::fputs<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Hello world\n"</span>, stderr<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">Hello</span> <span class="org-variable-name">world</span>
&gt;&gt; 

</pre>
</div>

<p>
Functions puts, perror and fputs with C++ strings 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string text;
&gt;&gt; text = <span class="org-string">"Hello world C-IO facilities\n"</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Failure =&gt; Cannot print C++ string, only const char </span>
&gt;&gt; <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span>text<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">ROOT_prompt_5</span>:1:11: error: no viable conversion from <span class="org-warning">'</span><span class="org-constant">std</span>::string<span class="org-warning">'</span> ...

&gt;&gt; <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span>text.c_str<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
Hello <span class="org-type">world</span> <span class="org-function-name">C</span>-IO facilities

&gt;&gt; <span class="org-constant">std</span>::perror<span class="org-rainbow-delimiters-depth-1">(</span>text.c_str<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
Hello <span class="org-type">world</span> <span class="org-variable-name">C</span>-IO facilities

</pre>
</div>

<p>
Old C-printf and fprintf 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cstdio</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

&gt;&gt; <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"The value of pi is equal to: %.4f\n"</span>, M_PI<span class="org-rainbow-delimiters-depth-1">)</span>;
The value of pi is <span class="org-type">equal</span> <span class="org-variable-name">to</span>: 3.1416

&gt;&gt; <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"The value of pi is equal to: %.5f\n"</span>, M_PI<span class="org-rainbow-delimiters-depth-1">)</span>;
The value of pi is <span class="org-type">equal</span> <span class="org-variable-name">to</span>: 3.14159
&gt;&gt; 
&gt;&gt; <span class="org-constant">std</span>::fprintf<span class="org-rainbow-delimiters-depth-1">(</span>stdout, <span class="org-string">"The value of pi is equal to: %.5f\n"</span>, M_PI<span class="org-rainbow-delimiters-depth-1">)</span>;
The value of pi is <span class="org-type">equal</span> <span class="org-variable-name">to</span>: 3.14159
&gt;&gt; 
&gt;&gt; <span class="org-constant">std</span>::fprintf<span class="org-rainbow-delimiters-depth-1">(</span>stderr, <span class="org-string">"The value of pi is equal to: %.5f\n"</span>, M_PI<span class="org-rainbow-delimiters-depth-1">)</span>;
The value of pi is <span class="org-type">equal</span> <span class="org-variable-name">to</span>: 3.14159
&gt;&gt; 

<span class="org-function-name">std</span>:string userName = <span class="org-string">"Julius Caesar"</span>;
<span class="org-type">int</span> <span class="org-variable-name">points</span> = 200;

&gt;&gt; <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" =&gt; User = '%s' ; Points = %d\n"</span>, userName.c_str<span class="org-rainbow-delimiters-depth-2">()</span>, points<span class="org-rainbow-delimiters-depth-1">)</span>;
 =&gt; User = <span class="org-warning">'</span>Julius Caesar<span class="org-warning">'</span> ; Points = 200

&gt;&gt; <span class="org-constant">std</span>::fprintf<span class="org-rainbow-delimiters-depth-1">(</span>stdout, <span class="org-string">" =&gt; User = '%s' ; Points = %d\n"</span>, userName.c_str<span class="org-rainbow-delimiters-depth-2">()</span>, points<span class="org-rainbow-delimiters-depth-1">)</span> 
 =&gt; User = <span class="org-warning">'</span>Julius Caesar<span class="org-warning">'</span> ; Points = 200

&gt;&gt; <span class="org-constant">std</span>::fprintf<span class="org-rainbow-delimiters-depth-1">(</span>stderr, <span class="org-string">" =&gt; User = '%s' ; Points = %d\n"</span>, userName.c_str<span class="org-rainbow-delimiters-depth-2">()</span>, points<span class="org-rainbow-delimiters-depth-1">)</span> 
 =&gt; User = <span class="org-warning">'</span>Julius Caesar<span class="org-warning">'</span> ; Points = 200
&gt;&gt; 
</pre>
</div>

<p>
Printf is not type safe: 
</p>

<ul class="org-ul">
<li>It is easy to get a segmentation fault and runtime crash if the
printf arguments are not correct. Another problem is that the
compiler cannot give any help to catch this bug.</li>
<li>See:
<ul class="org-ul">
<li><a href="http://www.zverovich.net/2015/02/26/comparison-of-cppformat-and-printf.html">Comparison of C++ Format and C library's printf</a></li>
<li><a href="https://stackoverflow.com/questions/17789396/how-cout-is-more-typesafe-than-printf">c++ - How cout is more typesafe than printf() - Stack Overflow</a></li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>:string userName = <span class="org-string">"Julius Caesar"</span>;
<span class="org-type">int</span> <span class="org-variable-name">points</span> = 200;

&gt;&gt; <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"User = '%s' ; Points = %d\n"</span>, points, userName.c_str<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
*** Break *** segmentation violation

<span class="org-comment-delimiter">// </span><span class="org-comment">Expected "c-string" (const char*) but provided int</span>
&gt;&gt; <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"%s\n"</span>, 100<span class="org-rainbow-delimiters-depth-1">)</span>;
*** Break *** segmentation violation
</pre>
</div>
</div>
</div>

<div id="outline-container-org9f37197" class="outline-4">
<h4 id="org9f37197"><span class="section-number-4">1.10.3</span> Example - Reading from Console</h4>
<div class="outline-text-4" id="text-1-10-3">
<p>
<b>Reading a single variable from console (stdin):</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 

&gt;&gt; <span class="org-type">double</span> x;
&gt;&gt; <span class="org-constant">std</span>::cin &gt;&gt; x;
342.34
&gt;&gt; x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 342.34000
&gt;&gt; 
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Enter x: "</span>; <span class="org-constant">std</span>::cin &gt;&gt; x; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; x = "</span> &lt;&lt; x &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-type">Enter</span> <span class="org-variable-name">x</span>: 100
 =&gt; x = 100
&gt;&gt; 

&gt;&gt; <span class="org-constant">std</span>::string user;
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Name: "</span>; <span class="org-constant">std</span>::cin &gt;&gt; user; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; user is = "</span> &lt;&lt; user &lt;&lt;Name: Julius Caesar
 =&gt; user is = Julius
&gt;&gt; 
</pre>
</div>

<p>
<b>Read line as string</b>
</p>

<p>
The statement <span class="underline">std::cin &gt;&gt; stringVariable</span> can only read a single word
and will ignore remaining words separated by space. In order to read
the entire line until the new line delimiter is found, it is necessary
to used the C++ function std::getline. 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string some_line;

<span class="org-comment-delimiter">// </span><span class="org-comment">User types something and then hit RETURN when he is done.</span>
&gt;&gt; <span class="org-constant">std</span>::cin &gt;&gt; some_line;
some message <span class="org-type">to</span> <span class="org-function-name">compute</span>     

<span class="org-comment-delimiter">// </span><span class="org-comment">The remaining words were ignored. </span>
&gt;&gt; some_line
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"some"</span>
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">User types something and then hit RETURN when he is done.</span>
&gt;&gt; <span class="org-constant">std</span>::getline<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::cin, some_line<span class="org-rainbow-delimiters-depth-1">)</span>; 
 C++ is an old cool programming language.

&gt;&gt; some_line
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">" C++ is an old cool programming language."</span>
&gt;&gt; 

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" COMMAND =&gt; "</span> ; <span class="org-constant">std</span>::getline<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::cin, some_line<span class="org-rainbow-delimiters-depth-1">)</span>;
 COMMAND =&gt; go to position 200 300

&gt;&gt; some_line
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"go to position 200 300"</span>
&gt;&gt; 

</pre>
</div>

<p>
<b>Read multiple lines until user sends EOF</b>
</p>

<p>
This code reads multiple lines from console untile the user sends the
EOF (End Of Signal) by typing Ctrl + D on U-nix (OSX, Linux, BSD) or
Ctrl + Z on Windows.
</p>

<ul class="org-ul">
<li>Read multiple lines example 1.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::string line;

<span class="org-comment-delimiter">// </span><span class="org-comment">Read lines until user types something invalid or sends EOF </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Ctlr + Z on Windows, Ctrl + D on U-nix (Linux, BSD, OSX ...)</span>
<span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::getline<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::cin, line<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">){</span> 
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"You typed = "</span> &lt;&lt; line &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

 Caesar cypher
<span class="org-type">You</span> <span class="org-variable-name">typed</span> =  Caesar cypher
 Hardening encryption 
You typed =  Hardening encryption
 Digital Signal Processors
You typed =  Digital Signal Processors
  ASICS <span class="org-keyword">and</span> FPGAs custom hardware
You typed =   ASICS <span class="org-keyword">and</span> FPGAs custom hardware
&gt;&gt; 
&gt;&gt; 

</pre>
</div>

<ul class="org-ul">
<li>Read multiple lines example 2.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">runREPL</span><span class="org-rainbow-delimiters-depth-1">(){</span>
  <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">line</span>;
  <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::cin.fail<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">){</span>
    <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [INFO] Input stream failure "</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cin.clear<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-constant">std</span>::cin.ignore<span class="org-rainbow-delimiters-depth-3">()</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" CMD=&gt; "</span> &lt;&lt; <span class="org-constant">std</span>::flush<span class="org-rainbow-delimiters-depth-3">)</span>, <span class="org-constant">std</span>::getline<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cin, line<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" + Typed command was = "</span> &lt;&lt; line &lt;&lt; <span class="org-string">"\n"</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" === Finish REPL session. OK ==="</span> &lt;&lt; <span class="org-string">"\n"</span>;
  <span class="org-constant">std</span>::cin.clear<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">
<pre class="src src-txt">&gt;&gt; runREPL()
 CMD=&gt; Testing C++ on ROOT REPL.
 + Typed command was = Testing C++ on ROOT REPL.
 CMD=&gt; Clang is the best compiler out there
 + Typed command was = Clang is the best compiler out there
 CMD=&gt; Clang has the best and less cryptic error messages
 + Typed command was = Clang has the best and less cryptic error messages
 CMD=&gt;   
 === Finish REPL session. OK ===
&gt;&gt; 
</pre>
</div>

<p>
<b>Read multiple variables from console (stdin):</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 

<span class="org-type">int</span>         <span class="org-variable-name">id</span>, <span class="org-variable-name">quantity</span>;
<span class="org-type">double</span>      <span class="org-variable-name">price</span>;
<span class="org-function-name">std</span>::string name;

<span class="org-comment-delimiter">// </span><span class="org-comment">Read from console</span>
&gt;&gt; <span class="org-constant">std</span>::cin &gt;&gt; id &gt;&gt; name &gt;&gt; quantity &gt;&gt; price ;
2351 Cooking-oil 20 3.12

&gt;&gt; id
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 2351
&gt;&gt; quantity
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 20
&gt;&gt; name
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Cooking-oil"</span>
&gt;&gt; price
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 3.1200000
&gt;&gt; 
</pre>
</div>

<p>
<b>Reading structured data from console:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">deque</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">struct</span> <span class="org-type">Product</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">unsigned</span> <span class="org-type">long</span> <span class="org-variable-name">id</span>;
    <span class="org-constant">std</span>::<span class="org-type">string</span>   <span class="org-variable-name">name</span>;     
    <span class="org-type">double</span>        <span class="org-variable-name">price</span>;
    <span class="org-type">unsigned</span> <span class="org-type">int</span>  <span class="org-variable-name">quantity</span>;
    <span class="org-function-name">Product</span><span class="org-rainbow-delimiters-depth-2">(){}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Or it could also be:</span>
<span class="org-keyword">class</span> <span class="org-type">Product</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
    <span class="org-type">unsigned</span> <span class="org-type">long</span> <span class="org-variable-name">id</span>;
    <span class="org-constant">std</span>::<span class="org-type">string</span>   <span class="org-variable-name">name</span>;     
    <span class="org-type">double</span>        <span class="org-variable-name">price</span>;
    <span class="org-type">unsigned</span> <span class="org-type">int</span>  <span class="org-variable-name">quantity</span>;
    <span class="org-function-name">Product</span><span class="org-rainbow-delimiters-depth-2">(){}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">Product</span> <span class="org-function-name">readProductFromConsole</span><span class="org-rainbow-delimiters-depth-1">(){</span>
    <span class="org-type">Product</span> <span class="org-variable-name">p</span>;
    <span class="org-constant">std</span>::cin &gt;&gt; p.id &gt;&gt; p.name &gt;&gt; p.price &gt;&gt; p.quantity;
    <span class="org-keyword">return</span> p;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Type Alias   </span>
<span class="org-keyword">using</span> <span class="org-type">Inventory</span> = <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Product</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>;

<span class="org-type">Inventory</span> <span class="org-function-name">readInventory</span><span class="org-rainbow-delimiters-depth-1">(){</span>
   <span class="org-type">Inventory</span> <span class="org-variable-name">inv</span>;
   <span class="org-constant">std</span>::cin.clear<span class="org-rainbow-delimiters-depth-2">()</span>;
   <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Enter product ID, product Name, product Price, product Quantity."</span> &lt;&lt; <span class="org-string">"\n"</span>;
   <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Type CTRL+D on U-nix or CTRL+Z on Windows when you are done."</span> &lt;&lt; <span class="org-string">"\n"</span>;     
   <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::cin.good<span class="org-rainbow-delimiters-depth-3">()</span> &amp;&amp; <span class="org-negation-char">!</span><span class="org-constant">std</span>::cin.eof<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">){</span>
       <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; "</span>;
       inv.push_back<span class="org-rainbow-delimiters-depth-3">(</span>readProductFromConsole<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>
   <span class="org-keyword">return</span> inv;
<span class="org-rainbow-delimiters-depth-1">}</span>                                                                          
</pre>
</div>

<ul class="org-ul">
<li>Reading a single object / record:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">User types "2000 Sugar 1.45 9000" and then types RETURN when he is done.</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">------------------------------------------</span>
&gt;&gt; <span class="org-keyword">auto</span> x = readProductFromConsole<span class="org-rainbow-delimiters-depth-1">()</span>
2000 Sugar 1.45 9000
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Product</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f16eb8fc010

&gt;&gt; x.id
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 2000

&gt;&gt; x.name
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Sugar"</span>

&gt;&gt; x.price
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.4500000

&gt;&gt; x.quantity
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 9000
</pre>
</div>

<ul class="org-ul">
<li>Reading multiple data:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> inventory = readInventory<span class="org-rainbow-delimiters-depth-1">()</span>
Enter <span class="org-type">product</span> <span class="org-variable-name">ID</span>, <span class="org-variable-name">product</span> Name, <span class="org-variable-name">product</span> Price, <span class="org-variable-name">product</span> Quantity.
Type CTRL+D on U-nix <span class="org-keyword">or</span> CTRL+Z on Windows when you are done.
 =&gt; 803 Cooking-oil 10.23 200
 =&gt; 2001 Sugar 2.40 500
 =&gt; 9134 Car-battery 50.0 6000
 =&gt; 8023 Milk 4.50 300 
</pre>
</div>

<ul class="org-ul">
<li>Print inventory value:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"> <span class="org-comment-delimiter">// </span><span class="org-comment">Print inventory data: </span>
 <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">prod</span>: inventory<span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-type">double</span> <span class="org-variable-name">value</span> = prod.quantity * prod.price;
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Id       = "</span> &lt;&lt; prod.id       &lt;&lt; <span class="org-string">"\n"</span>
               &lt;&lt; <span class="org-string">"Name     = "</span> &lt;&lt; prod.name     &lt;&lt; <span class="org-string">"\n"</span>
               &lt;&lt; <span class="org-string">"Quantity = "</span> &lt;&lt; prod.quantity &lt;&lt; <span class="org-string">"\n"</span>        
               &lt;&lt; <span class="org-string">"Price    = "</span> &lt;&lt; prod.price    &lt;&lt; <span class="org-string">"\n"</span>
               &lt;&lt; <span class="org-string">"Value    = "</span> &lt;&lt; value         &lt;&lt; <span class="org-string">"\n"</span>
               &lt;&lt; <span class="org-string">"----------------------------"</span> &lt;&lt; <span class="org-string">"\n"</span>;
 <span class="org-rainbow-delimiters-depth-1">}</span>

 <span class="org-comment-delimiter">//</span><span class="org-comment">--------- Output -------------</span>
 Id       = 803
 Name     = Cooking-oil
 Quantity = 200
 Price    = 10.23
 Value    = 2046
 ----------------------------
 Id       = 2001
 Name     = Sugar
 Quantity = 500
 Price    = 2.4
 Value    = 1200
 ----------------------------
... ... .... 
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb497035" class="outline-4">
<h4 id="orgb497035"><span class="section-number-4">1.10.4</span> Basic IO program</h4>
<div class="outline-text-4" id="text-1-10-4">
<p>
<b>Example</b>
</p>

<p>
File: <a href="src/basic-io.cpp">file:src/basic-io.cpp</a>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span> 
    <span class="org-comment-delimiter">// </span><span class="org-comment">Everything is initialized as zero</span>
    <span class="org-type">double</span> <span class="org-variable-name">price</span>, <span class="org-variable-name">sum</span>, <span class="org-variable-name">min</span>, <span class="org-variable-name">max</span>;
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">dataset</span>;
    sum = 0.0;
    min = 1e10;
    max = -1e10;        

    <span class="org-comment-delimiter">// </span><span class="org-comment">Print float point numbers with 2 decimal places and fixed notation </span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-2">(</span>2<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::fixed;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Enter the prices and type CTRL+D you are done."</span> &lt;&lt; <span class="org-string">"\n"</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Execute this code block while there is any error on the stream.</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">It means, the user did not type any bad input or</span>
    <span class="org-comment-delimiter">//  </span><span class="org-comment">CTRL + D (Send EOF End of File - signal)</span>
    <span class="org-type">int</span> <span class="org-variable-name">n</span> = 0;
    <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::cin.good<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">){</span>
       <span class="org-comment-delimiter">// </span><span class="org-comment">(i++) Post increment i, increment variable i after it is print.</span>
       <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; price["</span> &lt;&lt; n++ &lt;&lt; <span class="org-string">"] = "</span>;
       <span class="org-comment-delimiter">// </span><span class="org-comment">Read the price from stdin (standard input or console). </span>
       <span class="org-constant">std</span>::cin &gt;&gt; price;
       <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-negation-char">!</span><span class="org-constant">std</span>::cin.good<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">){</span>
          <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [LOG] "</span> &lt;&lt; <span class="org-string">"User typed invalid input. Exit loop."</span> &lt;&lt; <span class="org-string">"\n"</span>;
          <span class="org-comment-delimiter">// </span><span class="org-comment">Force exiting the loop </span>
          <span class="org-keyword">break</span>;
       <span class="org-rainbow-delimiters-depth-3">}</span>
       sum += price;
        dataset.push_back<span class="org-rainbow-delimiters-depth-3">(</span>price<span class="org-rainbow-delimiters-depth-3">)</span>;
       <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span>price &gt; max<span class="org-rainbow-delimiters-depth-3">)</span>
          max = price;
       <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span>price &lt; min<span class="org-rainbow-delimiters-depth-3">)</span>
          min = price;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Clear stream error flag </span>
    <span class="org-constant">std</span>::cin.clear<span class="org-rainbow-delimiters-depth-2">()</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Sum  = "</span> &lt;&lt; sum       &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Mean = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>sum / n<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Min  = "</span> &lt;&lt; min       &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Max  = "</span> &lt;&lt; max       &lt;&lt; <span class="org-string">"\n"</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Dataset = [ "</span>;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">size_t</span> <span class="org-variable-name">i</span> = 0; i &lt; dataset.size<span class="org-rainbow-delimiters-depth-3">()</span>; i++<span class="org-rainbow-delimiters-depth-2">)</span>
       <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" "</span> &lt;&lt; dataset<span class="org-rainbow-delimiters-depth-2">[</span>i<span class="org-rainbow-delimiters-depth-2">]</span> ;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"] \n"</span>;

<span class="org-preprocessor">    #ifdef</span> _WIN32 
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">"Type RETURN to quit."</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cin.get<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-preprocessor">    #endif</span>      
    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Compiling:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ clang++ basic-io.cpp -o <span class="org-keyword">basic-io.bin</span> -g -std=c++1z -Wall -Wextra
<span class="org-comment-delimiter"># </span><span class="org-comment">OR </span>
$ clang++ basic-io.cpp -o <span class="org-keyword">basic-io.bin</span> -g -std=c++1z -Wall -Wextra &amp;&amp; ./basic-io.bin 
</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">
<pre class="src src-txt">$ ./basic-io.bin 
Enter the prices and type CTRL+D you are done.
 =&gt; price[0] = 20 
 =&gt; price[1] = 21.35
 =&gt; price[2] = 51.2
 =&gt; price[3] = 40.23
 =&gt; price[4] = 60.243
 =&gt; price[5] = 78
 =&gt; price[6] =  [LOG] User typed invalid input. Exit loop.
Sum  = 271.02
Mean = 38.72
Min  = 20.00
Max  = 78.00
Dataset = [  20.00 21.35 51.20 40.23 60.24 78.00] 

$ echo "30.12 40.23 100.34 90.23 52.0" | ./basic-io.bin 
Enter the prices and type CTRL+D you are done.
 =&gt; price[0] =  =&gt; price[1] =  =&gt; price[2] =  =&gt; price[3] =  =&gt; price[4] =  =&gt; price[5] =  [LOG] User typed invalid input. Exit loop.
Sum  = 312.92
Mean = 52.15
Min  = 30.12
Max  = 100.34
Dataset = [  30.12 40.23 100.34 90.23 52.00] 
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org7a27886" class="outline-3">
<h3 id="org7a27886"><span class="section-number-3">1.11</span> <span class="todo TODO">TODO</span> Functions/Procedures</h3>
<div class="outline-text-3" id="text-1-11">
</div>
<div id="outline-container-org665ee38" class="outline-4">
<h4 id="org665ee38"><span class="section-number-4">1.11.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-11-1">
<p>
C++ Functions has the following features: 
</p>

<ul class="org-ul">
<li><span class="underline">Overload</span>
<ul class="org-ul">
<li>Unlike in C, in C++, it is possible to define multiple functions
implementation sharing the same name, although with the same type
signature.</li>
</ul></li>

<li><span class="underline">Default Parameters</span>
<ul class="org-ul">
<li>C++ functions can have default parameters.</li>
</ul></li>

<li><span class="underline">C++11 auto syntax</span></li>

<li><span class="underline">C++14 return type deduction</span></li>
</ul>
</div>
</div>
<div id="outline-container-org4dbb067" class="outline-4">
<h4 id="org4dbb067"><span class="section-number-4">1.11.2</span> Simple function with all possible declarations</h4>
<div class="outline-text-4" id="text-1-11-2">
<p>
<b>Example - Simple function =&gt; all possible declaration</b>
</p>

<p>
Simple function which returns anything: 
</p>

<ul class="org-ul">
<li>Alternative syntax 1:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">someFunction</span><span class="org-rainbow-delimiters-depth-1">(){</span>
     <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"I am a C++ free function"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<ul class="org-ul">
<li>Alternative syntax 2:
<ul class="org-ul">
<li>Note: The early return statement can be used for doing early
return and avoiding many nested if-else statements.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">someFunction</span><span class="org-rainbow-delimiters-depth-1">(){</span>
     <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"I am a C++ free function"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-keyword">return</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<ul class="org-ul">
<li>Alternative syntax 3:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">someFunction</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"I am a C++ free function"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-comment-delimiter">// </span><span class="org-comment">return;       </span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<ul class="org-ul">
<li>Alternative syntax 4 (C++11):</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-function-name">someFunction</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"I am a C++ free function"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-keyword">return</span>;       
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<ul class="org-ul">
<li>Alternative syntax 5 (C++14) - uses type deduction (aka type
inference) for return type.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-function-name">someFunction</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"I am a C++ free function"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-keyword">return</span>;       
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2215312" class="outline-4">
<h4 id="org2215312"><span class="section-number-4">1.11.3</span> Functions with default parameters</h4>
<div class="outline-text-4" id="text-1-11-3">
<ul class="org-ul">
<li>Syntax 1:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">
<span class="org-type">double</span> <span class="org-function-name">someFunction</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">int</span> <span class="org-variable-name">n</span> = 4, <span class="org-type">double</span> <span class="org-variable-name">z</span> = 3.5 <span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"  x = "</span>  &lt;&lt; x
              &lt;&lt; <span class="org-string">" ; n = "</span> &lt;&lt; n
              &lt;&lt; <span class="org-string">" ; z = "</span> &lt;&lt; z
              &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-keyword">return</span> x * n + 4.0 * z;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">OR: </span>
<span class="org-type">double</span> 
<span class="org-function-name">someFunction</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">int</span> <span class="org-variable-name">n</span> = 4, <span class="org-type">double</span> <span class="org-variable-name">z</span> = 3.5 <span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"  x = "</span>  &lt;&lt; x
              &lt;&lt; <span class="org-string">" ; n = "</span> &lt;&lt; n
              &lt;&lt; <span class="org-string">" ; z = "</span> &lt;&lt; z
              &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-keyword">return</span> x * n + 4.0 * z;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Testing: Cling REPL:</span>

&gt;&gt; someFunction<span class="org-rainbow-delimiters-depth-1">(</span>3.0<span class="org-rainbow-delimiters-depth-1">)</span>
  x = 3 ; n = 4 ; z = 3.5
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 26.000000
&gt;&gt; 
&gt;&gt; someFunction<span class="org-rainbow-delimiters-depth-1">(</span>3.0, 10, 5<span class="org-rainbow-delimiters-depth-1">)</span>
  x = 3 ; n = 10 ; z = 5
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 50.000000
&gt;&gt; 
&gt;&gt; someFunction<span class="org-rainbow-delimiters-depth-1">(</span>4.0<span class="org-rainbow-delimiters-depth-1">)</span>
  x = 4 ; n = 4 ; z = 3.5
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 30.000000
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Syntax 2 (C++11). In C++14, the return type can be omitted.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-function-name">someFunction</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">int</span> <span class="org-variable-name">n</span> = 4, <span class="org-type">double</span> <span class="org-variable-name">z</span> = 3.5<span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">double</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"  x = "</span>  &lt;&lt; x
              &lt;&lt; <span class="org-string">" ; n = "</span> &lt;&lt; n
              &lt;&lt; <span class="org-string">" ; z = "</span> &lt;&lt; z
              &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-keyword">return</span> x * n + 4.0 * z;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; someFunction<span class="org-rainbow-delimiters-depth-1">(</span>3.0<span class="org-rainbow-delimiters-depth-1">)</span>
  x = 3 ; n = 4 ; z = 3.5
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 26.000000

&gt;&gt; someFunction<span class="org-rainbow-delimiters-depth-1">(</span>4.0<span class="org-rainbow-delimiters-depth-1">)</span>
  x = 4 ; n = 4 ; z = 3.5
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 30.000000

&gt;&gt; someFunction<span class="org-rainbow-delimiters-depth-1">(</span>4.0, 10, 5<span class="org-rainbow-delimiters-depth-1">)</span>
  x = 4 ; n = 10 ; z = 5
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 60.000000
&gt;&gt; 

</pre>
</div>
</div>
</div>
<div id="outline-container-org699d63d" class="outline-4">
<h4 id="org699d63d"><span class="section-number-4">1.11.4</span> Function overload</h4>
<div class="outline-text-4" id="text-1-11-4">
<p>
Functions can be overloaded as long as they have unique type signature
and the same return type.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 

<span class="org-type">void</span> <span class="org-function-name">show</span><span class="org-rainbow-delimiters-depth-1">(){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Call Version0."</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-function-name">show</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Call Version1 with =&gt;"</span> &lt;&lt; <span class="org-string">" x [int] = "</span> &lt;&lt; x &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-function-name">show</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Call Version2 with =&gt;"</span> &lt;&lt; <span class="org-string">" x [double] = "</span> &lt;&lt; x &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-function-name">show</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">str</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Call Version2 with =&gt;"</span> &lt;&lt; <span class="org-string">" x [const char*] = "</span> &lt;&lt; str &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-function-name">show</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">z</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Call Version4 with =&gt;"</span>
               &lt;&lt; <span class="org-string">" x [int] = "</span> &lt;&lt; x
               &lt;&lt; <span class="org-string">" z [double] = "</span> &lt;&lt; z
               &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-function-name">show</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">z</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">str</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Call Version5 with =&gt;"</span>
               &lt;&lt; <span class="org-string">" x [int] = "</span> &lt;&lt; x
               &lt;&lt; <span class="org-string">" z [double] = "</span> &lt;&lt; z
               &lt;&lt; <span class="org-string">" std [const char*] = "</span> &lt;&lt; str
               &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Testing: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; .L script.C

&gt;&gt; show<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Call</span> <span class="org-variable-name">Version0</span>.

&gt;&gt; show<span class="org-rainbow-delimiters-depth-1">(</span>10<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Call</span> <span class="org-type">Version1</span> <span class="org-variable-name">with</span> =&gt; x <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">]</span> = 10

&gt;&gt; show<span class="org-rainbow-delimiters-depth-1">(</span>3.1415<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Call</span> <span class="org-type">Version2</span> <span class="org-variable-name">with</span> =&gt; x <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">]</span> = 3.1415

&gt;&gt; show<span class="org-rainbow-delimiters-depth-1">(</span>100, 3.1415<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Call</span> <span class="org-type">Version4</span> <span class="org-variable-name">with</span> =&gt; x <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">]</span> = 100 z <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">]</span> = 3.1415

&gt;&gt; show<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Function overload"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Call</span> <span class="org-type">Version2</span> <span class="org-variable-name">with</span> =&gt; x <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-1">]</span> = Function overload

&gt;&gt; show<span class="org-rainbow-delimiters-depth-1">(</span>100, 3.1415, <span class="org-string">"overload"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Call</span> <span class="org-type">Version5</span> <span class="org-variable-name">with</span> =&gt; x <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">]</span> = 100 z <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">]</span> = 3.1415 std <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-1">]</span> = overload
&gt;&gt; 

</pre>
</div>
</div>
</div>
<div id="outline-container-org69fe5c5" class="outline-4">
<h4 id="org69fe5c5"><span class="section-number-4">1.11.5</span> Functions with static variables - stateful functions</h4>
<div class="outline-text-4" id="text-1-11-5">
<p>
Variables inside of functions annotated with "static" keyword are
similar to global variables (global static variables), they are
initialized after the first function invocation and keeps their state
during successive function invocations. 
</p>

<p>
Features: 
</p>
<ul class="org-ul">
<li>Initialized until first function invocation.</li>
<li>Lifetime: Entire program runtime, just like global variables, they
are destroyed when the program execution ends.</li>
<li>Once initialized, keeps their state during function calls.</li>
<li>Stored in the program's and process' data segment.</li>
</ul>

<p>
Use cases: 
</p>
<ul class="org-ul">
<li>Lazy-initialization in singleton design-patterns.</li>
<li>Create stateful functions.</li>
<li>Solve the static initialization order fiasco
<ul class="org-ul">
<li>See:</li>
<li><a href="http://www.cs.technion.ac.il/users/yechiel/c++-faq/static-init-order-on-first-use.html">How do I prevent the "static initialization order fiasco"?, C++ FAQ</a></li>
<li><a href="http://www.cs.technion.ac.il/users/yechiel/c++-faq/construct-on-first-use-v2.html">Why doesn't the construct-on-first-use idiom use a static object instead of a static pointer?, C++ FAQ</a></li>
</ul></li>
</ul>

<p>
Example: 
</p>

<ul class="org-ul">
<li>Counter function with automatic variable (stack-allocated).</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">counterAuto</span><span class="org-rainbow-delimiters-depth-1">(){</span>
   <span class="org-type">int</span> <span class="org-variable-name">x</span> = 0;
   <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"counter = "</span> &lt;&lt; x++ &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; counterAuto<span class="org-rainbow-delimiters-depth-1">()</span>
counter = 0
&gt;&gt; counterAuto<span class="org-rainbow-delimiters-depth-1">()</span>
counter = 0
&gt;&gt; counterAuto<span class="org-rainbow-delimiters-depth-1">()</span>
counter = 0
&gt;&gt; counterAuto<span class="org-rainbow-delimiters-depth-1">()</span>
counter = 0
</pre>
</div>

<ul class="org-ul">
<li>counter function with static variable.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">counterStatic</span><span class="org-rainbow-delimiters-depth-1">(){</span>
   <span class="org-keyword">static</span> <span class="org-type">int</span> <span class="org-variable-name">x</span> = 0;
   <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"counter = "</span> &lt;&lt; x++ &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; counterStatic<span class="org-rainbow-delimiters-depth-1">()</span>
counter = 0
&gt;&gt; counterStatic<span class="org-rainbow-delimiters-depth-1">()</span>
counter = 1
&gt;&gt; counterStatic<span class="org-rainbow-delimiters-depth-1">()</span>
counter = 2
&gt;&gt; counterStatic<span class="org-rainbow-delimiters-depth-1">()</span>
counter = 3
&gt;&gt; counterStatic<span class="org-rainbow-delimiters-depth-1">()</span>
counter = 4
&gt;&gt; 
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org9981472" class="outline-3">
<h3 id="org9981472"><span class="section-number-3">1.12</span> String Manipulation</h3>
<div class="outline-text-3" id="text-1-12">
</div>
<div id="outline-container-orga463507" class="outline-4">
<h4 id="orga463507"><span class="section-number-4">1.12.1</span> Class std::string</h4>
<div class="outline-text-4" id="text-1-12-1">
<p>
In C++, it is better to use std::string than the old "C-string" 
(const char*) since the class std::string is easier and safer to use
than the old C-string class. In addition, std::string can grow or
shrink at runtime automatically taking care of memory allocation.
</p>

<p>
Header: 
</p>
<ul class="org-ul">
<li>&lt;string&gt;</li>
</ul>

<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="http://www.cplusplus.com/reference/string/">&lt;string&gt; - C++ Reference</a></li>
<li><a href="http://www.cplusplus.com/reference/string/string/">string - C++ Reference</a></li>
<li><a href="http://www.cplusplus.com/reference/string/wstring/">wstring - C++ Reference</a></li>
</ul>

<p>
Intialization: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Create an empty string </span>
&gt;&gt; <span class="org-constant">std</span>::string s1
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">""</span>
&gt;&gt; 

&gt;&gt; <span class="org-constant">std</span>::string s2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"I am a C++ std::string"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"I am a C++ std::string"</span>
&gt;&gt; 
&gt;&gt; <span class="org-constant">std</span>::string s3 = <span class="org-string">"C++ CPP 20 is coming soon!!"</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"C++ CPP 20 is coming soon!!"</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">const</span> <span class="org-type">char</span>* msg = <span class="org-string">"C++ strings"</span>;
&gt;&gt; <span class="org-constant">std</span>::string s4 <span class="org-rainbow-delimiters-depth-1">{</span>msg<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"C++ strings"</span>
&gt;&gt; 

&gt;&gt; <span class="org-constant">std</span>::string s5<span class="org-rainbow-delimiters-depth-1">(</span>10, <span class="org-string">'-'</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"----------"</span>
&gt;&gt;
</pre>
</div>

<p>
String size: 
</p>

<p>
&#x2013; <a href="http://www.cplusplus.com/reference/string/string/size/">string::size - C++ Reference</a>
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string sx = <span class="org-string">"high performance computing - finite element methods"</span>;

&gt;&gt; sx.size<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 51

&gt;&gt; sx.length<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 51
&gt;&gt; 
</pre>
</div>

<p>
String concatenation: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string s;
&gt;&gt; s
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">""</span>

&gt;&gt; s = s + <span class="org-string">" string "</span> + <span class="org-string">" C++ "</span> + <span class="org-string">" Move "</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-constant">__cxx11</span>::<span class="org-type">basic_string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">" string  C++  Move "</span>

&gt;&gt; s
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">" string  C++  Move "</span>
&gt;&gt; s += <span class="org-string">" C "</span> + <span class="org-string">" Assembly "</span> + <span class="org-string">" HEX "</span>

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"s = '"</span> &lt;&lt; s &lt;&lt; <span class="org-string">"'"</span> &lt;&lt; <span class="org-string">"\n"</span>;
s = <span class="org-warning">'</span> string  C++  Move  C <span class="org-warning">'</span>
&gt;&gt; 
</pre>
</div>

<p>
String concatenation with append: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string s;
&gt;&gt; s
<span class="org-string">""</span>
&gt;&gt; s.append<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-string">"hello"</span>
&gt;&gt; s.append<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" c++ "</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-string">"hello c++ "</span>
&gt;&gt; s.append<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" std::string "</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-string">"hello c++  std::string "</span>
&gt;&gt; s
<span class="org-string">"hello c++  std::string "</span>
&gt;&gt; 
</pre>
</div>

<p>
Clear string: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string ss1 = <span class="org-string">"I am some string"</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"I am some string"</span>

&gt;&gt; ss1.clear<span class="org-rainbow-delimiters-depth-1">()</span>

&gt;&gt; ss1
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">""</span>

&gt;&gt; ss1.size<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 0
&gt;&gt; 
</pre>
</div>

<p>
Substring: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string str = <span class="org-string">"Early computers were designed for number crunching."</span>;

&gt;&gt; str.substr<span class="org-rainbow-delimiters-depth-1">(</span>0, 10<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-string">"Early comp"</span>

&gt;&gt; str.substr<span class="org-rainbow-delimiters-depth-1">(</span>0, 15<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-string">"Early computers"</span>

&gt;&gt; str.substr<span class="org-rainbow-delimiters-depth-1">(</span>20, str.length<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-string">" designed for number crunching."</span>
</pre>
</div>

<p>
String comparison: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string pass;
&gt;&gt; pass
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">""</span>
&gt;&gt;
&gt;&gt; pass == <span class="org-string">"access"</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; pass = <span class="org-string">"access"</span>
<span class="org-string">"access"</span>
&gt;&gt; pass == <span class="org-string">"access"</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; 

&gt;&gt; <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-1">)</span> == <span class="org-string">"world"</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-1">)</span> == <span class="org-string">"hello"</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt;  

<span class="org-type">void</span> checkPassword<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">passwd</span><span class="org-rainbow-delimiters-depth-1">){</span>
   <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>passwd == <span class="org-string">"87afx"</span><span class="org-rainbow-delimiters-depth-2">)</span>
           <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Access granted. OK."</span><span class="org-rainbow-delimiters-depth-2">)</span>;
   <span class="org-keyword">else</span>
           <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Access denied. FAILURE."</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; checkPassword<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"aa"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Access</span> <span class="org-variable-name">denied</span>. FAILURE.
&gt;&gt; checkPassword<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Access</span> <span class="org-variable-name">denied</span>. FAILURE.
&gt;&gt; checkPassword<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"87afx"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Access</span> <span class="org-variable-name">granted</span>. OK.
&gt;&gt; 
</pre>
</div>

<p>
Reverse string: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string ssa = <span class="org-string">"hello world string"</span>;
&gt;&gt; ssa
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"hello world string"</span>

&gt;&gt; <span class="org-constant">std</span>::reverse<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::begin<span class="org-rainbow-delimiters-depth-2">(</span>ssa<span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">std</span>::end<span class="org-rainbow-delimiters-depth-2">(</span>ssa<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; ssa
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"gnirts dlrow olleh"</span>

&gt;&gt; <span class="org-constant">std</span>::reverse<span class="org-rainbow-delimiters-depth-1">(</span>ssa.begin<span class="org-rainbow-delimiters-depth-2">()</span>, ssa.end<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; ssa
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"hello world string"</span>
&gt;&gt; 
</pre>
</div>
</div>
</div>

<div id="outline-container-org0b2eaae" class="outline-4">
<h4 id="org0b2eaae"><span class="section-number-4">1.12.2</span> Concatenate string literals</h4>
<div class="outline-text-4" id="text-1-12-2">
<p>
Example: concatenate string literas and pass the to the function
perror of signature:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-constant">std</span>::<span class="org-function-name">perror</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Trial:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">s1</span> = <span class="org-string">" world "</span>;
<span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">s2</span> = <span class="org-string">" C++ "</span>;
<span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">s3</span> = <span class="org-string">" strings "</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Compilation error:</span>
&gt;&gt; <span class="org-constant">std</span>::perror<span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-string">" literal1 "</span> + <span class="org-string">"literal 2"</span> + s1 + s2 + s3<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">ROOT_prompt_4</span>:1:27: error: invalid operands to binary expression <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-warning">'</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-warning">'</span> <span class="org-keyword">and</span> <span class="org-warning">'</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-warning">'</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">std</span>::perror<span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-string">" literal1 "</span> + <span class="org-string">"literal 2"</span> + s1 + s2 + s3<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Solution: Wrap the first argument into an std::string. The method
.data() from the std::string class returns a pointer of type (const
char*) or a C-null terminated character array.
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string text = <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" literal1 "</span><span class="org-rainbow-delimiters-depth-1">)</span> + <span class="org-string">"literal 2"</span> + s1 + s2 + s3;
&gt;&gt; text
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">" literal1 literal 2 world  C++  strings "</span>
&gt;&gt; 
&gt;&gt; <span class="org-constant">std</span>::perror<span class="org-rainbow-delimiters-depth-1">(</span>text.data<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-type">literal1</span> <span class="org-variable-name">literal</span> 2 world  C++  strings : No such file <span class="org-keyword">or</span> directory
&gt;&gt; 
</pre>
</div>
</div>
</div>

<div id="outline-container-org771bf8b" class="outline-4">
<h4 id="org771bf8b"><span class="section-number-4">1.12.3</span> Numerical Parsers Functions (C++11)</h4>
<div class="outline-text-4" id="text-1-12-3">
<p>
Header: &lt;string&gt; 
</p>

<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="http://www.cplusplus.com/reference/string/">&lt;string&gt; - C++ Reference</a></li>
</ul>

<p>
Functions: 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Functions</th>
<th scope="col" class="org-left">Convert to:</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">stoi</td>
<td class="org-left">string to integer</td>
</tr>

<tr>
<td class="org-left">stol</td>
<td class="org-left">Convert string to long int</td>
</tr>

<tr>
<td class="org-left">stoul</td>
<td class="org-left">Convert string to unsigned integer</td>
</tr>

<tr>
<td class="org-left">stoll</td>
<td class="org-left">string to long long</td>
</tr>

<tr>
<td class="org-left">stoull</td>
<td class="org-left">unsigned long long</td>
</tr>

<tr>
<td class="org-left">stof</td>
<td class="org-left">Convert string to float</td>
</tr>

<tr>
<td class="org-left">stod</td>
<td class="org-left">Convert string to double</td>
</tr>

<tr>
<td class="org-left">stold</td>
<td class="org-left">Convert string to long double</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li><b>std::stoi</b>
<ul class="org-ul">
<li>Convert a string to integer and throws an exception, if the
operation is not successful.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string s = <span class="org-string">"200"</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"200"</span>

&gt;&gt; <span class="org-constant">std</span>::stoi<span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 200
&gt;&gt; s = <span class="org-string">"-400"</span>
<span class="org-string">"-400"</span>

&gt;&gt; s = <span class="org-string">"-400"</span>;
&gt;&gt; <span class="org-constant">std</span>::stoi<span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> -400

<span class="org-comment-delimiter">// </span><span class="org-comment">Throws exception </span>
&gt;&gt; s = <span class="org-string">"aaabb -400"</span>;
&gt;&gt; <span class="org-constant">std</span>::stoi<span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: <span class="org-constant">std</span>::invalid_argument caught: stoi
&gt;&gt; 

<span class="org-comment-delimiter">//  </span><span class="org-comment">Read hexadecimal number </span>
&gt;&gt; s = <span class="org-string">"0xFFAB"</span>;
&gt;&gt; <span class="org-constant">std</span>::stoi<span class="org-rainbow-delimiters-depth-1">(</span>s, <span class="org-constant">nullptr</span>, 16<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 65451
&gt;&gt; 

&gt;&gt; <span class="org-constant">std</span>::stoi<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"0xFF"</span>, <span class="org-constant">nullptr</span>, 16<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 255
&gt;&gt; <span class="org-constant">std</span>::stoi<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"0xFFFF"</span>, <span class="org-constant">nullptr</span>, 16<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 65535
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li><b>std::stod</b>
<ul class="org-ul">
<li>Convert a string to double. (double precision float point from  IEEE754)</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string s = <span class="org-string">"21.4e3"</span>;
&gt;&gt; <span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 21400.000

&gt;&gt; s = <span class="org-string">"  .4e-6"</span>;
&gt;&gt; <span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 4.0000000e-07
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Throw exception and terminates program, if the exception is not caught.</span>
&gt;&gt; s = <span class="org-string">"failure case  .4e-6"</span>;
&gt;&gt; <span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: <span class="org-constant">std</span>::invalid_argument caught: stod
&gt;&gt; 

&gt;&gt; s = <span class="org-string">"NAN"</span>;
&gt;&gt; <span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> nan
&gt;&gt; s = <span class="org-string">"INFINITY"</span>;
&gt;&gt; <span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> inf
&gt;&gt; s = <span class="org-string">"-INFINITY"</span>;
&gt;&gt; <span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -inf
&gt;&gt; 
&gt;&gt; s = <span class="org-string">"3.1415"</span>;
&gt;&gt; <span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 3.1415000
&gt;&gt; 

&gt;&gt; <span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"1.23e3"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 1230.0000
&gt;&gt; 
</pre>
</div>
</div>
</div>

<div id="outline-container-org7be3425" class="outline-4">
<h4 id="org7be3425"><span class="section-number-4">1.12.4</span> Function to_string (C++11)</h4>
<div class="outline-text-4" id="text-1-12-4">
<p>
Note: This function is useful for concatenating numbers and string.
</p>

<p>
Documentation: 
</p>

<ul class="org-ul">
<li><a href="http://www.cplusplus.com/reference/string/to_string/">to_string - C++ Reference</a></li>
</ul>

<p>
Overloads: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">tring</span> <span class="org-function-name">to_string</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">val</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">string</span> <span class="org-function-name">to_string</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">long</span> <span class="org-variable-name">val</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">string</span> <span class="org-function-name">to_string</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">long</span> <span class="org-type">long</span> <span class="org-variable-name">val</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">string</span> <span class="org-function-name">to_string</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-variable-name">val</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">string</span> <span class="org-function-name">to_string</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span> <span class="org-variable-name">val</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">string</span> <span class="org-function-name">to_string</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span> <span class="org-type">long</span> <span class="org-variable-name">val</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">string</span> <span class="org-function-name">to_string</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span> <span class="org-variable-name">val</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">string</span> <span class="org-function-name">to_string</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">val</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">string</span> <span class="org-function-name">to_string</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">long</span> <span class="org-type">double</span> <span class="org-variable-name">val</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Example: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string s;
&gt;&gt; 
&gt;&gt; <span class="org-type">double</span> x = 3.1415;

&gt;&gt; s = <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"The value of x = "</span><span class="org-rainbow-delimiters-depth-1">)</span> + <span class="org-constant">std</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-string">"The value of x = 3.141500"</span>
&gt;&gt; 

&gt;&gt; s.clear<span class="org-rainbow-delimiters-depth-1">()</span>
&gt;&gt; <span class="org-type">int</span> n = 100;
&gt;&gt; s = <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"The value of n (integer) = "</span><span class="org-rainbow-delimiters-depth-1">)</span> + <span class="org-constant">std</span>::to_string<span class="org-rainbow-delimiters-depth-1">(</span>n<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-string">"The value of n (integer) = 100"</span>
&gt;&gt; 
</pre>
</div>
</div>
</div>
<div id="outline-container-org102da04" class="outline-4">
<h4 id="org102da04"><span class="section-number-4">1.12.5</span> Printing to string with std::stringstream</h4>
<div class="outline-text-4" id="text-1-12-5">
<p>
Header:  <a href="http://www.cplusplus.com/reference/sstream/">&lt;sstream&gt;</a>
</p>

<p>
Other useful headers: 
</p>
<ul class="org-ul">
<li><a href="http://www.cplusplus.com/reference/iomanip/">&lt;iomanip&gt;</a> - Stream manipulators, std::setw, std::setprecision and so on.</li>
<li><a href="http://www.cplusplus.com/reference/ostream/">&lt;ostream&gt;</a> - Class std::ostream, generic output.</li>
</ul>

<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="http://www.cplusplus.com/reference/sstream/">&lt;sstream&gt; - C++ Reference</a></li>
<li><a href="http://www.cplusplus.com/reference/sstream/stringstream/">stringstream - C++ Reference</a></li>
</ul>

<p>
The class std::stringstream is a better option for concatenating
strings or printing to string. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

&gt;&gt; <span class="org-constant">std</span>::stringstream ss;
&gt;&gt; 

&gt;&gt; <span class="org-constant">std</span>::stringstream ss;
&gt;&gt; ss &lt;&lt; <span class="org-string">"Hello world"</span> &lt;&lt; <span class="org-string">"\n"</span>;
&gt;&gt; ss &lt;&lt; <span class="org-string">"PI = "</span> &lt;&lt; M_PI &lt;&lt; <span class="org-string">"\n"</span>;
&gt;&gt; ss &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-1">(</span>3<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"g = "</span> &lt;&lt; 9.81723 &lt;&lt; <span class="org-string">"\n"</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Get std::string from ss</span>
&gt;&gt; ss.str<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-string">"Hello world</span>
<span class="org-string">PI = 3.14159</span>
<span class="org-string">g = 9.817</span>
<span class="org-string">"</span>
&gt;&gt; 

&gt;&gt; <span class="org-constant">std</span>::string s_copy = ss.str<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-warning">"</span><span class="org-string">Hello world</span>
<span class="org-string">PI = 3.14159</span>
<span class="org-string">g = 9.817</span>
<span class="org-string">"</span>
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Clear string stream </span>
&gt;&gt; ss.str<span class="org-rainbow-delimiters-depth-1">()</span>; ss.str<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; ss.str<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-string">""</span>
&gt;&gt; 
</pre>
</div>

<p>
 <b>Example:</b> Polymorphic function which can print to stdout (cout), stderr
(cerr) or to string.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">printReport</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span><span class="org-rainbow-delimiters-depth-1">){</span>
  os &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-2">(</span>3<span class="org-rainbow-delimiters-depth-2">)</span>;
  os &lt;&lt; <span class="org-constant">std</span>::fixed;
  os &lt;&lt; <span class="org-constant">std</span>::boolalpha;
  <span class="org-type">char</span> <span class="org-variable-name">nl</span> = <span class="org-string">'\n'</span>;
  os &lt;&lt; <span class="org-string">"Report Data"</span> &lt;&lt; nl
     &lt;&lt; <span class="org-string">" x = "</span> &lt;&lt; 23.123 &lt;&lt; nl
     &lt;&lt; <span class="org-string">" d = "</span> &lt;&lt; <span class="org-constant">true</span>   &lt;&lt; nl
     &lt;&lt; <span class="org-string">" z = "</span> &lt;&lt; M_PI   &lt;&lt; nl;
  os.flush<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Print to stdout and stderr: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Print to stdout (Standard output)</span>
&gt;&gt; printReport<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::cout<span class="org-rainbow-delimiters-depth-1">)</span>
Report <span class="org-type">Data</span>
 <span class="org-variable-name">x</span> = 23.123
 d = <span class="org-constant">true</span>
 z = 3.142

<span class="org-comment-delimiter">// </span><span class="org-comment">Print to stderr (Standard error output)</span>
&gt;&gt; printReport<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::cerr<span class="org-rainbow-delimiters-depth-1">)</span>
Report <span class="org-type">Data</span>
 <span class="org-variable-name">x</span> = 23.123
 d = <span class="org-constant">true</span>
 z = 3.142
&gt;&gt; 
</pre>
</div>

<p>
Print to string stream: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Print to string stream </span>
&gt;&gt; <span class="org-constant">std</span>::stringstream ss;
&gt;&gt; printReport<span class="org-rainbow-delimiters-depth-1">(</span>ss<span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; ss.str<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-warning">"</span><span class="org-string">Report Data</span>
<span class="org-string"> x = 23.123</span>
<span class="org-string"> d = true</span>
<span class="org-string"> z = 3.142</span>
<span class="org-string">"</span>

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; ss.str<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">'\n'</span>;
Report <span class="org-type">Data</span>
 <span class="org-variable-name">x</span> = 23.123
 d = <span class="org-constant">true</span>
 z = 3.142

&gt;&gt; printReport<span class="org-rainbow-delimiters-depth-1">(</span>ss<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; ss.str<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">'\n'</span>;
Report <span class="org-type">Data</span>
 <span class="org-variable-name">x</span> = 23.123
 d = <span class="org-constant">true</span>
 z = 3.142
Report Data
 x = 23.123
 d = <span class="org-constant">true</span>
 z = 3.142
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc2d62c0" class="outline-4">
<h4 id="orgc2d62c0"><span class="section-number-4">1.12.6</span> <span class="todo TODO">TODO</span> Parsing strings with std::stringstream</h4>
<div class="outline-text-4" id="text-1-12-6">
<p>
Header: &lt;sstream&gt;
</p>

<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="http://www.cplusplus.com/reference/sstream/">&lt;sstream&gt; - C++ Reference</a></li>
<li><a href="http://www.cplusplus.com/reference/sstream/stringstream/">stringstream - C++ Reference</a></li>
</ul>

<p>
<b>Example 1:</b> Parse integers from string. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-function-name">std</span>::string data = <span class="org-string">" 200 400  50.232 100 200 440"</span>;
<span class="org-keyword">auto</span> <span class="org-variable-name">ss</span> = <span class="org-constant">std</span>::stringstream<span class="org-rainbow-delimiters-depth-1">{</span>data<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-type">double</span> <span class="org-variable-name">x</span>;

<span class="org-type">size_t</span> <span class="org-variable-name">i</span> = 0;
<span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-negation-char">!</span>ss.eof<span class="org-rainbow-delimiters-depth-2">()</span> &amp;&amp; <span class="org-negation-char">!</span>ss.fail<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">){</span>
   ss &gt;&gt; x;
   <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"x["</span> &lt;&lt; i &lt;&lt; <span class="org-string">"] = "</span> &lt;&lt; x &lt;&lt; <span class="org-string">"\n"</span>;
   i++;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">x[0] = 200
x[1] = 400
x[2] = 50.232
x[3] = 100
x[4] = 200
x[5] = 440
</pre>
</div>

<p>
<b>Example 2:</b> Extract all unique words from a given line: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-function-name">std</span>::string line;
line =  <span class="org-string">"hex binary data always key hard narrow path bug hex"</span>;
line += <span class="org-string">" binary data path words key"</span>;

<span class="org-keyword">auto</span> <span class="org-variable-name">words</span> = <span class="org-constant">std</span>::<span class="org-type">set</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;{}</span>;
<span class="org-keyword">auto</span> <span class="org-variable-name">ss</span> = <span class="org-constant">std</span>::stringstream<span class="org-rainbow-delimiters-depth-1">{</span>line<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-function-name">std</span>::string w;
<span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-negation-char">!</span>ss.eof<span class="org-rainbow-delimiters-depth-2">()</span> &amp;&amp; ss.good<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">){</span>
  ss &gt;&gt; w;
  words.insert<span class="org-rainbow-delimiters-depth-2">(</span>w<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; line
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"hex binary data ... binary data path words key"</span>
&gt;&gt; 

&gt;&gt; words
<span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-string">"always"</span>, <span class="org-string">"binary"</span>, <span class="org-string">"bug"</span>, <span class="org-string">"data"</span>, <span class="org-string">"hard"</span>, <span class="org-string">"hex"</span>, <span class="org-string">"key"</span>, <span class="org-string">"narrow"</span>, <span class="org-string">"path"</span>, <span class="org-string">"words"</span> <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">w</span>: words<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::cout &lt;&lt; w &lt;&lt; <span class="org-string">"\n"</span>;<span class="org-rainbow-delimiters-depth-1">}</span>
always
binary
bug
data
hard
hex
key
narrow
<span class="org-type">path</span>
<span class="org-variable-name">words</span>
&gt;&gt; 
</pre>
</div>

<p>
<b>Example 3:</b> Extract lines from string. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::string text;
text += <span class="org-string">"C++ =&gt; FEM -&gt; Finite Element Methods\n"</span>;
text += <span class="org-string">"C++ =&gt; High Performance Computing\n"</span>;
text += <span class="org-string">"C++ =&gt; Monte Carlo Simulations\n"</span>;

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; text &lt;&lt; <span class="org-string">"\n"</span>;
C++ =&gt; FEM -&gt; Finite Element Methods
C++ =&gt; High Performance Computing
C++ =&gt; Monte Carlo Simulations

<span class="org-function-name">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;</span> lines;
<span class="org-function-name">std</span>::string line;
<span class="org-comment-delimiter">// </span><span class="org-comment">Input Stream                                                                </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">is</span> = <span class="org-constant">std</span>::stringstream <span class="org-rainbow-delimiters-depth-1">{</span>text<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::getline<span class="org-rainbow-delimiters-depth-2">(</span>is, line<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> lines.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span>line<span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; lines
<span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-string">"C++ =&gt; FEM -&gt; Finite Element Methods"</span>, <span class="org-string">"C++ =&gt; High Performance Computing"</span>, <span class="org-string">"C++ =&gt; Monte Carlo Simulations"</span> <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">lin</span>: lines<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" + line = "</span> &lt;&lt; lin &lt;&lt; <span class="org-string">"\n"</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
 + line = C++ =&gt; FEM -&gt; Finite Element Methods
 + line = C++ =&gt; High Performance Computing
 + line = C++ =&gt; Monte Carlo Simulations
&gt;&gt; 
</pre>
</div>

<p>
Or, putting it all together: 
</p>

<ul class="org-ul">
<li>Version: read lines from string</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Requires: &lt;string&gt; &lt;sstream&gt; and &lt;iostream&gt;                                 </span>
<span class="org-keyword">auto</span> <span class="org-function-name">splitLines1</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">text</span><span class="org-rainbow-delimiters-depth-1">)</span>
  -&gt; <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">auto</span> <span class="org-variable-name">lines</span> = <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-2">&gt;{}</span>;
  <span class="org-keyword">auto</span> <span class="org-variable-name">line</span>  = <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">{}</span>;
  <span class="org-keyword">auto</span> <span class="org-variable-name">is</span>    = <span class="org-constant">std</span>::stringstream<span class="org-rainbow-delimiters-depth-2">{</span>text<span class="org-rainbow-delimiters-depth-2">}</span>;
  <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::getline<span class="org-rainbow-delimiters-depth-3">(</span>is, line<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    lines.emplace_back<span class="org-rainbow-delimiters-depth-2">(</span>line<span class="org-rainbow-delimiters-depth-2">)</span>;
  <span class="org-keyword">return</span> lines;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">std</span>::string text;
text += <span class="org-string">"=&gt; FEM -&gt; Finite Element Methods\n"</span>;
text += <span class="org-string">"=&gt; High Performance Computing\n"</span>;
text += <span class="org-string">"=&gt; Monte Carlo Simulations\n"</span>;
text += <span class="org-string">"=&gt; Global Markets Trends\n"</span>;
text += <span class="org-string">"=&gt; Growth forecast survery.\n"</span>;

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">lin</span>: splitLines1<span class="org-rainbow-delimiters-depth-2">(</span>text<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" +=&gt; "</span> &lt;&lt; lin &lt;&lt; <span class="org-string">"\n"</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
 +=&gt; =&gt; FEM -&gt; Finite Element Methods
 +=&gt; =&gt; High Performance Computing
 +=&gt; =&gt; Monte Carlo Simulations
 +=&gt; =&gt; Global Markets Trends
 +=&gt; =&gt; Growth forecast survery.
&gt;&gt; 
</pre>
</div>

<p>
<b>Example 4:</b> Extract lines from input stream. 
</p>

<ul class="org-ul">
<li>Read lines from input stream - this second version can read from
any sublcass of std::istream, thus, it can also get lines from
files and starndard input stream std::cin (console or stdin).</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Read all lines from stram to container Requires: &lt;string&gt; &lt;sstream&gt;</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">and &lt;iostream&gt;</span>
<span class="org-keyword">auto</span> <span class="org-function-name">splitLines2</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">istream</span>&amp; <span class="org-variable-name">is</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [INFO] L-value reference."</span>
  <span class="org-keyword">auto</span> lines = <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;{}</span>;
  <span class="org-keyword">auto</span> <span class="org-variable-name">line</span>  = <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">{}</span>;
  <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::getline<span class="org-rainbow-delimiters-depth-3">(</span>is, line<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    lines.emplace_back<span class="org-rainbow-delimiters-depth-2">(</span>line<span class="org-rainbow-delimiters-depth-2">)</span>;
  <span class="org-keyword">return</span> lines;
<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Overload to work with temporary objects (R-values)</span>
<span class="org-keyword">auto</span> <span class="org-function-name">splitLines2</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">istream</span>&amp;&amp; <span class="org-variable-name">is</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [INFO] R-value reference."</span>
  <span class="org-keyword">auto</span> lines = <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;{}</span>;
  <span class="org-keyword">auto</span> <span class="org-variable-name">line</span>  = <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">{}</span>;
  <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::getline<span class="org-rainbow-delimiters-depth-3">(</span>is, line<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    lines.emplace_back<span class="org-rainbow-delimiters-depth-2">(</span>line<span class="org-rainbow-delimiters-depth-2">)</span>;
  <span class="org-keyword">return</span> lines;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Running: 
</p>

<ul class="org-ul">
<li>Read lines from string</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::string text;
text += <span class="org-string">"=&gt; FEM -&gt; Finite Element Methods\n"</span>;
text += <span class="org-string">"=&gt; High Performance Computing\n"</span>;
text += <span class="org-string">"=&gt; Monte Carlo Simulations\n"</span>;
text += <span class="org-string">"=&gt; Global Markets Trends\n"</span>;
text += <span class="org-string">"=&gt; Growth forecast survery.\n"</span>;

<span class="org-keyword">auto</span> <span class="org-variable-name">ss</span> = <span class="org-constant">std</span>::stringstream<span class="org-rainbow-delimiters-depth-1">(</span>text<span class="org-rainbow-delimiters-depth-1">)</span> ;

<span class="org-comment-delimiter">// </span><span class="org-comment">Read from an L-value (object bounded to a memory location)</span>
&gt;&gt; <span class="org-keyword">auto</span> ss = <span class="org-constant">std</span>::stringstream<span class="org-rainbow-delimiters-depth-1">(</span>text<span class="org-rainbow-delimiters-depth-1">)</span> ;
&gt;&gt; <span class="org-keyword">auto</span> lines = splitLines2<span class="org-rainbow-delimiters-depth-1">(</span>ss<span class="org-rainbow-delimiters-depth-1">)</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> L-value reference.

&gt;&gt; lines2
<span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-string">"=&gt; FEM -&gt; Finite Element Methods"</span>, <span class="org-string">"=&gt; High Performance Computing"</span>, ...<span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Read from an R-value (temporary object)</span>
&gt;&gt; <span class="org-keyword">auto</span> lines = splitLines2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::stringstream<span class="org-rainbow-delimiters-depth-2">(</span>text<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> R-value reference.
&gt;&gt; lines
 <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-string">"=&gt; FEM -&gt; Finite Element Methods"</span>, <span class="org-string">"=&gt; High Performance Computing"</span>, ...<span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Read lines from file</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Read lines from file: </span>
&gt;&gt; res = splitLines2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::ifstream<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"/etc/protocols"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> R-value reference.

&gt;&gt; res.size<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 162
&gt;&gt; 

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">lin</span>: res<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" + line = "</span> &lt;&lt; lin &lt;&lt; <span class="org-string">"\n"</span>;<span class="org-rainbow-delimiters-depth-1">}</span>
 + line = # /etc/protocols:
 + line = # $Id: protocols,v 1.12 2016/07/08 12:27 ovasik Exp $
 + line = #
 + line = # Internet <span class="org-rainbow-delimiters-depth-1">(</span>IP<span class="org-rainbow-delimiters-depth-1">)</span> protocols
 + line = #
 + line = # from: @<span class="org-rainbow-delimiters-depth-1">(</span>#<span class="org-rainbow-delimiters-depth-1">)</span>protocols 5.1 <span class="org-rainbow-delimiters-depth-1">(</span>Berkeley<span class="org-rainbow-delimiters-depth-1">)</span> 4/17/89
 + line = #
 + line = # Updated <span class="org-keyword">for</span> NetBSD based on RFC 1340, <span class="org-type">Assigned</span> <span class="org-function-name">Numbers</span> <span class="org-rainbow-delimiters-depth-1">(</span>July 1992<span class="org-rainbow-delimiters-depth-1">)</span>.
 + line = # Last IANA update included dated 2011-05-03
 + line = #
   ... ... ... ... .... 
</pre>
</div>

<ul class="org-ul">
<li>Read lines from console</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Types many line and then  CTRL + D (Send EOF - End Of File) when you are done.</span>
&gt;&gt; <span class="org-keyword">auto</span> res2 = splitLines2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::cin<span class="org-rainbow-delimiters-depth-1">)</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> L-value reference.
hello world
c++ C++11 is awesome
C++17 is amazing
C++20 RULEZ<span class="org-negation-char">!</span> High peformance technical computing
  Monte Carlo Methods
  High Energy Physics
  Electronic Engineering - Embedded Processors    
&gt;&gt; 

&gt;&gt; res2
 <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-string">"hello world"</span>, <span class="org-string">"c++ C++11 is awesome"</span>, <span class="org-string">"C++17 is amazing"</span>, ...<span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">auto</span> res2copy = <span class="org-constant">std</span>::vector<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;(</span>res2.begin<span class="org-rainbow-delimiters-depth-2">()</span>, res2.end<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-string">"hello world"</span>, <span class="org-string">"c++ C++11 is awesome"</span>, <span class="org-string">"C++17 is amazing"</span>, ...<span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">lin</span>: res2<span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [+] line = "</span> &lt;&lt; lin &lt;&lt; <span class="org-string">"\n"</span>;<span class="org-rainbow-delimiters-depth-1">}</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>+<span class="org-rainbow-delimiters-depth-1">]</span> line = hello world
 <span class="org-rainbow-delimiters-depth-1">[</span>+<span class="org-rainbow-delimiters-depth-1">]</span> line = c++ C++11 is awesome
 <span class="org-rainbow-delimiters-depth-1">[</span>+<span class="org-rainbow-delimiters-depth-1">]</span> line = C++17 is amazing
 <span class="org-rainbow-delimiters-depth-1">[</span>+<span class="org-rainbow-delimiters-depth-1">]</span> line = C++20 RULEZ<span class="org-negation-char">!</span> High peformance technical computing
 <span class="org-rainbow-delimiters-depth-1">[</span>+<span class="org-rainbow-delimiters-depth-1">]</span> line =   Monte Carlo Methods
 <span class="org-rainbow-delimiters-depth-1">[</span>+<span class="org-rainbow-delimiters-depth-1">]</span> line =   High Energy Physics
 <span class="org-rainbow-delimiters-depth-1">[</span>+<span class="org-rainbow-delimiters-depth-1">]</span> line =   Electronic Engineering - Embedded Processors
&gt;&gt; 

</pre>
</div>
</div>
</div>

<div id="outline-container-org176ff7e" class="outline-4">
<h4 id="org176ff7e"><span class="section-number-4">1.12.7</span> Transform string to uppercase or lowercase</h4>
<div class="outline-text-4" id="text-1-12-7">
<p>
Headers: 
</p>
<ul class="org-ul">
<li>&lt;string&gt;</li>
<li>&lt;cstring&gt;</li>
<li>&lt;algorithm&gt;</li>
</ul>

<p>
Convert string to upper case:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string text = <span class="org-string">"c++ is suitable for system programming"</span>;
&gt;&gt; 
<span class="org-function-name">std</span>::transform<span class="org-rainbow-delimiters-depth-1">(</span> text.begin<span class="org-rainbow-delimiters-depth-2">()</span>,
                text.end<span class="org-rainbow-delimiters-depth-2">()</span>,
                text.begin<span class="org-rainbow-delimiters-depth-2">()</span>,
                <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">char</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> <span class="org-constant">std</span>::toupper<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
                <span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; text
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"C++ IS SUITABLE FOR SYSTEM PROGRAMMING"</span>
&gt;&gt;

<span class="org-keyword">auto</span> toUpper<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">text</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-constant">std</span>::string <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">out</span> = text;
  <span class="org-constant">std</span>::transform<span class="org-rainbow-delimiters-depth-2">(</span> out.begin<span class="org-rainbow-delimiters-depth-3">()</span>,
                  out.end<span class="org-rainbow-delimiters-depth-3">()</span>,
                  out.begin<span class="org-rainbow-delimiters-depth-3">()</span>,
                  <span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">char</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">){</span> <span class="org-keyword">return</span> <span class="org-constant">std</span>::toupper<span class="org-rainbow-delimiters-depth-4">(</span>x<span class="org-rainbow-delimiters-depth-4">)</span>; <span class="org-rainbow-delimiters-depth-3">}</span>
                  <span class="org-rainbow-delimiters-depth-2">)</span>;
  <span class="org-keyword">return</span> out;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; toUpper<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"c++ system programming embedded high performance"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"C++ SYSTEM PROGRAMMING EMBEDDED HIGH PERFORMANCE"</span>
&gt;&gt; 
</pre>
</div>

<p>
Convert string to lower case:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::string text = <span class="org-string">"c++ IS Suitable foR System proGramMing"</span>;
<span class="org-function-name">std</span>::transform<span class="org-rainbow-delimiters-depth-1">(</span> text.begin<span class="org-rainbow-delimiters-depth-2">()</span>,
                text.end<span class="org-rainbow-delimiters-depth-2">()</span>,
                text.begin<span class="org-rainbow-delimiters-depth-2">()</span>,
                <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">char</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> <span class="org-constant">std</span>::tolower<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
                <span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; text
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"c++ is suitable for system programming"</span>
&gt;&gt; 
</pre>
</div>
</div>
</div>

<div id="outline-container-org855804b" class="outline-4">
<h4 id="org855804b"><span class="section-number-4">1.12.8</span> Check whether a string contains substring</h4>
<div class="outline-text-4" id="text-1-12-8">
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">bool</span> <span class="org-function-name">containsStr</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">str</span>, <span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">substr</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-keyword">return</span> str.find<span class="org-rainbow-delimiters-depth-2">(</span>substr<span class="org-rainbow-delimiters-depth-2">)</span> != <span class="org-constant">std</span>::<span class="org-constant">string</span>::npos;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; containsStr<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"cpp plus plus cee c++ 34"</span>, <span class="org-string">"c++"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; containsStr<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"cpp plus plus cee c++ 34"</span>, <span class="org-string">"cpp11"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; containsStr<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"cpp plus plus cee c++ 34"</span>, <span class="org-string">"cee"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; 
</pre>
</div>
</div>
</div>
<div id="outline-container-org63ecb6f" class="outline-4">
<h4 id="org63ecb6f"><span class="section-number-4">1.12.9</span> Search and replace</h4>
<div class="outline-text-4" id="text-1-12-9">
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-function-name">replaceStr</span><span class="org-rainbow-delimiters-depth-1">(</span> <span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">text</span>,                              
                 <span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">rep</span>,                                
                 <span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">subst</span>                               
              <span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-1">{</span>                                                     
  <span class="org-comment-delimiter">// </span><span class="org-comment">Copy paraemter text (Invoke copy constructor)                             </span>
  <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">out</span> = text;                                                      
  <span class="org-comment-delimiter">// </span><span class="org-comment">Find position of character matching the string                            </span>
  <span class="org-type">size_t</span> <span class="org-variable-name">i</span> = out.find<span class="org-rainbow-delimiters-depth-2">(</span>rep<span class="org-rainbow-delimiters-depth-2">)</span>;                                                    
  <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span>i != <span class="org-constant">std</span>::<span class="org-constant">string</span>::npos<span class="org-rainbow-delimiters-depth-2">){</span>                                               
    out.replace<span class="org-rainbow-delimiters-depth-3">(</span>i, rep.size<span class="org-rainbow-delimiters-depth-4">()</span>, subst<span class="org-rainbow-delimiters-depth-3">)</span>;                                         
    i = out.find<span class="org-rainbow-delimiters-depth-3">(</span>rep, i<span class="org-rainbow-delimiters-depth-3">)</span>;                                                      
  <span class="org-rainbow-delimiters-depth-2">}</span>                                                                            
  <span class="org-keyword">return</span> out;                                                                  
<span class="org-rainbow-delimiters-depth-1">}</span> 

&gt;&gt; replaceStr<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" c++11 high c++future c++15 peformance cpp c++17"</span>, <span class="org-string">"c++"</span>, <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">" 11 high future 15 peformance cpp 17"</span>

&gt;&gt; replaceStr<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" c++11 high c++future c++15 peformance cpp c++17"</span>, <span class="org-string">"c++"</span>, <span class="org-string">"DLang"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">" DLang11 high DLangfuture DLang15 peformance cpp DLang17"</span>
&gt;&gt; 

&gt;&gt; replaceStr<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" c++11 high c++future c++15 peformance cpp c++17"</span>, <span class="org-string">"c++"</span>, <span class="org-string">"CXX"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">" CXX11 high CXXfuture CXX15 peformance cpp CXX17"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org315d342" class="outline-4">
<h4 id="org315d342"><span class="section-number-4">1.12.10</span> Character Testing</h4>
<div class="outline-text-4" id="text-1-12-10">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Function</th>
<th scope="col" class="org-left">Return</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">int isalphanum(int)</td>
<td class="org-left">Non-zero if input is letter or digit</td>
</tr>

<tr>
<td class="org-left">int isalpha(int)</td>
<td class="org-left">Non-zero if input is letter</td>
</tr>

<tr>
<td class="org-left">int iscntr(int)</td>
<td class="org-left">Non-zero if input is control character</td>
</tr>

<tr>
<td class="org-left">int isdigit(int)</td>
<td class="org-left">Non-zero if input is digit</td>
</tr>

<tr>
<td class="org-left">int isgraph(int)</td>
<td class="org-left">Non-zero if input is not whitespace printable character</td>
</tr>

<tr>
<td class="org-left">int isprint(int)</td>
<td class="org-left">&#x2026; if input is printable character</td>
</tr>

<tr>
<td class="org-left">int ispunct(int)</td>
<td class="org-left">&#x2026; if input is neither alphanumeric nor whitespace</td>
</tr>

<tr>
<td class="org-left">int isspace(int)</td>
<td class="org-left">&#x2026; if input is whitespace</td>
</tr>

<tr>
<td class="org-left">int isxdigit(int)</td>
<td class="org-left">&#x2026; if input is hexadecimal digit</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>Check whether string is number:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">algorithm</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">bool</span> <span class="org-function-name">isNumber</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">str</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>str == <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">return</span> <span class="org-constant">false</span>;
  <span class="org-keyword">return</span> <span class="org-constant">std</span>::all_of<span class="org-rainbow-delimiters-depth-2">(</span>
             str.begin<span class="org-rainbow-delimiters-depth-3">()</span>,
             str.end<span class="org-rainbow-delimiters-depth-3">()</span>,
             <span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">char</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">){</span>
               <span class="org-keyword">return</span> <span class="org-constant">std</span>::isdigit<span class="org-rainbow-delimiters-depth-4">(</span>x<span class="org-rainbow-delimiters-depth-4">)</span>;
             <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; isNumber<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"1213"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; isNumber<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"12x13"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; isNumber<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Check whether string is an hexadecimal number</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">bool</span> <span class="org-function-name">isNumberHex</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">str</span><span class="org-rainbow-delimiters-depth-1">){</span>
   <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>str == <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">return</span> <span class="org-constant">false</span>;
   <span class="org-keyword">return</span> <span class="org-constant">std</span>::all_of<span class="org-rainbow-delimiters-depth-2">(</span>
              str.begin<span class="org-rainbow-delimiters-depth-3">()</span>,
              str.end<span class="org-rainbow-delimiters-depth-3">()</span>,
              <span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">char</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">){</span>
                <span class="org-keyword">return</span> <span class="org-constant">std</span>::isxdigit<span class="org-rainbow-delimiters-depth-4">(</span>x<span class="org-rainbow-delimiters-depth-4">)</span>;
              <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;
 <span class="org-rainbow-delimiters-depth-1">}</span>

 &gt;&gt; isNumberHex<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"0fabcd92813"</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
 &gt;&gt; 
 &gt;&gt; isNumberHex<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"0fxabcd92813"</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
 &gt;&gt; isNumberHex<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
 &gt;&gt; isNumberHex<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"ff"</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
 &gt;&gt; isNumberHex<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"0xff"</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
</pre>
</div>

<ul class="org-ul">
<li>Check whether string contains only letters</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">bool</span> <span class="org-function-name">isAlphaOnly</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">str</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>str == <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">return</span> <span class="org-constant">false</span>;
  <span class="org-keyword">return</span> <span class="org-constant">std</span>::all_of<span class="org-rainbow-delimiters-depth-2">(</span>
             str.begin<span class="org-rainbow-delimiters-depth-3">()</span>,
             str.end<span class="org-rainbow-delimiters-depth-3">()</span>,
             <span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">char</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">){</span>
               <span class="org-keyword">return</span> <span class="org-constant">std</span>::isalpha<span class="org-rainbow-delimiters-depth-4">(</span>x<span class="org-rainbow-delimiters-depth-4">)</span>;
             <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; isAlphaOnly<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"helloworld"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; isAlphaOnly<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hello54world"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; isAlphaOnly<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; isAlphaOnly<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"w"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; isAlphaOnly<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"sa.ds-a"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; 
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd6b2283" class="outline-4">
<h4 id="orgd6b2283"><span class="section-number-4">1.12.11</span> Split string by delimiter</h4>
<div class="outline-text-4" id="text-1-12-11">
<p>
Testing: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string t = <span class="org-string">"key =  value"</span>;
&gt;&gt; size_t i = t.find<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"="</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 4

&gt;&gt; t.substr<span class="org-rainbow-delimiters-depth-1">(</span>0, i<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-string">"key "</span>
&gt;&gt; 
&gt;&gt; t.substr<span class="org-rainbow-delimiters-depth-1">(</span>i, t.size<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-string">"=  value"</span>
&gt;&gt; t.substr<span class="org-rainbow-delimiters-depth-1">(</span>i + 1, t.size<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-string">"  value"</span>
&gt;&gt; 
</pre>
</div>

<p>
Encapsulating into a function: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">deque</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">auto</span> <span class="org-function-name">splitString</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">str</span>,
                 <span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">delim</span>
                 <span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs</span>;
  <span class="org-type">size_t</span> <span class="org-variable-name">i</span> = str.find<span class="org-rainbow-delimiters-depth-2">(</span>delim<span class="org-rainbow-delimiters-depth-2">)</span>;
  <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>i == <span class="org-constant">std</span>::<span class="org-constant">string</span>::npos<span class="org-rainbow-delimiters-depth-2">){</span>
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">""</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">""</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-keyword">return</span> xs;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  xs.push_back<span class="org-rainbow-delimiters-depth-2">(</span>str.substr<span class="org-rainbow-delimiters-depth-3">(</span>0,    i<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
  xs.push_back<span class="org-rainbow-delimiters-depth-2">(</span>str.substr<span class="org-rainbow-delimiters-depth-3">(</span>i + 1, str.size<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
  <span class="org-keyword">return</span> xs;
<span class="org-rainbow-delimiters-depth-1">}</span>;

&gt;&gt; splitString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"key value"</span>, <span class="org-string">"="</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-string">""</span>, <span class="org-string">""</span> <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; splitString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"key = value"</span>, <span class="org-string">"="</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-string">"key "</span>, <span class="org-string">" value"</span> <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; splitString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"key  va=lue"</span>, <span class="org-string">"="</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-string">"key  va"</span>, <span class="org-string">"lue"</span> <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; splitString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"key  value="</span>, <span class="org-string">"="</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-string">"key  value"</span>, <span class="org-string">""</span> <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; splitString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">""</span>, <span class="org-string">"="</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-string">""</span>, <span class="org-string">""</span> <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; splitString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"key  value="</span>, <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-string">""</span>, <span class="org-string">"ey  value="</span> <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 
</pre>
</div>
</div>
</div>
<div id="outline-container-org13c5948" class="outline-4">
<h4 id="org13c5948"><span class="section-number-4">1.12.12</span> Extract quoted string (C++14)</h4>
<div class="outline-text-4" id="text-1-12-12">
<p>
Documentation: <a href="https://en.cppreference.com/w/cpp/io/manip/quoted">std::quoted - cppreference.com</a>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">std::quoted in C++14</span>

<span class="org-function-name">std</span>::string s = <span class="org-string">" 200 key value \" aquoted string \"  \"next quote\""</span>;
<span class="org-function-name">std</span>::stringstream ss<span class="org-rainbow-delimiters-depth-1">{</span>s<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-function-name">std</span>::string out;

<span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-negation-char">!</span>ss.eof<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">){</span>
  ss &gt;&gt; <span class="org-constant">std</span>::quoted<span class="org-rainbow-delimiters-depth-2">(</span>out<span class="org-rainbow-delimiters-depth-2">)</span>;
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"word = "</span> &lt;&lt; out &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">word = 200
word = key
word = value
word =  aquoted string 
word = next quote
word = next quote
</pre>
</div>

<p>
Hand-rolled quoted string parser: 
</p>

<ul class="org-ul">
<li>Useful if C++14 is not avaiable.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Requires headers: &lt;string&gt; and &lt;sstream&gt;</span>
<span class="org-keyword">auto</span> <span class="org-function-name">readQuoted</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">istream</span>&amp; <span class="org-variable-name">is</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-type">char</span> <span class="org-variable-name">ch</span>;
     <span class="org-constant">std</span>::<span class="org-type">ostringstream</span> <span class="org-variable-name">so</span>;
     <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>is.eof<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">return</span> <span class="org-string">""</span>;
     <span class="org-comment-delimiter">// </span><span class="org-comment">Find first quote:</span>
     <span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------------------</span>
     <span class="org-keyword">do</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        ch = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span>is.get<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span>is.good<span class="org-rainbow-delimiters-depth-3">()</span> &amp;&amp; <span class="org-negation-char">!</span>is.eof<span class="org-rainbow-delimiters-depth-3">()</span> &amp;&amp; <span class="org-constant">std</span>::isspace<span class="org-rainbow-delimiters-depth-3">(</span>ch<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;   
     <span class="org-comment-delimiter">//</span><span class="org-comment">std::cout &lt;&lt; "ch = " &lt;&lt; ch  &lt;&lt; "\n"; </span>
     <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>ch != <span class="org-string">'\"'</span><span class="org-rainbow-delimiters-depth-2">){</span>
        so &lt;&lt; ch;
        <span class="org-keyword">do</span> <span class="org-rainbow-delimiters-depth-3">{</span>
            ch = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-4">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-4">&gt;(</span>is.get<span class="org-rainbow-delimiters-depth-5">()</span><span class="org-rainbow-delimiters-depth-4">)</span>;
            so &lt;&lt; ch;
        <span class="org-rainbow-delimiters-depth-3">}</span> <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-3">(</span>is.good<span class="org-rainbow-delimiters-depth-4">()</span> &amp;&amp; <span class="org-negation-char">!</span>is.eof<span class="org-rainbow-delimiters-depth-4">()</span> &amp;&amp; <span class="org-negation-char">!</span><span class="org-constant">std</span>::isspace<span class="org-rainbow-delimiters-depth-4">(</span>ch<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span>is.eof<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-keyword">return</span> <span class="org-string">""</span>;
        <span class="org-keyword">return</span> so.str<span class="org-rainbow-delimiters-depth-3">()</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-comment-delimiter">//</span><span class="org-comment">std::cout &lt;&lt; "ch = " &lt;&lt; ch  &lt;&lt; "\n"; </span>
     <span class="org-keyword">do</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        ch = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span>is.get<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span>ch != <span class="org-string">'\"'</span><span class="org-rainbow-delimiters-depth-3">)</span> so &lt;&lt; ch;
     <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span>is.good<span class="org-rainbow-delimiters-depth-3">()</span> &amp;&amp; <span class="org-negation-char">!</span>is.eof<span class="org-rainbow-delimiters-depth-3">()</span> &amp;&amp; ch != <span class="org-string">'\"'</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>is.eof<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-comment-delimiter">// </span><span class="org-comment">Did not find a matching quote.</span>
        <span class="org-keyword">return</span> <span class="org-string">""</span>;
     <span class="org-comment-delimiter">//</span><span class="org-comment">std::cout &lt;&lt; "ch = " &lt;&lt; ch  &lt;&lt; "\n";</span>
     <span class="org-keyword">return</span> so.str<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::string s = <span class="org-string">"  \" 200 99 888 quoted - string \" KEY \" VALUE PAIR \"  100 \" Sao Paulo City\" 4500 key "</span>;
<span class="org-function-name">std</span>::stringstream ss<span class="org-rainbow-delimiters-depth-1">{</span>s<span class="org-rainbow-delimiters-depth-1">}</span>;

&gt;&gt;&gt; <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-1">(</span>ss.good<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"quoted = "</span> &lt;&lt; readQuoted<span class="org-rainbow-delimiters-depth-1">(</span>ss<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
quoted =  200 99 888 quoted - string 
quoted = KEY 
quoted =  VALUE PAIR 
quoted = 100 
quoted =  Sao Paulo City
quoted = 4500 
quoted = key 
quoted = 
</pre>
</div>
</div>
</div>

<div id="outline-container-orged9fb49" class="outline-4">
<h4 id="orged9fb49"><span class="section-number-4">1.12.13</span> Parse comma separated value - CSV row</h4>
<div class="outline-text-4" id="text-1-12-13">
<p>
Note: the following CSV parser functions fails for heterogeneous data
or when there are quotes characters. It is better to use a proper CSV
parser library as CSV is not a standardized data exchange format and
has lots of tricky edge cases.
</p>

<ul class="org-ul">
<li>Example: Simple CSV line parser.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> parseCSVRow<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">line</span>, <span class="org-type">char</span> <span class="org-variable-name">delim</span> = <span class="org-string">','</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-keyword">auto</span> <span class="org-variable-name">out</span>   = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;{}</span>;
  <span class="org-keyword">auto</span> <span class="org-variable-name">token</span> = <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">{}</span>;
  <span class="org-keyword">auto</span> <span class="org-variable-name">ss</span>    = <span class="org-constant">std</span>::stringstream<span class="org-rainbow-delimiters-depth-2">{</span>line<span class="org-rainbow-delimiters-depth-2">}</span>;
  <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::getline<span class="org-rainbow-delimiters-depth-3">(</span>ss, token, delim<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">){</span>
    out.push_back<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-4">(</span>token<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">return</span> out;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Testing: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::string raw_data = <span class="org-string">"100,   200,  400, -100.23, 60.23, 90.32"</span>;

&gt;&gt; parseCSVRow<span class="org-rainbow-delimiters-depth-1">(</span>raw_data<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 100.00000, 200.00000, 400.00000, -100.23000, 60.230000, 90.320000 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; <span class="org-keyword">auto</span> xs = parseCSVRow<span class="org-rainbow-delimiters-depth-1">(</span>raw_data<span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; xs<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 100.00000
&gt;&gt; xs<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 200.00000
&gt;&gt; xs<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 400.00000
&gt;&gt; xs<span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -100.23000
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Example: Generic CSV line Parser.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">Type</span> = <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Type</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-function-name">parseCSVRowGeneric</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">line</span>,
                                     <span class="org-type">char</span> <span class="org-variable-name">delim</span> = <span class="org-string">','</span>
                                     <span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-keyword">auto</span> <span class="org-variable-name">out</span>   = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">Type</span><span class="org-rainbow-delimiters-depth-2">&gt;{}</span>;
  <span class="org-keyword">auto</span> <span class="org-variable-name">token</span> = <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">{}</span>;
  <span class="org-keyword">auto</span> <span class="org-variable-name">ss</span>    = <span class="org-constant">std</span>::stringstream<span class="org-rainbow-delimiters-depth-2">{</span>line<span class="org-rainbow-delimiters-depth-2">}</span>;
  <span class="org-keyword">auto</span> <span class="org-variable-name">is</span>    = <span class="org-constant">std</span>::stringstream<span class="org-rainbow-delimiters-depth-2">{}</span>;
  <span class="org-type">Type</span> <span class="org-variable-name">value</span><span class="org-rainbow-delimiters-depth-2">{}</span>;
  <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::getline<span class="org-rainbow-delimiters-depth-3">(</span>ss, token, delim<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">){</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Clear error flags                                                                                                                              </span>
    is.clear<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Set is stream value to token                                                                                                                   </span>
    is.str<span class="org-rainbow-delimiters-depth-3">(</span>token<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Extract from 'is' stream                                                                                                                       </span>
    is &gt;&gt; value;
    out.push_back<span class="org-rainbow-delimiters-depth-3">(</span>value<span class="org-rainbow-delimiters-depth-3">)</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">return</span> out;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Testing: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Test data</span>
<span class="org-function-name">std</span>::string lineB = <span class="org-string">"2002.23, 434.34, 90.23, -23.23, 1e3"</span>;
<span class="org-function-name">std</span>::string lineC = <span class="org-string">"100; 200; 300; 150; 500; 600"</span>;
<span class="org-function-name">std</span>::string lineD = <span class="org-string">"Apple: oranges : juice beans : rice"</span>;

&gt;&gt; parseCSVRowGeneric<span class="org-rainbow-delimiters-depth-1">(</span>lineB<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 2002.2300, 434.34000, 90.230000, -23.230000, 1000.0000 <span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; parseCSVRowGeneric<span class="org-rainbow-delimiters-depth-1">&lt;&gt;(</span>lineB<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 2002.2300, 434.34000, 90.230000, -23.230000, 1000.0000 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

&gt;&gt; parseCSVRowGeneric<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>lineB, <span class="org-string">','</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 2002.2300, 434.34000, 90.230000, -23.230000, 1000.0000 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

&gt;&gt; parseCSVRowGeneric<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>lineC, <span class="org-string">';'</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 100, 200, 300, 150, 500, 600 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

&gt;&gt; parseCSVRowGeneric<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;(</span>lineD, <span class="org-string">':'</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-string">"Apple"</span>, <span class="org-string">"oranges"</span>, <span class="org-string">"juice"</span>, <span class="org-string">"rice"</span> <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgc9bd17c" class="outline-3">
<h3 id="orgc9bd17c"><span class="section-number-3">1.13</span> C++11 - Uniform Initialization</h3>
<div class="outline-text-3" id="text-1-13">
<p>
The C++11 uniform initialization feature allows classes, STL
containers (collections) and primitives values to be initialized in a
uniform way similar to vectors and C-arrays. 
</p>

<ul class="org-ul">
<li>Uniform initialization of primitive types:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span>    <span class="org-variable-name">x</span> <span class="org-rainbow-delimiters-depth-1">{}</span>;   <span class="org-comment-delimiter">// </span><span class="org-comment">x = 0</span>
<span class="org-type">double</span> <span class="org-variable-name">fd</span> <span class="org-rainbow-delimiters-depth-1">{}</span>;  <span class="org-comment-delimiter">// </span><span class="org-comment">fd = 0.0</span>
<span class="org-type">float</span>  <span class="org-variable-name">ff</span> <span class="org-rainbow-delimiters-depth-1">{}</span>;  <span class="org-comment-delimiter">// </span><span class="org-comment">ff = 0.0f</span>
<span class="org-type">bool</span>   <span class="org-variable-name">flag</span><span class="org-rainbow-delimiters-depth-1">{}</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">flag = false = 0 </span>
</pre>
</div>

<ul class="org-ul">
<li>Uniform initialization of C-arrays</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-variable-name">xs</span><span class="org-rainbow-delimiters-depth-1">[]</span> <span class="org-rainbow-delimiters-depth-1">{</span>10, 20, 30<span class="org-rainbow-delimiters-depth-1">}</span>;  <span class="org-comment-delimiter">//  </span><span class="org-comment">int xs[] =  {10, 20, 30};</span>
<span class="org-type">double</span> <span class="org-variable-name">ys</span><span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-rainbow-delimiters-depth-1">{</span>1.0<span class="org-rainbow-delimiters-depth-1">}</span>;     <span class="org-comment-delimiter">//  </span><span class="org-comment">double ys[] = {1.0};</span>
</pre>
</div>

<ul class="org-ul">
<li>Uniform initialization of pointers</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">double</span>* <span class="org-variable-name">fdptr</span><span class="org-rainbow-delimiters-depth-1">{}</span> ; <span class="org-comment-delimiter">// </span><span class="org-comment">fdptr = nullptr </span>
</pre>
</div>

<ul class="org-ul">
<li>Uniform initialization of STL containers:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::string s <span class="org-rainbow-delimiters-depth-1">{}</span>;                <span class="org-comment-delimiter">// </span><span class="org-comment">s = ""</span>
<span class="org-function-name">std</span>::string s <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-string">"Hello world"</span><span class="org-rainbow-delimiters-depth-1">}</span>;   <span class="org-comment-delimiter">// </span><span class="org-comment">s = "Hello World"</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Vectors </span>
<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> xs <span class="org-rainbow-delimiters-depth-1">{}</span>;                      
<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> ys <span class="org-rainbow-delimiters-depth-1">{</span>2.0, 3.0, 4.0, 5.0<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">string</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> zs <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-string">"apple"</span>, <span class="org-string">"orange"</span>, <span class="org-string">"grape"</span>, <span class="org-string">"banana"</span><span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Lists</span>
<span class="org-function-name">std</span>::<span class="org-type">list</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>   xs <span class="org-rainbow-delimiters-depth-1">{}</span>;
<span class="org-function-name">std</span>::<span class="org-type">list</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>   ys<span class="org-rainbow-delimiters-depth-1">{</span>2.0, 3.0, 4.0, 5.0<span class="org-rainbow-delimiters-depth-1">}</span>;   
<span class="org-comment-delimiter">// </span><span class="org-comment">Sets </span>
<span class="org-function-name">std</span>::<span class="org-type">set</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>    xs<span class="org-rainbow-delimiters-depth-1">{}</span>;
<span class="org-function-name">std</span>::<span class="org-type">set</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>    ys <span class="org-rainbow-delimiters-depth-1">{</span>3.0, 4.0, 3.0, 10.0<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Unordered set </span>
<span class="org-function-name">std</span>::<span class="org-type">unordered_set</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>    xs<span class="org-rainbow-delimiters-depth-1">{}</span>;
<span class="org-function-name">std</span>::<span class="org-type">unordered_set</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">string</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> zs <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-string">"apple"</span>, <span class="org-string">"orange"</span>, <span class="org-string">"grape"</span>, <span class="org-string">"banana"</span><span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Maps, aka hash map, aka dictionary, aka hash table </span>
<span class="org-function-name">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string,<span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> prices <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"orange"</span>, 10.0<span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"grapes"</span>, 25.12<span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"apple"</span>, 4.12<span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<ul class="org-ul">
<li>Initialization of C-structus POD - Plain Old Data</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">struct</span> <span class="org-type">Point3D</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">double</span> <span class="org-variable-name">x</span>;
    <span class="org-type">double</span> <span class="org-variable-name">y</span>;
    <span class="org-type">double</span> <span class="org-variable-name">z</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Before C++11</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">---------------------------</span>
<span class="org-type">Point3D</span> <span class="org-variable-name">pa</span>;
pa.x = 10.0;
pa.y = 20.0;
pa.z = 35.0;

<span class="org-comment-delimiter">// </span><span class="org-comment">After C++11</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">---------------------------</span>
<span class="org-type">Point3D</span> <span class="org-variable-name">pb</span> <span class="org-rainbow-delimiters-depth-1">{</span>10.0, 20.0, 35.0<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-type">Point3D</span> <span class="org-variable-name">pc</span> = <span class="org-rainbow-delimiters-depth-1">{</span>10.0, 20.0, 35.0<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">C++ Vector - way 1</span>
<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Point3D</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-rainbow-delimiters-depth-2">{</span> 20.0, 15.0, 5.0<span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span> 10.0, 25.0, 12.4<span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span>-14.0, 0.32, 51.43<span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">C++ Vector - way 2 </span>
<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Point3D</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-rainbow-delimiters-depth-1">{</span>
      Point3D<span class="org-rainbow-delimiters-depth-2">{</span> 20.0, 15.0, 5.0<span class="org-rainbow-delimiters-depth-2">}</span>
     ,Point3D<span class="org-rainbow-delimiters-depth-2">{</span> 10.0, 25.0, 12.4<span class="org-rainbow-delimiters-depth-2">}</span>
     ,Point3D<span class="org-rainbow-delimiters-depth-2">{</span>-14.0, 0.32, 51.43<span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">C++ Map Containers </span>
<span class="org-function-name">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">Point3D</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> locations = <span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"City 1"</span>,    <span class="org-rainbow-delimiters-depth-3">{</span> 20.0, 15.0, 5.0<span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">}</span>
    ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"Somewhere"</span>, <span class="org-rainbow-delimiters-depth-3">{</span> 10.0, 25.0, 12.4<span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">}</span>
    ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"Nowhere"</span>,   <span class="org-rainbow-delimiters-depth-3">{</span>-14.0, 0.32, 51.43<span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">}</span>     
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">or in more pleasant notation </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">C++ Map Containers </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">locations2</span> = <span class="org-constant">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">Point3D</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"City 1"</span>,    <span class="org-rainbow-delimiters-depth-3">{</span> 20.0, 15.0, 5.0<span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">}</span>
    ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"Somewhere"</span>, <span class="org-rainbow-delimiters-depth-3">{</span> 10.0, 25.0, 12.4<span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">}</span>
    ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"Nowhere"</span>,   <span class="org-rainbow-delimiters-depth-3">{</span>-14.0, 0.32, 51.43<span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">}</span>     
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">//</span><span class="org-comment">--- Functions -------//</span>

<span class="org-type">Point3D</span> <span class="org-function-name">makeOriginPoint</span><span class="org-rainbow-delimiters-depth-1">(){</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">return Point3D{0.0, 0.0, 0.0};</span>
    <span class="org-keyword">return</span> <span class="org-rainbow-delimiters-depth-2">{</span>0.0, 0.0, 0.0<span class="org-rainbow-delimiters-depth-2">}</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Classes: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>: 
    <span class="org-function-name">A</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span>, <span class="org-type">double</span> <span class="org-variable-name">z</span>, <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>:
        m_x<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>,
        m_y<span class="org-rainbow-delimiters-depth-2">(</span>y<span class="org-rainbow-delimiters-depth-2">)</span>,
        m_z<span class="org-rainbow-delimiters-depth-2">(</span>z<span class="org-rainbow-delimiters-depth-2">)</span>,
        m_name<span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>      
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">auto</span> <span class="org-function-name">getX</span><span class="org-rainbow-delimiters-depth-2">()</span> -&gt; <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> m_x;<span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">auto</span> <span class="org-function-name">getY</span><span class="org-rainbow-delimiters-depth-2">()</span> -&gt; <span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-keyword">return</span> m_y;<span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">auto</span> <span class="org-function-name">getZ</span><span class="org-rainbow-delimiters-depth-2">()</span> -&gt; <span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-keyword">return</span> m_z;<span class="org-rainbow-delimiters-depth-2">}</span> 
<span class="org-function-name">private</span>:
    <span class="org-type">double</span> <span class="org-variable-name">m_x</span>;
    <span class="org-type">double</span> <span class="org-variable-name">m_y</span>;
    <span class="org-type">double</span> <span class="org-variable-name">m_z</span>; 
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">void</span> <span class="org-function-name">display</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">A</span>&amp; <span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"A ("</span> &lt;&lt; a.getX<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">" "</span> &lt;&lt; a.getY<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; a.getZ<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">")"</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
    <span class="org-type">A</span> <span class="org-variable-name">instance1</span> <span class="org-rainbow-delimiters-depth-2">{</span>10.0, 20.0, 15.0, <span class="org-string">"unknown binary blob"</span><span class="org-rainbow-delimiters-depth-2">}</span>;  
    display<span class="org-rainbow-delimiters-depth-2">(</span>instance1<span class="org-rainbow-delimiters-depth-2">)</span>;
    display<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">{</span>10.0, 20.0, 15.0, <span class="org-string">"unknown binary blob"</span><span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
References: 
</p>

<ul class="org-ul">
<li><a href="http://scottmeyers.blogspot.com/2015/09/thoughts-on-vagaries-of-c-initialization.html">The View from Aristeia: Thoughts on the Vagaries of C++ Initialization</a></li>
<li><a href="https://www.codeguru.com/cpp/cpp/article.php/c19081/C-2011-Uniform-Initialization.htm">C++ 2011: Uniform Initialization</a></li>
<li><a href="https://mbevin.wordpress.com/2012/11/16/uniform-initialization/">Lesson #3: Uniform Initialization | Mike's C++11 Blog</a></li>
<li><a href="https://softwareengineering.stackexchange.com/questions/133688/is-c11-uniform-initialization-a-replacement-for-the-old-style-syntax">c++ - Is C++11 Uniform Initialization a replacement for the old style syntax? - Software Engineering Stack Exchange</a></li>
<li></li>

<li></li>
</ul>
</div>
</div>
<div id="outline-container-orge25f1fe" class="outline-3">
<h3 id="orge25f1fe"><span class="section-number-3">1.14</span> Iterator based loops and for-range based loops</h3>
<div class="outline-text-3" id="text-1-14">
</div>
<div id="outline-container-org3f85c3d" class="outline-4">
<h4 id="org3f85c3d"><span class="section-number-4">1.14.1</span> Iterator based loop</h4>
<div class="outline-text-4" id="text-1-14-1">
<p>
Loop over a vector: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;</span> xs <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-string">"Hello"</span>, <span class="org-string">"world"</span>, <span class="org-string">"C++"</span>, <span class="org-string">"HPC"</span>, <span class="org-string">"awesome"</span><span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-constant">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span>::<span class="org-type">iterator</span> <span class="org-variable-name">it</span> = xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>; it != xs.end<span class="org-rainbow-delimiters-depth-2">()</span>; ++it<span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"word = '"</span> &lt;&lt; *it &lt;&lt; <span class="org-string">"' size = "</span> &lt;&lt; it-&gt;size<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">Output: </span>
<span class="org-comment">   word = 'Hello' size = 5</span>
<span class="org-comment">   word = 'world' size = 5</span>
<span class="org-comment">   word = 'C++' size = 3</span>
<span class="org-comment">   word = 'HPC' size = 3</span>
<span class="org-comment">   word = 'awesome' size = 7</span>
<span class="org-comment">   &gt;&gt; </span>
<span class="org-comment"> */</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">=== OR =====//</span>

<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">it</span> = xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>; it != xs.end<span class="org-rainbow-delimiters-depth-2">()</span>; ++it<span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"word = '"</span> &lt;&lt; *it &lt;&lt; <span class="org-string">"' size = "</span> &lt;&lt; it-&gt;size<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">Output: </span>
<span class="org-comment">        word = 'Hello' size = 5</span>
<span class="org-comment">        word = 'world' size = 5</span>
<span class="org-comment">        word = 'C++' size = 3</span>
<span class="org-comment">        word = 'HPC' size = 3</span>
<span class="org-comment">        word = 'awesome' size = 7</span>
<span class="org-comment"> */</span>
</pre>
</div>

<p>
Loop over a deque: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-variable-name">ds</span> = <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-string">"Physics"</span>, <span class="org-string">"C++"</span>, <span class="org-string">"STL"</span>, <span class="org-string">"Math"</span>, <span class="org-string">"Algebra"</span>, <span class="org-string">"Electronics"</span><span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-constant">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span>::<span class="org-type">iterator</span> <span class="org-variable-name">it</span> = ds.begin<span class="org-rainbow-delimiters-depth-2">()</span>; it != ds.end<span class="org-rainbow-delimiters-depth-2">()</span>; ++it<span class="org-rainbow-delimiters-depth-1">){</span>
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"word = '"</span> &lt;&lt; *it &lt;&lt; <span class="org-string">"' size = "</span> &lt;&lt; it-&gt;size<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Or: </span>
<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">it</span> = ds.begin<span class="org-rainbow-delimiters-depth-2">()</span>; it != ds.end<span class="org-rainbow-delimiters-depth-2">()</span>; ++it<span class="org-rainbow-delimiters-depth-1">){</span>
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"word = '"</span> &lt;&lt; *it &lt;&lt; <span class="org-string">"' size = "</span> &lt;&lt; it-&gt;size<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">Output: </span>
<span class="org-comment">   word = 'Physics' size = 7</span>
<span class="org-comment">   word = 'C++' size = 3</span>
<span class="org-comment">   word = 'STL' size = 3</span>
<span class="org-comment">   word = 'Math' size = 4</span>
<span class="org-comment">   word = 'Algebra' size = 7</span>
<span class="org-comment">   word = 'Electronics' size = 11</span>
<span class="org-comment"> */</span>

</pre>
</div>

<p>
Loop over a list: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Struct is a class with everything public </span>
<span class="org-keyword">struct</span> <span class="org-type">Waypoint</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span>;
    <span class="org-type">double</span>      <span class="org-variable-name">lat</span>;
    <span class="org-type">double</span>      <span class="org-variable-name">lon</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">This constructor is necessary for storing this object</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">in STL collections/containers </span>
    <span class="org-function-name">Waypoint</span><span class="org-rainbow-delimiters-depth-2">(){}</span>
    <span class="org-function-name">Waypoint</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">name</span>, <span class="org-type">double</span> <span class="org-variable-name">lat</span>, <span class="org-type">double</span> <span class="org-variable-name">lon</span><span class="org-rainbow-delimiters-depth-2">)</span>:
            name<span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">)</span>, lat<span class="org-rainbow-delimiters-depth-2">(</span>lat<span class="org-rainbow-delimiters-depth-2">)</span>, lon<span class="org-rainbow-delimiters-depth-2">(</span>lon<span class="org-rainbow-delimiters-depth-2">){}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

&gt;&gt; <span class="org-keyword">auto</span> wp = Waypoint<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Paris"</span>, 48.23, 22.12<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; wp.name
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Paris"</span>
&gt;&gt; wp.lat
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 48.230000
&gt;&gt; wp.lon
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 22.120000
&gt;&gt; 
&gt;&gt; 

<span class="org-keyword">auto</span> waypoints = <span class="org-constant">std</span>::<span class="org-type">list</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Waypoint</span><span class="org-rainbow-delimiters-depth-1">&gt;{}</span>;
waypoints.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Paris"</span>, 48.8566, 2.3522<span class="org-rainbow-delimiters-depth-1">)</span>;
waypoints.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Tokyo"</span>, 35.6895, 139.6917<span class="org-rainbow-delimiters-depth-1">)</span>;
waypoints.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Beijing"</span>, 39.9042, 116.4074<span class="org-rainbow-delimiters-depth-1">)</span>;
waypoints.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Cape Town"</span>, -33.9249, 18.4241<span class="org-rainbow-delimiters-depth-1">)</span>;
waypoints.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Buenos Aires"</span>, -34.6037, -58.3816<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-1">(</span>2<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">it</span> = waypoints.begin<span class="org-rainbow-delimiters-depth-2">()</span>; it != waypoints.end<span class="org-rainbow-delimiters-depth-2">()</span>; ++it<span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>15<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::left  &lt;&lt; it-&gt;name
                          &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>15<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; it-&gt;lat
                          &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>15<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; it-&gt;lon
                          &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">Paris                    48.86           2.35
Tokyo                    35.69         139.69
Beijing                  39.90         116.41
Cape Town               -33.92          18.42
Buenos Aires            -34.60         -58.38
</pre>
</div>

<p>
Loop over a map:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-variable-name">values</span> = <span class="org-constant">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>
      <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"x"</span>,  2.1023<span class="org-rainbow-delimiters-depth-2">}</span>
     ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"y"</span>,  sqrt<span class="org-rainbow-delimiters-depth-3">(</span>2<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">}</span>
     ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"e"</span>,  exp<span class="org-rainbow-delimiters-depth-3">(</span>1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">}</span>
     ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"pi"</span>, 3.1415<span class="org-rainbow-delimiters-depth-2">}</span>
     ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"3/4"</span>, 3.0 / 4.0<span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-1">(</span>2<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-constant">map</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>::<span class="org-type">iterator</span> <span class="org-variable-name">it</span> = values.begin<span class="org-rainbow-delimiters-depth-2">()</span>; it != values.end<span class="org-rainbow-delimiters-depth-2">()</span>; it++<span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::left  &lt;&lt; it-&gt;first
                  &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; it-&gt;second
                  &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">OR:</span>
<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">it</span> = values.begin<span class="org-rainbow-delimiters-depth-2">()</span>; it != values.end<span class="org-rainbow-delimiters-depth-2">()</span>; it++<span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::left  &lt;&lt; it-&gt;first
                  &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; it-&gt;second
                  &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">Output: </span>
<span class="org-comment">   3/4   0.75</span>
<span class="org-comment">   e     2.72</span>
<span class="org-comment">   pi    3.14</span>
<span class="org-comment">   x     2.10</span>
<span class="org-comment">   y     1.41</span>
<span class="org-comment"> */</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6fed43c" class="outline-4">
<h4 id="org6fed43c"><span class="section-number-4">1.14.2</span> For-range based loops</h4>
<div class="outline-text-4" id="text-1-14-2">
<p>
C++11 and new standards allow to iterate over any STL container or
class with methods (member functions) .begin() or .end() using a
simpler and cleaner syntax than the old iterator loop syntax.
</p>

<p>
<b>Loop over literals</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Possible since C++11</span>
&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: <span class="org-rainbow-delimiters-depth-2">{</span>10, 20, 40, 50, 60<span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
       <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" x = "</span> &lt;&lt; x &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-1">}</span>
 x = 10
 x = 20
 x = 40
 x = 50
 x = 60

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">word</span>: <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"C++"</span>, <span class="org-string">"C++11"</span>, <span class="org-string">"Real Time"</span><span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
       <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" word = "</span> &lt;&lt; word &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-1">}</span>
 word = C++
 word = C++11
 word = Real Time

 &gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">word</span>: <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"C++"</span>, <span class="org-string">"C++11"</span>, <span class="org-string">"Real Time"</span><span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" word = "</span>+ word
                  &lt;&lt; <span class="org-string">"  size = "</span> &lt;&lt; word.size<span class="org-rainbow-delimiters-depth-2">()</span>
                  &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-1">}</span>
 word = C++  size = 3
 word = C++11  size = 5
 word = Real Time  size = 9
</pre>
</div>


<p>
<b>Loop over a vector:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;</span> xs <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-string">"Hello"</span>, <span class="org-string">"world"</span>, <span class="org-string">"C++"</span>, <span class="org-string">"HPC"</span>, <span class="org-string">"awesome"</span><span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Use: const auto&amp;  to avoid uncessary copies, use auto&amp; if there is modification of x.</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">The const keyword will generate a compiler error if there is </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">any attempt to modify the value of x. </span>
<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: xs<span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"word = '"</span> &lt;&lt; x &lt;&lt; <span class="org-string">"' size = "</span> &lt;&lt; x.size<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">Output: </span>
<span class="org-comment">   word = 'Hello' size = 5</span>
<span class="org-comment">   word = 'world' size = 5</span>
<span class="org-comment">   word = 'C++' size = 3</span>
<span class="org-comment">   word = 'HPC' size = 3</span>
<span class="org-comment">   word = 'awesome' size = 7</span>
<span class="org-comment"> *---------------*/</span>

</pre>
</div>

<p>
<b>Loop over a list:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Struct is a class with everything public </span>
<span class="org-keyword">struct</span> <span class="org-type">Waypoint</span><span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span>;
        <span class="org-type">double</span>      <span class="org-variable-name">lat</span>;
        <span class="org-type">double</span>      <span class="org-variable-name">lon</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">This constructor is necessary for storing this object</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">in STL collections/containers </span>
        <span class="org-function-name">Waypoint</span><span class="org-rainbow-delimiters-depth-2">(){}</span>
        <span class="org-function-name">Waypoint</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">name</span>, <span class="org-type">double</span> <span class="org-variable-name">lat</span>, <span class="org-type">double</span> <span class="org-variable-name">lon</span><span class="org-rainbow-delimiters-depth-2">)</span>:
                name<span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">)</span>, lat<span class="org-rainbow-delimiters-depth-2">(</span>lat<span class="org-rainbow-delimiters-depth-2">)</span>, lon<span class="org-rainbow-delimiters-depth-2">(</span>lon<span class="org-rainbow-delimiters-depth-2">){}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">auto</span> <span class="org-variable-name">waypoints</span> = <span class="org-constant">std</span>::<span class="org-type">list</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Waypoint</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>
       <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"Paris"</span>, 48.8566, 2.3522<span class="org-rainbow-delimiters-depth-2">}</span>
      ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"Tokyo"</span>, 35.6895, 139.6917<span class="org-rainbow-delimiters-depth-2">}</span>
      ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"Beijing"</span>, 39.9042, 116.4074<span class="org-rainbow-delimiters-depth-2">}</span>
      ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"Cape Town"</span>, -33.9249, 18.4241<span class="org-rainbow-delimiters-depth-2">}</span>
      ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"Buenos Aires"</span>, -34.6037, -58.3816<span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">}</span>;


<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-1">(</span>2<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">wp</span>: waypoints<span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>15<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::left  &lt;&lt; wp.name
                          &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>15<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; wp.lat
                          &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>15<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; wp.lon 
                          &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Ouput: 
</p>

<div class="org-src-container">
<pre class="src src-text">Paris                    48.86           2.35
Tokyo                    35.69         139.69
Beijing                  39.90         116.41
Cape Town               -33.92          18.42
Buenos Aires            -34.60         -58.38
</pre>
</div>

<p>
<b>Loop over a map</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-variable-name">values</span> = <span class="org-constant">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>
      <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"x"</span>,  2.1023<span class="org-rainbow-delimiters-depth-2">}</span>
     ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"y"</span>,  sqrt<span class="org-rainbow-delimiters-depth-3">(</span>2<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">}</span>
     ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"e"</span>,  exp<span class="org-rainbow-delimiters-depth-3">(</span>1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">}</span>
     ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"pi"</span>, 3.1415<span class="org-rainbow-delimiters-depth-2">}</span>
     ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"3/4"</span>, 3.0 / 4.0<span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-1">(</span>3<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">p</span>: values<span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::left  &lt;&lt; p.first
                  &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; p.second
                  &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">Output: </span>
<span class="org-comment">   3/4  0.750</span>
<span class="org-comment">   e    2.718</span>
<span class="org-comment">   pi   3.142</span>
<span class="org-comment">   x    2.102</span>
<span class="org-comment">   y    1.414</span>
<span class="org-comment"> *==============*/</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org13c0c8a" class="outline-3">
<h3 id="org13c0c8a"><span class="section-number-3">1.15</span> C++11 - Scoped Enum</h3>
<div class="outline-text-3" id="text-1-15">
<p>
Scoped enumerations are a more type-safe alternative to the old
C-enums as it has several problems realated to namespace conflicts and
implicit conversions that can introduce bugs hard to catch and reason
about. 
</p>

<p>
Syntax: 
</p>

<ul class="org-ul">
<li>Simple scoped enum class</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">enum</span> <span class="org-keyword">class</span> <span class="org-type">Color</span> <span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-variable-name">white</span>,
   <span class="org-variable-name">black</span>,
   <span class="org-variable-name">yellow</span>,
   <span class="org-variable-name">red</span>,
   <span class="org-variable-name">blue</span>,
<span class="org-rainbow-delimiters-depth-1">}</span>;

&gt;&gt; <span class="org-constant">Color</span>::white
<span class="org-rainbow-delimiters-depth-1">(</span>Color<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Color</span>::white<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 0
&gt;&gt; <span class="org-constant">Color</span>::blue
<span class="org-rainbow-delimiters-depth-1">(</span>Color<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Color</span>::blue<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 4
&gt;&gt; <span class="org-constant">Color</span>::yellow
<span class="org-rainbow-delimiters-depth-1">(</span>Color<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Color</span>::yellow<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 2
&gt;&gt; <span class="org-constant">Color</span>::red
<span class="org-rainbow-delimiters-depth-1">(</span>Color<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Color</span>::red<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 3
&gt;&gt; 

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-constant">Color</span>::blue<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 4
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-constant">Color</span>::white<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 0
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-constant">Color</span>::yellow<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 2
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Scoped enum with hexadecimal error codes.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">enum</span> <span class="org-keyword">class</span> <span class="org-type">ErrorCode</span>: <span class="org-constant">std</span>::<span class="org-type">uint32_t</span> <span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-variable-name">tankNotFilled</span> = 0xff,
   <span class="org-variable-name">missingSupply</span> = 0x2f,
   <span class="org-variable-name">lowBattery</span>    = 0x2a,
   <span class="org-variable-name">unknown</span>       = 0x24                                         
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<ul class="org-ul">
<li>Scoped enums with chars</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">enum</span> <span class="org-keyword">class</span> <span class="org-type">ErrorCodeLetter</span>: <span class="org-type">char</span> <span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-variable-name">tankNotFilled</span> = <span class="org-string">'x'</span>,
   <span class="org-variable-name">missingSupply</span> = <span class="org-string">'y'</span>,
   <span class="org-variable-name">lowBattery</span>    = <span class="org-string">'a'</span>,
   <span class="org-variable-name">unknown</span>       = <span class="org-string">'k'</span>                                         
<span class="org-rainbow-delimiters-depth-1">}</span>;

&gt;&gt; <span class="org-constant">ErrorCodeLetter</span>::tankNotFilled
<span class="org-rainbow-delimiters-depth-1">(</span>ErrorCodeLetter<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">ErrorCodeLetter</span>::tankNotFilled<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> 120
&gt;&gt; <span class="org-constant">ErrorCodeLetter</span>::missingSupply
<span class="org-rainbow-delimiters-depth-1">(</span>ErrorCodeLetter<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">ErrorCodeLetter</span>::missingSupply<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> 121
&gt;&gt; <span class="org-constant">ErrorCodeLetter</span>::unknown
<span class="org-rainbow-delimiters-depth-1">(</span>ErrorCodeLetter<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">ErrorCodeLetter</span>::unknown<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> 107
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-constant">ErrorCodeLetter</span>::unknown<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'k'</span>
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-constant">ErrorCodeLetter</span>::missingSupply<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'y'</span>
&gt;&gt; 
</pre>
</div>


<p>
<b>More Exhaustive Example:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">enum</span> <span class="org-keyword">class</span> <span class="org-type">MachineStatus</span>: <span class="org-constant">std</span>::<span class="org-type">uint32_t</span> <span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-variable-name">running</span> = 0xf5,
   <span class="org-variable-name">iddle</span>   = 0x2a,
   <span class="org-variable-name">waiting</span> = 0x35,
   <span class="org-variable-name">failure</span> = 0x24                                         
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Example: CERN's root shell. 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">MachineStatus</span>::running
<span class="org-rainbow-delimiters-depth-1">(</span>MachineStatus<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">MachineStatus</span>::running<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 245
&gt;&gt; <span class="org-constant">MachineStatus</span>::iddle
<span class="org-rainbow-delimiters-depth-1">(</span>MachineStatus<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">MachineStatus</span>::iddle<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 42
&gt;&gt; <span class="org-constant">MachineStatus</span>::waiting
<span class="org-rainbow-delimiters-depth-1">(</span>MachineStatus<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">MachineStatus</span>::waiting<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 53
&gt;&gt; <span class="org-constant">MachineStatus</span>::failure
<span class="org-rainbow-delimiters-depth-1">(</span>MachineStatus<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">MachineStatus</span>::failure<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 36
&gt;&gt; 

&gt;&gt; <span class="org-keyword">auto</span> status = <span class="org-constant">MachineStatus</span>::running
<span class="org-rainbow-delimiters-depth-1">(</span>MachineStatus<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">MachineStatus</span>::running<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 245

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Machine status = "</span> &lt;&lt; <span class="org-constant">std</span>::hex &lt;&lt; <span class="org-string">"0x"</span> &lt;&lt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::uint32_t<span class="org-rainbow-delimiters-depth-1">&gt;(</span>status<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-type">Machine</span> <span class="org-variable-name">status</span> = 0xf5
&gt;&gt; 
&gt;&gt; 

&gt;&gt; status = <span class="org-constant">MachineStatus</span>::iddle 
<span class="org-rainbow-delimiters-depth-1">(</span>MachineStatus<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">MachineStatus</span>::iddle<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 42
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Machine status = "</span> &lt;&lt; <span class="org-constant">std</span>::hex &lt;&lt; <span class="org-string">"0x"</span> &lt;&lt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::uint32_t<span class="org-rainbow-delimiters-depth-1">&gt;(</span>status<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-type">Machine</span> <span class="org-variable-name">status</span> = 0x2a
&gt;&gt; 

&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>status == <span class="org-constant">MachineStatus</span>::iddle<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Machine is iddle"</span> &lt;&lt; <span class="org-constant">std</span>::endl; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-type">Machine</span> <span class="org-type">is</span> <span class="org-variable-name">iddle</span>
&gt;&gt; 

&gt;&gt; status = <span class="org-constant">MachineStatus</span>::running
<span class="org-rainbow-delimiters-depth-1">(</span>MachineStatus<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">MachineStatus</span>::running<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 245
&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>status == <span class="org-constant">MachineStatus</span>::running<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Machine is running"</span> &lt;&lt; <span class="org-constant">std</span>::endl; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-type">Machine</span> <span class="org-type">is</span> <span class="org-variable-name">running</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::uint32_t<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-constant">MachineStatus</span>::running<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 245
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::uint32_t<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-constant">MachineStatus</span>::iddle<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 42
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::uint32_t<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-constant">MachineStatus</span>::iddle<span class="org-rainbow-delimiters-depth-1">)</span> == 0x2a
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; 
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>MachineStatus<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x2a<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-rainbow-delimiters-depth-1">(</span>MachineStatus<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">MachineStatus</span>::iddle<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 42
&gt;&gt; 
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>MachineStatus<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x2a<span class="org-rainbow-delimiters-depth-1">)</span> == <span class="org-constant">MachineStatus</span>::iddle
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; 
</pre>
</div>
</div>
</div>
<div id="outline-container-orge6cb1d8" class="outline-3">
<h3 id="orge6cb1d8"><span class="section-number-3">1.16</span> Functor Function-Object and higher order functions</h3>
<div class="outline-text-3" id="text-1-16">
<p>
Functor is any object which behaves like a function and callable like
a function. Unlike C++ ordinary functions, functors can have internal
state and change its internal data as well.
</p>

<p>
Functors are implementing in C++ by overloading the function
application operator. 
</p>

<p>
The code in the file: <a href="src/cpp-functor.cpp">file:src/cpp-functor.cpp</a> shows an
exhaustive example about how to implement, use functors and implement
client code using dynamic polymorphism (aka subtyping or inheritance),
static polymorphism (aka template metaprogramming) and C++11's
function type <span class="underline">std::function</span>.
</p>

<p>
Example: 
</p>
<ul class="org-ul">
<li>File:            <a href="src/cpp-functor.cpp">file:src/cpp-functor.cpp</a></li>
<li>Online Compiler: <a href="http://rextester.com/VGE78113">http://rextester.com/VGE78113</a></li>

<li>Math functor interface class representing a general math function.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">IMathFunctor</span> <span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
        <span class="org-comment-delimiter">// </span><span class="org-comment">Pure virtual function</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">=&gt; const -&gt; Means that the function cannot change the object internal state.</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">=&gt; (= 0) -&gt; Means abstract member function or abstract method.</span>
        <span class="org-keyword">virtual</span> <span class="org-type">double</span> <span class="org-keyword">operator</span><span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">const</span> = 0;
        <span class="org-keyword">virtual</span> ~<span class="org-function-name">IMathFunctor</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<ul class="org-ul">
<li>Linear Function "C++ functor." - function-object</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">Linear Function "C++ functor." - function-object </span>
<span class="org-comment"> *   LinFun(x) = A * x + B</span>
<span class="org-comment"> */</span>
<span class="org-keyword">class</span> <span class="org-type">LinFun</span>: <span class="org-keyword">public</span> <span class="org-type">IMathFunctor</span> <span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
        <span class="org-comment-delimiter">// </span><span class="org-comment">Linear coefficient or line slope </span>
        <span class="org-type">double</span> <span class="org-variable-name">_a</span>; 
        <span class="org-type">double</span> <span class="org-variable-name">_b</span>;
<span class="org-function-name">public</span>:
        <span class="org-function-name">LinFun</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">a</span>, <span class="org-type">double</span> <span class="org-variable-name">b</span><span class="org-rainbow-delimiters-depth-2">)</span>: _a<span class="org-rainbow-delimiters-depth-2">(</span>a<span class="org-rainbow-delimiters-depth-2">)</span>, _b<span class="org-rainbow-delimiters-depth-2">(</span>b<span class="org-rainbow-delimiters-depth-2">){}</span>
        <span class="org-keyword">auto</span> <span class="org-function-name">getA</span><span class="org-rainbow-delimiters-depth-2">()</span>             -&gt; <span class="org-type">double</span>   <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> _a;<span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-keyword">auto</span> <span class="org-function-name">setA</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-2">)</span>         -&gt; <span class="org-type">void</span>     <span class="org-rainbow-delimiters-depth-2">{</span> _a = a; <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-keyword">auto</span> <span class="org-function-name">getB</span><span class="org-rainbow-delimiters-depth-2">()</span>             -&gt; <span class="org-type">double</span>   <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> _b;<span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-keyword">auto</span> <span class="org-function-name">setB</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">b</span><span class="org-rainbow-delimiters-depth-2">)</span>         -&gt; <span class="org-type">void</span>     <span class="org-rainbow-delimiters-depth-2">{</span> _b = b; <span class="org-rainbow-delimiters-depth-2">}</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">Function-call operator =&gt; Makes this object callable</span>
        <span class="org-comment-delimiter">//</span><span class="org-comment">------------------------------</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">double operator()(double x)  -&gt; double   { return _a * x + _b;}  </span>
        <span class="org-type">double</span> <span class="org-keyword">operator</span><span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> _a * x + _b;<span class="org-rainbow-delimiters-depth-2">}</span>    
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Usage: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Function linear object - modelling a linear function 3 * x + 4.0 </span>
<span class="org-type">LinFun</span> <span class="org-variable-name">fun1</span><span class="org-rainbow-delimiters-depth-1">(</span>3.0, 4.0<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"a = "</span> &lt;&lt; fun1.getA<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">" ; b = "</span> &lt;&lt; fun1.getB<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; nl;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"fun1(3.0) = "</span> &lt;&lt; fun1<span class="org-rainbow-delimiters-depth-1">(</span>3.0<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; nl;  
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"fun1(4.0) = "</span> &lt;&lt; fun1<span class="org-rainbow-delimiters-depth-1">(</span>4.0<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; nl;
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">a = 3 ; b = 4
fun1(3.0) = 13
fun1(4.0) = 16
fun1(5.0) = 19
</pre>
</div>


<p>
Higher order functions (functions that calls or return functions) can
be implemented using dynamic polymorphis or inheritance; static
polymorphism, also known as template metaprogramming and using the
type std::function from C++11.
</p>


<ul class="org-ul">
<li><b>Higher order function using dynamic polymorphism</b>
(inheritance). This function only accepts implementations of
IMathFunctor and cannot worth with an arbitrary function-object,
ordinary functions or C++11 lambda function. Another drawback is
the runtime overhead of virtual function-calls.</li>
</ul>

<p>
Example:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">tabulateDynamic</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">IMathFunctor</span>&amp; <span class="org-variable-name">fun</span>, <span class="org-type">double</span> <span class="org-variable-name">start</span>, <span class="org-type">double</span> <span class="org-variable-name">stop</span>, <span class="org-type">double</span> <span class="org-variable-name">step</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-2">(</span>3<span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span> = start; x &lt;= stop ; x += step<span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; x &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; fun<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Usage:
</p>

<div class="org-src-container">
<pre class="src src-cpp">tabulatDynamic<span class="org-rainbow-delimiters-depth-1">(</span>fun1, 0.0, 5.0, 1.0<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Sample Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">-----&gt; Tabulating fun1
    0.000     4.000
    1.000     7.000
    2.000    10.000
    3.000    13.000
    4.000    16.000
    5.000    19.000
</pre>
</div>

<ul class="org-ul">
<li><b>Higher order function using static polymorphism</b> - The advantage
of this function is that it can work with any callable object like
functors (function-objects), ordinary functions and C++11 lambda
functions. Another benefit is the lower runtime overhead than the
implementation using dynamic polymorphism. For this case, the
runtime cost of dynamic polymorphism is not significant, however it
can become noticeable on large scale computation or high
performance computations.</li>

<li>Example:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">Function</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">void</span> <span class="org-function-name">tabulateStatic</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">Function</span>&amp; <span class="org-variable-name">fun</span>, <span class="org-type">double</span> <span class="org-variable-name">start</span>, <span class="org-type">double</span> <span class="org-variable-name">stop</span>, <span class="org-type">double</span> <span class="org-variable-name">step</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-2">(</span>3<span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span> = start; x &lt;= stop ; x += step<span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; x &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; fun<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Usage:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" -----&gt; Tabulating fun1"</span> &lt;&lt; nl;
tabulateStatic<span class="org-rainbow-delimiters-depth-1">(</span>fun1, 0.0, 5.0, 1.0<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" -----&gt; Tabulating fun2"</span> &lt;&lt; nl;
tabulateStatic<span class="org-rainbow-delimiters-depth-1">(</span>fun2, 0.0, 5.0, 1.0<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>


<ul class="org-ul">
<li><b>Higher order function using the C++11 type std::function</b> - The type
std::function provides type erasure and can work with any functor,
ordinary function and C++11 lambda functions, in addition it also
allows all those types of functions to be stored in STL containers.</li>
</ul>

<p>
Example: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">tabulateLambdaList</span><span class="org-rainbow-delimiters-depth-1">(</span>
      <span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">&gt;</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">funlist</span>
     ,<span class="org-type">double</span> <span class="org-variable-name">start</span>
     ,<span class="org-type">double</span> <span class="org-variable-name">stop</span>
     ,<span class="org-type">double</span> <span class="org-variable-name">step</span>
     <span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-2">(</span>3<span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span> = start; x &lt;= stop ; x += step<span class="org-rainbow-delimiters-depth-2">){</span>
             <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; x;
             <span class="org-comment-delimiter">// </span><span class="org-comment">const auto&amp; is used for avoid uncessary copies </span>
             <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">fun</span>: funlist<span class="org-rainbow-delimiters-depth-3">)</span>
                     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; fun<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>;
             <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Usage:
</p>

<div class="org-src-container">
<pre class="src src-cpp">tabulateLambdaList<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">{</span>fun1, fun2, exp, ordinaryFunction<span class="org-rainbow-delimiters-depth-2">}</span>, 0.0, 5.0, 1.0<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Output:
</p>

<div class="org-src-container">
<pre class="src src-text">  x         fun1     fun2      exp      ordinaryFunction
0.000     4.000     4.000     1.000     0.000
1.000     7.000     9.000     2.718     3.000
2.000    10.000    18.000     7.389     6.000
3.000    13.000    31.000    20.086     9.000
4.000    16.000    48.000    54.598    12.000
5.000    19.000    69.000   148.413    15.000
</pre>
</div>

<p>
Compilation of <a href="src/cpp-functor.cpp">file:src/cpp-functor.cpp</a> 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ clang++ cpp-functor.cpp -o <span class="org-keyword">cpp-functor.bin</span> -g -std=c++11 -Wall -Wextra &amp;&amp;
</pre>
</div>

<p>
Complete program output of <a href="src/cpp-functor.cpp">file:src/cpp-functor.cpp</a> 
</p>

<div class="org-src-container">
<pre class="src src-sh">./cpp-functor.bin

a = 3 ; b = 4
<span class="org-function-name">fun1</span>(3.0) = 13
<span class="org-function-name">fun1</span>(4.0) = 16
<span class="org-function-name">fun1</span>(5.0) = 19
=======================
a = 2 ; b = 3 ; c = 4
<span class="org-function-name">fun2</span>(3.0) = 31
<span class="org-function-name">fun2</span>(4.0) = 48
<span class="org-function-name">fun2</span>(5.0) = 69
======= [1] Client Code using dynamic polymorphism  ================
 -----&gt; Tabulating fun1
     0.000     4.000
     1.000     7.000
     2.000    10.000
     3.000    13.000
     4.000    16.000
     5.000    19.000
 -----&gt; Tabulating fun2
     0.000     4.000
     1.000     9.000
     2.000    18.000
     3.000    31.000
     4.000    48.000
     5.000    69.000
======= [2] Client Code using dynamic polymorphism  ================
     0.000     4.000     4.000
     1.000     7.000     9.000
     2.000    10.000    18.000
     3.000    13.000    31.000
     4.000    16.000    48.000
     5.000    19.000    69.000
======= Client Code using static polymorphism (template)  ================
 -----&gt; Tabulating fun1
     0.000     4.000
     1.000     7.000
     2.000    10.000
     3.000    13.000
     4.000    16.000
     5.000    19.000
 -----&gt; Tabulating fun2
     0.000     4.000
     1.000     9.000
     2.000    18.000
     3.000    31.000
     4.000    48.000
     5.000    69.000
 -----&gt; Tabulating lambda <span class="org-keyword">function</span> <span class="org-function-name">f</span>(x) = x * x
     0.000     0.000
     1.000     1.000
     2.000     4.000
     3.000     9.000
     4.000    16.000
     5.000    25.000
 -----&gt; Tabulating ordinary <span class="org-keyword">function</span> <span class="org-function-name">f</span>(x) = 3 * x
     0.000     0.000
     1.000     3.000
     2.000     6.000
     3.000     9.000
     4.000    12.000
     5.000    15.000
 -----&gt; Tabulating ordinary <span class="org-keyword">function</span> <span class="org-function-name">f</span>(x) = exp(x)
     0.000     1.000
     1.000     2.718
     2.000     7.389
     3.000    20.086
     4.000    54.598
     5.000   148.413
======= Client Code using C++11 lambda std::<span class="org-keyword">function</span>  ================
     0.000     4.000     4.000     1.000     0.000
     1.000     7.000     9.000     2.718     3.000
     2.000    10.000    18.000     7.389     6.000
     3.000    13.000    31.000    20.086     9.000
     4.000    16.000    48.000    54.598    12.000
     5.000    19.000    69.000   148.413    15.000
</pre>
</div>
</div>
</div>

<div id="outline-container-org39fae48" class="outline-3">
<h3 id="org39fae48"><a id="ID-02be1a97-c100-44ce-ad76-63835818d406"></a><span class="section-number-3">1.17</span> Lambda Functions</h3>
<div class="outline-text-3" id="text-1-17">
</div>
<div id="outline-container-org3642b38" class="outline-4">
<h4 id="org3642b38"><span class="section-number-4">1.17.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-17-1">
<p>
Lambda expressions, also known as lambda functions or lambda
abstractions, are ubiquitous in functional programming languages such
as Haskell, OCaml, Scala and Scheme. They were by introduced in a
theoretical way by Alonzo Church in the lambda calculus. Lisp was
first programming language to use lambda functions and now this
function programming feature has made its way into mainstream and has
arrived to C# (Cshap), Java 8 and C++11.
</p>

<p>
In C++, Lambda functions are not ordinary functions, actually, they
are special function-objects or "C++ functors". Lambda abstractions
can be passed as arguments to any function; returned from functions;
can have state and also they can be defined locally at the call-site
simplifying all the boilerplate code necessary to pass a function to
callbacks, event handlers and higher order functions.
</p>

<p>
Summary:
</p>

<ul class="org-ul">
<li>Lambda functions were introduced in C++11. Before C++11 lambdas
were available as Boost.Lambda.</li>

<li>Lambda functions can be:
<ul class="org-ul">
<li>returned from functions.</li>
<li>be passed as function parameters.</li>
<li>Can be stored in data structures.</li>
<li>Hold state and capture variables (closure).</li>
<li>Non-capturing lambdas can be converted to function pointers what
is useful with old C-APIs.</li>
</ul></li>

<li>Lambda turns C++11 is a <b>game changer</b> and turns C++ into an
quasi-functional programming language.</li>

<li>Practical Use Cases:
<ul class="org-ul">
<li>Callbacks</li>
<li>Higher order functions</li>
<li>Simplify design patterns</li>
<li>Asynchronous code</li>
<li>Create functions at runtime.</li>
</ul></li>
</ul>

<p>
<b>Main parts</b> 
</p>

<ul class="org-ul">
<li>Capture list between square brackets <code>[ ]</code></li>
<li>Argument list between parenthesis <code>()</code></li>
<li>Function body between curly braces <code>{}</code></li>
</ul>

<p>
Syntax: 
</p>

<div class="org-src-container">
<pre class="src src-text">[capture](parameters) -&gt; return-type {body}
</pre>
</div>

<p>
Some lambda functions: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-variable-name">fn</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">int</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> n * 10; <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Test in CERN's ROOT REPL</span>
&gt;&gt; <span class="org-keyword">auto</span> fn = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">int</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> n * 10; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>lambda<span class="org-rainbow-delimiters-depth-2">)</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f5e578f2010
&gt;&gt; 

&gt;&gt; <span class="org-keyword">auto</span> fn = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">int</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> n * 10; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>lambda<span class="org-rainbow-delimiters-depth-2">)</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f5e578f2010
&gt;&gt; 
</pre>
</div>


<p>
<b>Parts of a C++'s lambda expression:</b>  - (<a href="https://msdn.microsoft.com/en-us/library/dd293608.aspx">Microsoft Inc. Lambda C++</a>)
</p>

<ol class="org-ol">
<li>Capture clause - Specifies captured variables (closure).
<ul class="org-ul">
<li><code>[ ]</code> - Empty capture clause means that no variable from escope
is captured.</li>
<li><code>[x, y]</code>- The variables x and y are captured by value and the
the lambda body will get a copy of x and y. They cannot be
modified in the body of the lambda expression.</li>
<li><code>[&amp;x , y]</code> - The variable x is captured by reference and y by
value, therefore x can be modified in the body of the lambda
expression and y cannot.</li>
<li><code>[&amp;]</code> - Capture all variables used in the lambda's body by
reference.</li>
<li><code>[=]</code>- Captures all variables used in the body by value
(copy). The variables cannot be modifed as they are passed by
value.</li>
<li><code>[=, &amp;blob]</code>- The variable blob is captured by reference and all
other variables are captured by value (copy).</li>
<li><code>[this]</code> - Captures the "this" pointer of the enclosing class.</li>
</ul></li>

<li>Parameter list (Optional)- Parameters, aka arguments, of the lambda expression.</li>
<li>Mutable specification (optional)</li>
<li>exception-specification (optional)</li>
<li>trailing return type (optional)</li>
<li>lambda-body - The body can access variables such as:
<ul class="org-ul">
<li>Lambda parameters passed between parenthesis:  <code>(int x)</code></li>
<li>Captured variables from the enclosing scope.</li>
<li>Global variables.</li>
<li>Class data members if the lambda expression is defined inside a
class.</li>
</ul></li>
</ol>

<div class="org-src-container">
<pre class="src src-text">--
            (1)  (2)    (3)       (4)         (5)
               |    |         |            |           |
              ...  ....  .....+....  ...+....     ......
              [ ]  ( )  mutable  throw()  -&gt; int
              {                                                   
                // (6)                                              
                // Lambda body 
                int n = x + y;
                x = y;
                y  = n;
                return n;
              }
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd87d986" class="outline-4">
<h4 id="orgd87d986"><span class="section-number-4">1.17.2</span> Basic Examples</h4>
<div class="outline-text-4" id="text-1-17-2">
<p>
<b>Proof-of-concept code</b> 
</p>

<ul class="org-ul">
<li>File: <a href="src/lambdaFun.cpp">file:src/lambdaFun.cpp</a></li>
<li>Online Compiler: <a href="http://rextester.com/SCQP30593">http://rextester.com/SCQP30593</a></li>
</ul>

<p>
Code Highlights:
</p>

<ul class="org-ul">
<li>Lambda function - lambda1</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Example (1)</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">lambda1</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">str</span><span class="org-rainbow-delimiters-depth-1">){</span>
   <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Lambda1: : I got the value = "</span> &lt;&lt; str &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Alternative 1:</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">------------------------------</span>
<span class="org-function-name">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp;<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> lambda1A = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">str</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Lambda1: : I got the value = "</span> &lt;&lt; str &lt;&lt; endl;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Alternative 2:</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">------------------------------</span>
<span class="org-function-name">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp;<span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">void</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> lambda1B = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">str</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Lambda1: : I got the value = "</span> &lt;&lt; str &lt;&lt; endl;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Alternative 3:</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">------------------------------</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Type synonym </span>
<span class="org-keyword">using</span> <span class="org-type">FnAction</span> = <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp;<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Alternative type synonym: </span>
<span class="org-keyword">using</span> <span class="org-type">FnAction</span> = <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp;<span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">void</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>;

<span class="org-type">FnAction</span> <span class="org-variable-name">lambda1C</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">str</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Lambda1: : I got the value = "</span> &lt;&lt; str &lt;&lt; endl;
<span class="org-rainbow-delimiters-depth-1">}</span>;

&gt;&gt; lambda1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hello world"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Lambda1</span>: : I got the value = hello world

&gt;&gt; lambda1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hola mundo"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Lambda1</span>: : I got the value = hola mundo

&gt;&gt; lambda1A<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"testing C++"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Lambda1</span>: : I got the value = testing C++

&gt;&gt; lambda1B<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Running lambda1B"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Lambda1</span>: : I got the value = Running lambda1B

&gt;&gt; lambda1C<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"I am lambda1C function"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Lambda1</span>: : I got the value = I am lambda1C function
&gt;&gt;  
</pre>
</div>


<ul class="org-ul">
<li>Higher order function which returns a lambda function which takes
two ints as parameters returning an int. This function captures the
parameter m by value, it means that the parameter is copied in the
function body.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">As it is in the code.</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">----------------------------------------- </span>
<span class="org-function-name">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> makeFunction1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">m</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-keyword">return</span> <span class="org-rainbow-delimiters-depth-2">[</span>m<span class="org-rainbow-delimiters-depth-2">](</span><span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-type">int</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> m * <span class="org-rainbow-delimiters-depth-3">(</span>x + y<span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; <span class="org-keyword">auto</span> fn = makeFunction1<span class="org-rainbow-delimiters-depth-1">(</span>4<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fb73017f010
&gt;&gt; fn<span class="org-rainbow-delimiters-depth-1">(</span>3, 5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 32
&gt;&gt; fn<span class="org-rainbow-delimiters-depth-1">(</span>4, 3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 28
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Alternative 1:</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">-----------------------------------------</span>
<span class="org-keyword">auto</span> makeFunction1A<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">m</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>
    <span class="org-keyword">return</span> <span class="org-rainbow-delimiters-depth-2">[</span>m<span class="org-rainbow-delimiters-depth-2">](</span><span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-type">int</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> m * <span class="org-rainbow-delimiters-depth-3">(</span>x + y<span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; fna<span class="org-rainbow-delimiters-depth-1">(</span>3, 5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 32
&gt;&gt; fna<span class="org-rainbow-delimiters-depth-1">(</span>4, 3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 28
&gt;&gt; <span class="org-keyword">auto</span> fna6 = makeFunction1A<span class="org-rainbow-delimiters-depth-1">(</span>6<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f696d823030
&gt;&gt; fna6<span class="org-rainbow-delimiters-depth-1">(</span>3, 5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 48
&gt;&gt; fna6<span class="org-rainbow-delimiters-depth-1">(</span>4, 3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 42
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Alternative 2:</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">-----------------------------------------</span>
<span class="org-keyword">auto</span> makeFunction1B<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">m</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>
    <span class="org-keyword">return</span> <span class="org-rainbow-delimiters-depth-2">[</span>m<span class="org-rainbow-delimiters-depth-2">](</span><span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-type">int</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> m * <span class="org-rainbow-delimiters-depth-3">(</span>x + y<span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Alternative 3:</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">-----------------------------------------</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">C++11 Type synonym</span>
<span class="org-keyword">using</span> <span class="org-type">BinaryIntFunctionA</span> = <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>;
<span class="org-keyword">using</span> <span class="org-type">BinaryIntFunctionB</span> = <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Prior to C++11 type synonym</span>
<span class="org-keyword">typedef</span> <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-type">BinaryIntFunction</span>;

<span class="org-keyword">auto</span> <span class="org-function-name">makeFunction1C</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">m</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">BinaryIntFunctionB</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">return</span> <span class="org-rainbow-delimiters-depth-2">[</span>m<span class="org-rainbow-delimiters-depth-2">](</span><span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-type">int</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> m * <span class="org-rainbow-delimiters-depth-3">(</span>x + y<span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; <span class="org-keyword">auto</span> fnc = makeFunction1C<span class="org-rainbow-delimiters-depth-1">(</span>8<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f696d823050
&gt;&gt; fnc<span class="org-rainbow-delimiters-depth-1">(</span>3, 5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 64
&gt;&gt; fnc<span class="org-rainbow-delimiters-depth-1">(</span>6, 7<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 104
&gt;&gt; 8 * <span class="org-rainbow-delimiters-depth-1">(</span>6 + 7<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 104
&gt;&gt; 
</pre>
</div>


<p>
Complete program output (<a href="src/lambdaFun.cpp">file:src/lambdaFun.cpp</a>) : 
</p>

<div class="org-src-container">
<pre class="src src-sh">g++ lamdaFun.cpp -o <span class="org-keyword">bin/lamdaFun.bin</span> &amp;&amp; bin/lamdaFun.bin

-----------------------------------------------------------------------------------------
&gt;&gt; Example(1) - Testing <span class="org-keyword">function</span> <span class="org-function-name">lambda1</span>
<span class="org-function-name">Lambda1</span>: : I got the value = Hello
<span class="org-function-name">Lambda1</span>: : I got the value = World

-----------------------------------------------------------------------------------------
&gt;&gt; Example(2) Testing <span class="org-keyword">function</span> <span class="org-function-name">lambda2</span>
Lambda 2 :: I got the value  = Japan
Lambda 2 :: I got the value  = Korea

-----------------------------------------------------------------------------------------
&gt;&gt; Example(3) Testing <span class="org-keyword">function</span> <span class="org-function-name">lambda3</span>
   - Lambda <span class="org-keyword">function</span> <span class="org-function-name">can</span> be defined and executed at the call-site
Lambda 3 :: I got the value = C++11 is awesome!

-----------------------------------------------------------------------------------------
&gt;&gt; Example(4) Testing <span class="org-keyword">function</span> <span class="org-function-name">sumLambda</span>
   - Lambda functions  can return values as any function.
<span class="org-function-name">sumLambda</span>(10.0, 25.34) = 35.34
<span class="org-function-name">sumLambda</span>(-10.23, 4.56) = -5.67

-----------------------------------------------------------------------------------------
&gt;&gt; Example(5) Testing <span class="org-keyword">function</span> <span class="org-function-name">lamdaCapture</span>
   - Lambda functions  can capture its environment (closures) and have state as <span class="org-string">"function objects"</span>
  x  = 5  c = 3
<span class="org-function-name">lamdaCapture</span>(2, 5)  = 32
  x  = 5  c = 4
  lamdaCapture(1, 2) =  16
  x  = 5  c = 5

-----------------------------------------------------------------------------------------
&gt;&gt; Example(6) Testing <span class="org-keyword">function</span> <span class="org-function-name">sumLambda</span>
   - Lambda functions  can play well with STL algorithms
Print all vector elements - Version 1
  v[0] = 1
  v[1] = 2
  v[2] = 3
  v[3] = 4
  v[4] = 5
  v[5] = 6
  v[6] = 7
  v[7] = 8
Print all vector element Version 2  - local state with <span class="org-string">'static'</span> keyword
  v[0] = 1
  v[1] = 2
  v[2] = 3
  v[3] = 4
  v[4] = 5
  v[5] = 6
  v[6] = 7
  v[7] = 8

-----------------------------------------------------------------------------------------
&gt;&gt; Example(7) 
   Playing with STL transform algorithm.
  Vector transformed =  
v  [0] = 4
v  [1] = 7
v  [2] = 10
v  [3] = 13
v  [4] = 16
v  [5] = 19
v  [6] = 22
v  [7] = 25

-----------------------------------------------------------------------------------------
&gt;&gt; Example(8) 
   Lambda functions can be returned from functions and be generated at run-time.
  mulSumBy2(2, 4) = 12
  mulSumBy2(3, 1) = 8
  mulSumBy5(2, 4) = 30
  mulSumBy5(9, 2) = 55

-----------------------------------------------------------------------------------------
&gt;&gt; Example(9) 
   Lambda functions can be returned from functions and have state.
  Running dummy <span class="org-keyword">function</span>
    (*) m = 2, n = 0, x = 1, y = 3, z = 8
  Running dummy <span class="org-keyword">function</span>
    (*) m = 2, n = 1, x = 2, y = 5, z = 15
  Running dummy <span class="org-keyword">function</span>
    (*) m = 3, n = 0, x = 1, y = 3, z = 12
  Running dummy <span class="org-keyword">function</span>
    (*) m = 3, n = 1, x = 2, y = 5, z = 22

-----------------------------------------------------------------------------------------
&gt;&gt; Example(10) 
   Lambda functions can return lambda functions!!
  addTo5(4) = 9
  addTo5(3) = 8
  addTo10(4) = 14
  addTo10(3) = 13

-----------------------------------------------------------------------------------------
&gt;&gt; Example(11) 
   Lambda functions can be passed as <span class="org-keyword">function</span> <span class="org-function-name">arguments</span>!
<span class="org-function-name">foldVector</span>(dataset2, 0, add) = 28
<span class="org-function-name">foldVector</span>(dataset2, 1, mul) = 5040

-----------------------------------------------------------------------------------------
&gt;&gt; Example(12) - Observer pattern
(observer 1) Temperature changed to 30.5 C
(observer 2) Sensor temperature changed to 30.5 C
(observer 1) Temperature changed to 20.5 C
(observer 2) Sensor temperature changed to 20.5 C

</pre>
</div>

<p>
<b>References</b>
</p>

<ul class="org-ul">
<li><b>Lambda Expressions in C++</b> -
<a href="https://msdn.microsoft.com/en-us/library/dd293608.aspx">https://msdn.microsoft.com/en-us/library/dd293608.aspx</a></li>

<li><b>Lambda expressions (since C++11)</b> -
<a href="http://en.cppreference.com/w/cpp/language/lambda">http://en.cppreference.com/w/cpp/language/lambda</a></li>

<li><b>C++ Core Guidelines: Function Objects and Lambdas</b> -
<a href="http://www.modernescpp.com/index.php/c-core-guidelines-function-objects-and-lambas">http://www.modernescpp.com/index.php/c-core-guidelines-function-objects-and-lambas</a></li>

<li><b>C++11/C++14 lambda functions - 2017</b> -
<a href="http://www.bogotobogo.com/cplusplus/C11/C11_lambda_functions_expressions.php">http://www.bogotobogo.com/cplusplus/C11/C11_lambda_functions_expressions.php</a></li>

<li><b>Lambda Functions in C++11 - the Definitive Guide</b> -
<a href="https://www.cprogramming.com/c++11/c++11-lambda-closures.html">https://www.cprogramming.com/c++11/c++11-lambda-closures.html</a></li>

<li><b>Fun with Lambdas: C++14 Style (part 1)</b> -
<a href="https://www.slideshare.net/SumantTambe/fun-with-lambdas-c14-style">https://www.slideshare.net/SumantTambe/fun-with-lambdas-c14-style</a></li>

<li><b>ICS 45C Fall 2016 - Notes and Examples: Functions and Lambdas</b> -
<a href="http://www.ics.uci.edu/~thornton/ics45c/Notes/FunctionsAndLambdas/">http://www.ics.uci.edu/~thornton/ics45c/Notes/FunctionsAndLambdas/</a></li>

<li><b>Creating Recursive Lambdas &#x2026; and returning them too!</b> -
<a href="http://cpptruths.blogspot.com.br/2013/10/creating-recursive-lambdas-and.html">http://cpptruths.blogspot.com.br/2013/10/creating-recursive-lambdas-and.html</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgf16b2d1" class="outline-4">
<h4 id="orgf16b2d1"><span class="section-number-4">1.17.3</span> Self-executable lambda for complex initialization</h4>
<div class="outline-text-4" id="text-1-17-3">
<p>
Self-executable lambdas functions can also be used for performing
complex local or global static variables initialization.
</p>


<p>
<b>Example 1:</b> Initialization of global variables.
</p>

<ul class="org-ul">
<li>Online compiler: <a href="https://rextester.com/CHRT64707">https://rextester.com/CHRT64707</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cstdio</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">class</span> <span class="org-type">AClass</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
    <span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-variable-name">y</span>, <span class="org-variable-name">z</span>; 
<span class="org-function-name">public</span>:
    <span class="org-function-name">AClass</span><span class="org-rainbow-delimiters-depth-2">()</span>: x<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span>, y<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span>, z<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-rainbow-delimiters-depth-2">}</span>
    ~<span class="org-function-name">AClass</span><span class="org-rainbow-delimiters-depth-2">(){</span>
       <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Object deleted\n"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">void</span> <span class="org-function-name">setX</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">this</span>-&gt;x = x; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">void</span> <span class="org-function-name">setY</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">this</span>-&gt;y = y; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">void</span> <span class="org-function-name">setZ</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">z</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">this</span>-&gt;z = z; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">void</span> <span class="org-function-name">show</span><span class="org-rainbow-delimiters-depth-2">(){</span>
       <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"AClass{ x = %.3f ; y = %.3f ; z = %.3f}\n"</span>, x, y, z<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>   
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">AClass</span> <span class="org-variable-name">globalObject</span> =
    <span class="org-rainbow-delimiters-depth-1">[](){</span>
        <span class="org-type">AClass</span> <span class="org-variable-name">cls</span>;
        cls.setX<span class="org-rainbow-delimiters-depth-2">(</span>10.0<span class="org-rainbow-delimiters-depth-2">)</span>;
        cls.setY<span class="org-rainbow-delimiters-depth-2">(</span>20.0<span class="org-rainbow-delimiters-depth-2">)</span>;
        cls.setZ<span class="org-rainbow-delimiters-depth-2">(</span>15.0<span class="org-rainbow-delimiters-depth-2">)</span>;
        cls.show<span class="org-rainbow-delimiters-depth-2">()</span>;
        <span class="org-keyword">return</span> cls;
    <span class="org-rainbow-delimiters-depth-1">}()</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Program Initialized"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    globalObject.show<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Program end"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">$ clang++ init1.cpp -o init1.bin -g -std=c++1z -Wall -Wextra
$ ./init1.bin

AClass{ x = 10.000 ; y = 20.000 ; z = 15.000}
Program Initialized
AClass{ x = 10.000 ; y = 20.000 ; z = 15.000}
Program end
Object deleted
</pre>
</div>


<p>
<b>Example 2:</b> Initialization of function static variables.
</p>

<ul class="org-ul">
<li>Online compiler: <a href="https://rextester.com/RIGN6626">https://rextester.com/RIGN6626</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">map</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">getDayOfWeekNum2</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">weekDay</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Type alias / synonym </span>
    <span class="org-keyword">using</span> <span class="org-type">WeekDayTable</span> = <span class="org-constant">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>;
    <span class="org-keyword">static</span> <span class="org-type">WeekDayTable</span> <span class="org-variable-name">week_table</span> =
             <span class="org-rainbow-delimiters-depth-2">[](){</span> <span class="org-comment-delimiter">// </span><span class="org-comment">Lambda function</span>
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [LOG] Initializing month table"</span> &lt;&lt; <span class="org-string">"\n"</span>;
                <span class="org-type">WeekDayTable</span> <span class="org-variable-name">tbl</span>;
                tbl<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"Sun"</span><span class="org-rainbow-delimiters-depth-3">]</span> = 1;
                tbl<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"Mon"</span><span class="org-rainbow-delimiters-depth-3">]</span> = 2;
                tbl<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"Tue"</span><span class="org-rainbow-delimiters-depth-3">]</span> = 3;
                tbl<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"Wed"</span><span class="org-rainbow-delimiters-depth-3">]</span> = 4;
                tbl<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"Thu"</span><span class="org-rainbow-delimiters-depth-3">]</span> = 5;
                tbl<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"Fri"</span><span class="org-rainbow-delimiters-depth-3">]</span> = 6;
                tbl<span class="org-rainbow-delimiters-depth-3">[</span><span class="org-string">"Sat"</span><span class="org-rainbow-delimiters-depth-3">]</span> = 7;
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [LOG] Month table initialization end. OK."</span> &lt;&lt; <span class="org-string">"\n"</span>;
                <span class="org-keyword">return</span> tbl;
        <span class="org-rainbow-delimiters-depth-2">}()</span>;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>week_table.find<span class="org-rainbow-delimiters-depth-3">(</span>weekDay<span class="org-rainbow-delimiters-depth-3">)</span> != week_table.end<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
       <span class="org-keyword">return</span> week_table<span class="org-rainbow-delimiters-depth-2">[</span>weekDay<span class="org-rainbow-delimiters-depth-2">]</span>;  
    <span class="org-keyword">return</span> -1;
<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"getDayOfWeekNum2(Mon)   = "</span> &lt;&lt; getDayOfWeekNum2<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Mon"</span><span class="org-rainbow-delimiters-depth-2">)</span>   &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"getDayOfWeekNum2(Tue)   = "</span> &lt;&lt; getDayOfWeekNum2<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Tue"</span><span class="org-rainbow-delimiters-depth-2">)</span>   &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"getDayOfWeekNum2(Sat)   = "</span> &lt;&lt; getDayOfWeekNum2<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Sat"</span><span class="org-rainbow-delimiters-depth-2">)</span>   &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"getDayOfWeekNum2(ERROR) = "</span> &lt;&lt; getDayOfWeekNum2<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"ERROR"</span><span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Output stderr (Program logging)
</p>

<div class="org-src-container">
<pre class="src src-txt">[LOG] Initializing month table
[LOG] Month table initialization end. OK.
</pre>
</div>

<p>
Output stdout (Program output) 
</p>

<div class="org-src-container">
<pre class="src src-txt">getDayOfWeekNum2(Mon)   = 2
getDayOfWeekNum2(Tue)   = 3
getDayOfWeekNum2(Sat)   = 7
getDayOfWeekNum2(ERROR) = -1
</pre>
</div>
</div>
</div>
<div id="outline-container-org43adc99" class="outline-4">
<h4 id="org43adc99"><span class="section-number-4">1.17.4</span> Universal function adapter - std::bind</h4>
<div class="outline-text-4" id="text-1-17-4">
</div>
<ol class="org-ol">
<li><a id="org6376663"></a>Overview<br />
<div class="outline-text-5" id="text-1-17-4-1">
<p>
The operator std::bind can simplify help simplifying turning ordinary
functions, instance methods (member functions) and static methods
(static member functions) into ordinary functions.
</p>

<p>
Example 1: Turn a function of signature: 
</p>
<ul class="org-ul">
<li>Input Signature:
<ul class="org-ul">
<li>double functionABC(double a, double c, double c)</li>
</ul></li>
<li>Target signature: 
<ul class="org-ul">
<li>function&lt;double (double)&gt;</li>
</ul></li>
</ul>

<p>
For the function functionABC
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">double</span> <span class="org-function-name">functionABC</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">a</span>, <span class="org-type">double</span> <span class="org-variable-name">c</span>, <span class="org-type">double</span> <span class="org-variable-name">c</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
The expression:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Type of fnFunOfA is std::function&lt;double (double)&gt;</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">fnFunOfA</span> = <span class="org-constant">std</span>::bind<span class="org-rainbow-delimiters-depth-1">(</span>functionABC, _1, 10.0, 20.0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">It is the same as </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">fnFunOfA</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> functionABC<span class="org-rainbow-delimiters-depth-2">(</span>x, 10.0, 20.0<span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">It also equivalent to </span>
<span class="org-function-name">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> fnFunOfA = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> functionABC<span class="org-rainbow-delimiters-depth-2">(</span>x, 10.0, 20.0<span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
So, it follows that: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-variable-name">fnFunOfB</span> = <span class="org-constant">std</span>::bind<span class="org-rainbow-delimiters-depth-1">(</span>functionABC, 25.0 , _1, 20.0<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">It is equivalent to </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">fnFunOfB</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> <span class="org-rainbow-delimiters-depth-2">(</span>functionABC, 25.0 , _1, 20.0<span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
By using more lambda placeholders it is also possible to generate
multi variable functions: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-keyword">using</span> <span class="org-keyword">namespace</span> <span class="org-constant">std</span>::<span class="org-constant">placeholders</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">Import placeholders, _1, _2, _3 ...  </span>

<span class="org-comment-delimiter">//</span><span class="org-comment">----------------------------------//</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">fnFunOfAB</span> = <span class="org-constant">std</span>::bind<span class="org-rainbow-delimiters-depth-1">(</span>functionABC, _1 , _2, 20.0<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Equivalent to </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">fnFunOfAB</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> functionABC<span class="org-rainbow-delimiters-depth-2">(</span> x , y, 20.0<span class="org-rainbow-delimiters-depth-2">)</span>;<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">//</span><span class="org-comment">----------------------------------//</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">fnFunOfAC</span> = <span class="org-constant">std</span>::bind<span class="org-rainbow-delimiters-depth-1">(</span>functionABC, _1 , 10.0, _2<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Equivalent to </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">fnFunOfAC</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> functionABC<span class="org-rainbow-delimiters-depth-2">(</span> x , 10.0, y<span class="org-rainbow-delimiters-depth-2">)</span>;<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">//</span><span class="org-comment">----------------------------------//</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">fnFunOfABC</span> = <span class="org-constant">std</span>::bind<span class="org-rainbow-delimiters-depth-1">(</span>functionABC, _1 , 10.0, _2<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Equivalent to </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">fnFunOfABC</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span>, <span class="org-type">double</span> <span class="org-variable-name">z</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> functionABC<span class="org-rainbow-delimiters-depth-2">(</span> x , y, z<span class="org-rainbow-delimiters-depth-2">)</span>;<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>


<p>
<b>Binding non-static methods (member function)</b>
</p>

<p>
For the following class:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">struct</span> <span class="org-type">FunctionObject</span><span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-type">double</span> <span class="org-variable-name">x</span>;
     <span class="org-type">double</span> <span class="org-variable-name">y</span>;
     <span class="org-function-name">FunctionObject</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-2">)</span>: x<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>, y<span class="org-rainbow-delimiters-depth-2">(</span>y<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{}</span>;      
     <span class="org-type">double</span> <span class="org-keyword">operator</span> <span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-2">){</span>   
        <span class="org-keyword">return</span> a * a;
     <span class="org-rainbow-delimiters-depth-2">}</span>   
     <span class="org-type">double</span> <span class="org-keyword">operator</span> <span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">a</span>, <span class="org-type">double</span> <span class="org-variable-name">b</span>, <span class="org-type">double</span> <span class="org-variable-name">c</span><span class="org-rainbow-delimiters-depth-2">){</span>
         <span class="org-keyword">return</span> a * x + b * y + c / <span class="org-rainbow-delimiters-depth-3">(</span>x + y<span class="org-rainbow-delimiters-depth-3">)</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-type">double</span> <span class="org-function-name">method1</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-2">){</span>
         <span class="org-keyword">return</span> <span class="org-keyword">this</span>-&gt;x * a  + <span class="org-keyword">this</span>-&gt;y / a;
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-type">double</span> <span class="org-function-name">method2</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">a</span>, <span class="org-type">double</span> <span class="org-variable-name">b</span>, <span class="org-type">double</span> <span class="org-variable-name">c</span><span class="org-rainbow-delimiters-depth-2">){</span>
         <span class="org-keyword">return</span>  c * <span class="org-rainbow-delimiters-depth-3">(</span>a / x + b / y<span class="org-rainbow-delimiters-depth-3">)</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>       
 <span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
It is possible to create lambda functions from those class methods
(member functions):
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">FunctionObject</span> <span class="org-variable-name">obj</span>;

<span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">method1LambdaA</span> = <span class="org-constant">std</span>::bind<span class="org-rainbow-delimiters-depth-1">(</span>&amp;<span class="org-constant">FunctionObject</span>::method1, fobj, _1<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Equivalent to: </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">method1LambdaA</span> = <span class="org-rainbow-delimiters-depth-1">[</span>&amp;<span class="org-variable-name">obj</span><span class="org-rainbow-delimiters-depth-1">](</span><span class="org-type">double</span> <span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-1">){</span><span class="org-keyword">return</span> obj.method1<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">method2LambdaAsFnOfAC</span> = <span class="org-constant">std</span>::bind<span class="org-rainbow-delimiters-depth-1">(</span>&amp;<span class="org-constant">FunctionObject</span>::method2, &amp;fobj, _1, 10.0, _2<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Equivalent to: </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">method2LambdaAsFnOfAC</span> = <span class="org-rainbow-delimiters-depth-1">[</span>&amp;<span class="org-variable-name">obj</span><span class="org-rainbow-delimiters-depth-1">](</span><span class="org-type">double</span> <span class="org-variable-name">a</span>, <span class="org-type">double</span> <span class="org-variable-name">c</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> obj.method2<span class="org-rainbow-delimiters-depth-2">(</span>a, 10.0, c<span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">functionOfObj</span> = <span class="org-constant">std</span>::bind<span class="org-rainbow-delimiters-depth-1">(</span>&amp;<span class="org-constant">FunctionObject</span>::method1, _1, 10.0<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Equivalent to: </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">functionOfobj</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">FunctionObject</span> <span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> obj.method1<span class="org-rainbow-delimiters-depth-2">(</span>obj, 10.0<span class="org-rainbow-delimiters-depth-2">)</span>;<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>
</div>
</li>

<li><a id="org5dc6151"></a><a id="ID-219c4de9-3e9e-446f-bdd5-1ae6e7d45b5b"></a>std::bind Example<br />
<div class="outline-text-5" id="text-1-17-4-2">
<p>
File: 
</p>
<ul class="org-ul">
<li><a href="src/lambda-bind.cpp">file:src/lambda-bind.cpp</a></li>
</ul>

<p>
Running: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ lambda-bind.cpp -o <span class="org-keyword">lambda-bind.bin</span> -g -std=c++11 -Wall -Wextra -ldl 
$ ./lambda-bind.bin

======== Test 1 ========
<span class="org-function-name">lambda-bind.cpp</span>:58: ; sum10(2.0) = 12
<span class="org-function-name">lambda-bind.cpp</span>:59: ; sum10(4.5) = 14.5
<span class="org-function-name">lambda-bind.cpp</span>:60: ; sum10(25.0) = 35
======== Test 2 ========
<span class="org-function-name">lambda-bind.cpp</span>:66: ; vectorLenAsFunctionOfX(4.0) = 27.2213
<span class="org-function-name">lambda-bind.cpp</span>:67: ; std::bind(vectorLength, _1, 10.0, 25.0)(4.0) = 27.2213
<span class="org-function-name">lambda-bind.cpp</span>:68: ; vectorLenAsFunctionOfX(10.0) = 28.7228
<span class="org-function-name">lambda-bind.cpp</span>:69: ; std::bind(vectorLength, _1, 10.0, 25.0)(10.0) = 28.7228
Tabulating - vectorLenAsFunctionOfX
     1.000    26.944
     2.000    27.000
     3.000    27.092
     4.000    27.221
     5.000    27.386
======== Test 3 ========
<span class="org-function-name">lambda-bind.cpp</span>:77: ; vectorLenAsFunctionOfY(14.0) = 30.348
<span class="org-function-name">lambda-bind.cpp</span>:78: ; vectorLenAsFunctionOfY(20.0) = 33.541
Tabulating - vectorLenAsFunctionOfY
     1.000    26.944
     2.000    27.000
     3.000    27.092
     4.000    27.221
     5.000    27.386
======== Test 4 ========
<span class="org-function-name">lambda-bind.cpp</span>:92: ; vectorLenAsFunctionOfYZ(3.0, 6.0) = 12.0416
<span class="org-function-name">lambda-bind.cpp</span>:93: ; vectorLenAsFunctionOfYZ(15.0, 26.0) = 31.6386
======== Test 5 ========
<span class="org-function-name">lambda-bind.cpp</span>:97: ; fobj(4.0) = 16
<span class="org-function-name">lambda-bind.cpp</span>:98: ; fobj(5.0) = 25
<span class="org-function-name">lambda-bind.cpp</span>:99: ; fobj(10.0) = 100
<span class="org-function-name">lambda-bind.cpp</span>:101: ; fobj(4.0, 10.0, 5.0) = 104.357
<span class="org-function-name">lambda-bind.cpp</span>:102: ; fobj(6.0, 8.0, 9.0) = 100.643
<span class="org-function-name">Running</span>: tabulate(0.0, 5.0, 1.0, fobj)
     0.000     0.000
     1.000     1.000
     2.000     4.000
     3.000     9.000
     4.000    16.000
     5.000    25.000
Turning class member <span class="org-keyword">function</span> <span class="org-function-name">into</span> lambda <span class="org-keyword">function</span> 
 Note: it is not possible (0.0, 5.0, 1.0, fobj.method1)
<span class="org-function-name">lambda-bind.cpp</span>:111: ; fobj.method1(10.0) = 60.8
<span class="org-function-name">lambda-bind.cpp</span>:112: ; method1LambdaA(10.0) = 60.8
<span class="org-function-name">lambda-bind.cpp</span>:113: ; fobj.method1(20.0) = 120.4
<span class="org-function-name">lambda-bind.cpp</span>:114: ; method1LambdaA(20.0) = 120.4
<span class="org-function-name">lambda-bind.cpp</span>:115: ; fobj.method1(30.0) = 180.267
<span class="org-function-name">lambda-bind.cpp</span>:116: ; method1LambdaA(30.0) = 180.267
Tabulating method1LambdaA
     0.000       inf
     1.000    14.000
     2.000    16.000
     3.000    20.667
     4.000    26.000
     5.000    31.600
Tabulating method1LambdaA using direct lambda
     0.000       inf
     1.000    14.000
     2.000    16.000
     3.000    20.667
     4.000    26.000
     5.000    31.600
======== Test 6 ========
<span class="org-function-name">lambda-bind.cpp</span>:129: ; method2LambdaAsFnOfA(5.0) = 41.6667
<span class="org-function-name">lambda-bind.cpp</span>:130: ; method2LambdaAsFnOfA(6.0) = 45
<span class="org-function-name">lambda-bind.cpp</span>:131: ; method2LambdaAsFnOfA(10.0) = 58.3333
<span class="org-function-name">lambda-bind.cpp</span>:136: ; fobj.method2(3.0, 10.0, 4.0) = 7
<span class="org-function-name">lambda-bind.cpp</span>:137: ; method2LambdaAsFnOfAC(3.0, 4.0) = 7
<span class="org-function-name">lambda-bind.cpp</span>:138: ; fobj.method2(15.0, 10.0, 14.0) = 52.5
<span class="org-function-name">lambda-bind.cpp</span>:139: ; method2LambdaAsFnOfAC(15.0, 14.0) = 52.5


</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-org88f38d4" class="outline-3">
<h3 id="org88f38d4"><span class="section-number-3">1.18</span> OOP Simple Class</h3>
<div class="outline-text-3" id="text-1-18">
<ul class="org-ul">
<li>File: <a href="src/cppClasses1.cpp">file:src/cppClasses1.cpp</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-keyword">using</span> <span class="org-keyword">namespace</span> <span class="org-constant">std</span>;

<span class="org-keyword">class</span> <span class="org-type">Date</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
  <span class="org-type">int</span> <span class="org-variable-name">year</span>, <span class="org-variable-name">month</span>, <span class="org-variable-name">day</span>;

  <span class="org-comment-delimiter">// </span><span class="org-comment">---- Public Class Members ----- //</span>

  <span class="org-type">void</span> <span class="org-function-name">showDate</span><span class="org-rainbow-delimiters-depth-2">()</span>;
  <span class="org-type">void</span> <span class="org-function-name">showDate2</span><span class="org-rainbow-delimiters-depth-2">()</span>;
  <span class="org-type">int</span>  <span class="org-function-name">getYear</span><span class="org-rainbow-delimiters-depth-2">()</span>;
  <span class="org-type">int</span>  <span class="org-function-name">getDay</span><span class="org-rainbow-delimiters-depth-2">()</span>;
  <span class="org-type">int</span>  <span class="org-function-name">getMonth</span><span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;


<span class="org-type">void</span> <span class="org-constant">Date</span>::<span class="org-function-name">showDate</span><span class="org-rainbow-delimiters-depth-1">(){</span>
  cout &lt;&lt; <span class="org-string">"Date = "</span> &lt;&lt; <span class="org-keyword">this</span>-&gt;year &lt;&lt; <span class="org-string">"-"</span> &lt;&lt; <span class="org-keyword">this</span>-&gt;month &lt;&lt; <span class="org-string">"-"</span> &lt;&lt; <span class="org-keyword">this</span>-&gt;day &lt;&lt; endl;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-constant">Date</span>::<span class="org-function-name">showDate2</span><span class="org-rainbow-delimiters-depth-1">(){</span>
  cout &lt;&lt; <span class="org-string">"Date = "</span> &lt;&lt; year &lt;&lt; <span class="org-string">"-"</span> &lt;&lt; month &lt;&lt; <span class="org-string">"-"</span> &lt;&lt; day &lt;&lt; endl;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">int</span> <span class="org-constant">Date</span>::<span class="org-function-name">getYear</span><span class="org-rainbow-delimiters-depth-1">(){</span>
  <span class="org-keyword">return</span> year;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">int</span> <span class="org-constant">Date</span>::<span class="org-function-name">getMonth</span><span class="org-rainbow-delimiters-depth-1">(){</span>
  <span class="org-keyword">return</span> month;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">int</span> <span class="org-constant">Date</span>::<span class="org-function-name">getDay</span><span class="org-rainbow-delimiters-depth-1">(){</span>
  <span class="org-keyword">return</span> day;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">Date</span> <span class="org-function-name">makeDate</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">y</span>, <span class="org-type">int</span> <span class="org-variable-name">m</span>, <span class="org-type">int</span> <span class="org-variable-name">d</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-type">Date</span> <span class="org-variable-name">date</span>;
  date.year  = y ;
  date.month = m ;
  date.day   = d ;
  <span class="org-keyword">return</span> date;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-function-name">printDate</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Date</span> <span class="org-variable-name">d</span><span class="org-rainbow-delimiters-depth-1">){</span>
  cout &lt;&lt; <span class="org-string">"Date is "</span> &lt;&lt; d.year &lt;&lt; <span class="org-string">"-"</span> &lt;&lt; d.month &lt;&lt; <span class="org-string">"-"</span> &lt;&lt; d.day &lt;&lt; endl;
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
  <span class="org-type">Date</span> <span class="org-variable-name">d</span>;
  d.day   = 10;
  d.month = 4;
  d.year  = 1998;

  cout &lt;&lt; <span class="org-string">"Date (YMD) is = "</span> &lt;&lt; d.year &lt;&lt; <span class="org-string">"-"</span> &lt;&lt; d.month &lt;&lt; <span class="org-string">"-"</span> &lt;&lt; d.day &lt;&lt; endl;
  d.showDate<span class="org-rainbow-delimiters-depth-2">()</span>;
  d.showDate2<span class="org-rainbow-delimiters-depth-2">()</span>;
  printDate<span class="org-rainbow-delimiters-depth-2">(</span>d<span class="org-rainbow-delimiters-depth-2">)</span>;

  cout &lt;&lt; <span class="org-string">"Year of date d is  = "</span> &lt;&lt; d.getYear<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; endl;
  cout &lt;&lt; <span class="org-string">"Month of date d is = "</span> &lt;&lt; d.getMonth<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; endl;

  printDate<span class="org-rainbow-delimiters-depth-2">(</span>makeDate<span class="org-rainbow-delimiters-depth-3">(</span>1996, 8, 20<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;

  <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Running:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ cppClasses1.cpp -o <span class="org-keyword">cppClasses1.bin&amp;&amp;</span> ./cppClasses1.bin
<span class="org-function-name">Date</span> (YMD) is = 1998-4-10
Date = 1998-4-10
Date = 1998-4-10
Date is 1998-4-10
Year of date d is  = 1998
Month of date d is = 4
Date is 1996-8-20
</pre>
</div>
</div>
</div>

<div id="outline-container-org7c4259b" class="outline-3">
<h3 id="org7c4259b"><span class="section-number-3">1.19</span> Conversion Constructor X Explicit Constructor - explicit keyword</h3>
<div class="outline-text-3" id="text-1-19">
<p>
A converting constructor (aka conversion constructor or implicit
constructor) is any constructor member function callable with a single
argument not annotated with the <span class="underline">explicit</span> keyword. A converting
constructor allows implicit initialization by assignment or when
passing a parameter to a function. 
</p>

<p>
Example: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">TestClass</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
    <span class="org-comment-delimiter">// </span><span class="org-comment">Constructor 1: Conversion constructor </span>
    <span class="org-function-name">TestClass</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">)</span>
       : m_x<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">" [LOG] Intialize m_x = %d\n"</span>, x<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Constructor 2: Conversion constructor </span>
    <span class="org-function-name">TestClass</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">char</span> <span class="org-variable-name">ch</span><span class="org-rainbow-delimiters-depth-2">)</span>
       : m_ch<span class="org-rainbow-delimiters-depth-2">(</span>ch<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">" [LOG] Intialize m_ch = %c\n"</span>, ch<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Constructor 3: Not conversion constructor / explicit constructor </span>
    <span class="org-keyword">explicit</span> <span class="org-function-name">TestClass</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">text</span><span class="org-rainbow-delimiters-depth-2">)</span>
       : m_text<span class="org-rainbow-delimiters-depth-2">(</span>text<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">" [LOG] Initialize m_text = %s\n"</span>, text.c_str<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Constructor 4: </span>
    <span class="org-function-name">TestClass</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-type">char</span> <span class="org-variable-name">ch</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"[LOG] Intialize m_x = %d - m_ch = %c\n"</span>, x, ch<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">void</span> <span class="org-function-name">show</span><span class="org-rainbow-delimiters-depth-2">(){</span>
         <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"[LOG] TestClass{ m_x = %d ; m_ch = '%c' ; m_text = '%s' }\n"</span>
         ,m_x, m_ch, m_text.c_str<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">--- Member variables ---- // </span>
    <span class="org-type">int</span>        <span class="org-variable-name">m_x</span>;
    <span class="org-type">char</span>       <span class="org-variable-name">m_ch</span>;
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">m_text</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

</pre>
</div>

<p>
Example: 
</p>

<ul class="org-ul">
<li>The constructors 1 and 2 not annotated with <span class="underline">explicit</span> allows
implicit initialization by assignment. While this behavior can be
useful, it can lead unintended type conversions. In order to avoid
the implicit conversion, it is necessary to annotate the member
function with explicit. After this modification, any attempt to
implicit conversion will yield a compilation error.</li>
</ul>

<p>
Testing conversion constructors:
</p>

<div class="org-src-container">
<pre class="src src-cpp">
&gt;&gt; TestClass cls1 = 100;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Intialize m_x = 100
&gt;&gt; 
&gt;&gt; TestClass cls2 = <span class="org-string">'k'</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Intialize m_ch = k

<span class="org-comment-delimiter">// </span><span class="org-comment">Show contents of cls1 and cls2 </span>
&gt;&gt; cls1.show<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">[</span>LOG<span class="org-rainbow-delimiters-depth-1">]</span> TestClass<span class="org-rainbow-delimiters-depth-1">{</span> m_x = 100 ; m_ch = <span class="org-warning">''</span> ; m_text = <span class="org-warning">''</span> <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

&gt;&gt; cls2.show<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">[</span>LOG<span class="org-rainbow-delimiters-depth-1">]</span> TestClass<span class="org-rainbow-delimiters-depth-1">{</span> m_x = 0 ; m_ch = <span class="org-string">'k'</span> ; m_text = <span class="org-warning">''</span> <span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; cls1 = 200;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Intialize m_x = 200
&gt;&gt; cls1 = 400;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Intialize m_x = 400
&gt;&gt; 
&gt;&gt; cls1.show<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">[</span>LOG<span class="org-rainbow-delimiters-depth-1">]</span> TestClass<span class="org-rainbow-delimiters-depth-1">{</span> m_x = 400 ; m_ch = <span class="org-string">'&#65533;'</span> ; m_text = <span class="org-warning">''</span> <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

</pre>
</div>

<p>
Testing explicit constructor (constructor 3 annotated with explicit):
</p>

<ul class="org-ul">
<li>It will result in a compiation error.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Compilation error - because constructor was annotated with explicit.</span>
&gt;&gt; TestClass cls3 = <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"binary data"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">ROOT_prompt_5</span>:1:11: error: no viable conversion from <span class="org-warning">'</span><span class="org-constant">std</span>::string<span class="org-warning">'</span> <span class="org-rainbow-delimiters-depth-1">(</span>aka <span class="org-warning">'</span><span class="org-type">basic_string</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-warning">'</span><span class="org-rainbow-delimiters-depth-1">)</span> to
      <span class="org-warning">'</span>TestClass<span class="org-warning">'</span>
TestClass cls3 = <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"binary data"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
          ^      ~~~~~~~~~~~~~~~~~~~~~~~~~~
<span class="org-function-name">input_line_15</span>:1:7: note: candidate constructor <span class="org-rainbow-delimiters-depth-1">(</span>the implicit <span class="org-type">copy</span> <span class="org-variable-name">constructor</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">not</span> viable: no known
      conversion from <span class="org-warning">'</span><span class="org-constant">std</span>::string<span class="org-warning">'</span> <span class="org-rainbow-delimiters-depth-1">(</span>aka <span class="org-warning">'</span><span class="org-type">basic_string</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-warning">'</span><span class="org-rainbow-delimiters-depth-1">)</span> to
      <span class="org-warning">'</span><span class="org-keyword">const</span> TestClass &amp;<span class="org-warning">'</span> <span class="org-keyword">for</span> 1st argument
</pre>
</div>

<p>
A constructor annoatated with explicit can only be initialized in the
following ways: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; TestClass cls3b<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"binary data"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Initialize m_text = binary data

&gt;&gt; TestClass cls3c<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"binary data"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Initialize m_text = binary data

&gt;&gt; <span class="org-keyword">auto</span> cls3d = TestClass<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"binary data"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Initialize m_text = binary data

&gt;&gt; <span class="org-keyword">auto</span> cls3e = TestClass<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-string">"binary data"</span><span class="org-rainbow-delimiters-depth-1">}</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Initialize m_text = binary data
&gt;&gt; 
</pre>
</div>

<p>
Functions and implicit constructors: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">clientCode</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">TestClass</span>&amp; <span class="org-variable-name">cls</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ==&gt; TestClass { m_x = %d ; m_ch = %c ; m_text = %s }\n"</span>,
    cls.m_x, cls.m_ch, cls.m_text.c_str<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; clientCode<span class="org-rainbow-delimiters-depth-1">(</span>10<span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>LOG<span class="org-rainbow-delimiters-depth-1">]</span> Intialize m_x = 10
 ==&gt; TestClass <span class="org-rainbow-delimiters-depth-1">{</span> m_x = 10 ; m_ch = &#65533; ; m_text =  <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

&gt;&gt; clientCode<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">'x'</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>LOG<span class="org-rainbow-delimiters-depth-1">]</span> Intialize m_ch = x
 ==&gt; TestClass <span class="org-rainbow-delimiters-depth-1">{</span> m_x = 305009792 ; m_ch = x ; m_text =  <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

<span class="org-comment-delimiter">//</span><span class="org-comment">===========&gt;  Implicit Conversion doesn't happen! ==============//  </span>

<span class="org-comment-delimiter">// </span><span class="org-comment">std::string cannot be implicit converted to TestClass since the </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">constructor is annoatated with 'explicit'. </span>
&gt;&gt; clientCode<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"helo world"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">ROOT_prompt_52</span>:1:1: error: no matching function <span class="org-keyword">for</span> call to <span class="org-warning">'</span>clientCode<span class="org-warning">'</span>
clientCode<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"helo world"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
^~~~~~~~~~
<span class="org-function-name">ROOT_prompt_45</span>:1:6: note: candidate function <span class="org-keyword">not</span> viable: no known conversion from <span class="org-warning">'</span><span class="org-constant">std</span>::string<span class="org-warning">'</span> <span class="org-rainbow-delimiters-depth-1">(</span>aka
      <span class="org-warning">'</span><span class="org-type">basic_string</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-warning">'</span><span class="org-rainbow-delimiters-depth-1">)</span> to <span class="org-warning">'</span><span class="org-keyword">const</span> TestClass<span class="org-warning">'</span> <span class="org-keyword">for</span> 1st argument
<span class="org-type">void</span> clientCode<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">TestClass</span>&amp; <span class="org-variable-name">cls</span><span class="org-rainbow-delimiters-depth-1">){</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">In this case, the only way to perform the operation is by calling</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">the constructor explicitly.</span>
&gt;&gt; clientCode<span class="org-rainbow-delimiters-depth-2">(</span>TestClass<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"helo world"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
 <span class="org-rainbow-delimiters-depth-2">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-2">]</span> Initialize m_text = helo world
 ==&gt; TestClass<span class="org-rainbow-delimiters-depth-2">{</span> m_x = 876161456 ; m_ch = <span class="org-string">'&#65533;'</span> ; m_text = <span class="org-warning">'</span>helo world<span class="org-warning">'</span> <span class="org-rainbow-delimiters-depth-2">}</span>
</pre>
</div>

<p>
Further reading: 
</p>
<ul class="org-ul">
<li><a href="http://doc.bccnsoft.com/docs/cppreference2015/en/cpp/language/implicit_cast.html">Implicit conversions - cppreference.com</a></li>
<li><a href="https://foonathan.net/blog/2017/10/11/explicit-assignment.html">foonathan::blog() - Write explicit constructors - but what about assignment?</a></li>
<li><a href="https://us7.proxysite.com/process.php?d=c+/jhdODjkv4sHHC7/RQPgWbtJ5O5I9zVZ9Cygk7QLQ6mLoQqx91dNnmQ5YkU1TwSjpU3PhqjvymyZ77PnD0M6esDzpuEm3res5tpzjq2r3VLz2s3shiyUONdvkj&amp;b=1">What is a converting constructor in C++ ? What is it for? - Stack Overflow</a></li>
<li><a href="https://msdn.microsoft.com/en-us/library/wwywka61.aspx">User-Defined Type Conversions (C++)</a></li>
<li><a href="https://akrzemi1.wordpress.com/2015/10/22/more-than-you-need/">More than you need | Andrzej's C++ blog</a></li>
<li><a href="https://softwareengineering.stackexchange.com/questions/190716/is-relying-on-implicit-argument-conversion-considered-dangerous">c++ - Is relying on implicit argument conversion considered dangerous? - Software Engineering Stack Exchange</a></li>
</ul>
</div>
</div>
<div id="outline-container-orge461d95" class="outline-3">
<h3 id="orge461d95"><span class="section-number-3">1.20</span> OOP Value Semantics X Reference Semantics</h3>
<div class="outline-text-3" id="text-1-20">
<p>
According to the - <a href="https://isocpp.org/wiki/faq/value-vs-ref-semantics">ISO C++</a>, value and reference semantics are defined
as: 
</p>

<blockquote>
<p>
With reference semantics, assignment is a pointer-copy (i.e., a
reference). Value (or copy) semantics mean assignment copies the
value, not just the pointer. C++ gives you the choice: use the
assignment operator to copy the value (copy/value semantics), or use
a pointer-copy to copy a pointer (reference semantics). C++ allows
you to override the assignment operator to do anything your heart
desires, however the default (and most common) choice is to copy the
value.
</p>
</blockquote>

<p>
<b>Definitions:</b>
</p>

<p>
<span class="underline">Reference Semantics</span>: Behavior where composite types are passed by
reference when assigned; passed as function or method parameters or
returned from functions. This is the default behavior of most object
oriented programming languages, except C++.
</p>

<p>
In Java, C#, Scala, Python and etc. Objects have reference semantics
by default. This example in Scala programming language shows how
<span class="underline">reference semantics</span> works in most languages.
</p>

<div class="org-src-container">
<pre class="src src-scala"><span class="org-keyword">class</span> <span class="org-type">Foo</span><span class="org-rainbow-delimiters-depth-1">(</span>name<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">_name</span> <span class="org-keyword">=</span> name
  <span class="org-keyword">def</span> <span class="org-function-name">setName</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    _name <span class="org-keyword">=</span> name
  <span class="org-keyword">def</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    name
  <span class="org-scala-font-lockXoverride">override</span> <span class="org-keyword">def</span> <span class="org-function-name">toString</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    s<span class="org-string">"Foo { name = </span><span class="org-variable-name">$name</span><span class="org-string"> }"</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">x</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>
<span class="org-function-name">x</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Primitive types have value semantics: assignment of variables of</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">primitive types, creates a copy, so both variables can be modified</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">without changing each other.</span>
scala&gt; <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">y</span> <span class="org-keyword">=</span> x
<span class="org-function-name">y</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">By modifying x, the value of y remains the same.</span>
scala&gt; x <span class="org-keyword">=</span> <span class="org-constant">25</span>
<span class="org-function-name">x</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">25</span>

scala&gt; y
<span class="org-function-name">res5</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>

scala&gt; 

<span class="org-comment-delimiter">//</span><span class="org-comment">===&gt; Composite and complexity types have reference semantics by default </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">in languages other than C++.</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">foo</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Foo</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"bar"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">foo</span><span class="org-keyword">:</span> <span class="org-type">Foo</span> <span class="org-keyword">=</span> <span class="org-constant">Foo</span> <span class="org-rainbow-delimiters-depth-1">{</span> name <span class="org-keyword">=</span> bar <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Assignment doesn't create a copy like assignment </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">of primitive type, actually the assignment creates </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">a reference to the object foo. As result, modifying </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">one of the objects, modifies the other.</span>
scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">bar</span> <span class="org-keyword">=</span> foo
<span class="org-function-name">bar</span><span class="org-keyword">:</span> <span class="org-type">Foo</span> <span class="org-keyword">=</span> <span class="org-constant">Foo</span> <span class="org-rainbow-delimiters-depth-1">{</span> name <span class="org-keyword">=</span> bar <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Modifying bar modifes foo. </span>
scala&gt; bar.setName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"something"</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; bar
<span class="org-function-name">res3</span><span class="org-keyword">:</span> <span class="org-type">Foo</span> <span class="org-keyword">=</span> <span class="org-constant">Foo</span> <span class="org-rainbow-delimiters-depth-1">{</span> name <span class="org-keyword">=</span> something <span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; foo
<span class="org-function-name">res4</span><span class="org-keyword">:</span> <span class="org-type">Foo</span> <span class="org-keyword">=</span> <span class="org-constant">Foo</span> <span class="org-rainbow-delimiters-depth-1">{</span> name <span class="org-keyword">=</span> something <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Passing as function parameter doesn't create a copy like in C++, </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">it passes the object by reference, so if the parameter is modified inside</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">the function, the original object will be modified too. </span>
 <span class="org-keyword">def</span> <span class="org-function-name">setFooPrint</span><span class="org-rainbow-delimiters-depth-1">(</span>param<span class="org-keyword">:</span> <span class="org-type">Foo</span><span class="org-rainbow-delimiters-depth-1">){</span>
   param.setName<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"dummy name"</span><span class="org-rainbow-delimiters-depth-2">)</span>
   println<span class="org-rainbow-delimiters-depth-2">(</span>foo<span class="org-rainbow-delimiters-depth-2">)</span>
 <span class="org-rainbow-delimiters-depth-1">}</span>

 scala&gt; setFooPrint<span class="org-rainbow-delimiters-depth-1">(</span>foo<span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-constant">Foo</span> <span class="org-rainbow-delimiters-depth-1">{</span> name <span class="org-keyword">=</span> dummy name <span class="org-rainbow-delimiters-depth-1">}</span>

 scala&gt; foo
 res8<span class="org-keyword">:</span> <span class="org-type">Foo</span> <span class="org-keyword">=</span> <span class="org-constant">Foo</span> <span class="org-rainbow-delimiters-depth-1">{</span> name <span class="org-keyword">=</span> dummy name <span class="org-rainbow-delimiters-depth-1">}</span>

 <span class="org-comment-delimiter">// </span><span class="org-comment">Returning an object from a function doesn't create a copy as would happen </span>
 <span class="org-comment-delimiter">// </span><span class="org-comment">with primitive types.</span>
 <span class="org-keyword">def</span> <span class="org-function-name">modifyReturn</span><span class="org-rainbow-delimiters-depth-1">(</span>param<span class="org-keyword">:</span> <span class="org-type">Foo</span>, newName<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
   param.setName<span class="org-rainbow-delimiters-depth-2">(</span>newName<span class="org-rainbow-delimiters-depth-2">)</span>
   param
 <span class="org-rainbow-delimiters-depth-1">}</span>
 scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">foob</span> <span class="org-keyword">=</span> modifyReturn<span class="org-rainbow-delimiters-depth-1">(</span>foo, <span class="org-string">"Scala + C++ + JNI == HPC"</span><span class="org-rainbow-delimiters-depth-1">)</span>
 foob<span class="org-keyword">:</span> <span class="org-type">Foo</span> <span class="org-keyword">=</span> <span class="org-constant">Foo</span> <span class="org-rainbow-delimiters-depth-1">{</span> name <span class="org-keyword">=</span> <span class="org-constant">Scala</span> + <span class="org-constant">C</span>++ + <span class="org-constant">JNI</span> == <span class="org-constant">HPC</span> <span class="org-rainbow-delimiters-depth-1">}</span>

 scala&gt; foo
 res9<span class="org-keyword">:</span> <span class="org-type">Foo</span> <span class="org-keyword">=</span> <span class="org-constant">Foo</span> <span class="org-rainbow-delimiters-depth-1">{</span> name <span class="org-keyword">=</span> <span class="org-constant">Scala</span> + <span class="org-constant">C</span>++ + <span class="org-constant">JNI</span> == <span class="org-constant">HPC</span> <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<span class="underline">Value Semantics</span>: Behavior where composite types such as instances of
classes are treated as primitive type such as booleans, integers or
float point numbers. In the value semantics, a copy is created when
variables are assigned; passed as parameters to functions or methods
and returned from functions. So modifying one of the variables doesn't
change the other. 
</p>

<p>
Unlike other languages, C++ uses value semantics by default, it means
that in operations such as assignment; returning objects from
functions and passing objects as parameters create a full copy of the
object, instead of creating a reference to the object as would happen
in most object oriented programming languages such as Java, C#,
Python, Ruby and etc. C++ also supports reference semantics, however
it is not the default behavior and unlike in the majority of
programming languages, requires explicit annotation to pass objects by
reference or create a reference to the object.
</p>

<p>
<b>Value Semantics in C++</b>
</p>

<p>
Example: demonstration of value semantics in C++ tested in the CERN's
C++ ROOT REPL:
</p>

<ul class="org-ul">
<li>Note: this code can be copied and pasted in the CERN's ROOT REPL.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">class</span> <span class="org-type">Foo</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
  <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">_name</span>;
<span class="org-function-name">public</span>:
  <span class="org-comment-delimiter">// </span><span class="org-comment">Constructor </span>
  <span class="org-function-name">Foo</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>:<span class="org-function-name">_name</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">){}</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">Copy constructor</span>
  <span class="org-comment-delimiter">//</span><span class="org-comment">--------------------------</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">Note: If it is not defined, the compiler, defines </span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">a default copy constructor. It was created to demonstrate</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">when the copy constructor is invoked.</span>
  <span class="org-function-name">Foo</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">Foo</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">){</span>
    _name = rhs._name;    
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Copy constructor invoked."</span> &lt;&lt; <span class="org-constant">std</span>::endl;    
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">Copy assignment-operator</span>
  <span class="org-comment-delimiter">//</span><span class="org-comment">--------------------------</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">Note: It is similar to the copy constructor and</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">default assignment copy-assignment-operator is created</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">by the compiler if the user doesn't define it.</span>
  <span class="org-type">Foo</span> <span class="org-keyword">operator</span><span class="org-function-name">=</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">Foo</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">){</span>    
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Copy-assignment operator invoked."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-keyword">return</span> Foo<span class="org-rainbow-delimiters-depth-3">(</span>rhs._name<span class="org-rainbow-delimiters-depth-3">)</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-type">void</span> <span class="org-function-name">setName</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">){</span>
    _name = name;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> _name;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-type">void</span> <span class="org-function-name">show</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Foo { name = "</span> &lt;&lt; _name &lt;&lt; <span class="org-string">" } "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-type">void</span> <span class="org-function-name">show2</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Foo { name = "</span> &lt;&lt; _name &lt;&lt; <span class="org-string">" } "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

</pre>
</div>

<p>
Assignment creates a copy, unlike in most OOP languages like Java, C#,
Python and so on. 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; Foo foo<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"foo"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = foo <span class="org-rainbow-delimiters-depth-1">}</span> 

<span class="org-comment-delimiter">// </span><span class="org-comment">Assingment creates a copy, unlike in most OO languages</span>
&gt;&gt; Foo bar = foo; 
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.

<span class="org-comment-delimiter">// </span><span class="org-comment">Modifying one of the objects, doens't change the other. </span>
&gt;&gt; bar.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = foo <span class="org-rainbow-delimiters-depth-1">}</span> 

&gt;&gt; bar.setName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"I am object bar"</span><span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; bar.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = I am object bar <span class="org-rainbow-delimiters-depth-1">}</span> 

&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = foo <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">foo and bar objects aren't the same as they have </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">different memory locations. </span>
&gt;&gt; &amp;foo == &amp;bar
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt;
</pre>
</div>

<p>
Primitive and composite types are passed by value in C++, unlike in
most OOP languages. So, it means that a copy of the object is created.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">setFooPrint</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Foo</span> <span class="org-variable-name">param</span>, <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-1">){</span>
  param.setName<span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">)</span>;
  param.show<span class="org-rainbow-delimiters-depth-2">()</span>;
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" name = "</span> &lt;&lt; param.getName<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Modifying the function paramenter, doesn't modify the passed object.</span>
&gt;&gt; setFooPrint<span class="org-rainbow-delimiters-depth-1">(</span>foo, <span class="org-string">"dummy name"</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>INFO<span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = dummy name <span class="org-rainbow-delimiters-depth-1">}</span> 
 name = dummy name

&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = foo <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 
</pre>
</div>

<p>
Returning an object from function, creates a copy of the object
instead of returning a reference to it like in Java, Scala, Python and
most languages.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">Foo</span> <span class="org-function-name">modifyReturn</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Foo</span> <span class="org-variable-name">param</span>, <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">newName</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  param.setName<span class="org-rainbow-delimiters-depth-2">(</span>newName<span class="org-rainbow-delimiters-depth-2">)</span>;
  <span class="org-keyword">return</span> param;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; <span class="org-keyword">auto</span> ret = modifyReturn<span class="org-rainbow-delimiters-depth-1">(</span>foo, <span class="org-string">"New name"</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>INFO<span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
 <span class="org-rainbow-delimiters-depth-1">[</span>INFO<span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Foo</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f54f0288050

&gt;&gt; &amp;ret == &amp;foo
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>

&gt;&gt; ret.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = New name <span class="org-rainbow-delimiters-depth-1">}</span> 

&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = foo <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 

</pre>
</div>

<p>
Value semantics and STL 
</p>

<ul class="org-ul">
<li>Objects can be stored in STL containers by value, reference or by
pointers.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">deque</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">Double ended queue collection </span>

&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>Foo<span class="org-rainbow-delimiters-depth-1">&gt;</span> xs;

<span class="org-comment-delimiter">// </span><span class="org-comment">Temporary objects are created on the stack, </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">copied to the deque data structure and then </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">put on the collection. </span>
<span class="org-comment-delimiter">// </span>
&gt;&gt; xs.push_back<span class="org-rainbow-delimiters-depth-1">(</span>Foo<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
&gt;&gt; xs.push_back<span class="org-rainbow-delimiters-depth-1">(</span>Foo<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"world"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
&gt;&gt; xs.push_back<span class="org-rainbow-delimiters-depth-1">(</span>Foo<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"value"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
&gt;&gt; xs.push_back<span class="org-rainbow-delimiters-depth-1">(</span>Foo<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"semantics"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
&gt;&gt; 

&gt;&gt; xs
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>Foo<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> @0x1393820, @0x1393840, @0x1393860, @0x1393880 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

&gt;&gt; xs.size<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 4
&gt;&gt; 

&gt;&gt; xs.at<span class="org-rainbow-delimiters-depth-1">(</span>0<span class="org-rainbow-delimiters-depth-1">)</span>.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = hello <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; xs.at<span class="org-rainbow-delimiters-depth-1">(</span>0<span class="org-rainbow-delimiters-depth-1">)</span>.show2<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = hello <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 
&gt;&gt; xs.at<span class="org-rainbow-delimiters-depth-1">(</span>2<span class="org-rainbow-delimiters-depth-1">)</span>.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = value <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Error: invoke const reference method which is not annotated with 'const'</span>
&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: xs<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> x.show<span class="org-rainbow-delimiters-depth-2">()</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">ROOT_prompt_56</span>:1:26: error: member function <span class="org-warning">'</span>show<span class="org-warning">'</span> <span class="org-keyword">not</span> viable: 
<span class="org-warning">'</span><span class="org-keyword">this</span><span class="org-warning">'</span> argument has type <span class="org-warning">'</span><span class="org-keyword">const</span> Foo<span class="org-warning">'</span>, but <span class="org-type">function</span> <span class="org-function-name">is</span> <span class="org-keyword">not</span> marked <span class="org-keyword">const</span>
<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: xs<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> x.show<span class="org-rainbow-delimiters-depth-2">()</span>; <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Works as show2() is annotated with 'const'</span>
&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: xs<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> x.show2<span class="org-rainbow-delimiters-depth-2">()</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = hello <span class="org-rainbow-delimiters-depth-1">}</span> 
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = world <span class="org-rainbow-delimiters-depth-1">}</span> 
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = value <span class="org-rainbow-delimiters-depth-1">}</span> 
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = semantics <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Watesful for-loop: performs uncessary copies which could slow down and inccur </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">on a significant performance overhead in case of a large object.</span>
&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">x</span>: xs<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> x.show<span class="org-rainbow-delimiters-depth-2">()</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = hello <span class="org-rainbow-delimiters-depth-1">}</span> 
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = world <span class="org-rainbow-delimiters-depth-1">}</span> 
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = value <span class="org-rainbow-delimiters-depth-1">}</span> 
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = semantics <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">By using emplace_back - a copy is not created.</span>
&gt;&gt; <span class="org-keyword">auto</span> xs2 = deque<span class="org-rainbow-delimiters-depth-1">&lt;</span>Foo<span class="org-rainbow-delimiters-depth-1">&gt;()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>Foo, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span>Foo<span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{}</span>
&gt;&gt; 
&gt;&gt; xs2.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; xs2.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"world"</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; xs2.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"value"</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; xs2.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"semantics"</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; xs2
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>Foo, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span>Foo<span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> @0x411ff30, @0x411ff50, @0x411ff70, @0x411ff90 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: xs2<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> x.show2<span class="org-rainbow-delimiters-depth-2">()</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = hello <span class="org-rainbow-delimiters-depth-1">}</span> 
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = world <span class="org-rainbow-delimiters-depth-1">}</span> 
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = value <span class="org-rainbow-delimiters-depth-1">}</span> 
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = semantics <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 
</pre>
</div>

<p>
<b>Reference Semantics in C++</b>
</p>

<p>
Unlike in most programming languages where reference semantics for
complex types such as object is the default behavior, in C++ reference
semantics requires explicit annotation with reference operator (&amp;) or
passing objects by pointer. 
</p>

<p>
The default behavior of passing by value cause significant memory and
performance overhead. In order to avoid unnecessary copies, it is
preferable to pass objects by reference with operator (&amp;) or by const
reference when the object is not supposed to be modified by the
function the objects are passed to.
</p>

<ul class="org-ul">
<li>Create a reference in assignment operation instead of a copy.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = foo <span class="org-rainbow-delimiters-depth-1">}</span> 

&gt;&gt; Foo&amp; ref1 = foo;

&gt;&gt; ref1.setName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"I am foo reference"</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = I am foo reference <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">The reference has the same memory location of foo.</span>
&gt;&gt; &amp;foo == &amp;ref1
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Passing a parameter by reference instead of passing it by
value. Note: that the copy constructor is not invoked when passing
by reference.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">setFooPrintRef</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Foo</span>&amp; <span class="org-variable-name">param</span>, <span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-1">){</span>
  param.setName<span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">)</span>;
  param.show<span class="org-rainbow-delimiters-depth-2">()</span>;
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" name = "</span> &lt;&lt; param.getName<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; setFooPrintRef<span class="org-rainbow-delimiters-depth-1">(</span>foo, <span class="org-string">"dummy name"</span><span class="org-rainbow-delimiters-depth-1">)</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = dummy name <span class="org-rainbow-delimiters-depth-1">}</span> 
 name = dummy name

&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = dummy name <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Returning objects from functions as references.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">Foo</span>&amp; <span class="org-function-name">modifyReturnRef</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Foo</span>&amp; <span class="org-variable-name">param</span>, <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">newName</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  param.setName<span class="org-rainbow-delimiters-depth-2">(</span>newName<span class="org-rainbow-delimiters-depth-2">)</span>;
  <span class="org-keyword">return</span> param;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; foo.setName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"unnamed"</span><span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; fooRefx.setName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"I am foo reference"</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = I am foo reference <span class="org-rainbow-delimiters-depth-1">}</span> 

&gt;&gt; &amp;foo == &amp;fooRefx
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">auto</span>&amp; fooRefAuto = modifyReturnRef<span class="org-rainbow-delimiters-depth-1">(</span>foo, <span class="org-string">"C++ type inference auto!"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Foo</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f54f0288010

&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = C++ type inference <span class="org-keyword">auto</span><span class="org-negation-char">!</span> <span class="org-rainbow-delimiters-depth-1">}</span> 

&gt;&gt; fooRefAuto.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = C++ type inference <span class="org-keyword">auto</span><span class="org-negation-char">!</span> <span class="org-rainbow-delimiters-depth-1">}</span> 

&gt;&gt; fooRefAuto.setName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"C++17"</span><span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = C++17 <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 

&gt;&gt; &amp;foo == &amp;fooRefAuto
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Const references cannot be modified as any attempt to change it
will result in a compile-time error.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; Foo foo<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"foo"</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = foo <span class="org-rainbow-delimiters-depth-1">}</span> 

&gt;&gt; foo.getName<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"foo"</span>

&gt;&gt; <span class="org-keyword">const</span> Foo&amp; fooRefConst = modifyReturnRef<span class="org-rainbow-delimiters-depth-1">(</span>foo, <span class="org-string">"C++ constant ref."</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">Foo</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fbf2003c010

&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = C++ constant ref. <span class="org-rainbow-delimiters-depth-1">}</span> 

&gt;&gt; foo.getName<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"C++ constant ref."</span>
&gt;&gt; 

&gt;&gt; fooRefConst.show2<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = C++ constant ref. <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Any attempt to call a method not annotated with const will result </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">in a compile-time error. </span>
&gt;&gt; fooRefConst.show<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">ROOT_prompt_52</span>:1:1: error: member function <span class="org-warning">'</span>show<span class="org-warning">'</span> <span class="org-keyword">not</span> viable: <span class="org-warning">'</span><span class="org-keyword">this</span><span class="org-warning">'</span> 
argument has type <span class="org-warning">'</span><span class="org-keyword">const</span> Foo<span class="org-warning">'</span>, but <span class="org-type">function</span> <span class="org-function-name">is</span> <span class="org-keyword">not</span> marked <span class="org-keyword">const</span>
fooRefConst.show<span class="org-rainbow-delimiters-depth-1">()</span>
^~~~~~~~~~~
<span class="org-function-name">ROOT_prompt_30</span>:1:6: note: <span class="org-warning">'</span>show<span class="org-warning">'</span> declared here
<span class="org-type">void</span> show<span class="org-rainbow-delimiters-depth-1">(){</span> 
</pre>
</div>

<p>
<b>Summary</b> 
</p>

<ul class="org-ul">
<li>Value Semantics X Reference Semantics
<ul class="org-ul">
<li><span class="underline">Value Semantics</span> -&gt; Objects are assigned, passed to functions and
return from functions as primitive types without being modified
as what is modified is a copy of the object. This is default
behavior of C++.

<ul class="org-ul">
<li>Object A = B; =&gt; (C++ Only) Creates object A as a copy of the object B.</li>

<li>Object A = B.copy() (C#, Java, Python &#x2026;) Creates object A as
copy of object B. As value-semantics is not the default
behavior in thoses languages, it is necessary to invoke some
deep copy method explicity.</li>
</ul></li>

<li><span class="underline">Reference Semantics</span> -&gt; Objects are passed by reference or
pointer; assigned by pointer and so on. Objects passed to
functions using reference semantics can modified. This is the
default behavior of Java, Python, C# and other programming
languages.

<ul class="org-ul">
<li>Object A = B; (C#, Java, Python &#x2026;) =&gt; The object A is
reference to object B. Any modification to A or B will modify
both as the refer to the same memory location.</li>

<li>Object&amp; A = B; (C++ only) =&gt; Creating a reference in C++
requires an explicit annotation with operator (&amp;) as it is
non-default behavior.</li>
</ul></li>
</ul></li>

<li>Most programming languages, except C++, use value-semantics for
primitive types and reference semantics for complex or composite
types such as classes due to performance reasons and avoid
uncessary copies.</li>

<li>C++ uses <span class="underline">values-semantics</span> by default for all types, unlike most
programming languages, when any primitive type or composite type such
as class when assigned, passed to functions or returned from 
functions, a copy is created and the original object is not
changed.</li>

<li><span class="underline">C++ supports both value and reference semantics</span> which is not
default for objects linke in Java, Python and other languages. The
reference semantics requires explicit annotation.</li>

<li>In order to avoid unncessary copies that can lead memory or
peformance overhead, it is preferable to use reference semantics.
In other words, large objects should be passed by reference, const
reference or pointer to functions or methods.</li>

<li>Move semantics optimizes return-by value avoiding unnecessary
copies. The copy overhead that happens when returning an object
from a function can be avoided by defining a move constructor (see
C++11's move semantics) which transfer resource ownership from the
object defined locally within the function body to the returned
object.</li>
</ul>

<p>
<b>Further Reading:</b>
</p>

<ul class="org-ul">
<li>ISO C++ - Reference and Value Semantics -
<a href="https://isocpp.org/wiki/faq/value-vs-ref-semantics">https://isocpp.org/wiki/faq/value-vs-ref-semantics</a>
<ul class="org-ul">
<li>Note: Provides a good and clear definition about what really is
value and reference semantics.</li>
</ul></li>

<li>Taligent Inc. 1995 - Reference and value semantics: C++ versus everything else
<ul class="org-ul">
<li><a href="https://root.cern.ch/TaligentDocs/TaligentOnline/DocumentRoot/1.0/Docs/books/WM/WM_85.html">https://root.cern.ch/TaligentDocs/TaligentOnline/DocumentRoot/1.0/Docs/books/WM/WM_85.html</a></li>
</ul></li>

<li>Andrezj's C++ blog - Value Semantics -
<a href="https://akrzemi1.wordpress.com/2012/02/03/value-semantics/">https://akrzemi1.wordpress.com/2012/02/03/value-semantics/</a></li>

<li>Value Semantics - Code of the danmed
<ul class="org-ul">
<li><a href="http://codeofthedamned.com/index.php/value-semantics">http://codeofthedamned.com/index.php/value-semantics</a></li>
</ul></li>

<li>What do value semantics and pointer semantics mean?
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/166033/what-do-value-semantics-and-pointer-semantics-mean">https://stackoverflow.com/questions/166033/what-do-value-semantics-and-pointer-semantics-mean</a></li>
</ul></li>

<li>MSDN - Value Types (Modern C++) -
<a href="https://msdn.microsoft.com/en-us/library/hh438479.aspx">https://msdn.microsoft.com/en-us/library/hh438479.aspx</a></li>

<li>My Precious Compile Time Bool (long introduction to Move
Semantics)
<ul class="org-ul">
<li><a href="https://medium.com/@gaussnoise/my-precious-compile-time-bool-long-introduction-to-move-semantics-c9ee73c370c7">https://medium.com/@gaussnoise/my-precious-compile-time-bool-long-introduction-to-move-semantics-c9ee73c370c7</a></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org1f42be6" class="outline-3">
<h3 id="org1f42be6"><span class="section-number-3">1.21</span> <span class="todo TODO">TODO</span> Memory Allocation - Stack X Heap</h3>
<div class="outline-text-3" id="text-1-21">
</div>
<div id="outline-container-orgab877cd" class="outline-4">
<h4 id="orgab877cd"><span class="section-number-4">1.21.1</span> Program/Process memory</h4>
<div class="outline-text-4" id="text-1-21-1">
<p>
The memory of a process or running program (compile object-code) can
be divided into the <span class="underline">segments</span>:
</p>

<ul class="org-ul">
<li><b>Code</b> (text segment):
<ul class="org-ul">
<li>Contains the program compiled as object-code. Generally, this
segment is read-only.</li>
</ul></li>

<li><b>Bss</b>:
<ul class="org-ul">
<li>Contains non-initialized global variables.</li>
</ul></li>

<li><b>Data</b>:
<ul class="org-ul">
<li>Contains intialized global variables.</li>
</ul></li>

<li><b>Stack</b> (aka Call-stack) or stack memory 
<ul class="org-ul">
<li>Contains function arguments and current function's <span class="underline">local variables</span>.</li>
<li>In C++, variables, objects and arrays are allocated on the stack
by default.</li>
<li>Variables: allocated at compile-time.</li>
<li>Stack-allocated variables are also called automatic variables.</li>
<li>Limit: Stack is limited, on Linux Kernel 8 kb (kbytes). Large
objects should not be allocated on the stack.</li>
<li>Memory management: Variables are automatically deleted when out
of scope.</li>
</ul></li>

<li><b>Heap</b> (dynamic memory or free-store)
<ul class="org-ul">
<li>Dynamically allocated variables or objects (variables allocated
with C++ new operator or C-malloc) are instatiated on the heap.</li>
<li>Example - heap-allocated array: <span class="underline">int* ptr = new int [10]</span>;</li>
<li>Variables: allocated at runtime.</li>
<li>Limit: The limit is the RAM memory or the virtual memory.</li>
<li>Memory management: Manual (C++ is not garbage collected), for
every statement with <span class="underline">new</span> operator, there must be a matching
delete operator releasing the allocated memory in order to avoid
memory leak.</li>
<li>Only accessible through pointers.</li>
</ul></li>
</ul>

<p>
Further reading: 
</p>
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Data_segment">Data segment - Wikipedia</a></li>
<li><a href="https://en.wikipedia.org/wiki/Memory_segmentation">Memory segmentation - Wikipedia</a></li>
<li><a href="https://en.wikipedia.org/wiki/Virtual_memory">Virtual memory - Wikipedia</a></li>
<li><a href="https://en.wikipedia.org/wiki/.bss">.bss - Wikipedia</a></li>
<li><a href="https://en.wikipedia.org/wiki/Page_table">Page table - Wikipedia</a></li>
<li><a href="https://wiki.osdev.org/ELF">ELF - OSDev Wiki</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgd13581d" class="outline-4">
<h4 id="orgd13581d"><span class="section-number-4">1.21.2</span> stack Allocation - Automatic Variables</h4>
<div class="outline-text-4" id="text-1-21-2">
</div>
<ol class="org-ol">
<li><a id="org5524e95"></a>Overview<br />
<div class="outline-text-5" id="text-1-21-2-1">
<p>
In C++, variables, objects or arrays defined inside functions are
allocated on the stack by default. The memory allocated is
automatically released when they go out scope, thus there is no need
to worry about allocation in this case. 
</p>

<p>
Stack allocation features: 
</p>

<ul class="org-ul">
<li>Variables allocated on the stack are also called <span class="underline">automatic variables</span>.</li>

<li>The array size cannot be changed at runtime and it cannot grow or
shrink. Therefore, it is not possible to allocate an array in this way:
<ul class="org-ul">
<li><span class="underline">int n = 10; double array[n]</span>;</li>
</ul></li>

<li><span class="underline">The stack has limited size</span>, the Linux Kernel has an 8 Mbs stack,
as a result, large objects cannot be allocated in the stack. So, if
one tries to allocate an array: <span class="underline">int array[1000000000]</span>, it will cause
segmentation fault.

<ul class="org-ul">
<li>TL;DR: Large objects should be allocated on the heap or dynamic
memory.</li>
</ul></li>

<li>Primitive type variable, objects and arrays are automatically
released (aka deleted) when they go out of scope. In the case of
objects, their dectructors methods or member functions are always
called.</li>
</ul>
</div>
</li>
<li><a id="orgba2bad9"></a>Example: Stack-allocated arrays<br />
<div class="outline-text-5" id="text-1-21-2-2">
<p>
Try to define/allocate a variable-size array. 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">int</span> k = 4;

<span class="org-comment-delimiter">// </span><span class="org-comment">Error: It is impossible to allocate variable-size array on stack or</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">static memory (as global variable).</span>
&gt;&gt; <span class="org-type">double</span> arr_flt<span class="org-rainbow-delimiters-depth-1">[</span>k<span class="org-rainbow-delimiters-depth-1">]</span>;
<span class="org-function-name">ROOT_prompt_38</span>:1:8: error: variable length array 
declaration <span class="org-keyword">not</span> allowed at file scope

</pre>
</div>

<p>
Defining an stack-allocated array with size set by const variable. In
C++, it is preferable to use const variable instead of preprocessor
macros for defining consts.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">DO NOT: #define arra_size 3 </span>
&gt;&gt; <span class="org-keyword">const</span> size_t arr_size = 3;
&gt;&gt; <span class="org-type">double</span> arr_flt<span class="org-rainbow-delimiters-depth-1">[</span>arr_size<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">[</span>3<span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 0.0000000, 0.0000000, 0.0000000 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 
</pre>
</div>


<p>
Defining an stack-allocated array, assuming that all statements are
executed inside a function.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Define array </span>
&gt;&gt; <span class="org-type">int</span> arr1<span class="org-rainbow-delimiters-depth-1">[</span>5<span class="org-rainbow-delimiters-depth-1">]</span>;

&gt;&gt; arr1
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-2">[</span>5<span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 0, 0, 0, 0, 0 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Set elements </span>
&gt;&gt; arr1<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> = 10, arr1<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> = 5; arr1<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span> = 6, arr1<span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span> = 9, arr1<span class="org-rainbow-delimiters-depth-1">[</span>4<span class="org-rainbow-delimiters-depth-1">]</span> = 15;
&gt;&gt; 

&gt;&gt; arr1
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-2">[</span>5<span class="org-rainbow-delimiters-depth-2">]</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 10, 5, 6, 9, 15 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Query elements </span>
&gt;&gt; arr1<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 10
&gt;&gt; arr1<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 6
&gt;&gt; arr1<span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 9
&gt;&gt; 
</pre>
</div>

<p>
Loop over array: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; 5; i++<span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" "</span> &lt;&lt; arr1<span class="org-rainbow-delimiters-depth-2">[</span>i<span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; <span class="org-string">"\n"</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
 10
 5
 6
 9
 15
&gt;&gt; 
</pre>
</div>

<p>
Array as a pointer: 
</p>

<ul class="org-ul">
<li>The array <span class="underline">arr1</span> is actually a pointer to its first element. This
array is a memory block of five consecutive allocated integers with
the same size.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">The array is actually a pointer to array[0] or the 0-th </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">first element of memory block.</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------------------------------</span>
&gt;&gt; *arr1
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 10
<span class="org-comment-delimiter">// </span><span class="org-comment">Second memory block </span>
&gt;&gt; *<span class="org-rainbow-delimiters-depth-1">(</span>arr1 + 1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 5
<span class="org-comment-delimiter">// </span><span class="org-comment">Third memory block </span>
&gt;&gt; *<span class="org-rainbow-delimiters-depth-1">(</span>arr1 + 2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 6
&gt;&gt; *<span class="org-rainbow-delimiters-depth-1">(</span>arr1 + 3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 9
&gt;&gt; *<span class="org-rainbow-delimiters-depth-1">(</span>arr1 + 4<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 15
&gt;&gt;

&gt;&gt; *<span class="org-rainbow-delimiters-depth-1">(</span>&amp;arr1<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> + 0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 10
&gt;&gt; *<span class="org-rainbow-delimiters-depth-1">(</span>&amp;arr1<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> + 1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 5
&gt;&gt; *<span class="org-rainbow-delimiters-depth-1">(</span>&amp;arr1<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> + 2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 6
&gt;&gt; *<span class="org-rainbow-delimiters-depth-1">(</span>&amp;arr1<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> + 3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 9
&gt;&gt; *<span class="org-rainbow-delimiters-depth-1">(</span>&amp;arr1<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> + 4<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 15
&gt;&gt; 
</pre>
</div>

<p>
Many ways to manipulate the third element (index 2):
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; *<span class="org-rainbow-delimiters-depth-1">(</span>&amp;arr1<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> + 2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 6
&gt;&gt; *<span class="org-rainbow-delimiters-depth-1">(</span>&amp;arr1<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> + 2<span class="org-rainbow-delimiters-depth-1">)</span> = 25
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 25
&gt;&gt; *<span class="org-rainbow-delimiters-depth-1">(</span>&amp;arr1<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> + 2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 25
&gt;&gt; arr1<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 25
&gt;&gt; 
</pre>
</div>

<p>
Passing arrays to functions: 
</p>

<ul class="org-ul">
<li>An array (C-arrays) is not aware of its size, thus this parameter
must be passed to functions alongside the array or pointer to
first element.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">printArray</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">size_t</span> <span class="org-variable-name">size</span>, <span class="org-type">int</span> <span class="org-variable-name">xs</span> <span class="org-rainbow-delimiters-depth-2">[]</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">size_t</span> <span class="org-variable-name">i</span> = 0; i &lt; size; i++<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; xs["</span> &lt;&lt; i &lt;&lt; <span class="org-string">"] = "</span> &lt;&lt; xs<span class="org-rainbow-delimiters-depth-2">[</span>i<span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-function-name">printArray2</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">size_t</span> <span class="org-variable-name">size</span>, <span class="org-type">int</span>* <span class="org-variable-name">xs</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">size_t</span> <span class="org-variable-name">i</span> = 0; i &lt; size; i++<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; xs["</span> &lt;&lt; i &lt;&lt; <span class="org-string">"] = "</span> &lt;&lt; xs<span class="org-rainbow-delimiters-depth-2">[</span>i<span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-function-name">printArray3</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">size_t</span> <span class="org-variable-name">size</span>, <span class="org-type">int</span>* <span class="org-variable-name">xs</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">size_t</span> <span class="org-variable-name">i</span> = 0; i &lt; size; i++<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; xs["</span> &lt;&lt; i &lt;&lt; <span class="org-string">"] = "</span> &lt;&lt; *<span class="org-rainbow-delimiters-depth-2">(</span>xs + i<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; printArray<span class="org-rainbow-delimiters-depth-1">(</span>5, arr1<span class="org-rainbow-delimiters-depth-1">)</span>
 =&gt; xs<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> = 10
 =&gt; xs<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> = 5
 =&gt; xs<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span> = 25
 =&gt; xs<span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span> = 9
 =&gt; xs<span class="org-rainbow-delimiters-depth-1">[</span>4<span class="org-rainbow-delimiters-depth-1">]</span> = 15
&gt;&gt; 

&gt;&gt; printArray2<span class="org-rainbow-delimiters-depth-1">(</span>5, arr1<span class="org-rainbow-delimiters-depth-1">)</span>
 =&gt; xs<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> = 10
 =&gt; xs<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> = 5
 =&gt; xs<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span> = 25
 =&gt; xs<span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span> = 9
 =&gt; xs<span class="org-rainbow-delimiters-depth-1">[</span>4<span class="org-rainbow-delimiters-depth-1">]</span> = 15

&gt;&gt; printArray2<span class="org-rainbow-delimiters-depth-1">(</span>3, arr1<span class="org-rainbow-delimiters-depth-1">)</span>
 =&gt; xs<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> = 10
 =&gt; xs<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> = 5
 =&gt; xs<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span> = 25
&gt;&gt; 

</pre>
</div>
</div>
</li>
<li><a id="org2c6aaa5"></a>Example: Stack-allocated objects<br />
<div class="outline-text-5" id="text-1-21-2-3">
<p>
Example: <b>Stack-allocated object.</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">class</span> <span class="org-type">SomeClass</span><span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">Internal state </span>
   <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">_id</span>; 
<span class="org-function-name">public</span>:
   <span class="org-comment-delimiter">// </span><span class="org-comment">Default constructor is created by the compiler</span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">if not defined. </span>
   <span class="org-function-name">SomeClass</span><span class="org-rainbow-delimiters-depth-2">()</span>
     : _id<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"unnamed"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{}</span>

   <span class="org-function-name">SomeClass</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">id</span><span class="org-rainbow-delimiters-depth-2">)</span>
      : _id<span class="org-rainbow-delimiters-depth-2">(</span>id<span class="org-rainbow-delimiters-depth-2">)</span> 
   <span class="org-rainbow-delimiters-depth-2">{</span>
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"[LOG] Object created = &lt;"</span> &lt;&lt; _id &lt;&lt; <span class="org-string">"&gt; \n"</span>; 
   <span class="org-rainbow-delimiters-depth-2">}</span>
   <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">(){</span> 
      <span class="org-keyword">return</span> _id;  
   <span class="org-rainbow-delimiters-depth-2">}</span>
   <span class="org-type">void</span> <span class="org-function-name">setID</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">id</span><span class="org-rainbow-delimiters-depth-2">){</span> 
      _id = id;  
   <span class="org-rainbow-delimiters-depth-2">}</span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">Copy-constructor is created by default by the compiler,</span>
   <span class="org-function-name">SomeClass</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">SomeClass</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"[LOG] Copy-constructo Object copyed = &lt;"</span> &lt;&lt; rhs._id &lt;&lt; <span class="org-string">"&gt;\n"</span>;
     <span class="org-keyword">this</span>-&gt;_id = rhs._id;
   <span class="org-rainbow-delimiters-depth-2">}</span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">Copy-assignment operator -</span>
   <span class="org-type">SomeClass</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">=</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">SomeClass</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"[LOG] Copy-assign operator Object copyed = &lt;"</span> &lt;&lt; rhs._id &lt;&lt; <span class="org-string">"&gt;\n"</span>;
     <span class="org-keyword">this</span>-&gt;_id = rhs._id;
     <span class="org-keyword">return</span> *<span class="org-keyword">this</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>

   <span class="org-comment-delimiter">// </span><span class="org-comment">Destructor - is always generated by compiler</span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">if not specified. </span>
   ~<span class="org-function-name">SomeClass</span><span class="org-rainbow-delimiters-depth-2">()</span>
   <span class="org-rainbow-delimiters-depth-2">{</span>
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"[LOG] I was deleted &lt;"</span> &lt;&lt; _id &lt;&lt; <span class="org-string">"&gt; "</span> &lt;&lt; <span class="org-string">"\n"</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
<b>Object - Allocated on stack or static memory</b>
</p>

<p>
Any object allocated on the stack (locally on the function) such as
the variable cls is automatically deleted when it goes out of scope. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Return reference.</span>
<span class="org-type">SomeClass</span>&amp; <span class="org-function-name">Function</span><span class="org-rainbow-delimiters-depth-1">(){</span>  
   <span class="org-type">SomeClass</span> <span class="org-variable-name">cls</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"object-1"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
   <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Object id = "</span> &lt;&lt; cls.getID<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
   <span class="org-keyword">return</span> cls;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Testing: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; SomeClass&amp; clsref = Function<span class="org-rainbow-delimiters-depth-1">()</span>

<span class="org-rainbow-delimiters-depth-1">[</span>LOG<span class="org-rainbow-delimiters-depth-1">]</span> Object created = <span class="org-rainbow-delimiters-depth-1">&lt;</span>object-1<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
Object id = object-1
<span class="org-rainbow-delimiters-depth-1">[</span>LOG<span class="org-rainbow-delimiters-depth-1">]</span> I was deleted <span class="org-rainbow-delimiters-depth-1">&lt;</span>object-1<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">(</span>SomeClass &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7ffcbbe2eed0

<span class="org-comment-delimiter">// </span><span class="org-comment">DO NOT DO IT! Reference to deleted object</span>
&gt;&gt; clsref.getID<span class="org-rainbow-delimiters-depth-1">()</span>

 *** Break *** segmentation violation
</pre>
</div>

<p>
<b>Stack-allocated array of objects</b>
</p>

<ul class="org-ul">
<li>An array of objects is always intialized with default-constructor</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">  &gt;&gt; SomeClass arr1<span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span>;
  <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy-constructo Object copyed = <span class="org-rainbow-delimiters-depth-1">&lt;</span>unnamed<span class="org-rainbow-delimiters-depth-1">&gt;</span>
  <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy-constructo Object copyed = <span class="org-rainbow-delimiters-depth-1">&lt;</span>unnamed<span class="org-rainbow-delimiters-depth-1">&gt;</span>
  <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy-constructo Object copyed = <span class="org-rainbow-delimiters-depth-1">&lt;</span>unnamed<span class="org-rainbow-delimiters-depth-1">&gt;</span>
  &gt;&gt; 

&gt;&gt; arr<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"unnamed"</span>
&gt;&gt; arr<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"unnamed"</span>
&gt;&gt; arr<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"unnamed"</span>
&gt;&gt; 
&gt;&gt; 

</pre>
</div>

<ul class="org-ul">
<li>Intialized array</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Intialized array </span>
&gt;&gt; SomeClass arr2<span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span> = <span class="org-rainbow-delimiters-depth-1">{</span> SomeClass<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"obj1"</span><span class="org-rainbow-delimiters-depth-2">)</span>, SomeClass<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"obj2"</span><span class="org-rainbow-delimiters-depth-2">)</span>, SomeClass<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"obj3"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Object created = <span class="org-rainbow-delimiters-depth-1">&lt;</span>obj1<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Object created = <span class="org-rainbow-delimiters-depth-1">&lt;</span>obj2<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Object created = <span class="org-rainbow-delimiters-depth-1">&lt;</span>obj3<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy-constructo Object copyed = <span class="org-rainbow-delimiters-depth-1">&lt;</span>obj1<span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy-constructo Object copyed = <span class="org-rainbow-delimiters-depth-1">&lt;</span>obj2<span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy-constructo Object copyed = <span class="org-rainbow-delimiters-depth-1">&lt;</span>obj3<span class="org-rainbow-delimiters-depth-1">&gt;</span>

&gt;&gt; arr2<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"obj1"</span>
&gt;&gt; arr2<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"obj2"</span>
&gt;&gt; arr2<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"obj3"</span>
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Uniform initialization </span>
&gt;&gt; SomeClass arr3<span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span> = <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"objA"</span><span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"objB"</span><span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"objC"</span><span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">}</span>;
&gt;&gt; SomeClass arr3<span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span> = <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"objA"</span><span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"objB"</span><span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"objC"</span><span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Object created = <span class="org-rainbow-delimiters-depth-1">&lt;</span>objA<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Object created = <span class="org-rainbow-delimiters-depth-1">&lt;</span>objB<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Object created = <span class="org-rainbow-delimiters-depth-1">&lt;</span>objC<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy-constructo Object copyed = <span class="org-rainbow-delimiters-depth-1">&lt;</span>objA<span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy-constructo Object copyed = <span class="org-rainbow-delimiters-depth-1">&lt;</span>objB<span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy-constructo Object copyed = <span class="org-rainbow-delimiters-depth-1">&lt;</span>objC<span class="org-rainbow-delimiters-depth-1">&gt;</span>
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Manipulating objects in array:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; arr1<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>.setID<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"O1"</span><span class="org-rainbow-delimiters-depth-1">)</span>, arr1<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>.setID<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"O2"</span><span class="org-rainbow-delimiters-depth-1">)</span>, arr1<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>.setID<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"O3"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; arr1<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"O1"</span>
&gt;&gt; arr1<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"O2"</span>
&gt;&gt; arr1<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"O3"</span>
&gt;&gt;
</pre>
</div>

<ul class="org-ul">
<li>Loop over array elements:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">showArray</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">size_t</span> <span class="org-variable-name">n</span>, <span class="org-type">SomeClass</span> <span class="org-variable-name">xs</span> <span class="org-rainbow-delimiters-depth-2">[]</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; n; i++<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"obj["</span> &lt;&lt; i &lt;&lt; <span class="org-string">"] = "</span> &lt;&lt; xs<span class="org-rainbow-delimiters-depth-2">[</span>i<span class="org-rainbow-delimiters-depth-2">]</span>.getID<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">", "</span>;
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span>;
  <span class="org-constant">std</span>::cout.flush<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; showArray<span class="org-rainbow-delimiters-depth-1">(</span>3, arr1<span class="org-rainbow-delimiters-depth-1">)</span>
obj<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> = O1, obj<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> = O2, obj<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span> = O3, 

&gt;&gt; showArray<span class="org-rainbow-delimiters-depth-1">(</span>3, arr2<span class="org-rainbow-delimiters-depth-1">)</span>
obj<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> = obj1, obj<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> = obj2, obj<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span> = obj3, 

&gt;&gt; showArray<span class="org-rainbow-delimiters-depth-1">(</span>3, arr3<span class="org-rainbow-delimiters-depth-1">)</span>
obj<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> = objA, obj<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> = objB, obj<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span> = objC, 
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Assign array elements:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; showArray<span class="org-rainbow-delimiters-depth-1">(</span>3, arr2<span class="org-rainbow-delimiters-depth-1">)</span>
obj<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> = obj1, obj<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> = obj2, obj<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span> = obj3, 
&gt;&gt; 

&gt;&gt; arr2<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> = SomeClass<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"1st-object"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Object created = <span class="org-rainbow-delimiters-depth-1">&lt;</span>1st-object<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy-assign <span class="org-keyword">operator</span> <span class="org-type">Object</span> copyed = <span class="org-rainbow-delimiters-depth-1">&lt;</span>1st-object<span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> I was <span class="org-type">deleted</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span>1st-object<span class="org-rainbow-delimiters-depth-1">&gt;</span> 

&gt;&gt; arr2<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"1st-object"</span>

&gt;&gt; arr2<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> =  <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-string">"2nd-element"</span><span class="org-rainbow-delimiters-depth-1">}</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">Uniform initialization</span>
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Object created = <span class="org-rainbow-delimiters-depth-1">&lt;</span>2nd-element<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy-assign <span class="org-keyword">operator</span> <span class="org-type">Object</span> copyed = <span class="org-rainbow-delimiters-depth-1">&lt;</span>2nd-element<span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> I was <span class="org-type">deleted</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span>2nd-element<span class="org-rainbow-delimiters-depth-1">&gt;</span> 

&gt;&gt; arr2<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"2nd-element"</span>
&gt;&gt; 

&gt;&gt; showArray<span class="org-rainbow-delimiters-depth-1">(</span>3, arr2<span class="org-rainbow-delimiters-depth-1">)</span>
obj<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> = 1st-object, obj<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> = 2nd-element, obj<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span> = obj3, 
</pre>
</div>

<ul class="org-ul">
<li>Defining an array inside a function:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">exampleFunction</span><span class="org-rainbow-delimiters-depth-1">(){</span>
  <span class="org-keyword">const</span> <span class="org-type">size_t</span> <span class="org-variable-name">n</span> = 4;
  <span class="org-comment-delimiter">// </span><span class="org-comment">Deleted when out of scope.</span>
  <span class="org-type">SomeClass</span> <span class="org-variable-name">xss</span> <span class="org-rainbow-delimiters-depth-2">[</span>n<span class="org-rainbow-delimiters-depth-2">]</span> = <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"C++98"</span><span class="org-rainbow-delimiters-depth-3">}</span>, <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"C++11"</span><span class="org-rainbow-delimiters-depth-3">}</span>, <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"C++17"</span><span class="org-rainbow-delimiters-depth-3">}</span>, <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"C++20"</span><span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">}</span> ;
  showArray<span class="org-rainbow-delimiters-depth-2">(</span>n, xss<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; exampleFunction<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">[</span>LOG<span class="org-rainbow-delimiters-depth-1">]</span> Object created = <span class="org-rainbow-delimiters-depth-1">&lt;</span>C++98<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Object created = <span class="org-rainbow-delimiters-depth-1">&lt;</span>C++11<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Object created = <span class="org-rainbow-delimiters-depth-1">&lt;</span>C++17<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Object created = <span class="org-rainbow-delimiters-depth-1">&lt;</span>C++20<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
obj<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> = C++98, obj<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> = C++11, obj<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span> = C++17, obj<span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span> = C++20, 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> I was <span class="org-type">deleted</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span>C++20<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> I was <span class="org-type">deleted</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span>C++17<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> I was <span class="org-type">deleted</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span>C++11<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> I was <span class="org-type">deleted</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span>C++98<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-orgbf6db14" class="outline-4">
<h4 id="orgbf6db14"><span class="section-number-4">1.21.3</span> Dynamic/Heap Allocation</h4>
<div class="outline-text-4" id="text-1-21-3">
</div>
<ol class="org-ol">
<li><a id="orgb3bb287"></a>Overview<br />
<div class="outline-text-5" id="text-1-21-3-1">
<p>
<b>When dynamic allocation is needed</b>
</p>

<p>
Situation where dynamic allocation is needed: 
</p>

<ul class="org-ul">
<li>The number of elements to be allocated is not known in advance.</li>
<li>The array or data structure needs to allocate more memory on
demand.</li>
<li>Return an instance of a polymorphic class from a function. (Factory
function.)</li>
<li>Type erasure: any object allocated on the heap can have its pointer
casted to void* and then casted back to the object type.</li>
</ul>

<p>
Note: 
</p>

<ul class="org-ul">
<li>Using new and delete with raw pointers is error prone and not
safe. In C++ &gt;= C++11, it is safer and better to use RAII technique
through the usage of smart pointers.
<ul class="org-ul">
<li>SUMMARY: Use std::unique_ptr or std::shared_ptr instead of new
and delete.</li>
</ul></li>

<li>Dynamic allocation of arrays is often not needed as STL containers
already encapsulates the heap allocation and automatically
allocate new memory when a new element is added.
<ul class="org-ul">
<li>SUMMARY: Use std::vector, std::array, std::deque instead of
dynamically allocated arrays.</li>
</ul></li>
</ul>

<p>
Potential pitfalls: 
</p>

<ul class="org-ul">
<li>Dangling pointer</li>
<li>Null-pointer access</li>
<li>Wild pointers</li>
<li>Heap corruption</li>
<li>Ownership Semantics</li>
<li>Non deterministic allocation on embedded systems or real time
systems.</li>
</ul>

<p>
<b>Operators new and delete for a single element</b>
</p>

<p>
The following code shows the general usage of the operator new.
</p>

<p>
Allocation with exception: 
</p>

<ul class="org-ul">
<li>Note: The operator <span class="underline">new</span> always throws an exception bad_alloc if the
allocation fails.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">try</span><span class="org-rainbow-delimiters-depth-1">{</span>
 <span class="org-type">Type</span>* <span class="org-variable-name">object_pointer1</span> = <span class="org-keyword">new</span> <span class="org-type">Type</span>;
 <span class="org-comment-delimiter">//  </span><span class="org-comment">Intialized with constructor arguments</span>
 <span class="org-type">Type</span>* <span class="org-variable-name">object_pointer2</span> = <span class="org-keyword">new</span> <span class="org-type">Type</span><span class="org-rainbow-delimiters-depth-2">(</span>arg0, arg1, arg2 ...<span class="org-rainbow-delimiters-depth-2">)</span>;
 <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">catch</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">bad_alloc</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"Error: failed to allocate memory."</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"Error = "</span> &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
    exit<span class="org-rainbow-delimiters-depth-2">(</span>1<span class="org-rainbow-delimiters-depth-2">)</span>;
 <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Allocation without exception:
</p>

<ul class="org-ul">
<li>When the allocation fails, the operator returns a null pointer.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">Type</span>* <span class="org-variable-name">object_pointer1</span> = <span class="org-keyword">new</span> <span class="org-rainbow-delimiters-depth-1">(</span>nothrow<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-type">Type</span>;
<span class="org-comment-delimiter">//  </span><span class="org-comment">Intialized with constructor arguments</span>
<span class="org-type">Type</span>* <span class="org-variable-name">object_pointer2</span> = <span class="org-keyword">new</span> <span class="org-rainbow-delimiters-depth-1">(</span>nothrow<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-type">Type</span><span class="org-rainbow-delimiters-depth-1">(</span>arg0, arg1, arg2 ...<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-negation-char">!</span>object_pointer1<span class="org-rainbow-delimiters-depth-1">){</span>
   <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"Error: failed to allocate memory for obj1."</span> &lt;&lt; <span class="org-string">"\n"</span>;
   exit<span class="org-rainbow-delimiters-depth-2">(</span>1<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>object_pointer1 == <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">){</span>
   <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"Error: failed to allocate memory for obj1."</span> &lt;&lt; <span class="org-string">"\n"</span>;
   exit<span class="org-rainbow-delimiters-depth-2">(</span>1<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Deallocation: 
</p>

<ul class="org-ul">
<li>After the heap-allocated object is no longer needed, it is
necessary to release the allocated memory by using the delete
operator.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">delete</span> object_pointer1;
<span class="org-comment-delimiter">// </span><span class="org-comment">A good practice is to set the pointer to null</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">after the object is released.</span>
object_pointer1 = <span class="org-constant">nullptr</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Deleting a null pointer is always safe and does nothing.  </span>
<span class="org-keyword">delete</span> object_pointer1;
</pre>
</div>


<p>
<b>Operators new and delete for array allocation</b>
</p>

<p>
An array of elements of type Type can be allocated on the heap with:
</p>

<p>
Allocation with exception: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">const</span> <span class="org-type">size_t</span> <span class="org-variable-name">SIZE</span> = 10;
<span class="org-keyword">try</span> <span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-type">Type</span>* <span class="org-variable-name">array_pointer</span> = <span class="org-keyword">new</span> <span class="org-type">Type</span> <span class="org-rainbow-delimiters-depth-2">[</span>SIZE<span class="org-rainbow-delimiters-depth-2">]</span>;
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">catch</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">bad_alloc</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"Error: failed to allocate memory."</span> &lt;&lt; <span class="org-string">"\n"</span>;
   <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"Error = "</span> &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Allocation without exception: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">const</span> <span class="org-type">size_t</span> <span class="org-variable-name">SIZE</span> = 10;
<span class="org-type">Type</span>* <span class="org-variable-name">array_pointer</span> = <span class="org-keyword">new</span> <span class="org-rainbow-delimiters-depth-1">(</span>nothrow<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-type">Type</span> <span class="org-rainbow-delimiters-depth-1">[</span>SIZE<span class="org-rainbow-delimiters-depth-1">]</span>;
<span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-negation-char">!</span>array_pointer<span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"Error: failed to allocate memory."</span> &lt;&lt; <span class="org-string">"\n"</span>;
  exit<span class="org-rainbow-delimiters-depth-2">(</span>1<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Or more explicitly</span>
<span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>array_pointer == <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"Error: failed to allocate memory."</span> &lt;&lt; <span class="org-string">"\n"</span>;
  exit<span class="org-rainbow-delimiters-depth-2">(</span>1<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Deallocation: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">delete</span> <span class="org-rainbow-delimiters-depth-1">[]</span> array_pointer;
</pre>
</div>
</div>
</li>

<li><a id="org27a2c9a"></a>Heap allocation for primitive types<br />
<div class="outline-text-5" id="text-1-21-3-2">
<p>
Allocation of single value on the heap: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">double</span>* ptr = <span class="org-keyword">new</span> <span class="org-rainbow-delimiters-depth-1">(</span>nothrow<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-type">double</span>;

&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>ptr != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"OK, proceed"</span> &lt;&lt; <span class="org-string">"\n"</span>;
OK, proceed
&gt;&gt; 

&gt;&gt; *ptr = 100.0;

&gt;&gt; *ptr
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 100.00000
&gt;&gt; 3.0 * *ptr
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 300.00000
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Always delete the pointer when the </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">allocated object is no longer needed.</span>
&gt;&gt; <span class="org-keyword">delete</span> ptr;

<span class="org-comment-delimiter">// </span><span class="org-comment">Always set the pointer to null </span>
&gt;&gt; ptr = <span class="org-constant">nullptr</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Deleting a null pointer is safe and does nothing.</span>
&gt;&gt; <span class="org-keyword">delete</span> ptr;
</pre>
</div>

<p>
Array allocation on the heap: 
</p>

<ul class="org-ul">
<li>Allocate array.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">size_t</span> <span class="org-variable-name">n</span> = 6;

<span class="org-comment-delimiter">// </span><span class="org-comment">Array of size 6</span>
<span class="org-type">int</span>* <span class="org-variable-name">arr</span> = <span class="org-keyword">new</span> <span class="org-rainbow-delimiters-depth-1">(</span>nothrow<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-1">[</span>n<span class="org-rainbow-delimiters-depth-1">]</span>;

&gt;&gt; arr
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x216cbf0

<span class="org-comment-delimiter">// </span><span class="org-comment">Not initialized, can have any value. </span>
&gt;&gt; arr<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 36003472
&gt;&gt; arr<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 0
&gt;&gt; arr<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 1864399218
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Set array elements:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; arr<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> = 10;
&gt;&gt; arr<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> = 0, arr<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> = 15, arr<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span> = 20, arr<span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span> = 90;
&gt;&gt; arr<span class="org-rainbow-delimiters-depth-1">[</span>4<span class="org-rainbow-delimiters-depth-1">]</span> = 4, arr<span class="org-rainbow-delimiters-depth-1">[</span>5<span class="org-rainbow-delimiters-depth-1">]</span> = 3;

&gt;&gt; arr<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 0
&gt;&gt; arr<span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 90
&gt;&gt; arr<span class="org-rainbow-delimiters-depth-1">[</span>5<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 3
&gt;&gt; 

</pre>
</div>

<ul class="org-ul">
<li>Access array elements with pointer offset.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Access with pointer + offset </span>
&gt;&gt; *<span class="org-rainbow-delimiters-depth-1">(</span>arr + 0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 0
&gt;&gt; *<span class="org-rainbow-delimiters-depth-1">(</span>arr + 1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 15
&gt;&gt; *<span class="org-rainbow-delimiters-depth-1">(</span>arr + 2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 20
&gt;&gt; *<span class="org-rainbow-delimiters-depth-1">(</span>arr + 3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 90
&gt;&gt; *<span class="org-rainbow-delimiters-depth-1">(</span>arr + 4<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 4
&gt;&gt; *<span class="org-rainbow-delimiters-depth-1">(</span>arr + 5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 3
&gt;&gt; 

&gt;&gt; *<span class="org-rainbow-delimiters-depth-1">(</span>arr + 3<span class="org-rainbow-delimiters-depth-1">)</span> = 100;
&gt;&gt; arr<span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 100
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Delete heap-allocated array.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">delete</span> <span class="org-rainbow-delimiters-depth-1">[]</span> arr;

<span class="org-comment-delimiter">// </span><span class="org-comment">Avoid dangling pointer</span>
&gt;&gt; arr = <span class="org-constant">nullptr</span>;
</pre>
</div>
</div>
</li>

<li><a id="org3980a5d"></a>Heap allocation for objects<br />
<div class="outline-text-5" id="text-1-21-3-3">
<p>
Consider the following testing class: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">class</span> <span class="org-type">SomeClass</span><span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">Internal state </span>
   <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">_id</span>; 
<span class="org-function-name">public</span>:
   <span class="org-comment-delimiter">// </span><span class="org-comment">Default constructor is created by the compiler</span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">if not defined. </span>
   <span class="org-function-name">SomeClass</span><span class="org-rainbow-delimiters-depth-2">()</span>
     : _id<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"unnamed"</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"[LOG] CTOR0 - Object created = &lt;"</span> &lt;&lt; _id &lt;&lt; <span class="org-string">"&gt; \n"</span>; 
   <span class="org-rainbow-delimiters-depth-2">}</span>
   <span class="org-function-name">SomeClass</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">id</span><span class="org-rainbow-delimiters-depth-2">)</span>
      : _id<span class="org-rainbow-delimiters-depth-2">(</span>id<span class="org-rainbow-delimiters-depth-2">)</span> 
   <span class="org-rainbow-delimiters-depth-2">{</span>
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"[LOG] Object created = &lt;"</span> &lt;&lt; _id &lt;&lt; <span class="org-string">"&gt; \n"</span>; 
   <span class="org-rainbow-delimiters-depth-2">}</span>
   <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">(){</span> 
      <span class="org-keyword">return</span> _id;  
   <span class="org-rainbow-delimiters-depth-2">}</span>
   <span class="org-type">void</span> <span class="org-function-name">setID</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">id</span><span class="org-rainbow-delimiters-depth-2">){</span> 
      _id = id;  
   <span class="org-rainbow-delimiters-depth-2">}</span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">Copy-constructor is created by default by the compiler,</span>
   <span class="org-function-name">SomeClass</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">SomeClass</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"[LOG] Copy-constructo Object copyed = &lt;"</span> &lt;&lt; rhs._id &lt;&lt; <span class="org-string">"&gt;\n"</span>;
     <span class="org-keyword">this</span>-&gt;_id = rhs._id;
   <span class="org-rainbow-delimiters-depth-2">}</span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">Copy-assignment operator -</span>
   <span class="org-type">SomeClass</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">=</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">SomeClass</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"[LOG] Copy-assign operator Object copyed = &lt;"</span> &lt;&lt; rhs._id &lt;&lt; <span class="org-string">"&gt;\n"</span>;
     <span class="org-keyword">this</span>-&gt;_id = rhs._id;
     <span class="org-keyword">return</span> *<span class="org-keyword">this</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>

   <span class="org-comment-delimiter">// </span><span class="org-comment">Destructor - is always generated by compiler</span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">if not specified. </span>
   ~<span class="org-function-name">SomeClass</span><span class="org-rainbow-delimiters-depth-2">()</span>
   <span class="org-rainbow-delimiters-depth-2">{</span>
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"[LOG] I was deleted &lt;"</span> &lt;&lt; _id &lt;&lt; <span class="org-string">"&gt; "</span> &lt;&lt; <span class="org-string">"\n"</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
<b>Creating a single object on the heap:</b>
</p>

<p>
Create object:
</p>

<div class="org-src-container">
<pre class="src src-cpp"> <span class="org-comment-delimiter">// </span><span class="org-comment">SomeClass* heapPtr = new (nothrow) SomeClass</span>
&gt;&gt; SomeClass* heapPtr = <span class="org-keyword">new</span> <span class="org-rainbow-delimiters-depth-1">(</span>nothrow<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-type">SomeClass</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"heap-obj1"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">[</span>LOG<span class="org-rainbow-delimiters-depth-1">]</span> Object created = <span class="org-rainbow-delimiters-depth-1">&lt;</span>heap-obj1<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">SomeClass</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x2c10fe0
&gt;&gt; 

&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>heapPtr != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [LOG] Everything OK."</span> &lt;&lt; <span class="org-string">"\n"</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Everything OK.
&gt;&gt; 

&gt;&gt; heapPtr-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"heap-obj1"</span>
&gt;&gt; 
&gt;&gt; heapPtr-&gt;setID<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Object100"</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; heapPtr-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Object100"</span>
&gt;&gt; 
&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span>*heapPtr<span class="org-rainbow-delimiters-depth-1">)</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Object100"</span>
&gt;&gt; 
</pre>
</div>

<p>
Delete object:
</p>

<ul class="org-ul">
<li>The delete operator always invokes destructor.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">delete</span> heapPtr;
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> I was <span class="org-type">deleted</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span>Object100<span class="org-rainbow-delimiters-depth-1">&gt;</span> 

&gt;&gt; heapPtr = <span class="org-constant">nullptr</span>;
</pre>
</div>

<p>
<b>Creating an array of objects on the heap</b> 
</p>

<ul class="org-ul">
<li>Create array:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; SomeClass* p = <span class="org-keyword">new</span> <span class="org-rainbow-delimiters-depth-1">(</span>nothrow<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-type">SomeClass</span><span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span>;
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> CTOR0 - Object created = <span class="org-rainbow-delimiters-depth-1">&lt;</span>unnamed<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> CTOR0 - Object created = <span class="org-rainbow-delimiters-depth-1">&lt;</span>unnamed<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> CTOR0 - Object created = <span class="org-rainbow-delimiters-depth-1">&lt;</span>unnamed<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
&gt;&gt; 

&gt;&gt; p<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"unnamed"</span>
&gt;&gt; p<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"unnamed"</span>
&gt;&gt; p<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"unnamed"</span>
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Access elements</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">
<span class="org-comment-delimiter">// </span><span class="org-comment">Comman operator.</span>
&gt;&gt; p<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>.setID<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"obj0"</span><span class="org-rainbow-delimiters-depth-1">)</span>, p<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>.setID<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"obj1"</span><span class="org-rainbow-delimiters-depth-1">)</span>, p<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>.setID<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"obj2"</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; p<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"obj0"</span>

&gt;&gt; p<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"obj1"</span>

&gt;&gt; p<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"obj2"</span>
&gt;&gt;

</pre>
</div>

<ul class="org-ul">
<li>Access elements by pointer offset
<ul class="org-ul">
<li>Note: It is possible because the array is a pointer to the first
allocated element. Thus, an array is not aware of its size that
must be remembered and passed as function argument alongside the
array.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Get ID of first element </span>
&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span>p + 0<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"obj0"</span>
&gt;&gt; 
&gt;&gt; p-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"obj0"</span>

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span>p + 1<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"obj1"</span>

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span>p + 2<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"obj2"</span>

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span>p + 0<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;setID<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"elem-zero"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span>p + 1<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;setID<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"elem-one"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span>p + 2<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;setID<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"elem-two"</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span>p + 0<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"elem-zero"</span>
&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span>p + 1<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"elem-one"</span>
&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span>p + 2<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"elem-two"</span>
</pre>
</div>

<ul class="org-ul">
<li>Array assignment</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; p<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> = SomeClass<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"objA"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Object created = <span class="org-rainbow-delimiters-depth-1">&lt;</span>objA<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy-assign <span class="org-keyword">operator</span> <span class="org-type">Object</span> copyed = <span class="org-rainbow-delimiters-depth-1">&lt;</span>objA<span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> I was <span class="org-type">deleted</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span>objA<span class="org-rainbow-delimiters-depth-1">&gt;</span> 

&gt;&gt; p<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"objA"</span>
&gt;&gt; 

&gt;&gt; p<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> = <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-string">"ObjB"</span><span class="org-rainbow-delimiters-depth-1">}</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">Uniform initialization</span>
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Object created = <span class="org-rainbow-delimiters-depth-1">&lt;</span>ObjB<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy-assign <span class="org-keyword">operator</span> <span class="org-type">Object</span> copyed = <span class="org-rainbow-delimiters-depth-1">&lt;</span>ObjB<span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> I was <span class="org-type">deleted</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span>ObjB<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
&gt;&gt; 

&gt;&gt; p<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"ObjB"</span>
&gt;&gt; 

</pre>
</div>

<ul class="org-ul">
<li>Pass array to function:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">showArray</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">size_t</span> <span class="org-variable-name">n</span>, <span class="org-type">SomeClass</span> <span class="org-variable-name">xs</span> <span class="org-rainbow-delimiters-depth-2">[]</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; n; i++<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"obj["</span> &lt;&lt; i &lt;&lt; <span class="org-string">"] = "</span> &lt;&lt; xs<span class="org-rainbow-delimiters-depth-2">[</span>i<span class="org-rainbow-delimiters-depth-2">]</span>.getID<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">", "</span>;
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span>;
  <span class="org-constant">std</span>::cout.flush<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; showArray<span class="org-rainbow-delimiters-depth-1">(</span>3, p<span class="org-rainbow-delimiters-depth-1">)</span>
obj<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> = objA, obj<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> = ObjB, obj<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span> = elem-two, 
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Release memory by deleting the heap-allocated array.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">delete</span> <span class="org-rainbow-delimiters-depth-1">[]</span> p;
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> I was <span class="org-type">deleted</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span>elem-two<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> I was <span class="org-type">deleted</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span>ObjB<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> I was <span class="org-type">deleted</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span>objA<span class="org-rainbow-delimiters-depth-1">&gt;</span> 

&gt;&gt; p = <span class="org-constant">nullptr</span>;
&gt;&gt; 
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-org6f0f7b2" class="outline-4">
<h4 id="org6f0f7b2"><span class="section-number-4">1.21.4</span> Limits of stack and heap allocation</h4>
<div class="outline-text-4" id="text-1-21-4">
<p>
This small program aims to test the limits of stack and heap
allocation by allowing the user to set the size of a float point array
and whether its allocation will happen on stack or heap using
pre-processor directives. 
</p>

<p>
File: <a href="src/stack-allocation-test.cpp">file:src/stack-allocation-test.cpp</a>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">File:   stack-allocation-test </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Brief:  Test limits of stack or heap allocation. </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Author: Caio Rodrigues</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">------------------------------------------------------</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 

<span class="org-preprocessor">#if</span><span class="org-negation-char"><span class="org-preprocessor">n</span></span><span class="org-preprocessor">def</span> ARRAY_SIZE
<span class="org-preprocessor">   #define</span> <span class="org-variable-name">ARRAY_SIZE</span> 8000
<span class="org-preprocessor">#endif</span> 

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
    <span class="org-type">size_t</span> <span class="org-variable-name">sizeKB</span> = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>ARRAY_SIZE<span class="org-rainbow-delimiters-depth-2">)</span> * <span class="org-keyword">sizeof</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">)</span> / 1024;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [LOG] Number of elements = "</span> &lt;&lt; ARRAY_SIZE &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [LOG] Array size in Kbytes = "</span> &lt;&lt; sizeKB &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-preprocessor">    #if</span> <span class="org-negation-char">!</span><span class="org-preprocessor">defined</span> HEAP || HEAP == 0
       <span class="org-comment-delimiter">// </span><span class="org-comment">===&gt; Stack allocation </span>
       <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [LOG] Stack allocation."</span> &lt;&lt; <span class="org-string">"\n"</span>;
       <span class="org-type">double</span> <span class="org-variable-name">array</span> <span class="org-rainbow-delimiters-depth-2">[</span>ARRAY_SIZE<span class="org-rainbow-delimiters-depth-2">]</span>;
<span class="org-preprocessor">    #else</span>
       <span class="org-comment-delimiter">// </span><span class="org-comment">===&gt; Heap allocation </span>
       <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [LOG] Heap (dynamic memory) allocation."</span> &lt;&lt; <span class="org-string">"\n"</span>;
       <span class="org-comment-delimiter">// </span><span class="org-comment">Note: It throws std::bad_alloc exception. </span>
       <span class="org-type">double</span>* <span class="org-variable-name">array</span> = <span class="org-keyword">new</span> <span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">[</span>ARRAY_SIZE<span class="org-rainbow-delimiters-depth-2">]</span>;       
       <span class="org-keyword">delete</span> <span class="org-rainbow-delimiters-depth-2">[]</span> array;
<span class="org-preprocessor">    #endif</span>
       <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [LOG] Program ended gracefully OK."</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Testing stack-allocation limit:</b>
</p>

<ul class="org-ul">
<li>Note: Tested on Linux-64 bits - Kernel 4.16.3</li>

<li>Result: Core dump due to stack overflow happens when the array size is
10,000,000, 10 million doubles or 7812 kb (kbytes) or 7.6 Mb
(Megabytes). This behavior depends on the operating system and
may be not be the same on other operating systems or new Linux's
kernel versions.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ clang++ stack-allocation-test.cpp -o <span class="org-keyword">out.bin</span> -DHEAP=false -DARRAY_SIZE=100 &amp;&amp; ./out.bin
 [LOG] Number of elements = 100
 [LOG] Array size<span class="org-keyword"> in</span> Kbytes = 0
 [LOG] Stack allocation.
 [LOG] Program ended gracefully OK.

$ clang++ stack-allocation-test.cpp -o <span class="org-keyword">out.bin</span> -DHEAP=false -DARRAY_SIZE=1000000 &amp;&amp; ./out.bin
 [LOG] Number of elements = 1000000
 [LOG] Array size<span class="org-keyword"> in</span> Kbytes = 7812
 [LOG] Stack allocation.
 [LOG] Program ended gracefully OK.

$ clang++ stack-allocation-test.cpp -o <span class="org-keyword">out.bin</span> -DHEAP=false -DARRAY_SIZE=10000000 &amp;&amp; ./out.bin
Segmentation fault (core dumped)

$ ./out.bin
Segmentation fault (core dumped)
</pre>
</div>

<p>
<b>Testing heap (dynamic memory) allocation limit:</b>
</p>

<ul class="org-ul">
<li>Note: Tested on Linux-64 bits - Kernel 4.16.3</li>

<li>Result: bad_alloc exception happens when the array size is 10
billions or 78125000 kb (= 76293 Mb or 74 GB. The limit of the heap
allocation is the size of the virtual memory or RAM memory.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">10 millions</span>
$ clang++ stack-allocation-test.cpp -o <span class="org-keyword">out.bin</span> -DHEAP=true -DARRAY_SIZE=10000000 &amp;&amp; ./out.bin
 [LOG] Number of elements = 10000000
 [LOG] Array size<span class="org-keyword"> in</span> Kbytes = 78125
 [LOG] Heap (dynamic memory) allocation.
 [LOG] Program ended gracefully OK.

<span class="org-comment-delimiter"># </span><span class="org-comment">100 millions </span>
$ clang++ stack-allocation-test.cpp -o <span class="org-keyword">out.bin</span> -DHEAP=true -DARRAY_SIZE=100000000 &amp;&amp; ./out.bin
 [LOG] Number of elements = 100000000
 [LOG] Array size<span class="org-keyword"> in</span> Kbytes = 781250
 [LOG] Heap (dynamic memory) allocation.
 [LOG] Program ended gracefully OK.

<span class="org-comment-delimiter"># </span><span class="org-comment">10 billions</span>
$ clang++ stack-allocation-test.cpp -o <span class="org-keyword">out.bin</span> -DHEAP=true -DARRAY_SIZE=10000000000 &amp;&amp; ./out.bin
 [LOG] Number of elements = 10000000000
 [LOG] Array size<span class="org-keyword"> in</span> Kbytes = 78125000
 [LOG] Heap (dynamic memory) allocation.
terminate called after throwing an instance of <span class="org-string">'std::bad_alloc'</span>
  what():  std::bad_alloc
<span class="org-function-name">Aborted</span> (core dumped)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb04475c" class="outline-4">
<h4 id="orgb04475c"><span class="section-number-4">1.21.5</span> References and further reading</h4>
<div class="outline-text-4" id="text-1-21-5">
<p>
General: 
</p>

<ul class="org-ul">
<li><a href="https://www.gribblelab.org/CBootCamp/7_Memory_Stack_vs_Heap.html">7. Memory : Stack vs Heap</a></li>

<li><a href="http://www.yolinux.com/TUTORIALS/Cpp-DynamicMemory.html">C / C++ and Dynamic memory allocation</a></li>

<li><a href="http://www.modernescpp.com/index.php/strategies-for-the-allocation-of-memory">Strategies for the Allocation of Memory - ModernesCpp.com</a></li>

<li><a href="https://www.design-reuse.com/articles/25090/dynamic-memory-allocation-fragmentation-c.html">Dynamic Memory Allocation and Fragmentation in C and C++</a></li>

<li><a href="https://www.learncpp.com/cpp-tutorial/79-the-stack-and-the-heap/">7.9  The stack and the heap | Learn C++</a></li>

<li><b>CS 414: Operating Systems Fall 2005 - Operating Systems</b>
<ul class="org-ul">
<li><a href="http://www.cs.virginia.edu/~son/cs414.f05/lec11.slides.pdf">http://www.cs.virginia.edu/~son/cs414.f05/lec11.slides.pdf</a></li>
</ul></li>

<li><b>Thinking in C++, 2nd ed. Volume 1</b>
<ul class="org-ul">
<li><a href="http://www.cs.ust.hk/~dekai/library/ECKEL_Bruce/TICPP-2nd-ed-Vol-one/TICPP-2nd-ed-Vol-one-html/Chapter13.html">http://www.cs.ust.hk/~dekai/library/ECKEL_Bruce/TICPP-2nd-ed-Vol-one/TICPP-2nd-ed-Vol-one-html/Chapter13.html</a></li>
</ul></li>

<li><b>Dynamic Memory Allocation and Deallocation</b>
<ul class="org-ul">
<li><a href="http://www.umsl.edu/~lawtonb/224/dynamic0.html">http://www.umsl.edu/~lawtonb/224/dynamic0.html</a></li>
</ul></li>

<li><b>Dynamic Memory in Real Time Systems - a solution?</b>
<ul class="org-ul">
<li><a href="https://blogs.mentor.com/colinwalls/blog/2014/05/06/dynamic-memory-in-real-time-systems-a-solution/">https://blogs.mentor.com/colinwalls/blog/2014/05/06/dynamic-memory-in-real-time-systems-a-solution/</a></li>
</ul></li>

<li><b>Dynamic Memory Allocation in Critical Embedded Systems</b>
<ul class="org-ul">
<li><a href="https://critical.eschertech.com/2010/07/30/dynamic-memory-allocation-in-critical-embedded-systems/">https://critical.eschertech.com/2010/07/30/dynamic-memory-allocation-in-critical-embedded-systems/</a></li>
</ul></li>

<li><b>Favorite Tools: C++11 std::array</b>
<ul class="org-ul">
<li><a href="https://www.embeddedrelated.com/showarticle/1031.php">https://www.embeddedrelated.com/showarticle/1031.php</a></li>
</ul></li>
</ul>

<p>
C++ Idioms related to Heap-Allocation: 
</p>

<ul class="org-ul">
<li><a href="https://en.wikibooks.org/wiki/More_C++_Idioms/Requiring_or_Prohibiting_Heap-based_Objects">More C++ Idioms/Requiring or Prohibiting Heap-based Objects - Wikibooks, open books for an open world</a></li>
</ul>

<p>
Debugging: 
</p>

<ul class="org-ul">
<li><a href="https://www.eventhelix.com/RealtimeMantra/Basics/debugging_software_crashes_2.htm#.W-RbqB6YW00">Debugging Software Crashes in C and C++ - II</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org3decf15" class="outline-3">
<h3 id="org3decf15"><a id="ID-69b48bc0-1b18-4997-b954-3da566a3508a"></a><span class="section-number-3">1.22</span> OOP Object Lifecycle</h3>
<div class="outline-text-3" id="text-1-22">
<p>
This code shows how object lifecycle works in C++ by instrumenting
constructors and destructors member functions.
</p>

<ul class="org-ul">
<li>File: <a href="src/object-lifecycle.cpp">file:src/object-lifecycle.cpp</a></li>
<li>Online Compiler: <a href="https://rextester.com/QUQ52793">https://rextester.com/QUQ52793</a></li>
</ul>

<p>
C++ can allocated objects in three different areas or memories: 
</p>

<ul class="org-ul">
<li><b>stack</b> - Objects allocated by default on the stack when instantiated
inside functions, member functions or local scope. Objects
instantiated on the stack are automatically deleted or released
when they go out of scope and then the destructor is called.

<ul class="org-ul">
<li>Summary and further notes:
<ul class="org-ul">
<li>Objects allocated on the stack are automatically released when
they go out of scope.</li>
<li>There is a size limit for objects allocated on the stack which
depends on the operating system, therefore very large objects
allocated on the stack can cause segmentation fault. If it is
the case, it is better to allocate the object on the heap or
dynamic memory.</li>
</ul></li>
</ul></li>

<li><b>static memory</b> - Objects, declared outside functions or member
functions are instantiated on the static memory and they are only
deleted when the program finishes.</li>

<li><b>heap memory</b> - Objects are allocated on the heap memory (aka
dynamic memory) when they are instantiated with operator
<b>new</b>. Unlike stack or static allocated objects, heap allocated
objects are not automatically destroyed, so they must be released
manually with the <b>delete</b> operator. However, deleting heap-objects
manually is error prone since it is easy to forget to call delete
operator. A better approach to deal with heap object is to use C++
smart pointers that wraps raw pointers and automatically deletes
heap objects when they go out of scope.</li>
</ul>

<p>
Code Highlights: 
</p>

<ul class="org-ul">
<li>Object allocated in static memory - lives during the entire program
execution and are only destroyed when the program execution ends.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">DummyClass</span> <span class="org-variable-name">dummyGlobal</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"dummy-global"</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span> 
  ... ... 
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<ul class="org-ul">
<li>Object allocated in stack: (dummy1, dummy2, object d in testObject())</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"> <span class="org-comment-delimiter">// </span><span class="org-comment">... </span>
<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Allocated on stack </span>
    <span class="org-type">DummyClass</span> <span class="org-variable-name">dummy1</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"dummy1-stack"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-rainbow-delimiters-depth-2">{</span>
      <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ---- ENTER LOCAL SCOPE "</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
      TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Create local scope"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
      <span class="org-comment-delimiter">// </span><span class="org-comment">Allocated on stack </span>
      <span class="org-type">DummyClass</span> <span class="org-variable-name">dummy2</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"dummy2-stack-local-scope"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
          ... ... .. 
      <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">"EXIT LOCAL SCOPE "</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">dummy2 deleted here </span>

<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">dummy1 is deleted here </span>
</pre>
</div>

<ul class="org-ul">
<li>Objects allocated on the heap (dummyInHeap) must be released
manually or automatically with smart pointers (not used in this
code).
<ul class="org-ul">
<li>Note: For every object allocated on the heap,  it is necessary a
delete operator if smart pointers are not used.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-function-name">makeDummyHeap</span><span class="org-rainbow-delimiters-depth-1">()</span> -&gt; <span class="org-type">DummyClass</span>* <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">... ... </span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">Heap-allocated object </span>
  <span class="org-type">DummyClass</span>* <span class="org-variable-name">ptr</span> = <span class="org-keyword">new</span> <span class="org-type">DummyClass</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"dummy-heap"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
  <span class="org-comment-delimiter">// </span><span class="org-comment">...</span>
  <span class="org-keyword">return</span> ptr; 
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">... ... ... .</span>
  <span class="org-type">DummyClass</span>* <span class="org-variable-name">dummyInHeap</span> =  makeDummyHeap<span class="org-rainbow-delimiters-depth-2">()</span>;

  <span class="org-comment-delimiter">// </span><span class="org-comment">....   </span>
  dummyInHeap-&gt;speakWithUser<span class="org-rainbow-delimiters-depth-2">()</span>;
  <span class="org-comment-delimiter">// </span><span class="org-comment">....</span>

  <span class="org-keyword">delete</span> dummyInHeap;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<ul class="org-ul">
<li>Deterministic destructor

<ul class="org-ul">
<li>In C++, destructors are <b>deterministic</b>. They are always called
automatically when an object allocated on the static memory
(global object) or stack goes out of scope or an exception
happens. Due to this feature, it is safe to release resources like
allocated memory, database handlers, file handlers, socket
handlers or perform other cleanup tasks on the destructor. It is
the foundation of the RAAI technique/idiom - "Resource Acquisition
is Initialization".</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">try</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ---- ENTER LOCAL EXCEPTION SCOPE "</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
     <span class="org-type">DummyClass</span> <span class="org-variable-name">dummyException</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"dummy2-stack-local-scope"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     dummyException.speakWithUser<span class="org-rainbow-delimiters-depth-2">()</span>;
     <span class="org-keyword">throw</span> <span class="org-constant">std</span>::runtime_error<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ERROR Throw a failure for testing deterministic destructor"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ---- EXIT LOCAL EXCEPTION SCOPE "</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">catch</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">runtime_error</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ---- ENTER EXCEPTION HANDLER"</span> &lt;&lt; <span class="org-string">"\n\n"</span>;        
     <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"Failure = "</span> &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ---- EXIT EXCEPTION HANDLER"</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text"> ---- ENTER LOCAL EXCEPTION SCOPE 

object-lifecycle.cpp:21: - fun = DummyClass ; name = dummy2-stack-local-scope - I was created.
I am a dummy object called = dummy2-stack-local-scope
object-lifecycle.cpp:54: - fun = ~DummyClass ; name = dummy2-stack-local-scope - I was destroyed

 ---- ENTER EXCEPTION HANDLER

Failure =  ERROR Throw a failure for testing deterministic destructor

 ---- EXIT EXCEPTION HANDLER

</pre>
</div>


<p>
Complete Code: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">File:  object-lifecycle.cpp </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Brief: Demonstrate Object Lifecycle </span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#define</span> <span class="org-variable-name">DEBUG_TRACE</span>

<span class="org-preprocessor">#ifdef</span> DEBUG_TRACE
<span class="org-preprocessor">  #pragma</span> message <span class="org-string">"Logging Enabled"</span>
<span class="org-preprocessor">  #define</span> <span class="org-function-name">TRACE</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">msg</span><span class="org-rainbow-delimiters-depth-1">)</span> \
    <span class="org-constant">std</span>::cerr &lt;&lt; __FILE__ &lt;&lt; <span class="org-string">":"</span> &lt;&lt; __LINE__ &lt;&lt; <span class="org-string">": - fun = "</span> &lt;&lt; __FUNCTION__ &lt;&lt; <span class="org-string">" ; "</span> &lt;&lt; msg &lt;&lt; <span class="org-string">"\n"</span>
<span class="org-preprocessor">#else</span>
<span class="org-preprocessor">  #pragma</span> message <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Logging disabled"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-preprocessor">  #define</span> <span class="org-function-name">TRACE</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">msg</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-preprocessor">#endif</span> 

<span class="org-keyword">class</span> <span class="org-type">DummyClass</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
        <span class="org-comment-delimiter">// </span><span class="org-comment">Constructor </span>
        <span class="org-function-name">DummyClass</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>: <span class="org-function-name">_object_name</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">){</span>
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"name = "</span><span class="org-rainbow-delimiters-depth-4">)</span> + name + <span class="org-string">" - I was created."</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Copy constructor </span>
        <span class="org-function-name">DummyClass</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">DummyClass</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">){</span>
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Enter copy constructor"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"name = "</span> + _object_name + <span class="org-string">" - I was copied. "</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-keyword">this</span>-&gt;_object_name = rhs._object_name + <span class="org-string">"-COPIED"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Move constructor </span>
        <span class="org-function-name">DummyClass</span><span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-type">DummyClass</span>&amp;&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">){</span>
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Enter move constructor"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"name = "</span> + _object_name + <span class="org-string">" - I was moved"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-keyword">this</span>-&gt;_object_name = rhs._object_name + <span class="org-string">"-MOVED"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Copy assignment operator</span>
        <span class="org-type">DummyClass</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">=</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">DummyClass</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">){</span>
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Enter copy assignment operator"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"name = "</span> + _object_name + <span class="org-string">" - I was copied. "</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-keyword">this</span>-&gt;_object_name = rhs._object_name + <span class="org-string">"-COPIED"</span>;
                <span class="org-keyword">return</span> *<span class="org-keyword">this</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-comment-delimiter">//</span><span class="org-comment">DummyClass&amp; operator= (DummyClass&amp;&amp; rhs) = delete;</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Move assignment operator </span>
        <span class="org-type">DummyClass</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">=</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">DummyClass</span>&amp;&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">){</span>
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Enter move assignment operator"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"name = "</span> + _object_name + <span class="org-string">" - I was moved. "</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-keyword">this</span>-&gt;_object_name = rhs._object_name + <span class="org-string">"-MOVED"</span>;
                <span class="org-keyword">return</span> *<span class="org-keyword">this</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">Destructor </span>
        ~<span class="org-function-name">DummyClass</span><span class="org-rainbow-delimiters-depth-2">(){</span>
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"name = "</span><span class="org-rainbow-delimiters-depth-4">)</span> + _object_name  + <span class="org-string">" - I was destroyed"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-type">void</span> <span class="org-function-name">speakWithUser</span><span class="org-rainbow-delimiters-depth-2">(){</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"I am a dummy object called = "</span> &lt;&lt; _object_name &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-function-name">private</span>:
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">_object_name</span>;   
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Object allocated on the static memory </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">is deleted when the programs finishes. </span>
<span class="org-type">DummyClass</span> <span class="org-variable-name">dummyGlobal</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"dummy-global"</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-keyword">auto</span> <span class="org-function-name">testObject</span><span class="org-rainbow-delimiters-depth-1">()</span> -&gt; <span class="org-type">DummyClass</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ==&gt; ENTER FUNCTION  testObject()"</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
    TRACE<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Enter function"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-keyword">auto</span> <span class="org-variable-name">d</span>  = DummyClass<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"local-dummy-in-function"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        d.speakWithUser<span class="org-rainbow-delimiters-depth-2">()</span>;
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ==&gt; EXIT FUNCTION  testObject()"</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
    TRACE<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Exit function"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Object d is deleted here when it goes out scope</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">and then a copy of it is returned from here.</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Therefore, the copy constructor is invoked.</span>
        <span class="org-keyword">return</span> d;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">auto</span> <span class="org-function-name">makeDummyHeap</span><span class="org-rainbow-delimiters-depth-1">()</span> -&gt; <span class="org-type">DummyClass</span>* <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ==&gt; ENTER FUNCTION  makeDummyHeap()"</span> &lt;&lt; <span class="org-string">"\n\n"</span>;  
        <span class="org-comment-delimiter">// </span><span class="org-comment">Object allocated in dynamic memory, so it survives this scope</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">and is not deleted when returned from function. </span>
        <span class="org-type">DummyClass</span>* <span class="org-variable-name">ptr</span> = <span class="org-keyword">new</span> <span class="org-type">DummyClass</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"dummy-heap"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        ptr-&gt;speakWithUser<span class="org-rainbow-delimiters-depth-2">()</span>;
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ==&gt; EXIT FUNCTION  makeDummyHeap()"</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
        <span class="org-keyword">return</span> ptr; 
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">"ENTER FUNCTION MAIN"</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
        TRACE<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Main function started."</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Object allocated on the stack -&gt; auto storage class, it is</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">destroyed when it goes out of scope </span>
        <span class="org-type">DummyClass</span> <span class="org-variable-name">dummy1</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"dummy1-stack"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        dummy1.speakWithUser<span class="org-rainbow-delimiters-depth-2">()</span>;

        <span class="org-type">DummyClass</span>* <span class="org-variable-name">dummyInHeap</span> =  makeDummyHeap<span class="org-rainbow-delimiters-depth-2">()</span>;
        dummyInHeap-&gt;speakWithUser<span class="org-rainbow-delimiters-depth-2">()</span>;

        <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ---- ENTER LOCAL SCOPE "</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Create local scope"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-type">DummyClass</span> <span class="org-variable-name">dummy2</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"dummy2-stack-local-scope"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                dummy2.speakWithUser<span class="org-rainbow-delimiters-depth-3">()</span>;
                dummyGlobal.speakWithUser<span class="org-rainbow-delimiters-depth-3">()</span>;
                dummyInHeap-&gt;speakWithUser<span class="org-rainbow-delimiters-depth-3">()</span>;
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"End local scope"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-comment-delimiter">// </span><span class="org-comment">Object dummy2 deleted here</span>
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">"EXIT LOCAL SCOPE "</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>

        <span class="org-keyword">try</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ---- ENTER LOCAL EXCEPTION SCOPE "</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
                <span class="org-type">DummyClass</span> <span class="org-variable-name">dummyException</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"dummy2-stack-local-scope"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                dummyException.speakWithUser<span class="org-rainbow-delimiters-depth-3">()</span>;
                <span class="org-keyword">throw</span> <span class="org-constant">std</span>::runtime_error<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">" ERROR Throw a failure for testing deterministic destructor"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ---- EXIT LOCAL EXCEPTION SCOPE "</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">catch</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">runtime_error</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-2">){</span>
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ---- ENTER EXCEPTION HANDLER"</span> &lt;&lt; <span class="org-string">"\n\n"</span>;     
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"Failure = "</span> &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ---- EXIT EXCEPTION HANDLER"</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>


        TRACE<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Copy object returned from function"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-type">DummyClass</span> <span class="org-variable-name">dummy2</span> = testObject<span class="org-rainbow-delimiters-depth-2">()</span>;
        dummy2.speakWithUser<span class="org-rainbow-delimiters-depth-2">()</span>;

        dummyInHeap-&gt;speakWithUser<span class="org-rainbow-delimiters-depth-2">()</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Objects allocated on the heap must be released manually or a</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">memory leak will happen. However, it is easy to forget to</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">delete a heap-allocated object, so the this approach is error</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">prone and better solution is to use C++11 smart pointers.</span>
        <span class="org-keyword">delete</span> dummyInHeap;

        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">"EXIT FUNCTION MAIN"</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
        TRACE<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Main function finished."</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-keyword">return</span> 0;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Object dummy1 and dummyGlobal deleted here </span>
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Complete Output: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ object-lifecycle.cpp -o <span class="org-keyword">object-lifecycle.bin</span> -g -std=c++1z -Wall -Wextra &amp;&amp; ./object-lifecycle.bin

<span class="org-function-name">object-lifecycle.cpp</span>:9:19: note: <span class="org-comment-delimiter">#</span><span class="org-comment">pragma message: Logging Enabled</span>
   <span class="org-comment-delimiter">#</span><span class="org-comment">pragma message "Logging Enabled"</span>
                   ^~~~~~~~~~~~~~~~~
<span class="org-function-name">object-lifecycle.cpp</span>:21: - fun = DummyClass ; name = dummy-global - I was created.

ENTER FUNCTION MAIN

<span class="org-function-name">object-lifecycle.cpp</span>:93: - fun = main ; Main <span class="org-keyword">function</span> <span class="org-function-name">started.</span>
<span class="org-function-name">object-lifecycle.cpp</span>:21: - fun = DummyClass ; name = dummy1-stack - I was created.
I am a dummy object called = dummy1-stack

 ==&gt; ENTER FUNCTION  makeDummyHeap()

<span class="org-function-name">object-lifecycle.cpp</span>:21: - fun = DummyClass ; name = dummy-heap - I was created.
I am a dummy object called = dummy-heap

 ==&gt; EXIT FUNCTION  makeDummyHeap()

I am a dummy object called = dummy-heap

 ---- ENTER LOCAL SCOPE 

<span class="org-function-name">object-lifecycle.cpp</span>:104: - fun = main ; Create local scope
<span class="org-function-name">object-lifecycle.cpp</span>:21: - fun = DummyClass ; name = dummy2-stack-local-scope - I was created.
I am a dummy object called = dummy2-stack-local-scope
I am a dummy object called = dummy-global
I am a dummy object called = dummy-heap
<span class="org-function-name">object-lifecycle.cpp</span>:109: - fun = main ; End local scope

EXIT LOCAL SCOPE 

<span class="org-function-name">object-lifecycle.cpp</span>:54: - fun = ~DummyClass ; name = dummy2-stack-local-scope - I was destroyed

 ---- ENTER LOCAL EXCEPTION SCOPE 

<span class="org-function-name">object-lifecycle.cpp</span>:21: - fun = DummyClass ; name = dummy2-stack-local-scope - I was created.
I am a dummy object called = dummy2-stack-local-scope
<span class="org-function-name">object-lifecycle.cpp</span>:54: - fun = ~DummyClass ; name = dummy2-stack-local-scope - I was destroyed

 ---- ENTER EXCEPTION HANDLER

Failure =  ERROR Throw a failure for testing deterministic destructor

 ---- EXIT EXCEPTION HANDLER

<span class="org-function-name">object-lifecycle.cpp</span>:127: - fun = main ; Copy object returned from <span class="org-keyword">function</span>

 ==&gt; ENTER FUNCTION  testObject()

<span class="org-function-name">object-lifecycle.cpp</span>:70: - fun = testObject ; Enter <span class="org-keyword">function</span>
<span class="org-function-name">object-lifecycle.cpp</span>:21: - fun = DummyClass ; name = local-dummy-in-function - I was created.
I am a dummy object called = local-dummy-in-function

 ==&gt; EXIT FUNCTION  testObject()

<span class="org-function-name">object-lifecycle.cpp</span>:74: - fun = testObject ; Exit <span class="org-keyword">function</span>
I am a dummy object called = local-dummy-in-function
I am a dummy object called = dummy-heap
<span class="org-function-name">object-lifecycle.cpp</span>:54: - fun = ~DummyClass ; name = dummy-heap - I was destroyed

EXIT FUNCTION MAIN

<span class="org-function-name">object-lifecycle.cpp</span>:140: - fun = main ; Main <span class="org-keyword">function</span> <span class="org-function-name">finished.</span>
<span class="org-function-name">object-lifecycle.cpp</span>:54: - fun = ~DummyClass ; name = local-dummy-in-function - I was destroyed
<span class="org-function-name">object-lifecycle.cpp</span>:54: - fun = ~DummyClass ; name = dummy1-stack - I was destroyed
<span class="org-function-name">object-lifecycle.cpp</span>:54: - fun = ~DummyClass ; name = dummy-global - I was destroyed
</pre>
</div>
</div>
</div>

<div id="outline-container-org545d51c" class="outline-3">
<h3 id="org545d51c"><span class="section-number-3">1.23</span> OOP Polymorphism and Inheritance</h3>
<div class="outline-text-3" id="text-1-23">
</div>
<div id="outline-container-org397a23f" class="outline-4">
<h4 id="org397a23f"><span class="section-number-4">1.23.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-23-1">
<p>
Dynamic or subtyping polymorphis is basically, the ability
of the client code to deal with any any instance of derived classes in
the same way it deals with an instance of the base class. 
</p>

<p>
In C++, it is only possible to use OOP subtyping polymorphism with
pointers or references. As a result, it is not possible to store
instances of base class in STL containers by value, or to create
polymorphic functions which return instance of derived classes by
value or take instance derived classes as argument passed by value.
</p>

<p>
To summarize: 
</p>

<ul class="org-ul">
<li>Object Oriented Polymorphism, is aso called:
<ul class="org-ul">
<li>Dynamic polymorphism</li>
<li>Runtime polymorphism</li>
</ul></li>
<li>In C++ it is only possible to use polymorphism with references or
pointers.</li>
<li>A polymorphic function which returns any instance of the derived
class casted as an instance of the base class can only return them
<b>by pointer to objects allocated on the heap</b> (dynamic memory) with
<b>new</b> operator. Functions like this are called factory functions and
in this case, it is better to wrap the pointer in smart pointer,
<code>unique_ptr</code> or <code>shared_ptr</code>.</li>
</ul>
</div>
</div>
<div id="outline-container-org5817e8f" class="outline-4">
<h4 id="org5817e8f"><span class="section-number-4">1.23.2</span> OOP - Dynamic Polymorphism in deep</h4>
<div class="outline-text-4" id="text-1-23-2">
<ul class="org-ul">
<li>File: <a href="src/polymorphism1.C">file:src/polymorphism1.C</a> (CLING - Script)</li>
</ul>

<p>
Classes in the script <a href="src/polymorphism1.C">file:src/polymorphism1.C</a>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
   <span class="org-function-name">Base</span><span class="org-rainbow-delimiters-depth-2">(){}</span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">Copy constructor</span>
   <span class="org-function-name">Base</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">Base</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">){</span>
       <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [TRACE] "</span> &lt;&lt; __FILE__ &lt;&lt; <span class="org-string">":"</span> &lt;&lt; __LINE__ &lt;&lt; <span class="org-string">" "</span>
                 &lt;&lt; <span class="org-string">" Base copy constructor invoked."</span> &lt;&lt; <span class="org-string">"\n"</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">Copy assignment operator</span>
   <span class="org-type">Base</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">=</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">Base</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [TRACE] "</span> &lt;&lt; __FILE__ &lt;&lt; <span class="org-string">":"</span> &lt;&lt; __LINE__ &lt;&lt; <span class="org-string">" "</span> 
                  &lt;&lt; <span class="org-string">" Base copy assignment operator invoked."</span> &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-keyword">return</span> *<span class="org-keyword">this</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">The base class always need a virtual</span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">destructor </span>
   <span class="org-keyword">virtual</span> ~<span class="org-function-name">Base</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;   

   <span class="org-keyword">virtual</span> <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">getType</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span>
      <span class="org-keyword">return</span> <span class="org-string">"Base"</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>    
   <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">getType2</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span>
      <span class="org-keyword">return</span> <span class="org-string">"Base"</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>
   <span class="org-type">void</span> <span class="org-function-name">showType</span><span class="org-rainbow-delimiters-depth-2">(){</span>
      <span class="org-comment-delimiter">// </span><span class="org-comment">OR: std::cout &lt;&lt; "Class type = " &lt;&lt; getType() &lt;&lt; "\n";</span>
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Class type = "</span> &lt;&lt; <span class="org-keyword">this</span>-&gt;getType<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">class</span> <span class="org-type">DerivedA</span>: <span class="org-keyword">public</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
    <span class="org-function-name">DerivedA</span><span class="org-rainbow-delimiters-depth-2">(){}</span>
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">getType</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-keyword">return</span> <span class="org-string">"DerivedA"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">getType2</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-keyword">return</span> <span class="org-string">"DerivedA"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>       
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">class</span> <span class="org-type">DerivedB</span>: <span class="org-keyword">public</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
   <span class="org-function-name">DerivedB</span><span class="org-rainbow-delimiters-depth-2">(){}</span>
   <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">getType</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span>
      <span class="org-keyword">return</span> <span class="org-string">"DerivedB"</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>
   <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">getType2</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span>
      <span class="org-keyword">return</span> <span class="org-string">"DerivedB"</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>        
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Load classes from script and create instances.
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; .L polymorphism1.C
Base base;
<span class="org-type">DerivedA</span> <span class="org-variable-name">da</span>;
<span class="org-type">DerivedB</span> <span class="org-variable-name">db</span>;
</pre>
</div>

<p>
<b>Testing methods:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Test method getType</span>
&gt;&gt; base.getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>

&gt;&gt; da.getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedA"</span>

&gt;&gt; db.getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedB"</span>
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Test method get</span>
&gt;&gt; base.showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = Base
&gt;&gt; da.showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = DerivedA
&gt;&gt; db.showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = DerivedB
&gt;&gt; 
</pre>
</div>

<p>
<b>Testing object slicing on assingment by value</b>
</p>

<ul class="org-ul">
<li>Object: slicing =&gt; Happens when the an object of derived class is
assigned to a base class object, the virtual methods overridden in
the derived class are sliced off from the derived class. As a
result, any method call performed by the assigned object will call
the method base version, instead of the method overridden by the
derived class.
<ul class="org-ul">
<li>Summary: An object loses its polymorphic abilities when assigned
by value.</li>
</ul></li>
<li>Note: assignment in C++, is different from assignment in Java and
other OO languages. In C++, the assignment copies the object from
right side to the assigned object discarding all previous state
from the assigned object. In Java and other OO languages, the
assignment copies the reference (pointer) from the right-hand side
object to the left-hand side object, thus the assigned object
becomes an alias or mirror to right-hand side object.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; base = da
 <span class="org-rainbow-delimiters-depth-1">[</span>TRACE<span class="org-rainbow-delimiters-depth-1">]</span> polymorphism1.C:19  Base copy assignment <span class="org-keyword">operator</span> <span class="org-type">invoked</span>.
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Base</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f9882578010
&gt;&gt; 
<span class="org-comment-delimiter">// </span><span class="org-comment">It should print "DerivedA", however due to object slicing, it prints "Base"</span>
&gt;&gt; base.getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>

&gt;&gt; base.showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = Base
&gt;&gt; 
&gt;&gt; 

&gt;&gt; da.getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedA"</span>
&gt;&gt; da.showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = DerivedA
</pre>
</div>

<p>
<b>Assignment by pointer</b>
</p>

<p>
The solution for avoiding object slicing on assignment is to assign by
pointer instead of assigning by value.
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; Base* p = <span class="org-constant">nullptr</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Point to object base ------------------------------------</span>
&gt;&gt; p = &amp;base;
&gt;&gt; p-&gt;getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>
&gt;&gt; p-&gt;getType2<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>
&gt;&gt; p-&gt;showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = Base
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Point to object da (class DerivedA)</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">------------------------------------</span>
&gt;&gt; p = &amp;da;
&gt;&gt; p-&gt;getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedA"</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Note: overriding doesn't work because getType2() is annotated as virtual&#183; </span>
&gt;&gt; p-&gt;getType2<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>
&gt;&gt; p-&gt;showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = DerivedA
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Point to object da (class DerivedB)</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">------------------------------------</span>
&gt;&gt; p = &amp;db;
&gt;&gt; p-&gt;getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedB"</span>
&gt;&gt; p-&gt;getType2<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>
&gt;&gt; p-&gt;showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = DerivedB
&gt;&gt; 
</pre>
</div>

<p>
<b>Assigning by reference</b>
</p>

<p>
Another solution for keeping the polymorphic behavior and avoid object
slicing is using references. 
</p>
<ul class="org-ul">
<li>Note: Unlike pointers, references cannot be reassigned once they
are created.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; Base&amp; refb = base;

&gt;&gt; refb.getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>

&gt;&gt; refb.getType2<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>

&gt;&gt; refb.showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = Base
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Failure: object slicing!</span>
&gt;&gt; refb = da;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">TRACE</span><span class="org-rainbow-delimiters-depth-1">]</span> polymorphism1.C:19  Base copy assignment <span class="org-keyword">operator</span> <span class="org-type">invoked</span>.
&gt;&gt; 
&gt;&gt; refb.getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>
&gt;&gt; refb.showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = Base
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Now, it works.</span>
&gt;&gt; Base&amp; refda = da;
&gt;&gt; refda.getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedA"</span>
&gt;&gt; refda.getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedA"</span>
&gt;&gt; refda.showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = DerivedA
&gt;&gt; refda.getType2<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>
</pre>
</div>

<p>
<b>Passing by value</b>
</p>

<p>
Testing object slicing on passing parameters by value: 
</p>
<ul class="org-ul">
<li>Object slicing also happens when objects are passed by value.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">printClassNameValue</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Base</span> <span class="org-variable-name">obj</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Object type is: "</span> &lt;&lt; obj.getType<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; printClassNameValue<span class="org-rainbow-delimiters-depth-1">(</span>base<span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>TRACE<span class="org-rainbow-delimiters-depth-1">]</span> polymorphism1.C:13  Base copy constructor invoked.
Object type is: Base
&gt;&gt; 
<span class="org-comment-delimiter">// </span><span class="org-comment">Should print Object type is: DerivedA </span>
&gt;&gt; printClassNameValue<span class="org-rainbow-delimiters-depth-1">(</span>da<span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>TRACE<span class="org-rainbow-delimiters-depth-1">]</span> polymorphism1.C:13  Base copy constructor invoked.
Object type is: Base
&gt;&gt; 
<span class="org-comment-delimiter">// </span><span class="org-comment">Should print Object type is: DerivedB </span>
&gt;&gt; printClassNameValue<span class="org-rainbow-delimiters-depth-1">(</span>db<span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>TRACE<span class="org-rainbow-delimiters-depth-1">]</span> polymorphism1.C:13  Base copy constructor invoked.
Object type is: Base
&gt;&gt; 
</pre>
</div>

<p>
<b>Passing by Pointer</b>
</p>

<p>
The solution for avoiding <b>object slicing</b> is passing objects by pointer
or reference:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Pass by pointer =&gt; Object slicling doesn't happen.</span>
<span class="org-type">void</span> <span class="org-function-name">printClassNamePtr</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">Base</span>* <span class="org-variable-name">obj</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Object type is: "</span> &lt;&lt; obj-&gt;getType<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; printClassNamePtr<span class="org-rainbow-delimiters-depth-1">(</span>&amp;base<span class="org-rainbow-delimiters-depth-1">)</span>
Object <span class="org-type">type</span> <span class="org-variable-name">is</span>: Base

&gt;&gt; printClassNamePtr<span class="org-rainbow-delimiters-depth-1">(</span>&amp;da<span class="org-rainbow-delimiters-depth-1">)</span>
Object <span class="org-type">type</span> <span class="org-variable-name">is</span>: DerivedA

&gt;&gt; printClassNamePtr<span class="org-rainbow-delimiters-depth-1">(</span>&amp;db<span class="org-rainbow-delimiters-depth-1">)</span>
Object <span class="org-type">type</span> <span class="org-variable-name">is</span>: DerivedB
&gt;&gt; 
&gt;&gt; Base* ptr = <span class="org-constant">nullptr</span>;
&gt;&gt; ptr = &amp;da;
&gt;&gt; printClassNamePtr<span class="org-rainbow-delimiters-depth-1">(</span>ptr<span class="org-rainbow-delimiters-depth-1">)</span>
Object <span class="org-type">type</span> <span class="org-variable-name">is</span>: DerivedA
&gt;&gt; 
&gt;&gt; ptr = &amp;db;
&gt;&gt; printClassNamePtr<span class="org-rainbow-delimiters-depth-1">(</span>ptr<span class="org-rainbow-delimiters-depth-1">)</span>
Object <span class="org-type">type</span> <span class="org-variable-name">is</span>: DerivedB
&gt;&gt; 

</pre>
</div>

<p>
<b>Passing by Reference</b>
</p>

<ul class="org-ul">
<li>Passing by reference
<ul class="org-ul">
<li>Note: In most object oriented languages, objects are passed by
reference by default, unlike C++ where objects are passed by
value.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">printClassNameRef</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">Base</span>&amp; <span class="org-variable-name">obj</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Object type is: "</span> &lt;&lt; obj.getType<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; printClassNameRef<span class="org-rainbow-delimiters-depth-1">(</span>base<span class="org-rainbow-delimiters-depth-1">)</span>
Object <span class="org-type">type</span> <span class="org-function-name">is</span>: Base

&gt;&gt; printClassNameRef<span class="org-rainbow-delimiters-depth-1">(</span>da<span class="org-rainbow-delimiters-depth-1">)</span>
Object <span class="org-type">type</span> <span class="org-function-name">is</span>: DerivedA

&gt;&gt; printClassNameRef<span class="org-rainbow-delimiters-depth-1">(</span>db<span class="org-rainbow-delimiters-depth-1">)</span>
Object <span class="org-type">type</span> <span class="org-variable-name">is</span>: DerivedB
&gt;&gt; 
</pre>
</div>

<p>
<b>Factory function:</b>
</p>

<ul class="org-ul">
<li>A factory function returns any instance of any derived class of a
given base class.</li>
</ul>

<p>
Object slicing also happens when polymorphic types are returned by
value: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">This factory functon will fail due to object slicing </span>
<span class="org-type">Base</span> <span class="org-function-name">factoryFunctionValue</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">type</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>type == <span class="org-string">"base"</span><span class="org-rainbow-delimiters-depth-2">)</span>
             <span class="org-keyword">return</span> Base<span class="org-rainbow-delimiters-depth-2">()</span>;
     <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>type == <span class="org-string">"da"</span><span class="org-rainbow-delimiters-depth-2">)</span>
             <span class="org-keyword">return</span> DerivedA<span class="org-rainbow-delimiters-depth-2">()</span>;
     <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>type == <span class="org-string">"db"</span><span class="org-rainbow-delimiters-depth-2">)</span>
             <span class="org-keyword">return</span> DerivedB<span class="org-rainbow-delimiters-depth-2">()</span>;
     <span class="org-keyword">throw</span> <span class="org-constant">std</span>::runtime_error<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Error: class type not found."</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; Base rbase = factoryFunctionValue<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"base"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Base</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f9882578038
&gt;&gt; rbase.getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>
&gt;&gt; rbase.showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = Base
&gt;&gt; 

&gt;&gt; Base rda = factoryFunctionValue<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"da"</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>TRACE<span class="org-rainbow-delimiters-depth-1">]</span>/home/archbox/root-scripts/polymorphism1.C:13  Base copy constructor invoked.
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Base</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f9882578040

<span class="org-comment-delimiter">// </span><span class="org-comment">Fails! It should return derivedA </span>
&gt;&gt; rda.getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>
&gt;&gt; rda.showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = Base
&gt;&gt; 
</pre>
</div>

<p>
A workaround to the object slicing problem could be returning by
reference. However, this approach doesn't work because the function
<span class="underline">factoryFunctionRef</span> returns a reference to the object p allocated on
the stack, which is destroyed when the function returns, thus any
attempt to use this returned reference to a destroyed object will
result in a segmentation fault.
</p>

<div class="org-src-container">
<pre class="src src-cpp"> <span class="org-comment-delimiter">// </span><span class="org-comment">This factory functon will fail due to object slicing </span>
<span class="org-type">Base</span>&amp; <span class="org-function-name">factoryFunctionRef</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">type</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-type">Base</span> <span class="org-variable-name">p</span>;
     <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>type == <span class="org-string">"base"</span><span class="org-rainbow-delimiters-depth-2">)</span>
        p = Base<span class="org-rainbow-delimiters-depth-2">()</span>;
     <span class="org-keyword">else</span> <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>type == <span class="org-string">"da"</span><span class="org-rainbow-delimiters-depth-2">)</span>
        p = DerivedA<span class="org-rainbow-delimiters-depth-2">()</span>;
     <span class="org-keyword">else</span> <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>type == <span class="org-string">"db"</span><span class="org-rainbow-delimiters-depth-2">)</span>
        p = DerivedB<span class="org-rainbow-delimiters-depth-2">()</span>;
     <span class="org-keyword">else</span> <span class="org-keyword">throw</span> <span class="org-constant">std</span>::runtime_error<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Error: class type not found."</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-keyword">return</span> p;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; Base&amp; retda2 = factoryFunctionRef<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"da"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">TRACE</span><span class="org-rainbow-delimiters-depth-1">]</span>/home/archbox/root-scripts/polymorphism1.C:19  Base copy assignment <span class="org-keyword">operator</span> <span class="org-type">invoked</span>.
&gt;&gt; retda2.getType<span class="org-rainbow-delimiters-depth-1">()</span>

 *** Break *** segmentation violation

</pre>
</div>

<p>
An alternative approach is to return a pointer an object allocated on
the heap. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">Base</span>* <span class="org-function-name">factoryFunctionRawPointer</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">type</span><span class="org-rainbow-delimiters-depth-1">){</span>
      <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>type == <span class="org-string">"base"</span><span class="org-rainbow-delimiters-depth-2">)</span>
         <span class="org-keyword">return</span> <span class="org-keyword">new</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-2">()</span>;
      <span class="org-keyword">else</span> <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>type == <span class="org-string">"da"</span><span class="org-rainbow-delimiters-depth-2">)</span>
         <span class="org-keyword">return</span> <span class="org-keyword">new</span> <span class="org-type">DerivedA</span><span class="org-rainbow-delimiters-depth-2">()</span>;
      <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>type == <span class="org-string">"db"</span><span class="org-rainbow-delimiters-depth-2">)</span>
         <span class="org-keyword">return</span> <span class="org-keyword">new</span> <span class="org-type">DerivedB</span><span class="org-rainbow-delimiters-depth-2">()</span>;
      <span class="org-keyword">return</span> <span class="org-constant">nullptr</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Instantiate of class Base</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">--------------------------------</span>
&gt;&gt; Base* ptr_base1 = factoryFunctionRawPointer<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"base"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Base</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x2564130
&gt;&gt; ptr_base1-&gt;getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>
&gt;&gt; ptr_base1-&gt;getType2<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>
&gt;&gt; ptr_base1-&gt;showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = Base
&gt;&gt; 
<span class="org-comment-delimiter">// </span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Every heap-allocated object must be disposed when no longer </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">needed by calling the operator delete. </span>
&gt;&gt; <span class="org-keyword">delete</span> ptr_base1 ;
<span class="org-comment-delimiter">// </span><span class="org-comment">It is advisable to set the pointer of disposed heap-allocated</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">object to null.</span>
&gt;&gt; ptr_base1 = <span class="org-constant">nullptr</span>;
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Instantiate of class DerivedA </span>
<span class="org-comment-delimiter">//</span><span class="org-comment">--------------------------------</span>
&gt;&gt; Base* ptr_da = factoryFunctionRawPointer<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"da"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Base</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x334e4c0

&gt;&gt; ptr_da-&gt;getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedA"</span>

&gt;&gt; ptr_da-&gt;getType2<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>

&gt;&gt; ptr_da-&gt;showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = DerivedA
&gt;&gt; 

&gt;&gt; <span class="org-keyword">delete</span> ptr_da;
&gt;&gt; ptr_da = <span class="org-constant">nullptr</span>;
&gt;&gt; 
</pre>
</div>

<p>
<b>Safer Factory Function with smart pointers</b>
</p>

<p>
The factory function factoryFunctionRawPointer is vulnerable to memory
leaks since it returns a raw pointer to a heap-allocated object which
needs to be disposed with the operator delete once the object is no
longer needed. However, it is easy to forget to call delete and to
track all possible return paths and objects needing this pointer. A
solution to this issue is to use smart pointers which are
stack-allocated objects that delete pointed objects when the the they
go out of scope. It is possible to use <code>unique_ptr</code> which is only
movable and not copiable or <code>shared_ptr</code> which is copiable.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Requires header: &lt;memory&gt;</span>
<span class="org-function-name">std</span>::<span class="org-type">unique_ptr</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>Base<span class="org-rainbow-delimiters-depth-1">&gt;</span> 
factoryFunctionSafe<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">type</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>type == <span class="org-string">"base"</span><span class="org-rainbow-delimiters-depth-2">)</span>
       <span class="org-keyword">return</span> <span class="org-constant">std</span>::make_unique<span class="org-rainbow-delimiters-depth-2">&lt;</span>Base<span class="org-rainbow-delimiters-depth-2">&gt;()</span>;
    <span class="org-keyword">else</span> <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>type == <span class="org-string">"da"</span><span class="org-rainbow-delimiters-depth-2">)</span>
       <span class="org-keyword">return</span> <span class="org-constant">std</span>::make_unique<span class="org-rainbow-delimiters-depth-2">&lt;</span>DerivedA<span class="org-rainbow-delimiters-depth-2">&gt;()</span>;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>type == <span class="org-string">"db"</span><span class="org-rainbow-delimiters-depth-2">)</span>
       <span class="org-keyword">return</span> <span class="org-constant">std</span>::make_unique<span class="org-rainbow-delimiters-depth-2">&lt;</span>DerivedB<span class="org-rainbow-delimiters-depth-2">&gt;()</span>;
    <span class="org-keyword">return</span> <span class="org-constant">nullptr</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> uptr_base = factoryFunctionSafe<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"base"</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; uptr_base
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">unique_ptr</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>Base, <span class="org-constant">std</span>::<span class="org-type">default_delete</span><span class="org-rainbow-delimiters-depth-3">&lt;</span>Base<span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f9882578088

&gt;&gt; uptr_base-&gt;getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>

&gt;&gt; uptr_base-&gt;showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = Base


&gt;&gt; <span class="org-keyword">auto</span> uptr_da = factoryFunctionSafe<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"da"</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; uptr_da-&gt;getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedA"</span>

&gt;&gt; uptr_da-&gt;getType2<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>

&gt;&gt; uptr_da-&gt;showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = DerivedA
</pre>
</div>

<p>
<b>STL Containers and Polymorphic Types</b> 
</p>

<ul class="org-ul">
<li>Storing by value =&gt; Leads to object slicing.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">NOTE: Objects base, da and db are copied to the vector, not stored in the vector.</span>
&gt;&gt;  <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>Base<span class="org-rainbow-delimiters-depth-1">&gt;</span> objlist = <span class="org-rainbow-delimiters-depth-1">{</span>base, da, db<span class="org-rainbow-delimiters-depth-1">}</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">TRACE</span><span class="org-rainbow-delimiters-depth-1">]</span> polymorphism1.C:13  Base copy constructor invoked.
 <span class="org-rainbow-delimiters-depth-1">[</span>TRACE<span class="org-rainbow-delimiters-depth-1">]</span> polymorphism1.C:13  Base copy constructor invoked.
 <span class="org-rainbow-delimiters-depth-1">[</span>TRACE<span class="org-rainbow-delimiters-depth-1">]</span> polymorphism1.C:13  Base copy constructor invoked.
 <span class="org-rainbow-delimiters-depth-1">[</span>TRACE<span class="org-rainbow-delimiters-depth-1">]</span> polymorphism1.C:13  Base copy constructor invoked.
 <span class="org-rainbow-delimiters-depth-1">[</span>TRACE<span class="org-rainbow-delimiters-depth-1">]</span> polymorphism1.C:13  Base copy constructor invoked.
 <span class="org-rainbow-delimiters-depth-1">[</span>TRACE<span class="org-rainbow-delimiters-depth-1">]</span> polymorphism1.C:13  Base copy constructor invoked.

 &gt;&gt; objlist<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>.getType<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>
 <span class="org-comment-delimiter">// </span><span class="org-comment">Expected DerivedA </span>
 &gt;&gt; objlist<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>.getType<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>
 <span class="org-comment-delimiter">// </span><span class="org-comment">Expected DerivedB</span>
 &gt;&gt; objlist<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>.getType<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>
 &gt;&gt; 

 <span class="org-comment-delimiter">// </span><span class="org-comment">Objects stored in the vector don't have </span>
 <span class="org-comment-delimiter">// </span><span class="org-comment">the same memory location as the following objects.</span>
 &gt;&gt; &amp;objlist<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span> == &amp;base
 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
 &gt;&gt; &amp;objlist<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span> == &amp;da
 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
 &gt;&gt; &amp;objlist<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span> == &amp;db
 <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
 &gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Storing by Pointer =&gt; Object Slicing does not happen.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> objects = <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Base</span>*<span class="org-rainbow-delimiters-depth-1">&gt;{}</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">Base</span> *, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">Base</span> *<span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{}</span>
&gt;&gt; objects.push_back<span class="org-rainbow-delimiters-depth-1">(</span>&amp;base<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; objects.push_back<span class="org-rainbow-delimiters-depth-1">(</span>&amp;da<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; objects.push_back<span class="org-rainbow-delimiters-depth-1">(</span>&amp;db<span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">e</span> : objects<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"type = "</span> &lt;&lt; e-&gt;getType<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;<span class="org-rainbow-delimiters-depth-1">}</span>
type = Base
type = DerivedA
type = DerivedB
&gt;&gt; 

&gt;&gt; 
&gt;&gt; objects<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>
&gt;&gt; objects<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = Base

&gt;&gt; objects<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedA"</span>
&gt;&gt; objects<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = DerivedA

&gt;&gt; objects<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedB"</span>
&gt;&gt; objects<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = DerivedB
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Storing by Reference (Since C++11 with reference wrapper) =&gt; Object
Slicing does not happen.
<ul class="org-ul">
<li>See: <a href="https://en.cppreference.com/w/cpp/utility/functional/reference_wrapper">std::reference_wrapper</a></li>
<li>Requires: C++11 and header &lt;functional&gt;</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">Provides: std::reference_wrapper</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">DOES NOT WORK: Ugly, cryptic and verbose  error!! </span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Base</span>&amp;<span class="org-rainbow-delimiters-depth-1">&gt;</span> objRef;
  18: error: <span class="org-warning">'</span>pointer<span class="org-warning">'</span> declared as a pointer to a reference of type <span class="org-warning">'</span>Base &amp;<span class="org-warning">'</span>
       <span class="org-keyword">typedef</span> _Tp*       pointer;

<span class="org-comment-delimiter">// </span><span class="org-comment">Header: </span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::<span class="org-type">reference_wrapper</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> objRef;
&gt;&gt; <span class="org-keyword">auto</span> objRefList = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::<span class="org-type">reference_wrapper</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">&gt;{}</span>;

&gt;&gt; objRefList.push_back<span class="org-rainbow-delimiters-depth-1">(</span>base<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; objRefList.push_back<span class="org-rainbow-delimiters-depth-1">(</span>da<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; objRefList.push_back<span class="org-rainbow-delimiters-depth-1">(</span>db<span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; objRefList<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>.get<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Base</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f3604aa6010

&gt;&gt; objRefList<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>.get<span class="org-rainbow-delimiters-depth-1">()</span>.getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>

&gt;&gt; objRefList<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>.get<span class="org-rainbow-delimiters-depth-1">()</span>.getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedA"</span>

&gt;&gt; objRefList<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>.get<span class="org-rainbow-delimiters-depth-1">()</span>.getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedB"</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">p</span>: objRefList<span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"type = "</span> &lt;&lt; p.get<span class="org-rainbow-delimiters-depth-2">()</span>.getType<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;<span class="org-rainbow-delimiters-depth-1">}</span>
type = Base
type = DerivedA
type = DerivedB
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Check whether objects stored in the vector were not copied.</span>
&gt;&gt; &amp;objRefList<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>.get<span class="org-rainbow-delimiters-depth-1">()</span> == &amp;base
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; &amp;objRefList<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>.get<span class="org-rainbow-delimiters-depth-1">()</span> == &amp;da
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; &amp;objRefList<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>.get<span class="org-rainbow-delimiters-depth-1">()</span> == &amp;db
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Storing objects heap-allocated objects (aka free store or dynamic memory)
<ul class="org-ul">
<li>Requires: C++11 + header &lt;memory&gt; which provides smart pointers.</li>
<li>See: <a href="http://www.cplusplus.com/reference/memory/">&lt;memory&gt;</a></li>
<li>In order to avoid memory leaks, it is better to store
heap-allocated objects in STL containers using smart pointers as
they delete the allocated objects when out of scope or an
exception happens (RAII). If raw pointers were used, the heap
allocated-objects would not be disposed automatically without the
<span class="underline">delete</span> operator, as a result, a memory leak could happen.</li>
<li>Note: this example assumes single ownership of the allocated
objects, in other words, only the container is responsible for
deleting the objects. So, shared_ptr is a better option when
multiple ownership is required,</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">memory</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Custom deleter type alias </span>
<span class="org-keyword">using</span> <span class="org-type">Deleter</span> = <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Base</span>*<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Type synonym for unique_ptr which manages objects </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">from class Base and its classes.</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">-----------------------------------</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">To use without the custom delter: </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">using Ubase = std::unique_ptr&lt;Base&gt;;</span>
<span class="org-keyword">using</span> <span class="org-type">Ubase</span> = <span class="org-constant">std</span>::<span class="org-type">unique_ptr</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Base</span>, <span class="org-type">Deleter</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Custom deleter used for logging </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">and demonstrate what the smart pointer does.</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">deleter</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">Base</span>* <span class="org-variable-name">b</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [TRACE] Deleted  object of type = "</span> &lt;&lt; b-&gt;getType<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
  <span class="org-keyword">delete</span> b;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">auto</span> <span class="org-variable-name">xlist</span> = <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Ubase</span><span class="org-rainbow-delimiters-depth-1">&gt;{}</span>;
xlist.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">Base</span>, deleter<span class="org-rainbow-delimiters-depth-1">)</span>
xlist.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">DerivedA</span>, deleter<span class="org-rainbow-delimiters-depth-1">)</span>
xlist.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">DerivedB</span>, deleter<span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; xlist<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>

&gt;&gt; xlist<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedA"</span>

&gt;&gt; xlist<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedB"</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; xlist.size<span class="org-rainbow-delimiters-depth-2">()</span>; i++<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"type = "</span> &lt;&lt; xlist<span class="org-rainbow-delimiters-depth-2">[</span>i<span class="org-rainbow-delimiters-depth-2">]</span>-&gt;getType<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;<span class="org-rainbow-delimiters-depth-1">}</span>
type = Base
type = DerivedA
type = DerivedB
&gt;&gt; 

&gt;&gt; xlist.clear<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>TRACE<span class="org-rainbow-delimiters-depth-1">]</span> Deleted  object of type = Base
 <span class="org-rainbow-delimiters-depth-1">[</span>TRACE<span class="org-rainbow-delimiters-depth-1">]</span> Deleted  object of type = DerivedA
 <span class="org-rainbow-delimiters-depth-1">[</span>TRACE<span class="org-rainbow-delimiters-depth-1">]</span> Deleted  object of type = DerivedB
&gt;&gt; 

&gt;&gt; xlist.size<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 0
&gt;&gt; 
</pre>
</div>

<p>
<b>Summary:</b> 
</p>

<ul class="org-ul">
<li>An object loses its polymorphic abilities if assigned by value,
passed by value or returned by value. It is called <b>object slicing</b>.</li>

<li>Polymorphic types cannot be stored by value in STL containers due
to object slicing. The only way to store them is by pointer or
reference.</li>

<li>In C++, polymorphism only works when objects are assigned by
pointer or reference or when passed by pointer or reference.
<ul class="org-ul">
<li><b>Polymorphism (dynamic) only works with references or pointers.</b></li>
</ul></li>

<li>Methods, aka member functions not annotated as virtual cannot be
overridden by derived classes.</li>

<li>The only way to return polymorphic objects from functions is to
return pointers (prone to memory leaks) or smart-pointers (safer)
to heap-allocated objects.</li>
</ul>
</div>
</div>
<div id="outline-container-org0f3cfe3" class="outline-4">
<h4 id="org0f3cfe3"><span class="section-number-4">1.23.3</span> Dynamic Polymorphism example - code</h4>
<div class="outline-text-4" id="text-1-23-3">
<p>
File: polymorphism.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">memory</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>   <span class="org-comment-delimiter">// </span><span class="org-comment">C++11 Smart pointers (unique_ptr and shared_ptr)</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">map</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>      <span class="org-comment-delimiter">// </span><span class="org-comment">Hash table, hash map or dictionary</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">deque</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cassert</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">assertions tests </span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Interface class </span>
<span class="org-keyword">class</span> <span class="org-type">GenericDBDriver</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
  <span class="org-function-name">GenericDBDriver</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
  <span class="org-keyword">virtual</span> <span class="org-keyword">auto</span> <span class="org-function-name">driverName</span><span class="org-rainbow-delimiters-depth-2">()</span>  <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> <span class="org-string">"generic"</span>;   
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">virtual</span> <span class="org-keyword">auto</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> <span class="org-string">"unknown"</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">virtual</span> <span class="org-keyword">auto</span> <span class="org-function-name">connect</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">url</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Connecting to generic driver url = "</span> &lt;&lt; url &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">virtual</span> <span class="org-keyword">auto</span> <span class="org-function-name">isConnected</span><span class="org-rainbow-delimiters-depth-2">()</span>  <span class="org-keyword">const</span> -&gt; <span class="org-type">bool</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> <span class="org-constant">false</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">Default destructor</span>
  <span class="org-keyword">virtual</span> ~<span class="org-function-name">GenericDBDriver</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Disconnecting from generic driver - id = "</span> &lt;&lt; <span class="org-string">"unknown"</span>&lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">class</span> <span class="org-type">DriverSQLiteDriver</span>: <span class="org-keyword">public</span> <span class="org-type">GenericDBDriver</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
  <span class="org-type">bool</span> <span class="org-variable-name">m_connected</span> = <span class="org-constant">false</span>;
  <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">m_id</span> = <span class="org-string">"unknown"</span>;
<span class="org-function-name">public</span>:
  <span class="org-function-name">DriverSQLiteDriver</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
  <span class="org-function-name">DriverSQLiteDriver</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>: <span class="org-function-name">m_id</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">){}</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Const keyword in this case indicates that the member function (method)</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">doesn't change the current object.</span>
  <span class="org-keyword">auto</span> <span class="org-function-name">driverName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">override</span><span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> <span class="org-string">"sqlite"</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">auto</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> m_id;
  <span class="org-rainbow-delimiters-depth-2">}</span>  
  <span class="org-comment-delimiter">// </span><span class="org-comment">This keyword override -&gt; indicates visually that the method</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">is being overriden and also provides some safety features which</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">helps to improve type-safety and compile-time correctness.</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">For instance, if member function (aka method) being overriden</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">is not annotated as virtual in the base class, this C++11 keyword</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">will generate a compile-time error. It also will generate a compile-time</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">error if the member function being overriden doesn't exist in the base class.  </span>
  <span class="org-keyword">auto</span> <span class="org-function-name">connect</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">url</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">void</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Connecting to "</span> &lt;&lt; url &lt;&lt; <span class="org-constant">std</span>::endl;
    m_connected = <span class="org-constant">true</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">auto</span> <span class="org-function-name">isConnected</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-type">bool</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> m_connected;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  ~<span class="org-function-name">DriverSQLiteDriver</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Disconnecting from PosgresDB - m_id = "</span> &lt;&lt; m_id &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;


<span class="org-keyword">class</span> <span class="org-type">DriverPostgresSQL</span>: <span class="org-keyword">public</span> <span class="org-type">GenericDBDriver</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
  <span class="org-type">bool</span> <span class="org-variable-name">m_connected</span> = <span class="org-constant">false</span>;
  <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">m_id</span> = <span class="org-string">"unknown"</span>;  
<span class="org-function-name">public</span>:
  <span class="org-comment-delimiter">// </span><span class="org-comment">DriverPostgresSQL () = default;</span>
  <span class="org-function-name">DriverPostgresSQL</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>: <span class="org-function-name">m_id</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">){}</span>

  <span class="org-keyword">auto</span> <span class="org-function-name">driverName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">override</span><span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> <span class="org-string">"PostGresSQL"</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">virtual</span> <span class="org-keyword">auto</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> m_id;
  <span class="org-rainbow-delimiters-depth-2">}</span>   
  <span class="org-keyword">auto</span> <span class="org-function-name">connect</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">url</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">void</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Connecting to "</span> &lt;&lt; url &lt;&lt; <span class="org-constant">std</span>::endl;
    m_connected = <span class="org-constant">true</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">auto</span> <span class="org-function-name">isConnected</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-type">bool</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> m_connected;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  ~<span class="org-function-name">DriverPostgresSQL</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Disconnecting from PostGresSQL - id = "</span> &lt;&lt; m_id &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>  
<span class="org-rainbow-delimiters-depth-1">}</span>;


<span class="org-keyword">class</span> <span class="org-type">DriverSQLServer</span> : <span class="org-keyword">public</span> <span class="org-type">GenericDBDriver</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
  <span class="org-type">bool</span> <span class="org-variable-name">m_connected</span> = <span class="org-constant">false</span>;
  <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">m_id</span> = <span class="org-string">"unknown"</span>;  
<span class="org-function-name">public</span>:
  <span class="org-function-name">DriverSQLServer</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
  <span class="org-function-name">DriverSQLServer</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>: <span class="org-function-name">m_id</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">){}</span>

  <span class="org-keyword">auto</span> <span class="org-function-name">driverName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">override</span><span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> <span class="org-string">"SQLServer"</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">auto</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> m_id;
  <span class="org-rainbow-delimiters-depth-2">}</span>    
  <span class="org-keyword">auto</span> <span class="org-function-name">connect</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">url</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">void</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Connecting to "</span> &lt;&lt; url &lt;&lt; <span class="org-constant">std</span>::endl;
    m_connected = <span class="org-constant">true</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">auto</span> <span class="org-function-name">isConnected</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-type">bool</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> m_connected;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  ~<span class="org-function-name">DriverSQLServer</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Disconnecting from SQLServer - id = "</span> &lt;&lt; m_id &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>  
<span class="org-rainbow-delimiters-depth-1">}</span>;


<span class="org-comment-delimiter">// </span><span class="org-comment">Non-polymorphi function -&gt; Parameters passed by value cannot be polymorphic</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">void showDriverStatus(const GenericDBDriver driver){ ... }</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Polymorphic function using references </span>
<span class="org-type">void</span> <span class="org-function-name">showDriverStatus1</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">GenericDBDriver</span>&amp; <span class="org-variable-name">driver</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::boolalpha;
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Driver = "</span> &lt;&lt; driver.driverName<span class="org-rainbow-delimiters-depth-2">()</span>
            &lt;&lt; <span class="org-string">" id = "</span> &lt;&lt; driver.getID<span class="org-rainbow-delimiters-depth-2">()</span>
            &lt;&lt; <span class="org-string">" ; status = "</span> &lt;&lt; driver.isConnected<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt;  <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Polymorphic function using pointers </span>
<span class="org-type">void</span> <span class="org-function-name">showDriverStatus2</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">GenericDBDriver</span>* <span class="org-variable-name">driver</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::boolalpha;
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Driver = "</span> &lt;&lt; driver-&gt;driverName<span class="org-rainbow-delimiters-depth-2">()</span>
            &lt;&lt; <span class="org-string">" id = "</span> &lt;&lt; driver-&gt;getID<span class="org-rainbow-delimiters-depth-2">()</span>
            &lt;&lt; <span class="org-string">" ; status = "</span> &lt;&lt; driver-&gt;isConnected<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt;  <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Factory method</span>
<span class="org-keyword">enum</span> <span class="org-keyword">class</span> <span class="org-type">DriverType</span><span class="org-rainbow-delimiters-depth-1">{</span>
 <span class="org-variable-name">generic</span>,
 <span class="org-variable-name">sqlite</span>,
 <span class="org-variable-name">postgres</span>,
 <span class="org-variable-name">sqlserver</span>                        
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">auto</span> <span class="org-function-name">dbDriverFactory</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">DriverType</span>&amp; <span class="org-variable-name">dbtype</span>, <span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">id</span> = <span class="org-string">"unknown"</span><span class="org-rainbow-delimiters-depth-1">)</span>
  -&gt; <span class="org-constant">std</span>::<span class="org-type">shared_ptr</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">GenericDBDriver</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>
  <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>dbtype == <span class="org-constant">DriverType</span>::generic<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-keyword">return</span> <span class="org-constant">std</span>::make_shared<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">GenericDBDriver</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span>;   
  <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>dbtype == <span class="org-constant">DriverType</span>::sqlite<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-keyword">return</span> <span class="org-constant">std</span>::make_shared<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">DriverSQLiteDriver</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>id<span class="org-rainbow-delimiters-depth-2">)</span>;   
  <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>dbtype == <span class="org-constant">DriverType</span>::postgres<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-keyword">return</span> <span class="org-constant">std</span>::make_shared<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">DriverPostgresSQL</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>id<span class="org-rainbow-delimiters-depth-2">)</span>;   
  <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>dbtype == <span class="org-constant">DriverType</span>::sqlserver<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-keyword">return</span> <span class="org-constant">std</span>::make_shared<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">DriverSQLServer</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>id<span class="org-rainbow-delimiters-depth-2">)</span>;    
  <span class="org-comment-delimiter">// </span><span class="org-comment">Failure -&gt; DO NOT return old C++98 NULL as it is not typesafe </span>
  <span class="org-keyword">return</span> <span class="org-constant">nullptr</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">class</span> <span class="org-type">DriverFactory</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:

<span class="org-function-name">public</span>:

  <span class="org-function-name">DriverFactory</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">delete</span>;
  <span class="org-function-name">DriverFactory</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">DriverFactory</span>&amp; <span class="org-variable-name">lhs</span><span class="org-rainbow-delimiters-depth-2">)</span> = <span class="org-keyword">delete</span>;

  <span class="org-keyword">static</span> <span class="org-keyword">auto</span> <span class="org-function-name">getInstance</span><span class="org-rainbow-delimiters-depth-2">()</span> 
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>

  <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n====== Test 1 ==========="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Uniform initialization </span>
    <span class="org-type">GenericDBDriver</span>   <span class="org-variable-name">d0</span>;
    <span class="org-type">DriverSQLServer</span>   <span class="org-variable-name">d1</span><span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"d1"</span><span class="org-rainbow-delimiters-depth-3">}</span>;
    <span class="org-type">DriverPostgresSQL</span> <span class="org-variable-name">d2</span> = <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"d2"</span><span class="org-rainbow-delimiters-depth-3">}</span>;
    <span class="org-type">DriverSQLServer</span>   <span class="org-variable-name">d3</span> = <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"d3"</span><span class="org-rainbow-delimiters-depth-3">}</span>;

    showDriverStatus1<span class="org-rainbow-delimiters-depth-3">(</span>d0<span class="org-rainbow-delimiters-depth-3">)</span>;
    showDriverStatus1<span class="org-rainbow-delimiters-depth-3">(</span>d1<span class="org-rainbow-delimiters-depth-3">)</span>;
    d1.connect<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"file:///home/user/datbase.sqlite"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    showDriverStatus1<span class="org-rainbow-delimiters-depth-3">(</span>d1<span class="org-rainbow-delimiters-depth-3">)</span>;
    showDriverStatus1<span class="org-rainbow-delimiters-depth-3">(</span>d2<span class="org-rainbow-delimiters-depth-3">)</span>;
    showDriverStatus1<span class="org-rainbow-delimiters-depth-3">(</span>d3<span class="org-rainbow-delimiters-depth-3">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"====== End of test 1 ==========="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n====== Test 2 ==========="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Uniform initialization </span>
    <span class="org-type">GenericDBDriver</span>   <span class="org-variable-name">d0</span>;
    <span class="org-type">DriverSQLServer</span>   <span class="org-variable-name">d1</span><span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"d1"</span><span class="org-rainbow-delimiters-depth-3">}</span>;
    <span class="org-type">DriverPostgresSQL</span> <span class="org-variable-name">d2</span> = <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"d2"</span><span class="org-rainbow-delimiters-depth-3">}</span>;
    <span class="org-type">DriverSQLServer</span>   <span class="org-variable-name">d3</span> = <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"d3"</span><span class="org-rainbow-delimiters-depth-3">}</span>;

    showDriverStatus2<span class="org-rainbow-delimiters-depth-3">(</span>&amp;d0<span class="org-rainbow-delimiters-depth-3">)</span>;
    showDriverStatus2<span class="org-rainbow-delimiters-depth-3">(</span>&amp;d1<span class="org-rainbow-delimiters-depth-3">)</span>;
    d1.connect<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"file:///home/user/datbase.sqlite"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    showDriverStatus2<span class="org-rainbow-delimiters-depth-3">(</span>&amp;d1<span class="org-rainbow-delimiters-depth-3">)</span>;
    showDriverStatus2<span class="org-rainbow-delimiters-depth-3">(</span>&amp;d2<span class="org-rainbow-delimiters-depth-3">)</span>;
    showDriverStatus2<span class="org-rainbow-delimiters-depth-3">(</span>&amp;d3<span class="org-rainbow-delimiters-depth-3">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"====== End of test 2 ==========="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-comment-delimiter">// </span><span class="org-comment">Failure ! -&gt; It only calls the methods of GenericDBDriver</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">It is not possible to polymorphism (subtyping polymorphism) in C++</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">without pointers or references.</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n====== Test 3 ==========="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">GenericDBDriver</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-variable-name">xs</span>;

    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>GenericDBDriver<span class="org-rainbow-delimiters-depth-4">{}</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>DriverSQLServer <span class="org-rainbow-delimiters-depth-4">{</span><span class="org-string">"d1"</span><span class="org-rainbow-delimiters-depth-4">}</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>DriverPostgresSQL<span class="org-rainbow-delimiters-depth-4">{</span><span class="org-string">"d2"</span><span class="org-rainbow-delimiters-depth-4">}</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>DriverSQLServer<span class="org-rainbow-delimiters-depth-4">{</span><span class="org-string">"d3"</span><span class="org-rainbow-delimiters-depth-4">}</span><span class="org-rainbow-delimiters-depth-3">)</span>;

    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: xs<span class="org-rainbow-delimiters-depth-3">){</span>
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" - driver = "</span> &lt;&lt; x.driverName<span class="org-rainbow-delimiters-depth-4">()</span> &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; x.getID<span class="org-rainbow-delimiters-depth-4">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-3">}</span>

    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>0<span class="org-rainbow-delimiters-depth-4">)</span>.driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"generic"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>1<span class="org-rainbow-delimiters-depth-4">)</span>.driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"generic"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>2<span class="org-rainbow-delimiters-depth-4">)</span>.driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"generic"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>3<span class="org-rainbow-delimiters-depth-4">)</span>.driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"generic"</span><span class="org-rainbow-delimiters-depth-3">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n====== End of test 3 ==========="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>


  <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n====== Test 4 ==========="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">GenericDBDriver</span>*<span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-variable-name">xs</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">d0</span> = GenericDBDriver<span class="org-rainbow-delimiters-depth-3">{}</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">d1</span> = DriverSQLiteDriver <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"d1"</span><span class="org-rainbow-delimiters-depth-3">}</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">d2</span> = DriverPostgresSQL<span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"d2"</span><span class="org-rainbow-delimiters-depth-3">}</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">d3</span> = DriverSQLServer<span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"d3"</span><span class="org-rainbow-delimiters-depth-3">}</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>&amp;d0<span class="org-rainbow-delimiters-depth-3">)</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>&amp;d1<span class="org-rainbow-delimiters-depth-3">)</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>&amp;d2<span class="org-rainbow-delimiters-depth-3">)</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>&amp;d3<span class="org-rainbow-delimiters-depth-3">)</span>;

    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: xs<span class="org-rainbow-delimiters-depth-3">){</span>
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" - driver = "</span> &lt;&lt; x-&gt;driverName<span class="org-rainbow-delimiters-depth-4">()</span> &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; x-&gt;getID<span class="org-rainbow-delimiters-depth-4">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;;
    <span class="org-rainbow-delimiters-depth-3">}</span>
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>0<span class="org-rainbow-delimiters-depth-4">)</span>-&gt;driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"generic"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>1<span class="org-rainbow-delimiters-depth-4">)</span>-&gt;driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"sqlite"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>2<span class="org-rainbow-delimiters-depth-4">)</span>-&gt;driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"PostGresSQL"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>3<span class="org-rainbow-delimiters-depth-4">)</span>-&gt;driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"SQLServer"</span><span class="org-rainbow-delimiters-depth-3">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"====== End of test 4 ==========="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>  

  <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n====== Test 5 ==========="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::<span class="org-type">shared_ptr</span><span class="org-rainbow-delimiters-depth-4">&lt;</span><span class="org-type">GenericDBDriver</span><span class="org-rainbow-delimiters-depth-4">&gt;</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-variable-name">xs</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>dbDriverFactory<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">DriverType</span>::generic<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>dbDriverFactory<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">DriverType</span>::sqlite,    <span class="org-string">"d1"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>dbDriverFactory<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">DriverType</span>::postgres,  <span class="org-string">"d2"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>dbDriverFactory<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">DriverType</span>::sqlserver, <span class="org-string">"d3"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: xs<span class="org-rainbow-delimiters-depth-3">){</span>
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" - driver = "</span> &lt;&lt; x-&gt;driverName<span class="org-rainbow-delimiters-depth-4">()</span> &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; x-&gt;getID<span class="org-rainbow-delimiters-depth-4">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;;
    <span class="org-rainbow-delimiters-depth-3">}</span>
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>0<span class="org-rainbow-delimiters-depth-4">)</span>-&gt;driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"generic"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>1<span class="org-rainbow-delimiters-depth-4">)</span>-&gt;driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"sqlite"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>2<span class="org-rainbow-delimiters-depth-4">)</span>-&gt;driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"PostGresSQL"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>3<span class="org-rainbow-delimiters-depth-4">)</span>-&gt;driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"SQLServer"</span><span class="org-rainbow-delimiters-depth-3">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"====== End of test 5 ==========="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>  
  <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ clang++ polymorphism.cpp -std=c++1z -Wall -Wextra &amp;&amp; ./a.out

====== Test 1 ===========
 [INFO] Driver = generic id = unknown ; status = false
 [INFO] Driver = SQLServer id = d1 ; status = false
Connecting to file:///home/user/datbase.sqlite
 [INFO] Driver = SQLServer id = d1 ; status = true
 [INFO] Driver = PostGresSQL id = d2 ; status = false
 [INFO] Driver = SQLServer id = d3 ; status = false
====== End of test 1 ===========
Disconnecting from SQLServer - id = d3
Disconnecting from generic driver - id = unknown
Disconnecting from PostGresSQL - id = d2
Disconnecting from generic driver - id = unknown
Disconnecting from SQLServer - id = d1
Disconnecting from generic driver - id = unknown
Disconnecting from generic driver - id = unknown

====== Test 2 ===========
 [INFO] Driver = generic id = unknown ; status = false
 [INFO] Driver = SQLServer id = d1 ; status = false
Connecting to file:///home/user/datbase.sqlite
 [INFO] Driver = SQLServer id = d1 ; status = true
 [INFO] Driver = PostGresSQL id = d2 ; status = false
 [INFO] Driver = SQLServer id = d3 ; status = false
====== End of test 2 ===========
Disconnecting from SQLServer - id = d3
Disconnecting from generic driver - id = unknown
Disconnecting from PostGresSQL - id = d2
Disconnecting from generic driver - id = unknown
Disconnecting from SQLServer - id = d1
Disconnecting from generic driver - id = unknown
Disconnecting from generic driver - id = unknown

====== Test 3 ===========
Disconnecting from generic driver - id = unknown
Disconnecting from SQLServer - id = d1
Disconnecting from generic driver - id = unknown
Disconnecting from PostGresSQL - id = d2
Disconnecting from generic driver - id = unknown
Disconnecting from SQLServer - id = d3
Disconnecting from generic driver - id = unknown
 - driver = generic ; id = unknown
 - driver = generic ; id = unknown
 - driver = generic ; id = unknown
 - driver = generic ; id = unknown

====== End of test 3 ===========
Disconnecting from generic driver - id = unknown
Disconnecting from generic driver - id = unknown
Disconnecting from generic driver - id = unknown
Disconnecting from generic driver - id = unknown

====== Test 4 ===========
 - driver = generic ; id = unknown
 - driver = sqlite ; id = d1
 - driver = PostGresSQL ; id = d2
 - driver = SQLServer ; id = d3
====== End of test 4 ===========
Disconnecting from SQLServer - id = d3
Disconnecting from generic driver - id = unknown
Disconnecting from PostGresSQL - id = d2
Disconnecting from generic driver - id = unknown
Disconnecting from PosgresDB - m_id = d1
Disconnecting from generic driver - id = unknown
Disconnecting from generic driver - id = unknown

====== Test 5 ===========
 - driver = generic ; id = unknown
 - driver = sqlite ; id = d1
 - driver = PostGresSQL ; id = d2
 - driver = SQLServer ; id = d3
====== End of test 5 ===========
Disconnecting from generic driver - id = unknown
Disconnecting from PosgresDB - m_id = d1
Disconnecting from generic driver - id = unknown
Disconnecting from PostGresSQL - id = d2
Disconnecting from generic driver - id = unknown
Disconnecting from SQLServer - id = d3
Disconnecting from generic driver - id = unknown

</pre>
</div>
</div>
</div>

<div id="outline-container-org1788112" class="outline-4">
<h4 id="org1788112"><span class="section-number-4">1.23.4</span> STL containers and polymorphism</h4>
<div class="outline-text-4" id="text-1-23-4">
<p>
C++'s STL (Standard Template Library) containers/collections such as
vector, deque, map, stack and so on can only store pointers to
instances of different derived classes from a given base
class. However the STL containers cannot store references to those
instances. The STL std::reference_wrapper solves this problem. 
</p>

<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="http://www.cplusplus.com/reference/functional/reference_wrapper/operator_func/">http://www.cplusplus.com/reference/functional/reference_wrapper/operator_func/</a></li>
</ul>

<p>
Demonstration in CERN's ROOT C++ REPL: 
</p>

<ul class="org-ul">
<li>Create test classes.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Base class </span>
<span class="org-keyword">class</span> <span class="org-type">IRoot</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
  <span class="org-keyword">virtual</span> <span class="org-keyword">auto</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> <span class="org-string">"root"</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">//</span><span class="org-comment">===== Derived Classes ====== //</span>

<span class="org-keyword">class</span> <span class="org-type">A</span>: <span class="org-keyword">public</span> <span class="org-type">IRoot</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
  <span class="org-keyword">auto</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> <span class="org-string">"Class A"</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">class</span> <span class="org-type">B</span>: <span class="org-keyword">public</span> <span class="org-type">IRoot</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
  <span class="org-keyword">auto</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> <span class="org-string">"Class B"</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<ul class="org-ul">
<li>Play with sample objects:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Create test objects </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">r</span> = IRoot<span class="org-rainbow-delimiters-depth-1">()</span>;
<span class="org-keyword">auto</span> <span class="org-variable-name">a</span> = A<span class="org-rainbow-delimiters-depth-1">()</span>;
<span class="org-keyword">auto</span> <span class="org-variable-name">b</span> = B<span class="org-rainbow-delimiters-depth-1">()</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Test objects </span>
&gt;&gt; r.getName<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"root"</span>
&gt;&gt; a.getName<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Class A"</span>
&gt;&gt; b.getName<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Class B"</span>
&gt;&gt;
</pre>
</div>

<ul class="org-ul">
<li>Store those objects in a collection by pointer:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> xsp = <span class="org-constant">std</span>::deque<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">IRoot</span>*<span class="org-rainbow-delimiters-depth-1">&gt;()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">IRoot</span> *, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">IRoot</span> *<span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{}</span>
&gt;&gt; xsp.push_back<span class="org-rainbow-delimiters-depth-1">(</span>&amp;r<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; xsp.push_back<span class="org-rainbow-delimiters-depth-1">(</span>&amp;a<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; xsp.push_back<span class="org-rainbow-delimiters-depth-1">(</span>&amp;b<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; xsp
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">IRoot</span> *, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">IRoot</span> *<span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> @0x2f01990, @0x2f01998, @0x2f019a0 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt;
&gt;&gt;

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">x</span>: xsp<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"name = "</span> &lt;&lt; x-&gt;getName<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl; <span class="org-rainbow-delimiters-depth-1">}</span>
name = root
name = Class A
name = Class B
&gt;&gt;

</pre>
</div>

<ul class="org-ul">
<li>Try to store those object r, a and b in a container/collection by
reference.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">Many of errors: new_allocator.h:63:18: error: 'pointer' declared</span>
<span class="org-comment"> * as a pointer to a reference of type 'IRoot &amp;' typedef _Tp* pointer;</span>
<span class="org-comment"> */</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">xs</span> = <span class="org-constant">std</span>::deque<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">IRoot</span>&amp;<span class="org-rainbow-delimiters-depth-1">&gt;()</span> 
</pre>
</div>

<ul class="org-ul">
<li>Try to store those object r, a and b in a container/collection by
reference using <span class="underline">std::reference_wrapper</span>.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> xsr = <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::<span class="org-type">reference_wrapper</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>IRoot<span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-rainbow-delimiters-depth-1">{}</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">reference_wrapper</span><span class="org-rainbow-delimiters-depth-3">&lt;</span>IRoot<span class="org-rainbow-delimiters-depth-3">&gt;</span>, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::<span class="org-type">reference_wrapper</span><span class="org-rainbow-delimiters-depth-4">&lt;</span>IRoot<span class="org-rainbow-delimiters-depth-4">&gt;</span> <span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{}</span>
&gt;&gt;

xsr.push_back<span class="org-rainbow-delimiters-depth-1">(</span>a<span class="org-rainbow-delimiters-depth-1">)</span>
xsr.push_back<span class="org-rainbow-delimiters-depth-1">(</span>r<span class="org-rainbow-delimiters-depth-1">)</span>
xsr.push_back<span class="org-rainbow-delimiters-depth-1">(</span>b<span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; xsr
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">reference_wrapper</span><span class="org-rainbow-delimiters-depth-3">&lt;</span>IRoot<span class="org-rainbow-delimiters-depth-3">&gt;</span>, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::<span class="org-type">reference_wrapper</span><span class="org-rainbow-delimiters-depth-4">&lt;</span>IRoot<span class="org-rainbow-delimiters-depth-4">&gt;</span> <span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span> @0x31013c0, @0x31013c8, @0x31013d0 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt;

&gt;&gt; xsr.at<span class="org-rainbow-delimiters-depth-1">(</span>0<span class="org-rainbow-delimiters-depth-1">)</span>.get<span class="org-rainbow-delimiters-depth-1">()</span>.getName<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Class A"</span>
&gt;&gt; xsr.at<span class="org-rainbow-delimiters-depth-1">(</span>1<span class="org-rainbow-delimiters-depth-1">)</span>.get<span class="org-rainbow-delimiters-depth-1">()</span>.getName<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"root"</span>
&gt;&gt; xsr.at<span class="org-rainbow-delimiters-depth-1">(</span>2<span class="org-rainbow-delimiters-depth-1">)</span>.get<span class="org-rainbow-delimiters-depth-1">()</span>.getName<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Class B"</span>
&gt;&gt; 
&gt;&gt;

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">x</span>: xsr<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"name = "</span> &lt;&lt; x.get<span class="org-rainbow-delimiters-depth-2">()</span>.getName<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl; <span class="org-rainbow-delimiters-depth-1">}</span>
name = Class A
name = root
name = Class B
&gt;&gt; 

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: xsr<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"name = "</span> &lt;&lt; x.get<span class="org-rainbow-delimiters-depth-2">()</span>.getName<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl; <span class="org-rainbow-delimiters-depth-1">}</span>
name = Class A
name = root
name = Class B
&gt;&gt; 
</pre>
</div>

<p>
References: 
</p>

<ul class="org-ul">
<li><a href="https://oopscenities.net/2012/08/09/reference_wrapper/">https://oopscenities.net/2012/08/09/reference_wrapper/</a></li>

<li>How to correctly use std::reference_wrappers -
<a href="https://stackoverflow.com/questions/18127469/how-to-correctly-use-stdreference-wrappers">https://stackoverflow.com/questions/18127469/how-to-correctly-use-stdreference-wrappers</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgfcfde53" class="outline-3">
<h3 id="orgfcfde53"><span class="section-number-3">1.24</span> <span class="todo TODO">TODO</span> OOP Multiple Inheritance</h3>
<div class="outline-text-3" id="text-1-24">
</div>
<div id="outline-container-org278a4e7" class="outline-4">
<h4 id="org278a4e7"><span class="section-number-4">1.24.1</span> Ambiguity resolution</h4>
<div class="outline-text-4" id="text-1-24-1">
<p>
This example shows how to solve multiple inheritacne ambiguity
problems in C++ when a derived class inherits more than two base
classes containing member variables and member functions with same
name. 
</p>


<p>
File: <a href="src/inheritance-multiple-ambiguity.cpp">file:src/inheritance-multiple-ambiguity.cpp</a>
</p>


<ul class="org-ul">
<li>Base class BaseA:</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>class BaseA label:code-baseA-class</label><pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">BaseA</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">protected</span>:
     <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">key</span> = <span class="org-string">"KEY-BASEA"</span>;
<span class="org-function-name">public</span>: 

     <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">_name</span>;

     <span class="org-function-name">BaseA</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>: <span class="org-function-name">_name</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [LOG] BaseA instantiated. OK."</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">A base class always needs virtual constructor in order to avoid memory leaks.</span>
     <span class="org-keyword">virtual</span> ~<span class="org-function-name">BaseA</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;

     <span class="org-type">void</span> <span class="org-function-name">printName</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" A - [printName] =&gt; Name = "</span> &lt;&lt; _name &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>  
     <span class="org-type">void</span> <span class="org-function-name">printNameA</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [printNameA] =&gt; NameA = "</span> &lt;&lt; _name &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-type">void</span> <span class="org-function-name">callOverridenVFun</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [BaseB::callOverridenVFun] BaseB::overridenVfun() returned"</span>
                  &lt;&lt; <span class="org-string">'\n'</span> &lt;&lt; <span class="org-string">" +=&gt; RETURN = "</span> &lt;&lt; <span class="org-keyword">this</span>-&gt;overridenVfun<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-keyword">virtual</span> <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">overridenVfun</span><span class="org-rainbow-delimiters-depth-2">()</span> = 0;   

     <span class="org-keyword">virtual</span> <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">nonOverridenVfun</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-keyword">return</span> <span class="org-string">"BaseA::nonOverridenVfun"</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>

     <span class="org-keyword">virtual</span> <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">specificAVFun</span><span class="org-rainbow-delimiters-depth-2">(){</span>
       <span class="org-keyword">return</span> <span class="org-string">"specificAVFun not overriden."</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>

     <span class="org-keyword">static</span> <span class="org-type">void</span> <span class="org-function-name">staticMethod</span><span class="org-rainbow-delimiters-depth-2">(){</span>
       <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [BaseA] I am a static method from BaseA"</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>  
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<ul class="org-ul">
<li>Base class BaseB</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">BaseB</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Only derived classes can access </span>
<span class="org-function-name">protected</span>: 
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">key</span> = <span class="org-string">"KEY-BASEB"</span>;

   <span class="org-comment-delimiter">// </span><span class="org-comment">Derived classes and any external code can access  </span>
<span class="org-function-name">public</span>:    
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">_name</span>;

    <span class="org-function-name">BaseB</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>: <span class="org-function-name">_name</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [LOG] BaseB instantiated. OK."</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">virtual</span> ~<span class="org-function-name">BaseB</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;

    <span class="org-type">void</span> <span class="org-function-name">printName</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" B - [printName] =&gt; Name = "</span> &lt;&lt; _name &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">void</span> <span class="org-function-name">printNameB</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [PrintName] =&gt; NameB = "</span> &lt;&lt; _name &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">void</span> <span class="org-function-name">callOverridenVFun</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [BaseB::callOverridenVFun] BaseB::overridenVfun() returned"</span>
                  &lt;&lt; <span class="org-string">'\n'</span> &lt;&lt; <span class="org-string">" +=&gt; RETURN = "</span> &lt;&lt; <span class="org-keyword">this</span>-&gt;overridenVfun<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">virtual</span> <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">overridenVfun</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-keyword">return</span> <span class="org-string">" BaseB::overridenVfun not overriden"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>   
    <span class="org-keyword">virtual</span> <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">nonOverridenVfun</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-keyword">return</span> <span class="org-string">"BaseB::nonOverridenVfun"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">virtual</span> <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">specificBVFun</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-keyword">return</span> <span class="org-string">"specificBVFun not overriden."</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">static</span> <span class="org-type">void</span> <span class="org-function-name">staticMethod</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [BaseB] I am a static method from BaseB"</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

</pre>
</div>


<ul class="org-ul">
<li>Class DerivedD - inherits both class BaseA and BaseB.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">Derived</span>: <span class="org-keyword">public</span> <span class="org-type">BaseA</span>, <span class="org-keyword">public</span> <span class="org-type">BaseB</span><span class="org-rainbow-delimiters-depth-1">{</span>  
<span class="org-function-name">public</span>:
    <span class="org-comment-delimiter">// </span><span class="org-comment">Base class constructos must always be initialized through</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">initialization list like this.</span>
    <span class="org-function-name">Derived</span><span class="org-rainbow-delimiters-depth-2">()</span>
      : BaseA<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"nameA"</span><span class="org-rainbow-delimiters-depth-2">)</span>, BaseB<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"nameB"</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>       
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-function-name">Derived</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">nameA</span>, <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">nameB</span><span class="org-rainbow-delimiters-depth-2">)</span>
      : BaseA<span class="org-rainbow-delimiters-depth-2">(</span>nameA<span class="org-rainbow-delimiters-depth-2">)</span>, BaseB<span class="org-rainbow-delimiters-depth-2">(</span>nameB<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>       
    <span class="org-rainbow-delimiters-depth-2">}</span>
    ~<span class="org-function-name">Derived</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [Derived] Destructor called. "</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Access ambiguous protected field from base class </span>
    <span class="org-type">void</span> <span class="org-function-name">showKeyBaseA</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [showKeyBaseA] Key-BaseA = "</span> &lt;&lt; <span class="org-constant">BaseA</span>::key &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [showKeyBaseA] Key-BaseA = "</span> &lt;&lt; <span class="org-keyword">this</span>-&gt;<span class="org-constant">BaseA</span>::key &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-type">void</span> <span class="org-function-name">showKeyBaseB</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [showKeyBaseB] Key-BaseB = "</span> &lt;&lt; <span class="org-constant">BaseB</span>::key &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [showKeyBaseB] Key-BaseB = "</span> &lt;&lt; <span class="org-keyword">this</span>-&gt;<span class="org-constant">BaseB</span>::key &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">void</span> <span class="org-function-name">printNameX</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-constant">BaseA</span>::printName<span class="org-rainbow-delimiters-depth-3">()</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Or 'this' pointer can be used too.</span>
        <span class="org-keyword">this</span>-&gt;<span class="org-constant">BaseB</span>::printName<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-comment-delimiter">/* </span><span class="org-comment">The derived class overrides both virtual member functions, BaseA::overridenVfun()</span>
<span class="org-comment">    * and BaseB::overridenVfun(). As a result, both base classes will share the derived class </span>
<span class="org-comment">    * implementation.</span>
<span class="org-comment">    */</span>
<span class="org-preprocessor">    #if</span> <span class="org-constant">true</span>
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">overridenVfun</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-keyword">return</span> <span class="org-string">"Both functions overriden, BaseA::overridenVfun() and BaseB::overridenVfun(). OK."</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-preprocessor">    #endif</span> 

    <span class="org-comment-delimiter">// </span><span class="org-comment">std::string specificAVFun() override {</span>
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">specificAVFun</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">override</span><span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">return</span> <span class="org-string">"Overriden: specificAVFun"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">specificBVFun</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">return</span> <span class="org-string">"Overriden: specificBVFun"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">static</span> <span class="org-type">void</span> <span class="org-function-name">staticMethod</span><span class="org-rainbow-delimiters-depth-2">(){</span>
       <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [Derived] I am a static method from Derived"</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Loading the code in ROOT REPL: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; .L inheritance-multiple-ambiguity.cpp 
</pre>
</div>

<p>
Creating an instance of derived class named Derived.
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; Derived d;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">LOG</span><span class="org-rainbow-delimiters-depth-1">]</span> BaseA instantiated. OK.
 <span class="org-rainbow-delimiters-depth-1">[</span>LOG<span class="org-rainbow-delimiters-depth-1">]</span> BaseB instantiated. OK.
&gt;&gt; 
</pre>
</div>

<p>
<b>Access ambiguous publi field</b>
</p>

<ul class="org-ul">
<li>Problem:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">FAILURE - Compilation error: </span>
&gt;&gt; d._name
<span class="org-function-name">ROOT_prompt_2</span>:1:3: error: member <span class="org-warning">'</span>_name<span class="org-warning">'</span> found in multiple base classes of different types
d._name
  ^
<span class="org-function-name">inheritance-multiple-ambiguity.cpp</span>:12:14: note: member found by ambiguous name lookup
        <span class="org-constant">std</span>::string _name;
                    ^
<span class="org-function-name">inheritance-multiple-ambiguity.cpp</span>:53:14: note: member found by ambiguous name lookup
        <span class="org-constant">std</span>::string _name;
</pre>
</div>

<ul class="org-ul">
<li>Solution: Use fully qualified field name. <code>d.BaseA::_name</code> or
<code>d.BaseB::_name</code>. Or upcast pointer from derived to pointer to base class.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">
<span class="org-comment-delimiter">// </span><span class="org-comment">SOLUTION: </span>
&gt;&gt; d.<span class="org-constant">BaseA</span>::_name
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"nameA"</span>

&gt;&gt; d.<span class="org-constant">BaseB</span>::_name
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"nameB"</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to derived </span>
&gt;&gt; Derived* ptr_derived = &amp;d;

&gt;&gt; ptr_derived-&gt;<span class="org-constant">BaseA</span>::_name
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"nameA"</span>

&gt;&gt; ptr_derived-&gt;<span class="org-constant">BaseB</span>::_name
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"nameB"</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Access/refer by pointer - BaseA</span>
&gt;&gt; BaseA* ptr_baseA = &amp;d;

&gt;&gt; ptr_baseA-&gt;_name
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"nameA"</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Access/refer by pointer - BaseB</span>
&gt;&gt; BaseB* ptr_baseB = &amp;d;

&gt;&gt; ptr_baseB-&gt;_name
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"nameB"</span>
</pre>
</div>

<p>
<b>Call non-ambiguous methods</b> 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; d.printNameA<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>printNameA<span class="org-rainbow-delimiters-depth-1">]</span> =&gt; NameA = nameA
<span class="org-comment-delimiter">// </span><span class="org-comment">OR:</span>
&gt;&gt; d.<span class="org-constant">BaseA</span>::printNameA<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>printNameA<span class="org-rainbow-delimiters-depth-1">]</span> =&gt; NameA = nameA

&gt;&gt; d.printNameB<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>PrintName<span class="org-rainbow-delimiters-depth-1">]</span> =&gt; NameB = nameB

<span class="org-comment-delimiter">// </span><span class="org-comment">OR</span>
&gt;&gt; d.<span class="org-constant">BaseA</span>::printNameA<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>printNameA<span class="org-rainbow-delimiters-depth-1">]</span> =&gt; NameA = nameA

</pre>
</div>

<p>
<b>Call ambiguous method printName:</b>
</p>

<ul class="org-ul">
<li>Problem:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">COMPILATION ERROR:</span>
&gt;&gt; d.printName<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">ROOT_prompt_5</span>:1:3: error: member <span class="org-warning">'</span>printName<span class="org-warning">'</span> found in multiple base classes of different types
d.printName<span class="org-rainbow-delimiters-depth-1">()</span>
  ^
<span class="org-function-name">inheritance-multiple-ambiguity.cpp</span>:20:7: note: member found by ambiguous name lookup
        <span class="org-type">void</span> printName<span class="org-rainbow-delimiters-depth-1">(){</span>
             ^
<span class="org-function-name">inheritance-multiple-ambiguity.cpp</span>:61:7: note: member found by ambiguous name lookup
        <span class="org-type">void</span> printName<span class="org-rainbow-delimiters-depth-2">(){</span>
             ^
</pre>
</div>

<ul class="org-ul">
<li>Solution:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; d.<span class="org-constant">BaseA</span>::printName<span class="org-rainbow-delimiters-depth-1">()</span>
 A - <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">printName</span><span class="org-rainbow-delimiters-depth-1">]</span> =&gt; Name = nameA

&gt;&gt; d.<span class="org-constant">BaseB</span>::printName<span class="org-rainbow-delimiters-depth-1">()</span>
 B - <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">printName</span><span class="org-rainbow-delimiters-depth-1">]</span> =&gt; Name = nameB
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Access/refer by pointer - BaseA</span>
&gt;&gt; BaseA* ptr_baseA = &amp;d;

&gt;&gt; ptr_baseA-&gt;printName<span class="org-rainbow-delimiters-depth-1">()</span>
 A - <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">printName</span><span class="org-rainbow-delimiters-depth-1">]</span> =&gt; Name = nameA

&gt;&gt; ptr_baseA-&gt;_name
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"nameA"</span>
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Access/refer by pointer - BaseA</span>
&gt;&gt; BaseB* ptr_baseB = &amp;d;

&gt;&gt; ptr_baseB-&gt;printName<span class="org-rainbow-delimiters-depth-1">()</span>
 B - <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">printName</span><span class="org-rainbow-delimiters-depth-1">]</span> =&gt; Name = nameB

&gt;&gt; ptr_baseB-&gt;_name
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"nameB"</span>
&gt;&gt; 

</pre>
</div>

<p>
<b>Invoke Overriden Virtual Function</b> 
</p>

<ul class="org-ul">
<li>If a base class overrides a virtual member function required by
multiple base classes, all of them will share the same
implementation supplied by the derived class. There is no way to
override or supply a different implementations to each one of them
in the derived class.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; d.overridenVfun<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Both functions overriden, BaseA::overridenVfun() and BaseB::overridenVfun(). OK."</span>
&gt;&gt; 

&gt;&gt; d.<span class="org-constant">BaseB</span>::overridenVfun<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">" BaseB::overridenVfun not overriden"</span>
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Access/refer by pointer - BaseA</span>
&gt;&gt; BaseA* ptr_baseA = &amp;d;

&gt;&gt; ptr_baseA-&gt;overridenVfun<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Both functions overriden, BaseA::overridenVfun() and BaseB::overridenVfun(). OK."</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Access/refer by pointer - BaseB</span>
&gt;&gt; BaseB* ptr_baseB = &amp;d;

&gt;&gt; ptr_baseB-&gt;overridenVfun<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Both functions overriden, BaseA::overridenVfun() and BaseB::overridenVfun(). OK."</span>
&gt;&gt; 
</pre>
</div>

<p>
<b>Invoke method callOverridenVFun</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Compilation error: </span>
&gt;&gt; d.callOverridenVFun<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">ROOT_prompt_19</span>:1:3: error: member <span class="org-warning">'</span>callOverridenVFun<span class="org-warning">'</span> found in multiple base classes of different types
d.callOverridenVFun<span class="org-rainbow-delimiters-depth-1">()</span>

&gt;&gt; d.<span class="org-constant">BaseA</span>::callOverridenVFun<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">BaseB</span>::callOverridenVFun<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">BaseB</span>::overridenVfun<span class="org-rainbow-delimiters-depth-1">()</span> returned
 +=&gt; RETURN = Both functions overriden, <span class="org-constant">BaseA</span>::overridenVfun<span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">and</span> <span class="org-constant">BaseB</span>::overridenVfun<span class="org-rainbow-delimiters-depth-1">()</span>. OK.

&gt;&gt; d.<span class="org-constant">BaseB</span>::callOverridenVFun<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">BaseB</span>::callOverridenVFun<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">BaseB</span>::overridenVfun<span class="org-rainbow-delimiters-depth-1">()</span> returned
 +=&gt; RETURN = Both functions overriden, <span class="org-constant">BaseA</span>::overridenVfun<span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">and</span> <span class="org-constant">BaseB</span>::overridenVfun<span class="org-rainbow-delimiters-depth-1">()</span>. OK.
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Access/refer by pointer - BaseA</span>
&gt;&gt; BaseA* ptr_baseA = &amp;d;

<span class="org-comment-delimiter">// </span><span class="org-comment">No ambiguity happens </span>
&gt;&gt; ptr_baseA-&gt;callOverridenVFun<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">BaseB</span>::callOverridenVFun<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">BaseB</span>::overridenVfun<span class="org-rainbow-delimiters-depth-1">()</span> returned
 +=&gt; RETURN = Both functions overriden, <span class="org-constant">BaseA</span>::overridenVfun<span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">and</span> <span class="org-constant">BaseB</span>::overridenVfun<span class="org-rainbow-delimiters-depth-1">()</span>. OK.
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Access/refer by pointer - BaseB</span>
&gt;&gt; BaseB* ptr_baseB = &amp;d;

&gt;&gt; ptr_baseB-&gt;callOverridenVFun<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">BaseB</span>::callOverridenVFun<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-constant">BaseB</span>::overridenVfun<span class="org-rainbow-delimiters-depth-1">()</span> returned
 +=&gt; RETURN = Both functions overriden, <span class="org-constant">BaseA</span>::overridenVfun<span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">and</span> <span class="org-constant">BaseB</span>::overridenVfun<span class="org-rainbow-delimiters-depth-1">()</span>. OK.
</pre>
</div>

<p>
Call functions showKeyBaseA and showKeyBaseB:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; d.showKeyBaseA<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>showKeyBaseA<span class="org-rainbow-delimiters-depth-1">]</span> Key-BaseA = KEY-BASEA
 <span class="org-rainbow-delimiters-depth-1">[</span>showKeyBaseA<span class="org-rainbow-delimiters-depth-1">]</span> Key-BaseA = KEY-BASEA
&gt;&gt; 
&gt;&gt; d.showKeyBaseB<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>showKeyBaseB<span class="org-rainbow-delimiters-depth-1">]</span> Key-BaseB = KEY-BASEB
 <span class="org-rainbow-delimiters-depth-1">[</span>showKeyBaseB<span class="org-rainbow-delimiters-depth-1">]</span> Key-BaseB = KEY-BASEB
&gt;&gt; 
</pre>
</div>

<p>
Invoke a non-overriden ambiguous virtual function.
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; d.nonOverridenVfun<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">ROOT_prompt_40</span>:1:3: error: member <span class="org-warning">'</span>nonOverridenVfun<span class="org-warning">'</span> found in multiple base classes of different types
d.nonOverridenVfun<span class="org-rainbow-delimiters-depth-1">()</span>
  ^

&gt;&gt; d.<span class="org-constant">BaseA</span>::nonOverridenVfun<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"BaseA::nonOverridenVfun"</span>
&gt;&gt; 

&gt;&gt; d.<span class="org-constant">BaseB</span>::nonOverridenVfun<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"BaseB::nonOverridenVfun"</span>
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to derived </span>
&gt;&gt; Derived* ptr_derived = &amp;d;

&gt;&gt; ptr_derived-&gt;<span class="org-constant">BaseA</span>::nonOverridenVfun<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"BaseA::nonOverridenVfun"</span>
&gt;&gt; 
&gt;&gt; ptr_derived-&gt;<span class="org-constant">BaseB</span>::nonOverridenVfun<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"BaseB::nonOverridenVfun"</span>
&gt;&gt; 
</pre>
</div>

<p>
Call static methods:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">BaseA</span>::staticMethod<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>BaseA<span class="org-rainbow-delimiters-depth-1">]</span> I am a <span class="org-keyword">static</span> method from BaseA

&gt;&gt; <span class="org-constant">BaseB</span>::staticMethod<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>BaseB<span class="org-rainbow-delimiters-depth-1">]</span> I am a <span class="org-keyword">static</span> method from BaseB

&gt;&gt; <span class="org-constant">Derived</span>::staticMethod<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>Derived<span class="org-rainbow-delimiters-depth-1">]</span> I am a <span class="org-keyword">static</span> method from Derived
&gt;&gt;

&gt;&gt; d.staticMethod<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>Derived<span class="org-rainbow-delimiters-depth-1">]</span> I am a <span class="org-keyword">static</span> method from Derived
&gt;&gt; 

&gt;&gt; d.<span class="org-constant">BaseA</span>::staticMethod<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>BaseA<span class="org-rainbow-delimiters-depth-1">]</span> I am a <span class="org-keyword">static</span> method from BaseA

&gt;&gt; d.<span class="org-constant">BaseB</span>::staticMethod<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>BaseB<span class="org-rainbow-delimiters-depth-1">]</span> I am a <span class="org-keyword">static</span> method from BaseB
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to derived </span>
&gt;&gt; Derived* ptr_derived = &amp;d;

&gt;&gt; ptr_derived-&gt;staticMethod<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>Derived<span class="org-rainbow-delimiters-depth-1">]</span> I am a <span class="org-keyword">static</span> method from Derived
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Access/refer by pointer - BaseA</span>
&gt;&gt; BaseA* ptr_baseA = &amp;d;

<span class="org-comment-delimiter">// </span><span class="org-comment">Access/refer by pointer - BaseB</span>
&gt;&gt; BaseA* ptr_baseB = &amp;d;

&gt;&gt; ptr_baseA-&gt;staticMethod<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>BaseA<span class="org-rainbow-delimiters-depth-1">]</span> I am a <span class="org-keyword">static</span> method from BaseA

&gt;&gt; ptr_baseB-&gt;staticMethod<span class="org-rainbow-delimiters-depth-1">()</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>BaseB<span class="org-rainbow-delimiters-depth-1">]</span> I am a <span class="org-keyword">static</span> method from BaseB
&gt;&gt; 
</pre>
</div>
</div>
</div>
<div id="outline-container-org4c8afcd" class="outline-4">
<h4 id="org4c8afcd"><span class="section-number-4">1.24.2</span> <span class="todo TODO">TODO</span> OOP Diamond problem</h4>
</div>
<div id="outline-container-org2961412" class="outline-4">
<h4 id="org2961412"><span class="section-number-4">1.24.3</span> References and further reading:</h4>
<div class="outline-text-4" id="text-1-24-3">
<ul class="org-ul">
<li><a href="https://herbsutter.com/2013/05/22/gotw-5-solution-overriding-virtual-functions/">GotW #5 Solution: Overriding Virtual Functions | Sutters Mill</a></li>

<li><a href="http://www.gotw.ca/gotw/069.htm">GotW #69: Enforcing Rules for Derived Classes</a></li>

<li><a href="https://www.ibm.com/support/knowledgecenter/en/SSLTBW_2.3.0/com.ibm.zos.v2r3.cbclx01/cplr138.htm">IBM Knowledge Center - Ambiguous base classes (C++ only)</a></li>

<li><a href="https://drive.google.com/viewerng/viewer?url=https://www.cs.bgu.ac.il/~spl181/wiki.files/Lecture5_OOP.pptx">Lecture 5 - Inheritance, Polymorphism and The Object Memory Model</a></li>

<li><a href="http://www.msg.ucsf.edu/local/programs/IBM_Compilers/C:C++/html/language/ref/clrc14cplr140.htm#HDRCPLR140">Ambiguous Virtual Function Calls</a></li>

<li><a href="http://architectworkshop.com/martin/papers/separation.pdf">The Separation of Interface and Implementation in C++</a></li>

<li><a href="https://slideplayer.com/slide/10302342/">Unit IV</a></li>

<li><a href="https://drive.google.com/viewerng/viewer?url=http://www.cs.nuim.ie/~markh/paradigms/CS351Lect10.ppt">CS351 - Programming Paradigms - Inheritance and Polymorphism</a></li>

<li><a href="http://hep.ph.liv.ac.uk/~gwilliam/cppcourse/lecture8.pdf">Introduction to Programming using C++</a></li>

<li><a href="https://softwareengineering.stackexchange.com/questions/246273/code-re-use-in-c-via-multiple-inheritance-or-composition-or">interfaces - Code re-use in C++, via multiple inheritance or composition? Or&#x2026;? - Software Engineering Stack Exchange</a></li>

<li><a href="https://stackoverflow.com/questions/18529277/overriding-functions-from-two-abstract-base-classes-that-differ-only-by-their">c++ - Overriding functions (from two abstract base classes) that differ only by their return value - Stack Overflow</a></li>

<li><a href="https://stackoverflow.com/questions/18398409/c-inherit-from-multiple-base-classes-with-the-same-virtual-function-name">C++ inherit from multiple base classes with the same virtual function name - Stack Overflow</a></li>

<li><a href="https://stackoverflow.com/questions/28556872/ambiguous-inheritance-of-function-when-multiple-inheritance-of-classes-that-them">c++ - Ambiguous inheritance of function when multiple inheritance of classes that themselves have diamond inheritance in their hierarchy - Stack Overflow</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgc5b921f" class="outline-3">
<h3 id="orgc5b921f"><span class="section-number-3">1.25</span> Type Casting / Type Conversion</h3>
<div class="outline-text-3" id="text-1-25">
</div>
<div id="outline-container-org45d6a34" class="outline-4">
<h4 id="org45d6a34"><span class="section-number-4">1.25.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-25-1">
<p>
In addition to the old C-style castiung, C++ supports new casting
operators which are more type-safe and make the program's intent
explicit, thus enhancing the readability and maintanability. 
</p>

<p>
<b>C-style Casting</b>
</p>

<ul class="org-ul">
<li>(NEW-TYPE) &lt;EXPRESSION&gt;</li>
<li>Note: should be avoided.</li>
<li>Example:
<ul class="org-ul">
<li>char x = (char) 65;</li>
</ul></li>
</ul>

<p>
<b>C++ Sytle-Casting</b>
</p>

<ul class="org-ul">
<li><code>static_cast&lt;TYPE&gt;(EXPR)</code>
<ul class="org-ul">
<li>Use-case: implicity type conversion of related types, conversion
of base class to derived class, void* pointer to othe pointer
(except function pointer.). static_cast is the most used C++
casting operator.</li>
<li>When happens: this casting is performed at compile-time.</li>
<li>Can:
<ul class="org-ul">
<li>Convert between related types such as char to int, int to
double,</li>
<li>Convert from and to void* pointer to other pointers: void* to
double*, double* to void* and so on.</li>
<li>Convert base class to derived class (downcasting).</li>
</ul></li>
<li>Cannot:
<ul class="org-ul">
<li>Convert between unrelated types such as <span class="underline">unsigned long</span> to <span class="underline">double*</span>.</li>
<li>Convert between pointers of unrelated types, for instance int*
to double* or unsigned long to double*.</li>
</ul></li>
</ul></li>

<li><code>reinterpret_cast&lt;TYPE&gt;(EXPR);</code>
<ul class="org-ul">
<li>Use-cases: This is a dangerous low level casting used for
converting unrelated types. WARNING: failed conversion can
result in segmentation fault, core dump and subtle crashing use
with care. 
<ul class="org-ul">
<li>Converting pointers of unrelated types such as double* to int*</li>
<li>Convert void* to function pointer.
<ul class="org-ul">
<li>Loading C-functions from shared libraries (.DLL files on
Windows or .SO on U-nix, Linux, BSD, OSX &#x2026;)</li>
<li>Implement type erasure of function-pointers for reflection
libraries.</li>
</ul></li>
<li>Access hardware registers of Embedded Systems (_memory mapped_
<span class="underline">IO</span>). Many embedded systems such as microcontrollers have
memory mapped-IO which are hardware devices like Analog to
Digital Convertes, digital Input/Output ports bound to
specific memory addresses assigned by the manufacturer. By
writing to those memory locations, it is possible to
configure, control and read data from hardware
devices. <code>reinterpret_cast</code> can be used for converting the
numerical address given in usigned hexadecimal to some pointer
of type int*, char*, double* and so on.</li>
</ul></li>
</ul></li>

<li><code>dynamic_cast&lt;TYPE&gt;(EXPR);</code>
<ul class="org-ul">
<li>Use cases: Casting for polymorphic types, class hierachies for
identifying at runtime instances of derived classes. This is
part of the C++ RTTI - Runtime Type Identification.</li>
<li>When happens: this casting is performed at run-time.</li>
</ul></li>

<li><code>const_cast&lt;TYPE&gt;(EXPR);</code>
<ul class="org-ul">
<li>Use-case: Create non-const reference to const variable, so it
can bypass the const constraint.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org8bd1379" class="outline-4">
<h4 id="org8bd1379"><span class="section-number-4">1.25.2</span> Example: Old C-Style Casting:</h4>
<div class="outline-text-4" id="text-1-25-2">
<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">int</span> k = 10;
&gt;&gt; <span class="org-type">int</span> z = 7;

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> k
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 10.0000f

&gt;&gt; <span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">(</span>k<span class="org-rainbow-delimiters-depth-1">)</span> / z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.42857f
&gt;&gt; 

&gt;&gt; <span class="org-type">int</span> m = 65
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 65

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> m
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'A'</span>
&gt;&gt; 

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>m+1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'B'</span>
&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>m+2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'C'</span>
&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>m+3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'D'</span>
&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>m+5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'F'</span>
&gt;&gt; 
</pre>
</div>
</div>
</div>

<div id="outline-container-org33d7299" class="outline-4">
<h4 id="org33d7299"><span class="section-number-4">1.25.3</span> Example: Static Casting</h4>
<div class="outline-text-4" id="text-1-25-3">
<ul class="org-ul">
<li><b>Implicit conversion:</b></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">int</span> k = 10;
&gt;&gt; <span class="org-type">int</span> z = 7;

&gt;&gt; k / z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 1

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>k<span class="org-rainbow-delimiters-depth-1">)</span> / z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.4285714

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>k<span class="org-rainbow-delimiters-depth-1">)</span> / z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.42857f
&gt;&gt; 

&gt;&gt; <span class="org-type">int</span> m = 65;
&gt;&gt; <span class="org-type">char</span> ch;
&gt;&gt; ch = m
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'A'</span>
&gt;&gt; 
<span class="org-comment-delimiter">// </span><span class="org-comment">Implicit conversion </span>
&gt;&gt; ch = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>m<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'A'</span>
&gt;&gt; ch = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>m + 1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'B'</span>
&gt;&gt; ch = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>m + 2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'C'</span>
&gt;&gt; ch = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>m + 3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'D'</span>
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li><b>Pointer conversion:</b></li>
</ul>

<p>
Conversion between pointer of unrelated types is not possible with
static casting. 
</p>

<div class="org-src-container">
<pre class="src src-cpp">
&gt;&gt; <span class="org-type">double</span> x = 10.2;
&gt;&gt; <span class="org-type">int</span> k = 10;
&gt;&gt; x

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>&amp;x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">ROOT_prompt_5</span>:1:1: error: <span class="org-keyword">static_cast</span> from <span class="org-warning">'</span><span class="org-type">double</span> *<span class="org-warning">'</span> to <span class="org-warning">'</span><span class="org-type">int</span> *<span class="org-warning">'</span> is <span class="org-keyword">not</span> allowed
<span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>&amp;x<span class="org-rainbow-delimiters-depth-1">)</span>
^~~~~~~~~~~~~~~~~~~~~
&gt;&gt; 


</pre>
</div>

<p>
Conversion to and from void pointer to other pointer types (except
function pointer) is possible: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">double</span> x = 10.2;
&gt;&gt; <span class="org-type">int</span> k = 10;

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>&amp;x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f639f3ca010
&gt;&gt; 
&gt;&gt; <span class="org-type">void</span>* ptrErased = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>&amp;x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f639f3ca010
&gt;&gt; 
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptrErased<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f639f3ca010
&gt;&gt; *<span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptrErased<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 10.200000
&gt;&gt; 

&gt;&gt; ptrErased = &amp;k
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f639f3ca018
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptrErased<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f639f3ca018

<span class="org-comment-delimiter">// </span><span class="org-comment">However, it may fail without any notice. </span>
&gt;&gt; *<span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptrErased<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 4.9406565e-323
&gt;&gt; 

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptrErased<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f639f3ca018
&gt;&gt; *<span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptrErased<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 10
&gt;&gt; 

</pre>
</div>

<p>
Conversion from number (numeric value of address) to to pointer is not
possible with static casting.
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; &amp;x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f639f3ca010
&gt;&gt; 
&gt;&gt; <span class="org-type">double</span>* ptrX = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f639f3ca010<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">ROOT_prompt_18</span>:1:16: error: cannot cast from type <span class="org-warning">'</span><span class="org-type">long</span><span class="org-warning">'</span> to pointer type <span class="org-warning">'</span><span class="org-type">double</span> *<span class="org-warning">'</span>
<span class="org-type">double</span>* ptrX = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f639f3ca010<span class="org-rainbow-delimiters-depth-1">)</span>
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
&gt;&gt; <span class="org-type">double</span>* ptrX = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f639f3ca010UL<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">ROOT_prompt_19</span>:1:16: error: cannot cast from type <span class="org-warning">'</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-warning">'</span> to pointer type <span class="org-warning">'</span><span class="org-type">double</span> *<span class="org-warning">'</span>
<span class="org-type">double</span>* ptrX = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f639f3ca010UL<span class="org-rainbow-delimiters-depth-1">)</span>
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li><b>Conversion between polymorphic types</b> / Classes from a given
hierarchy.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">using</span> <span class="org-type">cstring</span> = <span class="org-keyword">const</span> <span class="org-type">char</span>*;

<span class="org-keyword">class</span> <span class="org-type">Base</span> <span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
        <span class="org-function-name">Base</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
        <span class="org-keyword">virtual</span> ~<span class="org-function-name">Base</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
        <span class="org-keyword">virtual</span> <span class="org-type">cstring</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> <span class="org-string">"Base"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">class</span> <span class="org-type">DerivedA</span>: <span class="org-keyword">public</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
         <span class="org-type">cstring</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> <span class="org-string">"DerivedA"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-type">void</span> <span class="org-function-name">showA</span><span class="org-rainbow-delimiters-depth-2">(){</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Exclusive method of class A."</span> &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">class</span> <span class="org-type">DerivedB</span>: <span class="org-keyword">public</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
        <span class="org-type">cstring</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> <span class="org-string">"DerivedB"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-type">double</span> <span class="org-function-name">method</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span>
                <span class="org-keyword">return</span> 3 * x;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-type">void</span> <span class="org-function-name">showB</span><span class="org-rainbow-delimiters-depth-2">(){</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Exclusive method of class B."</span> &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">Base</span>     <span class="org-variable-name">b</span>;
<span class="org-type">DerivedA</span> <span class="org-variable-name">da</span>;
<span class="org-type">DerivedB</span> <span class="org-variable-name">db</span>;

<span class="org-type">Base</span>* <span class="org-variable-name">ptr</span> = <span class="org-constant">nullptr</span>;

&gt;&gt; ptr = &amp;b
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Base</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7fd81941b010
&gt;&gt; ptr-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span>cstring<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>
&gt;&gt; 

&gt;&gt; ptr = &amp;da;
&gt;&gt; ptr-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span>cstring<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedA"</span>

&gt;&gt; ptr = &amp;db;
&gt;&gt; ptr-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span>cstring<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedB"</span>
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Downcast/Convert at compile-time pointer from the base class</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">to derived class</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------------------------------</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Try access exclusive method:</span>
&gt;&gt; ptr = &amp;da;
&gt;&gt; ptr-&gt;showA<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">ROOT_prompt_42</span>:1:6: error: no member named <span class="org-warning">'</span>showA<span class="org-warning">'</span> in <span class="org-warning">'</span>Base<span class="org-warning">'</span>
ptr-&gt;showA<span class="org-rainbow-delimiters-depth-1">()</span>
~~~  ^

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">DerivedA</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span>cstring<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedA"</span>

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">DerivedA</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;showA<span class="org-rainbow-delimiters-depth-1">()</span>
Exclusive method of <span class="org-keyword">class</span> <span class="org-type">A</span>.
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Note: Can result in undefined behavior!</span>
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">DerivedB</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;showB<span class="org-rainbow-delimiters-depth-1">()</span>
Exclusive method of <span class="org-keyword">class</span> <span class="org-type">B</span>.

&gt;&gt; 
&gt;&gt; ptr = &amp;db;
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">DerivedB</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span>cstring<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedB"</span>
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">DerivedB</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;showB<span class="org-rainbow-delimiters-depth-1">()</span>
Exclusive method of <span class="org-keyword">class</span> <span class="org-type">B</span>.
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">DerivedB</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;method<span class="org-rainbow-delimiters-depth-1">(</span>3.0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 9.0000000
&gt;&gt; 
</pre>
</div>


<ul class="org-ul">
<li><b>Conversio from/to void</b> to function pointer is not possible.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">double</span> someFunction<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-type">int</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> 3.0 * x + y; <span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; someFunction<span class="org-rainbow-delimiters-depth-1">(</span>3, 5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 14.000000

&gt;&gt; <span class="org-type">void</span>* ptrErasure = <span class="org-constant">nullptr</span>;

&gt;&gt; ptrErasure = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-type">someFunction</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">ROOT_prompt_26</span>:1:14: error: <span class="org-keyword">static_cast</span> from <span class="org-warning">'</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-1">(</span>*<span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-warning">'</span> to <span class="org-warning">'</span><span class="org-type">void</span> *<span class="org-warning">'</span> is <span class="org-keyword">not</span> allowed
ptrErasure = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>someFunction<span class="org-rainbow-delimiters-depth-1">)</span>
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

<span class="org-comment-delimiter">// </span><span class="org-comment">However, it is possible with the old C-style casting. </span>
&gt;&gt; ptrErasure = <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">)</span> &amp;someFunction
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f639f3730a0

<span class="org-comment-delimiter">// </span><span class="org-comment">Or: </span>
&gt;&gt; ptrErasure = <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-function-name">someFunction</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f639f3730a0
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">But, it works with C-style casting.</span>
&gt;&gt; <span class="org-keyword">auto</span> fnPointer2 = <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> ptrErasure
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> Function @0x7f639f3730a0
&gt;&gt; 
&gt;&gt; fnPointer2<span class="org-rainbow-delimiters-depth-1">(</span>3, 4<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 13.000000
&gt;&gt; fnPointer2<span class="org-rainbow-delimiters-depth-1">(</span>5, 4<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 19.000000

</pre>
</div>
</div>
</div>

<div id="outline-container-orga359edf" class="outline-4">
<h4 id="orga359edf"><span class="section-number-4">1.25.4</span> Example: Reinterpret Cast</h4>
<div class="outline-text-4" id="text-1-25-4">
<ul class="org-ul">
<li>Casting function/pointer from and to void*
<ul class="org-ul">
<li>Note: this is useful for type erasure and reflection and loading
functions/symbols from shared libraries at runtime.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">double</span> <span class="org-function-name">someFunction</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-type">int</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> 3.0 * x + y; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-type">double</span> <span class="org-function-name">mfun1</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> x * x + 10 * x - 25; <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span>* <span class="org-variable-name">ptrErasure</span> = <span class="org-constant">nullptr</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Testing function some function:</span>
&gt;&gt; ptrErasure = <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>&amp;someFunction<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7fe3b065a080

&gt;&gt; <span class="org-keyword">auto</span> fnPtr1 = <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptrErasure<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> Function @0x7fe3b065a080

&gt;&gt; fnPtr1<span class="org-rainbow-delimiters-depth-1">(</span>3, 5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 14.000000
&gt;&gt; fnPtr1<span class="org-rainbow-delimiters-depth-1">(</span>5, 5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 20.000000
&gt;&gt; 
&gt;&gt; <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptrErasure<span class="org-rainbow-delimiters-depth-1">)(</span>3, 5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 14.000000
&gt;&gt; <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptrErasure<span class="org-rainbow-delimiters-depth-1">)(</span>4, 5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 17.000000
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Testing with mfun</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">--&gt; C-style casting  </span>
&gt;&gt; ptrErasure = <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">)</span> mfun1
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f94856da090
&gt;&gt; ptrErasure = <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">)</span> &amp;mfun1
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f94856da090
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Failed   </span>
&gt;&gt; ptrErasure = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>&amp;mfun1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">ROOT_prompt_7</span>:1:14: error: <span class="org-keyword">static_cast</span> from <span class="org-warning">'</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-1">(</span>*<span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-warning">'</span> to <span class="org-warning">'</span><span class="org-type">void</span> *<span class="org-warning">'</span> is <span class="org-keyword">not</span> allowed
ptrErasure = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>&amp;mfun1<span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; <span class="org-keyword">auto</span> fnPtr2 = <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>mfun1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> Function @0x7f94856da090

&gt;&gt; fnPtr2<span class="org-rainbow-delimiters-depth-1">(</span>4<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 31.000000
&gt;&gt; fnPtr2<span class="org-rainbow-delimiters-depth-1">(</span>5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 50.000000
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">It is really dangerous as it can cast anything to anything!</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">and the compiler cannot help.    </span>
&gt;&gt; <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>4<span class="org-rainbow-delimiters-depth-1">)(</span>5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">*** Break *** segmentation violation</span>

</pre>
</div>

<ul class="org-ul">
<li>Cast address/pointer to int and print it in hexadecimal format.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; 
&gt;&gt; <span class="org-type">double</span> x;
&gt;&gt; &amp;x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7fd510b760a0
&gt;&gt; 
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::hex &lt;&lt; <span class="org-string">"0x"</span> &lt;&lt; <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::uintptr_t<span class="org-rainbow-delimiters-depth-1">&gt;(</span>&amp;x<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-constant">std</span>::dec &lt;&lt; <span class="org-string">"\n"</span>;
0x7fd510b760a0

<span class="org-type">void</span> printAddress<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span>* <span class="org-variable-name">ptr</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Address of variable is = "</span> 
               &lt;&lt; <span class="org-constant">std</span>::hex &lt;&lt; <span class="org-string">"0x"</span> &lt;&lt; <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::uintptr_t<span class="org-rainbow-delimiters-depth-2">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-2">)</span>
               &lt;&lt; <span class="org-constant">std</span>::dec 
               &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>


&gt;&gt; <span class="org-constant">std</span>::string s
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">""</span>
&gt;&gt; &amp;s
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7fd510b760b0
&gt;&gt; 
&gt;&gt; <span class="org-type">double</span> m
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.0000000
&gt;&gt; 
&gt;&gt; printAddress<span class="org-rainbow-delimiters-depth-1">(</span>&amp;s<span class="org-rainbow-delimiters-depth-1">)</span>
Address of <span class="org-type">variable</span> <span class="org-variable-name">is</span> = 0x7fd510b760b0
&gt;&gt; printAddress<span class="org-rainbow-delimiters-depth-1">(</span>&amp;m<span class="org-rainbow-delimiters-depth-1">)</span>
Address of <span class="org-type">variable</span> <span class="org-variable-name">is</span> = 0x7fd510b760d0
</pre>
</div>

<ul class="org-ul">
<li>Casting memory locations to pointer.
<ul class="org-ul">
<li>Note: It doesn't have applicability in most cases, but it can be
useful for accessing memory mapped IO.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">double</span> x = 10.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 10.000000
&gt;&gt; <span class="org-type">unsigned</span> <span class="org-type">long</span> n = 300
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 300
&gt;&gt; 

&gt;&gt; &amp;x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f3fd32e9010
&gt;&gt; &amp;n
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f3fd32e9018
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">=========== Variable x =================</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Failure! Doesn't compile</span>
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f3fd32e9010<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">ROOT_prompt_4</span>:1:1: error: cannot cast from type <span class="org-warning">'</span><span class="org-type">long</span><span class="org-warning">'</span> to pointer type <span class="org-warning">'</span><span class="org-type">double</span> *<span class="org-warning">'</span>
<span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f3fd32e9010<span class="org-rainbow-delimiters-depth-1">)</span>
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
&gt;&gt; 
&gt;&gt; <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f3fd32e9010<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f3fd32e9010
&gt;&gt; *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f3fd32e9010<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 10.000000
&gt;&gt; *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f3fd32e9010<span class="org-rainbow-delimiters-depth-1">)</span> = 100.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 100.00000
&gt;&gt; x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 100.00000
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">=========== Variable n =================</span>
&gt;&gt; <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f3fd32e9018<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f3fd32e9018
&gt;&gt; *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f3fd32e9018<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 300
&gt;&gt; *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f3fd32e9018<span class="org-rainbow-delimiters-depth-1">)</span> = 100
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 100
&gt;&gt; <span class="org-type">int</span>&amp; z = *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f3fd32e9018<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 100
&gt;&gt; z  = 500
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 500
&gt;&gt; n
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 500
&gt;&gt; n = 600
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 600
&gt;&gt; z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 600
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Load Symbols from a DLL / Shared Object
<ul class="org-ul">
<li>Note: Windows uses the Win32 API-Calls <a href="https://docs.microsoft.com/en-us/windows/desktop/api/libloaderapi/nf-libloaderapi-loadlibrarya">LoadLibrary</a>, LoadLibraryA,
LoadLibraryW, <a href="https://docs.microsoft.com/en-us/windows/desktop/api/libloaderapi/nf-libloaderapi-getprocaddress">GetProcAddress</a> and so on.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">dlfcn.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">GNU Scientific Library - Linear Algebra CBLAS </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">dllPath</span> = <span class="org-string">"/usr/lib64/libgslcblas.so"</span>;

&gt;&gt; <span class="org-type">void</span>* libHandle = dlopen<span class="org-rainbow-delimiters-depth-1">(</span>dllPath, RTLD_LAZY<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x1be2de0
&gt;&gt; 

&gt;&gt; <span class="org-type">void</span>* sym = dlsym<span class="org-rainbow-delimiters-depth-1">(</span>libHandle, <span class="org-string">"cblas_daxpy"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f3fb97d2010

&gt;&gt; sym == <span class="org-constant">nullptr</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">auto</span> cblas_daxpy = <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">double</span>, <span class="org-keyword">const</span> <span class="org-type">double</span>*, <span class="org-type">int</span>, <span class="org-type">double</span>*, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>sym<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)(</span><span class="org-type">int</span>, <span class="org-type">double</span>, <span class="org-keyword">const</span> <span class="org-type">double</span> *, <span class="org-type">int</span>, <span class="org-type">double</span> *, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> Function @0x7f3fb97d2010
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Or </span>
<span class="org-keyword">using</span> cblas_daxpy_type = <span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span>, <span class="org-type">double</span>, <span class="org-keyword">const</span> <span class="org-type">double</span>*, <span class="org-type">int</span>, <span class="org-type">double</span>*, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; <span class="org-keyword">auto</span> xs = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span> 3.0, 5.0, 6.0, 10.0, 8.0<span class="org-rainbow-delimiters-depth-1">}</span>;
&gt;&gt; <span class="org-keyword">auto</span> ys = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span> 2.0, 2.0, 2.0,  2.0, 2.0<span class="org-rainbow-delimiters-depth-1">}</span>;
&gt;&gt; 

&gt;&gt; cblas_daxpy<span class="org-rainbow-delimiters-depth-1">(</span>xs.size<span class="org-rainbow-delimiters-depth-2">()</span>, 4.0, &amp;xs<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span>, 1, &amp;ys<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span>, 1<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; xs
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span>, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-rainbow-delimiters-depth-1">{</span> 3.0000000, 5.0000000, 6.0000000, 10.000000, 8.0000000 <span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; ys
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span>, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-rainbow-delimiters-depth-1">{</span> 14.000000, 22.000000, 26.000000, 42.000000, 34.000000 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Close the library handle (Better use SMART POINTERS!!!!)</span>
&gt;&gt; dlclose<span class="org-rainbow-delimiters-depth-1">(</span>libHandle<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 0
&gt;&gt; 
</pre>
</div>
</div>
</div>

<div id="outline-container-orge96348a" class="outline-4">
<h4 id="orge96348a"><span class="section-number-4">1.25.5</span> Example: Const cast</h4>
<div class="outline-text-4" id="text-1-25-5">
<p>
Const cast is used for removing the const qualifier/modifier from const
reference or const pointer in order to modify the referenced memory
location. 
</p>

<ul class="org-ul">
<li>Note: The const cast cannot be used for removing the const
qualifierfrom const variables. In this case the casting behavior
is undefined.</li>
<li>Documentation: <a href="https://en.cppreference.com/w/cpp/language/const_cast">const_cast conversion - cppreference.com</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">double</span> x = 10.0;
&gt;&gt; <span class="org-keyword">const</span> <span class="org-type">double</span>&amp; xref = x;
&gt;&gt; xref
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 10.000000
&gt;&gt; 
&gt;&gt; xref = 20.0
<span class="org-function-name">ROOT_prompt_3</span>:1:6: error: cannot assign to variable <span class="org-warning">'</span>xref<span class="org-warning">'</span> with <span class="org-keyword">const</span>-qualified type <span class="org-warning">'</span><span class="org-keyword">const</span> <span class="org-type">double</span> &amp;<span class="org-warning">'</span>
xref = 20.0
~~~~ ^
<span class="org-function-name">ROOT_prompt_1</span>:1:15: note: variable <span class="org-warning">'</span>xref<span class="org-warning">'</span> declared <span class="org-keyword">const</span> here
<span class="org-keyword">const</span> <span class="org-type">double</span>&amp; xref = x;
~~~~~~~~~~~~~~^~~~~~~~
&gt;&gt; 
<span class="org-comment-delimiter">// </span><span class="org-comment">Remove the const qualifier of xref </span>
&gt;&gt; <span class="org-keyword">const_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>&amp;<span class="org-rainbow-delimiters-depth-1">&gt;(</span>xref<span class="org-rainbow-delimiters-depth-1">)</span> = 25.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 25.000000
&gt;&gt; x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 25.000000
&gt;&gt; xref
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 25.000000
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Creating a non-const reference from a const reference.</span>
&gt;&gt; <span class="org-type">double</span>&amp; usualRef = <span class="org-keyword">const_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>&amp;<span class="org-rainbow-delimiters-depth-1">&gt;(</span>xref<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 25.000000
&gt;&gt; usualRef = 16.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 16.000000
&gt;&gt; x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 16.000000
&gt;&gt; xref
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 16.000000
&gt;&gt; 
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfa4147e" class="outline-4">
<h4 id="orgfa4147e"><span class="section-number-4">1.25.6</span> References and further reading</h4>
<div class="outline-text-4" id="text-1-25-6">
<ul class="org-ul">
<li>Cambridge University - <b>Casting in C++ (intermediate level)</b> -
<a href="http://www-h.eng.cam.ac.uk/help/tpl/languages/C++/casting.html">http://www-h.eng.cam.ac.uk/help/tpl/languages/C++/casting.html</a></li>

<li><b>4.4a  Explicit type conversion (casting)</b> -
<a href="http://www.learncpp.com/cpp-tutorial/4-4a-explicit-type-conversion-casting/">http://www.learncpp.com/cpp-tutorial/4-4a-explicit-type-conversion-casting/</a></li>

<li><a href="https://anteru.net/blog/2007/12/18/200/index.html">https://anteru.net/blog/2007/12/18/200/index.html</a></li>

<li><b>Casting operators in C++ | Set 1 (const_cast)</b> -
<a href="http://www.geeksforgeeks.org/casting-operators-in-c-set-1-const_cast/">http://www.geeksforgeeks.org/casting-operators-in-c-set-1-const_cast/</a></li>

<li><b>Casting  what could possibly go wrong?</b> -
<a href="https://blog.feabhas.com/2013/09/casting-what-could-possibly-go-wrong/">https://blog.feabhas.com/2013/09/casting-what-could-possibly-go-wrong/</a></li>

<li><b>C++ Casting, or: "Oh No, They Broke Malloc!</b> -
<a href="https://embeddedartistry.com/blog/2017/2/28/c-casting-or-oh-no-we-broke-malloc">https://embeddedartistry.com/blog/2017/2/28/c-casting-or-oh-no-we-broke-malloc</a></li>

<li><b>When should static_cast, dynamic_cast, const_cast and
reinterpret_cast be used?</b> - <a href="https://stackoverflow.com/questions/332030/when-should-static-cast-dynamic-cast-const-cast-and-reinterpret-cast-be-used">https://stackoverflow.com/questions/332030/when-should-static-cast-dynamic-cast-const-cast-and-reinterpret-cast-be-used</a></li>

<li><a href="http://cppblogs.blogspot.com.br/2013/08/c-style-casts.html">http://cppblogs.blogspot.com.br/2013/08/c-style-casts.html</a></li>

<li><b>Type-Conversion operators</b> -
<a href="http://www.bogotobogo.com/cplusplus/typecast.php">http://www.bogotobogo.com/cplusplus/typecast.php</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgb34ece5" class="outline-3">
<h3 id="orgb34ece5"><span class="section-number-3">1.26</span> OOP RTTI - Runtime Type Identification</h3>
<div class="outline-text-3" id="text-1-26">
</div>
<div id="outline-container-org04748fb" class="outline-4">
<h4 id="org04748fb"><span class="section-number-4">1.26.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-26-1">
<p>
RTTI - Runtime Type Identification is the ability to provide
information about types at rutime rather than at compile time. It is a
limited form of reflection. In C++, the RTTI functionality is provided
by the operators <b>typeid</b> getting type information and <b>dynamic_cast</b> used
for safely casting polymorphic types.
</p>

<p>
<b>RTTI in C++:</b>
</p>

<ul class="org-ul">
<li>Operator <b>dynamic_cast</b></li>
<li>Operator <b>typeid</b></li>
<li>Class      std::type_info</li>
<li>Exception: std::bad_typeid (derived class of std::exception)</li>
</ul>

<p>
<b>Further Reading</b> 
</p>

<ul class="org-ul">
<li><b>Inneficiences of C++ - Fact or Fiction</b>
<ul class="org-ul">
<li><a href="https://www.iar.com/globalassets/about-us/events/atc2015/inefficiencies-of-c.pdf">https://www.iar.com/globalassets/about-us/events/atc2015/inefficiencies-of-c.pdf</a></li>
</ul></li>

<li><b>How C++ Works</b>
<ul class="org-ul">
<li><a href="http://pages.cpsc.ucalgary.ca/~bdstephe/585_W11/d403_C++.pdf">http://pages.cpsc.ucalgary.ca/~bdstephe/585_W11/d403_C++.pdf</a></li>
</ul></li>

<li><b>Const, RTTI and Efficiency</b>
<ul class="org-ul">
<li><a href="https://www.artima.com/intv/const2.html">https://www.artima.com/intv/const2.html</a></li>
</ul></li>

<li><b>RTTI and Reflection</b>
<ul class="org-ul">
<li><a href="http://www.cs.huji.ac.il/course/2004/ood/docs/lec08.pdf">http://www.cs.huji.ac.il/course/2004/ood/docs/lec08.pdf</a></li>
</ul></li>

<li><b>Visual RTTI Inspection</b>
<ul class="org-ul">
<li><a href="https://blog.quarkslab.com/visual-c-rtti-inspection.html">https://blog.quarkslab.com/visual-c-rtti-inspection.html</a></li>
</ul></li>

<li><b>C++ RTTI - casting around</b>
<ul class="org-ul">
<li><a href="http://www.two-sdg.demon.co.uk/curbralan/papers/RTTI.html">http://www.two-sdg.demon.co.uk/curbralan/papers/RTTI.html</a></li>
</ul></li>

<li><b>Practical RTTI For Games</b>
<ul class="org-ul">
<li><a href="https://gamedevcoder.wordpress.com/2013/02/16/c-plus-plus-rtti-for-games/">https://gamedevcoder.wordpress.com/2013/02/16/c-plus-plus-rtti-for-games/</a></li>
</ul></li>

<li><a href="https://stackoverflow.com/questions/281818/unmangling-the-result-of-stdtype-infoname">c++ - Unmangling the result of std::type_info::name - Stack Overflow</a></li>

<li><a href="https://stackoverflow.com/questions/579887/how-expensive-is-rtti">c++ - How expensive is RTTI? - Stack Overflow</a></li>
</ul>
</div>
</div>

<div id="outline-container-org0f0a6ab" class="outline-4">
<h4 id="org0f0a6ab"><span class="section-number-4">1.26.2</span> Operator typeid</h4>
<div class="outline-text-4" id="text-1-26-2">
<p>
The operator typeid retrives information about a given type by
returning a reference to an object of type <span class="underline">typeinfo</span>.
</p>

<p>
Header: 
</p>
<ul class="org-ul">
<li>&lt;typeinfo&gt;</li>
</ul>

<p>
<b>Operator typeid:</b>
</p>

<ul class="org-ul">
<li>Documentaiton: <a href="https://en.cppreference.com/w/cpp/language/typeid">typeid operator - cppreference.com</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">const</span> <span class="org-type">typeinfo</span>&amp; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span>ARGUMENT<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Use cases: 
</p>

<ul class="org-ul">
<li>Compare types.</li>
<li>Recover wrapped type from type erasure. This approach is used by
Boost.Any and std::any from C++17.</li>
<li>Debugging</li>
</ul>

<p>
<b>Class std::type_info:</b>
</p>

<ul class="org-ul">
<li>Documentation: <a href="https://en.cppreference.com/w/cpp/types/type_info">std::type_info - cppreference.com</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">type_info</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
   <span class="org-keyword">virtual</span> ~<span class="org-function-name">type_info</span><span class="org-rainbow-delimiters-depth-2">()</span>;
   <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">==</span><span class="org-rainbow-delimiters-depth-2">(</span>cons <span class="org-type">type_info</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">const</span>;
   <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">!=</span><span class="org-rainbow-delimiters-depth-2">(</span>cons <span class="org-type">type_info</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">const</span>;
   <span class="org-type">bool</span> <span class="org-function-name">before</span><span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-keyword">const</span> <span class="org-type">type_info</span>&amp; <span class="org-variable-name">rhs</span> <span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">const</span>;
   <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-function-name">name</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span>;
   <span class="org-comment-delimiter">// </span><span class="org-comment">Since: C++11</span>
   <span class="org-type">size_t</span> <span class="org-function-name">hash_code</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Note: the type name returned by method .name() of type_info returns
the decorated name of type or the mangled name of type. The value
returned is compiler-dependent which means that a code should not rely
on the returned name. 
</p>

<p>
<b>Example:</b>
</p>

<p>
Get type name: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span>.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"i"</span>

&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span>.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"d"</span>

&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span>.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"f"</span>

&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span>.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"l"</span>

&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span>*<span class="org-rainbow-delimiters-depth-1">)</span>.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Pi"</span>

&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">)</span>.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Pd"</span>

&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span>*<span class="org-rainbow-delimiters-depth-1">)</span>.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Pf"</span>

&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">long</span>*<span class="org-rainbow-delimiters-depth-1">)</span>.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Pl"</span>

&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span><span class="org-rainbow-delimiters-depth-1">)</span>.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"v"</span>

&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">)</span>.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Pv"</span>

&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span>**<span class="org-rainbow-delimiters-depth-1">)</span>.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"PPv"</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span>.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"St6vectorIdSaIdEE"</span>

&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span>.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"St5dequeIdSaIdEE"</span>
</pre>
</div>

<p>
Explore type_info object:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">const</span> <span class="org-constant">std</span>::type_info&amp; ti = <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span>3.434<span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; ti.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"d"</span>

&gt;&gt; ti.hash_code<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 14494284460613645429

<span class="org-comment-delimiter">// </span><span class="org-comment">Check whether type is int </span>
&gt;&gt; ti == <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Check whether type is double </span>
&gt;&gt; ti == <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Return the managled name of type </span>
&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span>.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"NSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE"</span>

&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span>*<span class="org-rainbow-delimiters-depth-1">)</span>.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"PNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE"</span>


&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span>.hash_code<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 5774750460303204477
</pre>
</div>

<p>
typeid and polymorphic types: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-keyword">virtual</span> <span class="org-type">void</span> <span class="org-function-name">dummy</span><span class="org-rainbow-delimiters-depth-2">(){}</span> <span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-keyword">class</span> <span class="org-type">Da</span>: <span class="org-keyword">public</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{}</span>;
<span class="org-keyword">class</span> <span class="org-type">Db</span>: <span class="org-keyword">public</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{}</span>;

&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span>Base<span class="org-rainbow-delimiters-depth-1">)</span>.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"4Base"</span>

&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span>Da<span class="org-rainbow-delimiters-depth-1">)</span>.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"2Da"</span>

&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span>Db<span class="org-rainbow-delimiters-depth-1">)</span>.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"2Db"</span>

&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Base</span>*<span class="org-rainbow-delimiters-depth-1">)</span>.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"P4Base"</span>

&gt;&gt; <span class="org-keyword">typeid</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Da</span>*<span class="org-rainbow-delimiters-depth-1">)</span>.name<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"P2Da"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge42b4ae" class="outline-4">
<h4 id="orge42b4ae"><span class="section-number-4">1.26.3</span> Operator dynamic_cast</h4>
<div class="outline-text-4" id="text-1-26-3">
<p>
The operator <span class="underline">dynamic_cast</span> is used for safely downcasting a base class
to a particular derived class and is also for checking whether a
pointer to the base class refers to an instance of a particular
derived class. In general, dynamic casting should be avoided as it
violates OOP good practices, for instance, the client code in most
cases should have no knowledge about which particular derived class it
is dealing with and it also should be able to work with new derived
classes without any modification. The usage of dynamic cast and
if-else in a client code for performing operation specific for each
derived class can be avoided by adding new a virtual member function
to the base class or by using the visitor design pattern or double
dispatching. 
</p>

<p>
The operator <span class="underline">static_cast</span> can also be used for downcasting, however if
the operation is not possible, the result is undefined, thus using
<span class="underline">static_cast</span> is unsafe. It is only safe using <span class="underline">static_cast</span>, if there is
no doubt that the conversion is possible.
</p>

<p>
Dynamic cast use case(s): 
</p>

<ul class="org-ul">
<li>Extend the functionality of a class hierarchy without modifying the
base class or adding new virtual member functions. However, it will
require modification of client code if a new derived class is
created.</li>
</ul>

<p>
Notes and remarks: 
</p>

<ul class="org-ul">
<li>The operator <span class="underline">dynamic_cast</span> only works with polymorphic types, in
other words, any class with at least one virtual member function.</li>

<li><span class="underline">dynamic_cast</span> operator only works with <span class="underline">pointers</span>  or <span class="underline">references</span> to
classes with at least one virtual method.</li>

<li><span class="underline">static_cast</span> downcasting is unsafe. There is undefined behavior if
the conversion is not possible.</li>

<li><span class="underline">static_cast</span> is a compile-time construct.</li>

<li><span class="underline">dynamic_cast</span> is a run-time construct.</li>
</ul>

<p>
<b>Casting Pointers</b>
</p>

<p>
If the conversion fails, the pointer to the derived class is set to
null and no exception is thrown. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">BaseClass</span>* <span class="org-variable-name">pointerToBase</span> = &amp;objectOfDerivedA;

<span class="org-comment-delimiter">// </span><span class="org-comment">Downcast pointer from base to derived class</span>
<span class="org-type">DerivedClass</span>* <span class="org-variable-name">pointertoDerived</span> = <span class="org-keyword">dynamic_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">DerivedClass</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>pointerToBase<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Or</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">pointertoDerived</span> = <span class="org-keyword">dynamic_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">DerivedClass</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>pointerToBase<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>pointertoDerived<span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"It is the derived class"</span> &lt;&lt; <span class="org-string">"\n"</span>;
  pointertoDerived-&gt;exclusiveMethod1<span class="org-rainbow-delimiters-depth-2">()</span>;
  ... ... .. 
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span> 
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Conversion failed."</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Casting References</b>
</p>

<p>
In this case, if the casting fails, it throws a <b>std::bad_cast</b>
exception. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">BaseClass</span>&amp; <span class="org-variable-name">refBaseClass</span> = objectOfDerivedA;   
<span class="org-keyword">try</span><span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">Downcast reference </span>
   <span class="org-type">DerivedClass</span>&amp; <span class="org-variable-name">refDerived</span> = <span class="org-keyword">dynamic_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">DerivedClass</span>&amp;<span class="org-rainbow-delimiters-depth-2">&gt;(</span>refBaseClass<span class="org-rainbow-delimiters-depth-2">)</span>;
   <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Found derived class ..."</span> &lt;&lt; <span class="org-string">"\n"</span>;
   refDerived.exclusiveMethod1<span class="org-rainbow-delimiters-depth-2">()</span>; 
   refDerived.exclusiveMethod2<span class="org-rainbow-delimiters-depth-2">()</span>; 
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">catch</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">bad_cast</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-1">){</span>
   <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"Error: casting not possible."</span> &lt;&lt; <span class="org-string">"\n"</span>;
   <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [ERROR] "</span> &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
<b>Example:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
    <span class="org-function-name">Base</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Destructor of base class must always be virtual </span>
    <span class="org-keyword">virtual</span> ~<span class="org-function-name">Base</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;   
      <span class="org-keyword">virtual</span> <span class="org-keyword">auto</span> <span class="org-function-name">getType</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">{</span>
      <span class="org-keyword">return</span> <span class="org-string">"Base"</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>    
   <span class="org-type">void</span> <span class="org-function-name">showType</span><span class="org-rainbow-delimiters-depth-2">(){</span>
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Class type = "</span> &lt;&lt; <span class="org-keyword">this</span>-&gt;getType<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">class</span> <span class="org-type">DerivedA</span>: <span class="org-keyword">public</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
   <span class="org-function-name">DerivedA</span><span class="org-rainbow-delimiters-depth-2">(){}</span>
   <span class="org-keyword">auto</span> <span class="org-function-name">getType</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span>  -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">{</span>
      <span class="org-keyword">return</span> <span class="org-string">"DerivedA"</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">class</span> <span class="org-type">DerivedB</span>: <span class="org-keyword">public</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
   <span class="org-function-name">DerivedB</span><span class="org-rainbow-delimiters-depth-2">(){}</span>
   <span class="org-keyword">auto</span> <span class="org-function-name">getType</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">{</span>
      <span class="org-keyword">return</span> <span class="org-string">"DerivedB"</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Creating testing objects: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">Base</span> <span class="org-variable-name">base</span>;
<span class="org-type">DerivedA</span> <span class="org-variable-name">da</span>;
<span class="org-type">DerivedB</span> <span class="org-variable-name">db</span>;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; Base *ptr = <span class="org-constant">nullptr</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Point to stack-object base </span>
&gt;&gt; ptr = &amp;base
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Base</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f6d9a022010

<span class="org-comment-delimiter">// </span><span class="org-comment">Check whether pointed object is of type base </span>
&gt;&gt; Base* ptrBase = <span class="org-keyword">dynamic_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Base</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>ptrBase<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Object of type Base"</span> &lt;&lt; <span class="org-string">"\n"</span>;<span class="org-rainbow-delimiters-depth-1">}</span>
Object of <span class="org-type">type</span> <span class="org-variable-name">Base</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">dynamic_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">Base</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Object of type Base"</span> &lt;&lt; <span class="org-string">"\n"</span>;<span class="org-rainbow-delimiters-depth-1">}</span>
Object of <span class="org-type">type</span> <span class="org-variable-name">Base</span>
&gt;&gt; 
</pre>
</div>

<p>
Point to the object da (DerivedA)
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; ptr = &amp;da;

<span class="org-comment-delimiter">// </span><span class="org-comment">Cast pointer </span>
&gt;&gt; DerivedA* ptrDA = <span class="org-keyword">dynamic_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">DerivedA</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">DerivedA</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f6d9a022018

&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>ptrDA != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Object of type DerivedA"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
Object of <span class="org-type">type</span> <span class="org-function-name">DerivedA</span>

&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>ptrDA<span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Object of type DerivedA"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
Object of <span class="org-type">type</span> <span class="org-function-name">DerivedA</span>
&gt;&gt; 

&gt;&gt; ptrDA-&gt;showType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Class</span> <span class="org-variable-name">type</span> = DerivedA
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Check whether pointer refers to an object of type DerivedA</span>
&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">dynamic_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">DerivedA</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Object of type A"</span> &lt;&lt; <span class="org-string">"\n"</span>;<span class="org-rainbow-delimiters-depth-1">}</span>
Object of <span class="org-type">type</span> <span class="org-variable-name">A</span>
</pre>
</div>

<p>
Check whether pointer refers to an object of type DerivedB
</p>

<ul class="org-ul">
<li>If the casting is not possible, the dynamic_cast operator returns a
null pointer.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; ptr = &amp;da;

&gt;&gt; DerivedB* ptrDB = <span class="org-keyword">dynamic_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">DerivedB</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">DerivedB</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">nullptr</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>ptrDB != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"=&gt; Type DerivedB"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Casting failed"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-type">Casting</span> <span class="org-function-name">failed</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>ptrDB<span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"=&gt; Type DerivedB"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Casting failed"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-type">Casting</span> <span class="org-variable-name">failed</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">dynamic_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">DerivedB</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"=&gt; Type DerivedB"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Casting failed"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-type">Casting</span> <span class="org-variable-name">failed</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">dynamic_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">DerivedA</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"=&gt; Type DerivedA"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Casting failed"</span><span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
=&gt; Type DerivedA
&gt;&gt; 
</pre>
</div>

<p>
Function which applies operations specific to the derived class using pointers:  
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">processType</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Base</span>* <span class="org-variable-name">ptr</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-keyword">auto</span> <span class="org-variable-name">ptrA</span> = <span class="org-keyword">dynamic_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">DerivedA</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>ptrA<span class="org-rainbow-delimiters-depth-2">){</span>
         <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Found object of type = DerivedA"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">".getType() = "</span> &lt;&lt; ptrA-&gt;getType<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
         <span class="org-keyword">return</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-keyword">auto</span> <span class="org-variable-name">ptrB</span> = <span class="org-keyword">dynamic_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">DerivedB</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>ptrB<span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">" Found object of type = DerivedB"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">".getType() = "</span> &lt;&lt; ptrB-&gt;getType<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-keyword">return</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>ptr<span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Found object of type Base"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">".getType() = "</span> &lt;&lt; ptr-&gt;getType<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-keyword">return</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Null pointer or cannot determine instance type."</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>


&gt;&gt; processType<span class="org-rainbow-delimiters-depth-1">(</span>&amp;da<span class="org-rainbow-delimiters-depth-1">)</span>
Found object <span class="org-type">of</span> <span class="org-variable-name">type</span> = DerivedA
.getType<span class="org-rainbow-delimiters-depth-1">()</span> = DerivedA

&gt;&gt; processType<span class="org-rainbow-delimiters-depth-1">(</span>&amp;db<span class="org-rainbow-delimiters-depth-1">)</span>
 Found object <span class="org-type">of</span> <span class="org-variable-name">type</span> = DerivedB
.getType<span class="org-rainbow-delimiters-depth-1">()</span> = DerivedB

&gt;&gt; processType<span class="org-rainbow-delimiters-depth-1">(</span>&amp;base<span class="org-rainbow-delimiters-depth-1">)</span>
Found object <span class="org-type">of</span> <span class="org-type">type</span> <span class="org-function-name">Base</span>
.getType<span class="org-rainbow-delimiters-depth-1">()</span> = Base

&gt;&gt; processType<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Null</span> <span class="org-variable-name">pointer</span> <span class="org-keyword">or</span> cannot determine instance type.
</pre>
</div>

<p>
Dynamic casting references: 
</p>

<ul class="org-ul">
<li>Note: References to polymorphic objects can be casted with dynamic
cast too. In this case if the operation fails, it throws an
<span class="underline">std::bad_cast</span> exception.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; Base&amp; refb1 = base;

<span class="org-comment-delimiter">// </span><span class="org-comment">Throws exception, casting failed </span>
&gt;&gt; DerivedA&amp; refa1 = <span class="org-keyword">dynamic_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">DerivedA</span>&amp;<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-type">refb1</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: <span class="org-constant">std</span>::bad_cast caught: <span class="org-constant">std</span>::bad_cast
&gt;&gt; 

&gt;&gt; Base&amp; refb2 = da;
&gt;&gt; 
&gt;&gt; DerivedA&amp; refa2 = <span class="org-keyword">dynamic_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">DerivedA</span>&amp;<span class="org-rainbow-delimiters-depth-1">&gt;(</span>refb2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">DerivedA</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f9d32750018
&gt;&gt; 
&gt;&gt; refa2.getType<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedA"</span>
&gt;&gt; 
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2233faf" class="outline-3">
<h3 id="org2233faf"><span class="section-number-3">1.27</span> Namespaces</h3>
<div class="outline-text-3" id="text-1-27">
</div>
<div id="outline-container-org881a2f9" class="outline-4">
<h4 id="org881a2f9"><span class="section-number-4">1.27.1</span> Summary</h4>
<div class="outline-text-4" id="text-1-27-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">C++ Namespace</th>
<th scope="col" class="org-left">Python Equivalent</th>
<th scope="col" class="org-left">Description</th>
</tr>

<tr>
<th scope="col" class="org-left">Operation</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>using namespace std;</code></td>
<td class="org-left">from std import *</td>
<td class="org-left">Import everything from  a namespace.</td>
</tr>

<tr>
<td class="org-left"><code>using std::cout;</code></td>
<td class="org-left">from std import cout</td>
<td class="org-left">Import an object, function from a namespace.</td>
</tr>

<tr>
<td class="org-left">using std::cout, std::cin, std::endl;</td>
<td class="org-left">from std import cout, cin &#x2026;</td>
<td class="org-left">Import multiple items from a namespace (C++17 only.)</td>
</tr>

<tr>
<td class="org-left"><code>namespace mk = mathkit::ellipticfun;</code></td>
<td class="org-left">import mathkit.ellipticfun as mk</td>
<td class="org-left">Create an alias to a namespace.</td>
</tr>

<tr>
<td class="org-left">mathkit::function::sind(90);</td>
<td class="org-left">import mathkit; mathkit.function.sind(90);</td>
<td class="org-left">Call a function from namespace.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org042525b" class="outline-4">
<h4 id="org042525b"><span class="section-number-4">1.27.2</span> Examples</h4>
<div class="outline-text-4" id="text-1-27-2">
<p>
Open namespace:
</p>

<ul class="org-ul">
<li><code>using namespace &lt;namespace&gt;</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Not recommended - It defeats the purpose of namespace which is prevent </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">nameclashes and improve discoverability. </span>
<span class="org-keyword">using</span> <span class="org-keyword">namespace</span> <span class="org-constant">std</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"Hello world"</span> &lt;&lt; <span class="org-string">"\n"</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Import everything from boost linear algebra library.</span>
<span class="org-keyword">using</span> <span class="org-keyword">namespace</span> <span class="org-constant">boost</span>::<span class="org-constant">numeric</span>::<span class="org-constant">ublas</span>;
</pre>
</div>

<p>
Open namespace inside function:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">printNumbers</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Import everything from std namespace </span>
        <span class="org-keyword">using</span> <span class="org-keyword">namespace</span> <span class="org-constant">std</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; 10; i++<span class="org-rainbow-delimiters-depth-2">)</span>
                cout &lt;&lt; <span class="org-string">"i = "</span> &lt;&lt; i &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">C++11 auto syntax for function declaration</span>
<span class="org-keyword">auto</span> <span class="org-function-name">printNumbers</span><span class="org-rainbow-delimiters-depth-1">()</span> -&gt; <span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-keyword">using</span> <span class="org-keyword">namespace</span> <span class="org-constant">std</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; 10; i++<span class="org-rainbow-delimiters-depth-2">)</span>
                cout &lt;&lt; <span class="org-string">"i = "</span> &lt;&lt; i &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">C++14 return type deduction with optional type deduction.</span>
<span class="org-keyword">auto</span> <span class="org-function-name">printNumbers</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Import everything from std namespace </span>
        <span class="org-keyword">using</span> <span class="org-keyword">namespace</span> <span class="org-constant">std</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; 10; i++<span class="org-rainbow-delimiters-depth-2">)</span>
                cout &lt;&lt; <span class="org-string">"i = "</span> &lt;&lt; i &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Using element from namespace without import namespace. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"hello world"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-keyword">auto</span> <span class="org-variable-name">matrixI3</span> =  <span class="org-constant">boost</span>::<span class="org-constant">numeric</span>::<span class="org-constant">ublas</span>::identity_matrix<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>3<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-unmatched">)</span>;
</pre>
</div>

<p>
Import specific elements from namespace 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Option 1 </span>
<span class="org-comment-delimiter">//</span><span class="org-comment">----------------------------------------//</span>
<span class="org-keyword">using</span> <span class="org-constant">std</span>::<span class="org-type">cout</span>; 
<span class="org-keyword">using</span> <span class="org-constant">std</span>::<span class="org-type">cerr</span>; 
<span class="org-keyword">using</span> <span class="org-constant">std</span>::<span class="org-type">endl</span>; 
<span class="org-keyword">using</span> <span class="org-constant">boost</span>::<span class="org-constant">numeric</span>::<span class="org-constant">ublas</span>::<span class="org-type">identity_matrix</span>;
<span class="org-keyword">using</span> <span class="org-constant">boost</span>::<span class="org-constant">numeric</span>::<span class="org-constant">ublas</span>::<span class="org-type">norm_1</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Option 2 =&gt; Multiple imports at same line. </span>
<span class="org-comment-delimiter">//</span><span class="org-comment">----------------------------------------//</span>
<span class="org-keyword">using</span> <span class="org-constant">std</span>::<span class="org-type">cout</span>; <span class="org-keyword">using</span> <span class="org-constant">std</span>::<span class="org-type">cerr</span>;  <span class="org-keyword">using</span> <span class="org-constant">std</span>::<span class="org-type">endl</span>; 
<span class="org-keyword">using</span> <span class="org-constant">boost</span>::<span class="org-constant">numeric</span>::<span class="org-constant">ublas</span>::<span class="org-type">identity_matrix</span>; <span class="org-keyword">using</span> <span class="org-constant">boost</span>::<span class="org-constant">numeric</span>::<span class="org-constant">ublas</span>::<span class="org-type">norm_1</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Option 3 =&gt; C++17 only </span>
<span class="org-comment-delimiter">//</span><span class="org-comment">----------------------------------------//</span>
<span class="org-keyword">using</span> <span class="org-constant">std</span>::<span class="org-type">cout</span>, <span class="org-constant">std</span>::cerr, <span class="org-constant">std</span>::endl; 
<span class="org-keyword">using</span> <span class="org-constant">boost</span>::<span class="org-constant">numeric</span>::<span class="org-constant">ublas</span>::<span class="org-type">identity_matrix</span>, <span class="org-constant">boost</span>::<span class="org-constant">numeric</span>::<span class="org-constant">ublas</span>::norm_1;

</pre>
</div>

<p>
Namespace synonym/alias:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Create namespace alias ub </span>
<span class="org-keyword">namespace</span> <span class="org-constant">ub</span> = <span class="org-constant">boost</span>::<span class="org-constant">numeric</span>::ublas;

<span class="org-function-name">ub</span>::<span class="org-type">matrix</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> matrix1<span class="org-rainbow-delimiters-depth-1">(</span>3, 3, 2.5<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">auto type inference + uniform initalization </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">matrix1</span> = <span class="org-constant">ub</span>::<span class="org-type">matrix</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-rainbow-delimiters-depth-1">{</span>3, 3, 2.5<span class="org-rainbow-delimiters-depth-1">}</span>;

</pre>
</div>

<p>
Creating a namespace: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">ostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">namespace</span> <span class="org-constant">MyFunctions</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Import everything from namespace std </span>
    <span class="org-keyword">using</span> <span class="org-keyword">namespace</span>::<span class="org-constant">std</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Type alias or synonym </span>
    <span class="org-keyword">using</span> <span class="org-type">cstring</span> = <span class="org-keyword">const</span> <span class="org-type">char</span>*;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Or: using MathFunc = std::function&lt;double (double)&gt;;</span>
    <span class="org-keyword">using</span> <span class="org-type">MathFunc</span> = <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">)</span> -&gt; <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>;

    <span class="org-type">cstring</span> <span class="org-variable-name">description</span> = <span class="org-string">"Utility functions"</span>;

    <span class="org-type">double</span> <span class="org-function-name">add</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-2">){</span>
       <span class="org-keyword">return</span> x + y;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">auto</span> <span class="org-function-name">saySomething</span><span class="org-rainbow-delimiters-depth-2">()</span> -&gt; <span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        cout &lt;&lt; <span class="org-string">"A computer was a skilled mathematician who computed firing tables."</span> &lt;&lt; endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">struct</span> <span class="org-type">Coord</span><span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Latitude in degrees/decimal </span>
        <span class="org-type">double</span> <span class="org-variable-name">lat</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Longitude in degrees/decimal </span>
        <span class="org-type">double</span> <span class="org-variable-name">lon</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-keyword">namespace</span> <span class="org-constant">math</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-function-name">showTable</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">MathFunc</span> <span class="org-variable-name">fun</span>, <span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span> = <span class="org-constant">std</span>::cout<span class="org-rainbow-delimiters-depth-3">)</span> -&gt; <span class="org-type">void</span><span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span> = 0; x &lt; 10.0; x += 1.0<span class="org-rainbow-delimiters-depth-4">){</span>
               os &lt;&lt; setw<span class="org-rainbow-delimiters-depth-5">(</span>10<span class="org-rainbow-delimiters-depth-5">)</span> &lt;&lt; x &lt;&lt; setw<span class="org-rainbow-delimiters-depth-5">(</span>10<span class="org-rainbow-delimiters-depth-5">)</span> &lt;&lt; fun<span class="org-rainbow-delimiters-depth-5">(</span>x<span class="org-rainbow-delimiters-depth-5">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
            <span class="org-rainbow-delimiters-depth-4">}</span>
        <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-keyword">auto</span> <span class="org-function-name">makeMultiplier</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">)</span> -&gt; <span class="org-type">MathFunc</span> <span class="org-rainbow-delimiters-depth-3">{</span>
             <span class="org-keyword">return</span> <span class="org-rainbow-delimiters-depth-4">[</span>x<span class="org-rainbow-delimiters-depth-4">](</span><span class="org-type">double</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-4">){</span><span class="org-keyword">return</span> x * x; <span class="org-rainbow-delimiters-depth-4">}</span>;
        <span class="org-rainbow-delimiters-depth-3">}</span>       
    <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">End of namespace MyFunctions --/</span>
</pre>
</div>

<p>
Testing: (CERN's ROOT/Cling REPL.)
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">MyFunctions</span>::add<span class="org-rainbow-delimiters-depth-1">(</span>102.3, -93.4<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 8.9000000
&gt;&gt; <span class="org-constant">MyFunctions</span>::add<span class="org-rainbow-delimiters-depth-1">(</span>102.3, -193.4<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -91.100000
&gt;&gt;
&gt;&gt; <span class="org-constant">MyFunctions</span>::saySomething<span class="org-rainbow-delimiters-depth-1">()</span>
A computer was a skilled mathematician who computed <span class="org-type">firing</span> <span class="org-variable-name">tables</span>
&gt;&gt;

&gt;&gt; <span class="org-constant">MyFunctions</span>::<span class="org-constant">math</span>::showTable<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> x * 3.0 + 4.0;<span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-rainbow-delimiters-depth-1">)</span>
         0         4
         1         7
         2        10
         3        13
  ... ... ... ... 

<span class="org-comment-delimiter">// </span><span class="org-comment">import MyFunctions.math as m</span>
&gt;&gt; <span class="org-keyword">namespace</span> <span class="org-constant">m</span> = <span class="org-constant">MyFunctions</span>::math;
&gt;&gt; <span class="org-constant">m</span>::showTable<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> x * 3.0 + 4.0;<span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-rainbow-delimiters-depth-1">)</span>
         0         4
         1         7
         2        10
         3        13
  ... ... ... ... 

<span class="org-comment-delimiter">// </span><span class="org-comment">from MyFunctions.math import *</span>
&gt;&gt; <span class="org-keyword">using</span> <span class="org-keyword">namespace</span> <span class="org-constant">MyFunctions</span>::<span class="org-constant">math</span>;

&gt;&gt; showTable<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> x * x;<span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-constant">std</span>::cerr <span class="org-rainbow-delimiters-depth-1">)</span>
         0         0
         1         1
         2         4
         3         9
         4        16
    ... ... ... ...  

&gt;&gt; showTable<span class="org-rainbow-delimiters-depth-1">(</span>exp, <span class="org-constant">std</span>::cerr <span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">ROOT_prompt_34</span>:1:1: error: no matching function <span class="org-keyword">for</span> call to <span class="org-warning">'</span>showTable<span class="org-warning">'</span>
showTable<span class="org-rainbow-delimiters-depth-1">(</span>exp, <span class="org-constant">std</span>::cerr <span class="org-rainbow-delimiters-depth-1">)</span>
^~~~~~~~~

&gt;&gt; showTable<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-3">(</span>*<span class="org-rainbow-delimiters-depth-3">)(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>exp<span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">std</span>::cerr<span class="org-rainbow-delimiters-depth-1">)</span>
         0         1
         1   2.71828
         2   7.38906
         3   20.0855
         4   54.5982
         5   148.413
         6   403.429
         7   1096.63
         8   2980.96
         9   8103.08
</pre>
</div>

<p>
Define a function at some namespace: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-constant">General</span>::<span class="org-function-name">GetNumberOfDays</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">d1</span>, <span class="org-type">int</span> <span class="org-variable-name">d2</span><span class="org-rainbow-delimiters-depth-1">){</span>
   <span class="org-keyword">return</span> d2 - d1;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgac6e71a" class="outline-3">
<h3 id="orgac6e71a"><span class="section-number-3">1.28</span> Error Handling and Exceptions</h3>
<div class="outline-text-3" id="text-1-28">
</div>
<div id="outline-container-orgc70e11a" class="outline-4">
<h4 id="orgc70e11a"><span class="section-number-4">1.28.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-28-1">
<p>
<b>C++ has several error Handling approaches:</b>
</p>

<ul class="org-ul">
<li><span class="underline">Exceptions</span>: - try-catch and throw
<ul class="org-ul">
<li>Benefits:
<ul class="org-ul">
<li>Code Separation:
<ul class="org-ul">
<li>Separation of error handling from the computation logic.</li>
</ul></li>
<li>Error notification
<ul class="org-ul">
<li>Forces developers to handle the error by ending the the
program execution when the application is not ready to handle
the error that caused the exception.</li>
</ul></li>
<li>Easier to recover from errors and failures.</li>
<li>Stack Traces:</li>
</ul></li>
<li>Downsides:
<ul class="org-ul">
<li>Increase of executable size - It should not be a concern anymore,
since hard driver are becoming more cheaper with the passing of
time.</li>
<li>According to many sources, exceptions can be a concern in real
time embedded systems.</li>
</ul></li>
</ul></li>

<li><span class="underline">Error codes in global variables</span>
<ul class="org-ul">
<li>Many C APIs handle error by setting some global variable that the
calling code must check for some some error condition. For
instance, the U*nix C-API indicates error by setting the global
variable <span class="underline">errno</span> that must be checked by the calling code after
after some operation that may set this flag. The downside of the
this approach is that if the program doesn't check the global
error flag, the program may continue its execution without
notifying the user that something is wrong what can lead to
runtime bugs hard to trace.</li>

<li>Downsides:
<ul class="org-ul">
<li>It is easy to forget handling global variables with error code.</li>
<li>May have multi-threading racing conditions issues.</li>
<li>Don't notify users that the program cannot handle the runtime
errors.</li>
<li>Hard to trace and debug.</li>
</ul></li>
</ul></li>

<li><span class="underline">Error codes as return value</span>:

<ul class="org-ul">
<li>A function can provide error notification by returning an error
code to the caller. For instance, a function which downloads a
file could return 1 for successful download, 2 for DNS resolution
error, 3 for network error and so on.</li>

<li>Variations:

<ul class="org-ul">
<li><span class="underline">Return an error code such as a bitmask or enumeration</span>. Example:
HRESULT type is returned type by many Windows COM API for
indicating error
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/HRESULT">https://en.wikipedia.org/wiki/HRESULT</a></li>
<li><a href="https://docs.microsoft.com/en-us/windows/desktop/seccrypto/common-hresult-values">Common HRESULT Values | Microsoft Docs</a></li>
<li><a href="https://docs.microsoft.com/en-us/windows/desktop/api/unknwn/nf-unknwn-iunknown-queryinterface(refiid_void)">IUnknown::QueryInterface(REFIID,void) | Microsoft Docs</a></li>
</ul></li>

<li><span class="underline">Return a null pointer</span> to indicate failure or the absence of an
object, that it was no possible to find an object or allocate
memory. Example: C++ new operator with nothrow,

<ul class="org-ul">
<li>Example:</li>
<li>Base* ptr = new (nothrow ) Derived;</li>
<li>if(ptr){ .. do something &#x2026;} else { std::puts("Error: &#x2026; "); )}</li>
</ul></li>

<li><span class="underline">Return an error code or error flag from class methods</span>. This
approach is used by C++ streams std::iosbase and its derived
classes, std::cin, std::istream and so on., bool
std::iosbase.good(), bool std::iosbase.fail().</li>
</ul></li>
</ul></li>

<li><span class="underline">User supplied callback function</span>
<ul class="org-ul">
<li>The client code supplies a callback function which is called when
an error happens.</li>
</ul></li>

<li><span class="underline">Using 'either' type</span>
<ul class="org-ul">
<li>See:
<a href="https://hackernoon.com/error-handling-in-c-or-why-you-should-use-eithers-in-favor-of-exceptions-and-error-codes-f0640912eb45">Error Handling in C++ or: Why You Should Use Eithers in Favor of Exceptions and Error-codes</a></li>
</ul></li>

<li><span class="underline">std::optional&lt;T&gt;</span> - C++17 Maybe or Optional type.</li>
</ul>

<p>
<b>Exception Headers</b> 
</p>

<ul class="org-ul">
<li>Headers: 
<ul class="org-ul">
<li><a href="https://en.cppreference.com/w/cpp/header/stdexcept">&lt;stdexcept&gt;</a></li>
<li><a href="http://www.cplusplus.com/reference/exception/exception/">&lt;exception&gt;</a></li>
</ul></li>
</ul>

<p>
<b>Exceptions Good Practices:</b>
</p>

<ul class="org-ul">
<li>Assertions: should not be used for argument validation since they
can be disabled during compilation or on release builds.</li>

<li>Exceptions should be used on objects' constructors in order to avoid
letting the object in an invalid state. =&gt; <span class="underline">Fail Fast principle</span>.</li>

<li>Destructors should not throw exceptions as it invokers terminates()
shutting down the program.</li>

<li>DO NOT: catch all exceptions. Only exceptions that can be handled
should be caught.</li>
</ul>

<p>
<b>C++ Stack Terminology</b>
</p>

<ul class="org-ul">
<li>Exception Specification</li>
<li>Stack Unwinding</li>
<li>Exception-safety</li>
<li>RAII - Resource Aquisition is Resource Initialization</li>
<li>Smart Pointers</li>
</ul>

<p>
<b>Functions related to exceptions</b> 
</p>

<ul class="org-ul">
<li><a href="https://en.cppreference.com/w/cpp/error/current_exception">std::current_exception</a></li>
<li><a href="https://en.cppreference.com/w/cpp/error/rethrow_exception">std::rethrow_exception</a></li>
<li><a href="https://en.cppreference.com/w/cpp/error/terminate">std::terminate</a></li>
<li><a href="https://en.cppreference.com/w/cpp/utility/program/abort">std::abort</a></li>
<li><a href="https://en.cppreference.com/w/cpp/error/terminate_handler">std::terminate_handler</a></li>
<li><a href="https://en.cppreference.com/w/cpp/utility/program/exit">std::exit</a></li>
</ul>

<p>
<b>Standard Library Exception defined in header file &lt;exception&gt;</b>
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Exception</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>std::exception</code></td>
<td class="org-left">An exception and parent class of all the standard C++ exceptions.</td>
</tr>

<tr>
<td class="org-left"><code>std::runtime_error</code></td>
<td class="org-left">An exception that theoretically can not be detected by reading the code.</td>
</tr>

<tr>
<td class="org-left"><code>std::logic_error</code></td>
<td class="org-left">An exception that theoretically can be detected by reading the code.</td>
</tr>

<tr>
<td class="org-left"><code>std::domain_error</code></td>
<td class="org-left">This is an exception thrown when a mathematically invalid domain is used</td>
</tr>

<tr>
<td class="org-left"><code>std::invalid_argument</code></td>
<td class="org-left">This is thrown due to invalid arguments.</td>
</tr>

<tr>
<td class="org-left"><code>std::bad_alloc</code></td>
<td class="org-left">This can be thrown by new.</td>
</tr>

<tr>
<td class="org-left"><code>std::bad_cast</code></td>
<td class="org-left">This can be thrown by dynamic_cast.</td>
</tr>

<tr>
<td class="org-left"><code>std::bad_exception</code></td>
<td class="org-left">This is useful device to handle unexpected exceptions in a C++ program</td>
</tr>

<tr>
<td class="org-left"><code>std::bad_typeid</code></td>
<td class="org-left">This can be thrown by typeid.</td>
</tr>

<tr>
<td class="org-left"><code>std::length_error</code></td>
<td class="org-left">This is thrown when a too big std::string is created</td>
</tr>

<tr>
<td class="org-left"><code>std::out_of_range</code></td>
<td class="org-left">This can be thrown by the at method from for example a std::vector and std::bitset&lt;&gt;::operator[]().</td>
</tr>

<tr>
<td class="org-left"><code>std::overflow_error</code></td>
<td class="org-left">This is thrown if a mathematical overflow occurs.</td>
</tr>

<tr>
<td class="org-left"><code>std::range_error</code></td>
<td class="org-left">This is occured when you try to store a value which is out of range.</td>
</tr>

<tr>
<td class="org-left"><code>std::underflow_error</code></td>
<td class="org-left">This is thrown if a mathematical underflow occurs.</td>
</tr>
</tbody>
</table>


<p>
References: 
</p>

<p>
C++ Documentation: 
</p>
<ul class="org-ul">
<li><a href="https://en.cppreference.com/w/cpp/error/exception">std::exception - cppreference.com</a></li>
<li><a href="https://en.cppreference.com/w/cpp/error/exception/what">std::exception::what - cppreference.com</a></li>
<li><a href="https://isocpp.org/wiki/faq/exceptions">Exceptions and Error Handling, C++ FAQ</a></li>
<li><a href="https://wiki.sei.cmu.edu/confluence/display/cplusplus/ERR56-CPP.+Guarantee+exception+safety">ERR56-CPP. Guarantee exception safety - SEI CERT C++ Coding Standard - Confluence</a></li>
<li><a href="https://www.ibm.com/support/knowledgecenter/en/SSLTBW_2.3.0/com.ibm.zos.v2r3.cbclx01/cplr156.htm">IBM Knowledge Center - Exception specifications (C++ only)</a></li>
</ul>

<p>
Misc:
</p>
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/11938979/what-exception-classes-are-in-the-standard-c-library">What exception classes are in the standard C++ library - Stack Overflow</a></li>
<li><a href="https://en.cppreference.com/w/cpp/language/throw">throw expression - cppreference.com</a></li>
<li><a href="https://blog.mozilla.org/nnethercote/2011/01/18/the-dangers-of-fno-exceptions/">The dangers of -fno-exceptions | Nicholas Nethercote</a></li>
<li><a href="https://stackoverflow.com/questions/16182781/how-to-create-exceptions">c++ - How to create exceptions? - Stack Overflow</a></li>
<li><a href="https://dzone.com/articles/some-useful-facts-to-know-when-using-c-exceptions">Some Useful Facts to Know Before Using C++ Exceptions - DZone Performance</a></li>
<li><a href="http://www.acodersjourney.com/2016/08/top-15-c-exception-handling-mistakes-avoid/">Top 15 C++ Exception handling mistakes and how to avoid them. - A CODER'S JOURNEY</a></li>
</ul>

<p>
Best: 
</p>

<ul class="org-ul">
<li><a href="https://blog.plan99.net/what-s-wrong-with-exceptions-nothing-cee2ed0616?gi=33a0310b3ff9">Whats wrong with exceptions? Nothing.  Mikes blog</a></li>
<li><a href="https://isocpp.org/wiki/faq/exceptions">Exceptions and Error Handling, C++ FAQ</a></li>
<li><a href="http://www.learncpp.com/cpp-tutorial/145-exceptions-classes-and-inheritance/">14.5  Exceptions, classes, and inheritance | Learn C++</a></li>
<li><a href="https://en.wikibooks.org/wiki/C++_Programming/Exception_Handling">C++ Programming/Exception Handling - Wikibooks, open books for an open world</a></li>
<li><a href="http://rdiez.shoutwiki.com/wiki/Error_Handling_in_General_and_C++_Exceptions_in_Particular">Error Handling in General and C++ Exceptions in Particular - rdiez's Personal Wiki</a></li>
</ul>
</div>
</div>

<div id="outline-container-org7d34df0" class="outline-4">
<h4 id="org7d34df0"><span class="section-number-4">1.28.2</span> Exception Basics</h4>
<div class="outline-text-4" id="text-1-28-2">
<p>
C++ can throw any type as exception: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">throw</span> 10
Error <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: Exception caught<span class="org-negation-char">!</span>
&gt;&gt; 
&gt;&gt; <span class="org-keyword">throw</span> <span class="org-string">"hello world"</span>
Error <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: Exception caught<span class="org-negation-char">!</span>
&gt;&gt; 
&gt;&gt; <span class="org-keyword">throw</span> 34.212
Error <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: Exception caught<span class="org-negation-char">!</span>
&gt;&gt; 
&gt;&gt; <span class="org-keyword">throw</span> <span class="org-constant">std</span>::runtime_error<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Illegal state exception!"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: <span class="org-constant">std</span>::runtime_error caught: Illegal state exception<span class="org-negation-char">!</span>

&gt;&gt; <span class="org-keyword">throw</span> <span class="org-constant">std</span>::invalid_argument<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Error: number of elements cannot be negative."</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: <span class="org-constant">std</span>::invalid_argument caught: Error: number of elements cannot be negative.
&gt;&gt; 
&gt;&gt; <span class="org-keyword">throw</span> <span class="org-constant">std</span>::out_of_range<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Invalid element index. Aborting operation!"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: <span class="org-constant">std</span>::out_of_range caught: Invalid element index. Aborting operation<span class="org-negation-char">!</span>

</pre>
</div>

<p>
Catching exceptions: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">testException</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">action</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-keyword">try</span> <span class="org-rainbow-delimiters-depth-2">{</span>
         action<span class="org-rainbow-delimiters-depth-3">()</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">handle of std::invalid_argument</span>
     <span class="org-keyword">catch</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">invalid_argument</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-2">){</span>
          <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [ERROR] {std::invalid_argument} \n =&gt; "</span>
                    &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
          <span class="org-keyword">return</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">handle of std::out_of_range</span>
     <span class="org-keyword">catch</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">out_of_range</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-2">){</span>
          <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [ERROR] {std::out_of_range} \n =&gt; "</span>
                    &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
          <span class="org-keyword">return</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-keyword">catch</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">exception</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-2">){</span>
          <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [ERROR] {std::exception} \n =&gt; "</span>
                    &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
          <span class="org-keyword">return</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Executed gracefully. OK"</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; testException<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[](){</span> <span class="org-keyword">throw</span> <span class="org-constant">std</span>::runtime_error<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Fatal error 0xBAF5F8"</span><span class="org-rainbow-delimiters-depth-3">)</span>;<span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>ERROR<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">std</span>::exception<span class="org-rainbow-delimiters-depth-1">}</span> 
 =&gt; Fatal error 0xBAF5F8

&gt;&gt; testException<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[](){</span> <span class="org-keyword">throw</span> <span class="org-constant">std</span>::invalid_argument<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Expected x = 10"</span><span class="org-rainbow-delimiters-depth-3">)</span>;<span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>ERROR<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">std</span>::invalid_argument<span class="org-rainbow-delimiters-depth-1">}</span> 
 =&gt; Expected x = 10
&gt;&gt; 

&gt;&gt; testException<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[](){</span> <span class="org-keyword">throw</span> <span class="org-constant">std</span>::out_of_range<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: given invalid index."</span><span class="org-rainbow-delimiters-depth-3">)</span>;<span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>ERROR<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">std</span>::out_of_range<span class="org-rainbow-delimiters-depth-1">}</span> 
 =&gt; Error: given invalid index.
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Crash the program as it cannot handle this exception </span>
&gt;&gt; testException<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[](){</span> <span class="org-keyword">throw</span> 10 ;<span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: Exception caught<span class="org-negation-char">!</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Crash again!</span>
&gt;&gt; testException<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[](){</span> <span class="org-keyword">throw</span> <span class="org-string">"hello world"</span> ;<span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: Exception caught<span class="org-negation-char">!</span>
&gt;&gt; 

&gt;&gt; testException<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[](){</span> <span class="org-keyword">throw</span> <span class="org-constant">std</span>::overflow_error<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Number cannot be represented. Overflow error!"</span><span class="org-rainbow-delimiters-depth-3">)</span>;<span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>ERROR<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">std</span>::exception<span class="org-rainbow-delimiters-depth-1">}</span> 
 =&gt; Number cannot be represented. Overflow error<span class="org-negation-char">!</span>
&gt;&gt; 
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd570224" class="outline-4">
<h4 id="orgd570224"><span class="section-number-4">1.28.3</span> Custom Exceptions</h4>
<div class="outline-text-4" id="text-1-28-3">
<p>
Example: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">enum</span> <span class="org-keyword">class</span> <span class="org-type">ErrorFlags</span> : <span class="org-type">unsigned</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-variable-name">MemoryError</span>     =  0x2A,
    <span class="org-variable-name">NetWorkFailure</span>  =  0xFA,
    <span class="org-variable-name">DNSFailure</span>      =  0x50, 
    <span class="org-variable-name">UnknownError</span>    =  0xAF
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">struct</span> <span class="org-type">DownloadException</span>: <span class="org-keyword">public</span> <span class="org-constant">std</span>::<span class="org-type">exception</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">ErrorFlags</span> <span class="org-variable-name">errorCode</span>;
    <span class="org-function-name">DownloadException</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">ErrorFlags</span> <span class="org-variable-name">errorCode</span><span class="org-rainbow-delimiters-depth-2">)</span>
       :errorCode<span class="org-rainbow-delimiters-depth-2">{</span>errorCode<span class="org-rainbow-delimiters-depth-2">}{}</span>  
    <span class="org-keyword">auto</span> <span class="org-function-name">what</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-keyword">throw</span><span class="org-rainbow-delimiters-depth-2">()</span> -&gt; <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-keyword">return</span> <span class="org-string">"Error: Download failure. See error code. "</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">void</span> <span class="org-function-name">testDownloadException</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">action</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-constant">std</span>::<span class="org-type">exception_ptr</span> <span class="org-variable-name">p</span>;
    <span class="org-keyword">try</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        action<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">catch</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">DownloadException</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"[FAILURE] Error code = "</span>
                  &lt;&lt; <span class="org-constant">std</span>::hex &lt;&lt;  <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">unsigned</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span>ex.errorCode<span class="org-rainbow-delimiters-depth-3">)</span>
                  &lt;&lt; <span class="org-constant">std</span>::dec
                  &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-keyword">return</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">catch</span><span class="org-rainbow-delimiters-depth-2">(</span>...<span class="org-rainbow-delimiters-depth-2">){</span>
            <span class="org-comment-delimiter">// </span><span class="org-comment">Catch all exceptions, log and rethrow        </span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"[FAILURE] Unknown exception."</span> &lt;&lt; <span class="org-string">"\n"</span>;
        p = <span class="org-constant">std</span>::current_exception<span class="org-rainbow-delimiters-depth-3">()</span>;
        <span class="org-constant">std</span>::rethrow_exception<span class="org-rainbow-delimiters-depth-3">(</span> p<span class="org-rainbow-delimiters-depth-3">)</span>;     
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Download ended gracefully. OK."</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Testing: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; testDownloadException<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[](){}</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>INFO<span class="org-rainbow-delimiters-depth-1">]</span> Download ended gracefully. OK.

&gt;&gt; testDownloadException<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[](){</span> <span class="org-keyword">throw</span> DownloadException<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">ErrorFlags</span>::NetWorkFailure<span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Error</span>: Download failure. See error code. 
<span class="org-rainbow-delimiters-depth-1">[</span>FAILURE<span class="org-rainbow-delimiters-depth-1">]</span> Error code = fa
&gt;&gt; 
&gt;&gt; testDownloadException<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[](){</span> <span class="org-keyword">throw</span> DownloadException<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">ErrorFlags</span>::DNSFailure<span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Error</span>: Download failure. See error code. 
<span class="org-rainbow-delimiters-depth-1">[</span>FAILURE<span class="org-rainbow-delimiters-depth-1">]</span> Error code = 50
&gt;&gt; 
&gt;&gt; testDownloadException<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[](){</span> <span class="org-keyword">throw</span> DownloadException<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">ErrorFlags</span>::UnknownError<span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Error</span>: Download failure. See error code. 
<span class="org-rainbow-delimiters-depth-1">[</span>FAILURE<span class="org-rainbow-delimiters-depth-1">]</span> Error code = af
&gt;&gt; 

&gt;&gt; testDownloadException<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[](){</span> <span class="org-keyword">throw</span> <span class="org-constant">std</span>::runtime_error<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Fatal kernel failure!!"</span><span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">[</span>FAILURE<span class="org-rainbow-delimiters-depth-1">]</span> Unknown exception.
Error <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: <span class="org-constant">std</span>::runtime_error caught: Fatal kernel failure<span class="org-negation-char">!</span>!

&gt;&gt; testDownloadException<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[](){</span> <span class="org-keyword">throw</span> <span class="org-constant">std</span>::out_of_range<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Invalid index"</span><span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">[</span>FAILURE<span class="org-rainbow-delimiters-depth-1">]</span> Unknown exception.
Error <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: <span class="org-constant">std</span>::out_of_range caught: Invalid index
&gt;&gt; 
</pre>
</div>
</div>
</div>

<div id="outline-container-org2610401" class="outline-4">
<h4 id="org2610401"><span class="section-number-4">1.28.4</span> Example - code</h4>
<div class="outline-text-4" id="text-1-28-4">
<p>
File: exceptions.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">ostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">exception</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">struct</span> <span class="org-type">Error</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
    <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">reason</span>;
    <span class="org-keyword">const</span> <span class="org-type">int</span> <span class="org-variable-name">errorCode</span>;    
    <span class="org-function-name">Error</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">errorCode</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">reason</span><span class="org-rainbow-delimiters-depth-2">)</span>: errorCode<span class="org-rainbow-delimiters-depth-2">(</span>errorCode<span class="org-rainbow-delimiters-depth-2">)</span>, reason<span class="org-rainbow-delimiters-depth-2">(</span>reason<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{}</span>;
    <span class="org-type">void</span> <span class="org-function-name">display</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span><span class="org-rainbow-delimiters-depth-2">){</span>
        os &lt;&lt; <span class="org-string">"Error code = "</span> &lt;&lt; errorCode &lt;&lt; <span class="org-string">"; reason = "</span> &lt;&lt; reason &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">class</span> <span class="org-type">NetworkFailure</span> : <span class="org-keyword">public</span> <span class="org-constant">std</span>::<span class="org-type">exception</span> <span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
    <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-function-name">what</span> <span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-keyword">throw</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-keyword">return</span> <span class="org-string">" ==&gt; Error: network failure."</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span> networkFailure;

<span class="org-keyword">struct</span> <span class="org-type">OutOfmemoryError</span> : <span class="org-constant">std</span>::<span class="org-type">exception</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-function-name">what</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-keyword">throw</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-keyword">return</span> <span class="org-string">"==&gt; Error: there is no enough memory."</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">struct</span> <span class="org-type">UnknownError</span> <span class="org-rainbow-delimiters-depth-1">{}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Any object, class or type can be thrown like an Exception.</span>
<span class="org-type">void</span> <span class="org-function-name">exceptionThrower</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">code</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-type">NetworkFailure</span> <span class="org-variable-name">networkFailure</span>;
    <span class="org-keyword">switch</span><span class="org-rainbow-delimiters-depth-2">(</span>code<span class="org-rainbow-delimiters-depth-2">){</span>
    <span class="org-keyword">case</span> 0:
        <span class="org-keyword">throw</span> <span class="org-string">"Error (1) has happened"</span>;
        <span class="org-keyword">break</span>;
    <span class="org-keyword">case</span> 1:
        <span class="org-keyword">throw</span> 4090;
        <span class="org-keyword">break</span>;
    <span class="org-keyword">case</span> 2:
        <span class="org-keyword">throw</span> <span class="org-string">'x'</span>;
        <span class="org-keyword">break</span>;
    <span class="org-keyword">case</span> 3:
        <span class="org-keyword">throw</span> Error<span class="org-rainbow-delimiters-depth-3">(</span>0xffa, <span class="org-string">"Failure to download update."</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">break</span>;
    <span class="org-keyword">case</span> 4:
        <span class="org-keyword">throw</span> Error<span class="org-rainbow-delimiters-depth-3">(</span>0xff5, <span class="org-string">"Invalide input parameters."</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">break</span>;
    <span class="org-keyword">case</span> 5:
        <span class="org-keyword">throw</span> <span class="org-constant">std</span>::runtime_error<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Runtime error happened."</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">break</span>;
    <span class="org-keyword">case</span> 6:
        <span class="org-keyword">throw</span> <span class="org-constant">std</span>::bad_alloc<span class="org-rainbow-delimiters-depth-3">()</span>;
        <span class="org-keyword">break</span>;
    <span class="org-keyword">case</span> 7:
        <span class="org-keyword">throw</span> OutOfmemoryError<span class="org-rainbow-delimiters-depth-3">()</span>;
        <span class="org-keyword">break</span>;
    <span class="org-keyword">case</span> 8:
        <span class="org-keyword">throw</span> networkFailure;
        <span class="org-keyword">break</span>;  
    <span class="org-keyword">default</span>:
        <span class="org-keyword">throw</span> UnknownError<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-function-name">handleException</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-keyword">try</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        exceptionThrower<span class="org-rainbow-delimiters-depth-3">(</span>n<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">catch</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">perror</span><span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"==&gt; [String] An error of type string happened: "</span> &lt;&lt; perror &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">catch</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">errorCode</span><span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"==&gt; [Int   ] Returned error code = "</span> &lt;&lt; errorCode &lt;&lt; <span class="org-constant">std</span>::endl;       
    <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">catch</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">char</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"==&gt; [Char  ] Returned char error code = "</span> &lt;&lt; x &lt;&lt; <span class="org-constant">std</span>::endl;      
    <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">catch</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Error</span> <span class="org-variable-name">err</span><span class="org-rainbow-delimiters-depth-2">){</span>
        err.display<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cerr<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">catch</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">exception</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"Catch an std::exception. = "</span> &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">Catch all exceptions - Not recommeded. </span>
    <span class="org-keyword">catch</span> <span class="org-rainbow-delimiters-depth-2">(</span>...<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"==&gt; Unknown exception."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
    handleException<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span>;
    handleException<span class="org-rainbow-delimiters-depth-2">(</span>1<span class="org-rainbow-delimiters-depth-2">)</span>;
    handleException<span class="org-rainbow-delimiters-depth-2">(</span>2<span class="org-rainbow-delimiters-depth-2">)</span>;
    handleException<span class="org-rainbow-delimiters-depth-2">(</span>3<span class="org-rainbow-delimiters-depth-2">)</span>;
    handleException<span class="org-rainbow-delimiters-depth-2">(</span>4<span class="org-rainbow-delimiters-depth-2">)</span>;
    handleException<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span>;
    handleException<span class="org-rainbow-delimiters-depth-2">(</span>6<span class="org-rainbow-delimiters-depth-2">)</span>;
    handleException<span class="org-rainbow-delimiters-depth-2">(</span>7<span class="org-rainbow-delimiters-depth-2">)</span>;
    handleException<span class="org-rainbow-delimiters-depth-2">(</span>8<span class="org-rainbow-delimiters-depth-2">)</span>;
    handleException<span class="org-rainbow-delimiters-depth-2">(</span>100<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Finish successfully"</span> &lt;&lt; <span class="org-constant">std</span>::endl;    
    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Compiling and running:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ clang++ -std=c++11 exceptions.cpp -o <span class="org-keyword">out.bin</span> &amp;&amp; ./out.bin

==&gt; [String] An error of type string happened: Error (1) has happened
==&gt; [Int   ] Returned error code = 4090
==&gt; [Char  ] Returned char error code = x
Error code = 4090; reason = Failure to download update.
Error code = 4085; reason = Invalide input parameters.
Catch an std::exception. = Runtime error happened.
Catch an std::exception. = std::bad_alloc
Catch an std::exception. = ==&gt; Error: there is no enough memory.
Catch an std::exception. =  ==&gt; Error: network failure.
==&gt; Unknown exception.
Finish successfully

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd702373" class="outline-3">
<h3 id="orgd702373"><span class="section-number-3">1.29</span> Pointer to Function or Function Pointer</h3>
<div class="outline-text-3" id="text-1-29">
</div>
<div id="outline-container-org2fd9058" class="outline-4">
<h4 id="org2fd9058"><span class="section-number-4">1.29.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-29-1">
<p>
In C++, functions pointers are not so common as in C. However, they
are still useful when it is necessary to call a C-library which uses
this type of pointer for callbacks and event handlers.
</p>

<p>
It is preferrable to use std::function for callbacks and higher order
functions instead of function pointers as std::function can be used
with anything callable, such as function pointers, functors
(function-objects) or C++11 lambdas. 
</p>

<p>
Use cases of function pointers in C:
</p>
<ul class="org-ul">
<li>Callbacks</li>
<li>Higher Order Functions</li>
<li>Event Handlers</li>
</ul>

<p>
Use cases of function pointers in C++:
</p>
<ul class="org-ul">
<li>Type erasure of functions.</li>
<li>Interfacing C-libraries.</li>
<li>Creating C++ wrappers for C-libraries.</li>
<li>Load functions at runtime from a DLL, shared library on Windows or
Shared Object on U*nix (Linux, BSD, OSX, &#x2026;).</li>
</ul>

<p>
<b>Function pointer variable declaration:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp">ReturnType <span class="org-rainbow-delimiters-depth-1">(</span>* VariableName<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>ArgType0, ArgType1, ArgType2 ....<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">OR -&gt; Intitalized to null </span>
ReturnType <span class="org-rainbow-delimiters-depth-1">(</span>* VariableName<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>ArgType0, ArgType1, ArgType2 ....<span class="org-rainbow-delimiters-depth-1">)</span> = <span class="org-constant">nullptr</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Initialized to the address of some function </span>
ReturnType <span class="org-rainbow-delimiters-depth-1">(</span>* VariableName<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>ArgType0, ArgType1, ArgType2 ....<span class="org-rainbow-delimiters-depth-1">)</span> = FUNCTION1;
ReturnType <span class="org-rainbow-delimiters-depth-1">(</span>* VariableName<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>ArgType0, ArgType1, ArgType2 ....<span class="org-rainbow-delimiters-depth-1">)</span> = &amp;FUNCTION1;
</pre>
</div>

<p>
<b>Function pointer Type Synonym - Prior to C++11</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">typedef</span> <span class="org-type">ReturnType</span> <span class="org-rainbow-delimiters-depth-1">(</span>* <span class="org-type">PointerAliasType</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>ArgType0, ArgType1, ArgType2 ....<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">PointerAliasType</span> <span class="org-variable-name">fp</span> = <span class="org-constant">nullptr</span>;
<span class="org-type">PointerAliasType</span> <span class="org-variable-name">fp</span> = &amp;FUNCTION1;
<span class="org-type">PointerAliasType</span> <span class="org-variable-name">fp</span> = FUNCTION1;

<span class="org-comment-delimiter">// </span><span class="org-comment">Call </span>
<span class="org-type">ReturnType</span> <span class="org-variable-name">result</span> = fp<span class="org-rainbow-delimiters-depth-1">(</span>arg0, arg1, arg2, ... argn1<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
<b>Function pointer Type Synonym - C++11</b> (better and more readable)
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">using</span> <span class="org-type">PointerAliasType</span> = ReturnType <span class="org-rainbow-delimiters-depth-1">(</span>*<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>ArgType0, ArgType1, ArgType2 ....<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Or: </span>
<span class="org-keyword">using</span> <span class="org-type">PointerAliasType</span> = <span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-1">(</span>ArgType0, ArgType1, ArgType2 ....<span class="org-rainbow-delimiters-depth-1">)</span> -&gt; ReturnType;
</pre>
</div>

<p>
Examples: 
</p>

<ul class="org-ul">
<li><code>void (* fpointer)(int);</code>
<ul class="org-ul">
<li>Function pointer taking an integer as paremeter and returns
nothing, void.</li>
</ul></li>

<li><code>void* (* fp)(double *);</code>
<ul class="org-ul">
<li>Function pointer that points to a function taking a double
pointer (double *) and returns a void pointer.</li>
</ul></li>

<li><code>int (* myFunPointer)(int, int);</code>
<ul class="org-ul">
<li>Function pointer that points to a function that takes two
integers as parameters and returns an integer.</li>
</ul></li>

<li>double (* FunPointer) (double) = &amp;sin;
<ul class="org-ul">
<li>Function pointer initialized with the address with of the
function sin.</li>
</ul></li>

<li>double (* FunPointer) (double) = sin;
<ul class="org-ul">
<li>Function pointer initialized with the address with of the
function sin.</li>
</ul></li>

<li><code>int (p2* funcp)(double, double) = NULL</code>
<ul class="org-ul">
<li>Function pointer initialized to NULL or zero.</li>
</ul></li>

<li><code>void (*p[10]) (void *) ()</code>
<ul class="org-ul">
<li>Array of 10 pointers to a function that returns void</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org27834ca" class="outline-4">
<h4 id="org27834ca"><span class="section-number-4">1.29.2</span> Function Pointer Declaration</h4>
<div class="outline-text-4" id="text-1-29-2">
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Declare a function pointer to a function </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">of type: double =&gt; double </span>
&gt;&gt; <span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-1">(</span>* mfunptr<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> = <span class="org-constant">nullptr</span>;

&gt;&gt; mfunptr = sin
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> Function @0x7ff56aa56f80

&gt;&gt; mfunptr<span class="org-rainbow-delimiters-depth-1">(</span>M_PI<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.2246468e-16

&gt;&gt; mfunptr<span class="org-rainbow-delimiters-depth-1">(</span>M_PI_2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.0000000
&gt;&gt; 

&gt;&gt; mfunptr<span class="org-rainbow-delimiters-depth-1">(</span>1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.0000000
&gt;&gt; mfunptr<span class="org-rainbow-delimiters-depth-1">(</span>100<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 2.0000000
&gt;&gt; mfunptr<span class="org-rainbow-delimiters-depth-1">(</span>1000<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 3.0000000
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Pass a non-capturing lambda </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">--------------------------------------------</span>
&gt;&gt; mfunptr = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> 3 * x; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> Function @0x7ff56bb000c0

&gt;&gt; mfunptr<span class="org-rainbow-delimiters-depth-1">(</span>3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 9.0000000

&gt;&gt; mfunptr<span class="org-rainbow-delimiters-depth-1">(</span>5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 15.000000

<span class="org-comment-delimiter">// </span><span class="org-comment">Pass a capturing lambda =&gt; Cannot pass capturing </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">lambdas to function pointers.</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">--------------------------------------------</span>

&gt;&gt; <span class="org-type">double</span> k = 10.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 10.000000

<span class="org-comment-delimiter">//</span>
&gt;&gt; mfunptr = <span class="org-rainbow-delimiters-depth-1">[</span>&amp;<span class="org-variable-name">k</span><span class="org-rainbow-delimiters-depth-1">](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> 3 * x + k;<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">ROOT_prompt_31</span>:1:13: error: <span class="org-string">'k'</span> cannot be captured because it does <span class="org-keyword">not</span> have automatic storage duration
mfunptr = <span class="org-rainbow-delimiters-depth-1">[</span>&amp;<span class="org-variable-name">k</span><span class="org-rainbow-delimiters-depth-1">](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> 3 * x + k;<span class="org-rainbow-delimiters-depth-1">}</span>
            ^
&gt;&gt; mfunptr = <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">k</span><span class="org-rainbow-delimiters-depth-1">](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> 3 * x + k;<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">ROOT_prompt_32</span>:1:12: error: <span class="org-string">'k'</span> cannot be captured because it does <span class="org-keyword">not</span> have automatic storage duration
mfunptr = <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">k</span><span class="org-rainbow-delimiters-depth-1">](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> 3 * x + k;<span class="org-rainbow-delimiters-depth-1">}</span>
           ^
<span class="org-function-name">ROOT_prompt_28</span>:1:8: note: <span class="org-string">'k'</span> declared here
<span class="org-type">double</span> k = 10.0
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbf787a2" class="outline-4">
<h4 id="orgbf787a2"><span class="section-number-4">1.29.3</span> Function Pointer Callbacks</h4>
<div class="outline-text-4" id="text-1-29-3">
<p>
Example 1: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">doTimes</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">n</span>, <span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-2">(</span>* <span class="org-function-name">action</span><span class="org-rainbow-delimiters-depth-2">)(</span><span class="org-type">int</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; n; i++<span class="org-rainbow-delimiters-depth-2">)</span>
             action<span class="org-rainbow-delimiters-depth-2">(</span>i<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-function-name">printLine</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"i = "</span> &lt;&lt; i &lt;&lt; <span class="org-string">" \n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; doTimes<span class="org-rainbow-delimiters-depth-1">(</span>4, printLine<span class="org-rainbow-delimiters-depth-1">)</span>
i = 0 
i = 1 
i = 2 
i = 3 

</pre>
</div>

<p>
Example 2: 
</p>

<ul class="org-ul">
<li>Higher order function for tabulating numerical functions
implemented with function pointers.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Alternative 1: </span>
<span class="org-type">void</span> <span class="org-function-name">tabulateFun1</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>* <span class="org-function-name">MathFunc</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-2">(</span>3<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::fixed;
     <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; 10; i++<span class="org-rainbow-delimiters-depth-2">)</span>
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; i
                   &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; MathFunc<span class="org-rainbow-delimiters-depth-2">(</span>i<span class="org-rainbow-delimiters-depth-2">)</span>
                   &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Alternative 2: </span>
<span class="org-type">void</span> <span class="org-function-name">tabulateFun2</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-function-name">MathFunc</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-2">(</span>3<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::fixed;
     <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; 10; i++<span class="org-rainbow-delimiters-depth-2">)</span>
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; i
                   &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; MathFunc<span class="org-rainbow-delimiters-depth-2">(</span>i<span class="org-rainbow-delimiters-depth-2">)</span>
                   &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Syntax 3 (C++11)</span>
<span class="org-type">void</span> <span class="org-variable-name">tabulateFun3</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> MathFunc <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-2">(</span>3<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::fixed;
     <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; 10; i++<span class="org-rainbow-delimiters-depth-2">)</span>
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; i
                   &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; MathFunc<span class="org-rainbow-delimiters-depth-2">(</span>i<span class="org-rainbow-delimiters-depth-2">)</span>
                   &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
The syntax can be simplified with type synonym using "using" (C++11)
or typedef (old standard).
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Type Synonym [1] (C++11)</span>
<span class="org-keyword">using</span> <span class="org-type">MathFunPtr</span> = <span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-1">(</span>*<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Type Synonym [2] (C++11)</span>
<span class="org-keyword">using</span> <span class="org-type">MathFunPtr</span> = <span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">double</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Type Synonym [3] (Old standards)</span>
<span class="org-keyword">typedef</span> <span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-1">(</span>* <span class="org-type">MathFunPtr</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-type">void</span> <span class="org-function-name">tabulateFun4</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">MathFunPtr</span> <span class="org-variable-name">MathFunc</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-2">(</span>3<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::fixed;
     <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; 10; i++<span class="org-rainbow-delimiters-depth-2">)</span>
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; i
                   &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; MathFunc<span class="org-rainbow-delimiters-depth-2">(</span>i<span class="org-rainbow-delimiters-depth-2">)</span>
                   &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
It is not recomended to implement this function using function
pointers. It is better to use the type std::function available in the
header &lt;functional&gt; as it can also work with anything callable such as
C++11 lambdas, functions-objects and function pointers.
</p>

<ul class="org-ul">
<li>Better implementation, more C++ friendly using C++11 std::function
from header &lt;functional&gt;.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">tabulateFunCPP11</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">MathFunc</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-2">(</span>3<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::fixed;
     <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; 10; i++<span class="org-rainbow-delimiters-depth-2">)</span>
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; i
                   &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; MathFunc<span class="org-rainbow-delimiters-depth-2">(</span>i<span class="org-rainbow-delimiters-depth-2">)</span>
                   &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Running in CLING Repl: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; tabulateFun1<span class="org-rainbow-delimiters-depth-1">(</span>sin<span class="org-rainbow-delimiters-depth-1">)</span>
    0     0.000
    1     0.841
    2     0.909
    3     0.141
   ... ... .... 

&gt;&gt; tabulateFun2<span class="org-rainbow-delimiters-depth-1">(</span>log<span class="org-rainbow-delimiters-depth-1">)</span>
    0      -inf
    1     0.000
    2     0.693
    3     1.099
    4     1.386
   ... ... .... 

&gt;&gt; tabulateFun3<span class="org-rainbow-delimiters-depth-1">(</span>&amp;exp2<span class="org-rainbow-delimiters-depth-1">)</span>
    0     1.000
    1     2.000
    2     4.000
    3     8.000
  ... ... .... 

&gt;&gt; tabulateFun4<span class="org-rainbow-delimiters-depth-1">(</span>&amp;cos<span class="org-rainbow-delimiters-depth-1">)</span>
    0     1.000
    1     0.540
    2    -0.416
   ... ... .... 
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org415759e" class="outline-3">
<h3 id="org415759e"><span class="section-number-3">1.30</span> Pointer to Class Member Function</h3>
<div class="outline-text-3" id="text-1-30">
<p>
:ID:       07dc0b5f-0486-4c18-b356-226ec48d4834
</p>

<p>
In addition to ordinary pointers and function pointers, C++ has member
function pointers which can point to a particular class method and be
used for performing indirect method calls. 
</p>

<p>
Despite member function pointer are much less used than other types of
pointers, they are still useful in lots of use cases such as: 
</p>

<ul class="org-ul">
<li>Implementing callbacks =&gt; Example: QT Slots and Signals.</li>
<li>Creating warappers     =&gt; Example: Boost.Python</li>
<li>Reflection</li>
</ul>

<p>
Pointer to member function declaration: 
</p>

<ul class="org-ul">
<li>It declares a pointer-to-member function of the class
<span class="underline">CLASS_NAME</span>. The pointer variable  is named pVariable and has the
type signature:  <span class="underline">(ARG0, ARG1, &#x2026; ARGN) =&gt; RETURN_TYPE</span></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Define a pointer to member function named 'pVariable' </span>
RETURN_TYPE <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">CLASS_NAME</span>::* pVariable<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>ARG0, ARG1, ..., ARGN-1<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Define a pointer to member function 'pVariable' set to null pointer. </span>
RETURN_TYPE <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">CLASS_NAME</span>::* pVariable<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>ARG0, ARG1, ..., ARGN-1<span class="org-rainbow-delimiters-depth-1">)</span> = <span class="org-constant">nullptr</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Define a pointer to member function named 'pVariable' initialized with the </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">address of method (member function) member_functionA.</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Note: The signature of member_functionA is: </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">RETURN_TYPE CLASS_NAME::member_functionA (ARG0, ARG1, ...)   </span>
RETURN_TYPE <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">CLASS_NAME</span>::* pVariable<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>ARG0, ARG1, ..., ARGN-1<span class="org-rainbow-delimiters-depth-1">)</span> = &amp;<span class="org-constant">CLASS_NAME</span>::member_functionA;

<span class="org-comment-delimiter">// </span><span class="org-comment">Define a pointer to member function named 'pVariable' initialized with the </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">address of method (member function) memebr_funnctionA. </span>
RETURN_TYPE <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">CLASS_NAME</span>::* pVariable<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>ARG0, ARG1, ..., ARGN-1<span class="org-rainbow-delimiters-depth-1">)</span> = &amp;<span class="org-constant">CLASS_NAME</span>::member_functionB;
</pre>
</div>

<ul class="org-ul">
<li>Example: Pointer to any member function taking zero arguments and
returning a string.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::string <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Dummy</span>::* pMemfn<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">()</span> = <span class="org-constant">nullptr</span>;
</pre>
</div>

<ul class="org-ul">
<li>Invoking a pointer to member function. It is necessary an instance
of the class in order to invoke the member function pointed by the
pointer.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">CLASS_TYPE</span> <span class="org-variable-name">obj</span>;
pVariable = &amp;<span class="org-constant">CLASS_TYPE</span>::member_function1;
<span class="org-rainbow-delimiters-depth-1">(</span>obj.*pVariable<span class="org-rainbow-delimiters-depth-1">)(</span>arg0, arg1, arg2, ... argn<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>


<ul class="org-ul">
<li>Type synonym with Typdef</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">typedef</span> <span class="org-type">RETURN_TYPE</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">CLASS_NAME</span>::* pMemberFunction<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>ARG0, ARG1, ..., ARGN-1<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">pMemberFunction</span> <span class="org-variable-name">pvar</span> = &amp;<span class="org-constant">CLASS_NAME</span>::member_functionA;
<span class="org-type">CLASS_NAME</span> <span class="org-variable-name">obj</span>;
<span class="org-rainbow-delimiters-depth-1">(</span>obj.*pvar<span class="org-rainbow-delimiters-depth-1">)(</span>arg0, arg1, .... argn-1<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<ul class="org-ul">
<li>Type synonym with C++11 "using" keyword</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">using</span> <span class="org-type">pMemberFunction</span> = RETURN_TYPE <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">CLASS_NAME</span>::*<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>ARG0, ARG1, ..., ARGN-1<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">pMemberFunction</span> <span class="org-variable-name">pvar</span> = &amp;<span class="org-constant">CLASS_NAME</span>::member_functionA;
<span class="org-type">CLASS_NAME</span> <span class="org-variable-name">obj</span>;
<span class="org-rainbow-delimiters-depth-1">(</span>obj.*pvar<span class="org-rainbow-delimiters-depth-1">)(</span>arg0, arg1, .... argn-1<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
<b>Further Reading:</b>
</p>

<ul class="org-ul">
<li><a href="https://accu.org/index.php/journals/495">ACCU - An Application of Pointers to Members</a></li>
<li><a href="http://soggywizards.com/tips/code/c++/member-pointers.html">Pointers to C++ Member Functions</a></li>
<li><a href="https://yosefk.com/c++fqa/function.html">C++ FQA Lite: Pointers to member functions</a></li>
<li><a href="https://arne-mertz.de/2017/01/decltype-declval/">Modern C++ Features - decltype and std::declval - Simplify C++!</a></li>
<li><a href="https://isocpp.org/wiki/faq/pointers-to-members">Pointers to Member Functions, C++ FAQ</a></li>
<li><a href="https://wiki.qt.io/New_Signal_Slot_Syntax">New Signal Slot Syntax - Qt Wiki</a></li>
<li><a href="https://www.codeguru.com/cpp/cpp/article.php/c17401/C-Tutorial-PointertoMember-Function.htm">C++ Tutorial: Pointer-to-Member Function</a></li>
<li><a href="https://embeddedartistry.com/blog/2017/1/26/c11-improving-your-callback-game">Improving Your Callback Game  Embedded Artistry</a></li>
</ul>


<p>
<b>Example</b>
</p>

<p>
File: 
</p>
<ul class="org-ul">
<li><a href="src/member-function-pointer.cpp">file:src/member-function-pointer.cpp</a></li>
<li>Online compiler: <a href="http://rextester.com/WYFC32509">http://rextester.com/WYFC32509</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">deque</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">map</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cassert</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">class</span> <span class="org-type">Dummy</span> <span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">_name</span> = <span class="org-string">"unnamed"</span>;
<span class="org-function-name">public</span>:
        <span class="org-function-name">Dummy</span><span class="org-rainbow-delimiters-depth-2">(){}</span>
        <span class="org-function-name">Dummy</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>: <span class="org-function-name">_name</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">){}</span>
        ~<span class="org-function-name">Dummy</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> <span class="org-string">"I am a dummy class named &lt;"</span> + _name + <span class="org-string">"&gt;"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">getLocation</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> <span class="org-string">"Unknown location"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">operator</span><span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(){</span>
                <span class="org-keyword">return</span> <span class="org-string">"I am a function-object called: &lt;"</span> + _name + <span class="org-string">"&gt;"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-keyword">auto</span> <span class="org-function-name">compute</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> 4 * x + 5 * y;
        <span class="org-rainbow-delimiters-depth-2">}</span>   
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">class</span> <span class="org-type">DummyB</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
        <span class="org-function-name">DummyB</span><span class="org-rainbow-delimiters-depth-2">(){}</span>
        ~<span class="org-function-name">DummyB</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> <span class="org-string">"My name is DummyB"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">getLocation</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> <span class="org-string">"Location of dummyB location"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">operator</span><span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(){</span>
                <span class="org-keyword">return</span> <span class="org-string">"I am the class DummyB"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Create type synonym to any member function of Dummy class</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">which takes no parameter and returns a string.</span>
<span class="org-keyword">typedef</span> <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Dummy</span>::* pDummyMemFnStr<span class="org-rainbow-delimiters-depth-1">)()</span>;

<span class="org-type">void</span> <span class="org-function-name">invokeMemberFun</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Dummy</span>&amp; <span class="org-variable-name">obj</span>, <span class="org-type">pDummyMemFnStr</span> <span class="org-variable-name">pMemfn</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [1] Method invocation returned value: "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>obj.*pMemfn<span class="org-rainbow-delimiters-depth-2">)()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Create type synonum with the new "using" C++11 syntax</span>
<span class="org-keyword">using</span> <span class="org-type">pDummyMemFnStrCPP11</span> = <span class="org-constant">std</span>::string <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Dummy</span>::*<span class="org-rainbow-delimiters-depth-1">)()</span>;

<span class="org-keyword">auto</span> <span class="org-function-name">invokeMemberFun2</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Dummy</span>&amp; <span class="org-variable-name">obj</span>, <span class="org-type">pDummyMemFnStrCPP11</span> <span class="org-variable-name">pMemfn</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [2] Method invocation returned value: "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>obj.*pMemfn<span class="org-rainbow-delimiters-depth-2">)()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">auto</span> <span class="org-function-name">invokeMemberFun3</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">T</span>&amp; <span class="org-variable-name">obj</span>, <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">T</span>::* <span class="org-function-name">pMemfn</span><span class="org-rainbow-delimiters-depth-2">)()</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">void</span><span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [3] Method invocation returned value: "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>obj.*pMemfn<span class="org-rainbow-delimiters-depth-2">)()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">T</span>, <span class="org-keyword">class</span> <span class="org-type">R</span>, <span class="org-keyword">class</span> ... <span class="org-type">Args</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">auto</span> <span class="org-function-name">invokeMemfn</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">R</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">T</span>::* <span class="org-function-name">pMemfn</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Args</span> ... <span class="org-variable-name">args</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-type">T</span>&amp; <span class="org-variable-name">obj</span>, <span class="org-type">Args</span> ... <span class="org-variable-name">arglist</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">R</span><span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-keyword">return</span> <span class="org-rainbow-delimiters-depth-2">(</span>obj.*pMemfn<span class="org-rainbow-delimiters-depth-2">)(</span>arglist ...<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
        <span class="org-keyword">const</span> <span class="org-keyword">auto</span> nl = <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-keyword">const</span> <span class="org-keyword">auto</span> nl2 = <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">line</span> = <span class="org-string">"--------------------------------------------------\n"</span>;

        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"=== Experiment 1 ==============="</span> &lt;&lt; nl2;
        <span class="org-constant">std</span>::cout &lt;&lt; line;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to member function to any member functions</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">(aka method) which takes no argument and returns a string</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">of signature: () =&gt; std::string</span>
        <span class="org-comment-delimiter">//</span><span class="org-comment">.....................................................</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Dummy</span>::* <span class="org-variable-name">pMemfn</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-constant">nullptr</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">std::string (Dummy::* pMemfn) ();</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>pMemfn == <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [INFO] Pointer not initilialized yet."</span> &lt;&lt; nl;

        <span class="org-type">Dummy</span> <span class="org-variable-name">d</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"DUMMY"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Set the function pointer to member function getName().</span>
        pMemfn = &amp;<span class="org-constant">Dummy</span>::getName;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Invoke pointer to member function (aka pointer to method)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Name     = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>d.*pMemfn<span class="org-rainbow-delimiters-depth-2">)()</span> &lt;&lt; nl2;
        assert<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>d.*pMemfn<span class="org-rainbow-delimiters-depth-3">)()</span> == <span class="org-string">"I am a dummy class named &lt;DUMMY&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>pMemfn != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [INFO] Pointer initilialized OK."</span> &lt;&lt; nl;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Set pointer to Dummy::getLocation</span>
        pMemfn = &amp;<span class="org-constant">Dummy</span>::getLocation;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Location = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>d.*pMemfn<span class="org-rainbow-delimiters-depth-2">)()</span> &lt;&lt; nl;
        <span class="org-comment-delimiter">// </span><span class="org-comment">assert((d.*pMemfn)() == "I am a dummy class named &lt;DUMMY&gt;"); </span>


        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"=== Experiment 2 - Using typedef ==============="</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; line;
        <span class="org-type">pDummyMemFnStr</span> <span class="org-variable-name">pMemfn2</span> = <span class="org-constant">nullptr</span>;
        pMemfn2 = &amp;<span class="org-constant">Dummy</span>::getName;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"d.getName() == "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>d.*pMemfn2<span class="org-rainbow-delimiters-depth-2">)()</span> &lt;&lt; nl;
        assert<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>d.*pMemfn2<span class="org-rainbow-delimiters-depth-3">)()</span> == <span class="org-string">"I am a dummy class named &lt;DUMMY&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span>;   

        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"=== Experiment 3 - Invoking member function with free function ="</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; line;
        <span class="org-comment-delimiter">// </span><span class="org-comment">execute d.getName() </span>
        invokeMemberFun<span class="org-rainbow-delimiters-depth-2">(</span>d, &amp;<span class="org-constant">Dummy</span>::getName<span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">execute d.getLocation() </span>
        invokeMemberFun<span class="org-rainbow-delimiters-depth-2">(</span>d, &amp;<span class="org-constant">Dummy</span>::getLocation<span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">execute d() </span>
        invokeMemberFun<span class="org-rainbow-delimiters-depth-2">(</span>d, &amp;<span class="org-constant">Dummy</span>::<span class="org-keyword">operator</span><span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;

        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"=== Experiment 4 - Invoking member function with free function C++11"</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; line;
        invokeMemberFun2<span class="org-rainbow-delimiters-depth-2">(</span>d, &amp;<span class="org-constant">Dummy</span>::getName<span class="org-rainbow-delimiters-depth-2">)</span>;
        invokeMemberFun2<span class="org-rainbow-delimiters-depth-2">(</span>d, &amp;<span class="org-constant">Dummy</span>::getLocation<span class="org-rainbow-delimiters-depth-2">)</span>;
        invokeMemberFun2<span class="org-rainbow-delimiters-depth-2">(</span>d, &amp;<span class="org-constant">Dummy</span>::<span class="org-keyword">operator</span><span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;

        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"=== Experiment 5 - Pointer to member functions in STL deque collection"</span> &lt;&lt; nl;
        <span class="org-keyword">auto</span> <span class="org-variable-name">plist</span> = <span class="org-constant">std</span>::deque<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">pDummyMemFnStrCPP11</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span>;
        plist.push_back<span class="org-rainbow-delimiters-depth-2">(</span>&amp;<span class="org-constant">Dummy</span>::getName<span class="org-rainbow-delimiters-depth-2">)</span>;
        plist.push_back<span class="org-rainbow-delimiters-depth-2">(</span>&amp;<span class="org-constant">Dummy</span>::getLocation<span class="org-rainbow-delimiters-depth-2">)</span>;
        plist.push_back<span class="org-rainbow-delimiters-depth-2">(</span>&amp;<span class="org-constant">Dummy</span>::<span class="org-keyword">operator</span><span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">p</span>: plist<span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" (+) Calll returned = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>d.*p<span class="org-rainbow-delimiters-depth-2">)()</span> &lt;&lt; nl;

        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"=== Experiment 6 - Pointer to member functions in map collection"</span> &lt;&lt; nl;
        <span class="org-keyword">auto</span> <span class="org-variable-name">dict</span> = <span class="org-constant">std</span>::map<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span>, <span class="org-type">pDummyMemFnStrCPP11</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span>;
        dict<span class="org-rainbow-delimiters-depth-2">[</span><span class="org-string">"getName"</span><span class="org-rainbow-delimiters-depth-2">]</span>     = &amp;<span class="org-constant">Dummy</span>::getName;
        dict<span class="org-rainbow-delimiters-depth-2">[</span><span class="org-string">"getLocation"</span><span class="org-rainbow-delimiters-depth-2">]</span> = &amp;<span class="org-constant">Dummy</span>::getLocation;
        dict<span class="org-rainbow-delimiters-depth-2">[</span><span class="org-string">"callme"</span><span class="org-rainbow-delimiters-depth-2">]</span>      = &amp;<span class="org-constant">Dummy</span>::<span class="org-keyword">operator</span><span class="org-rainbow-delimiters-depth-2">()</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">kv</span>: dict<span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>20<span class="org-rainbow-delimiters-depth-2">)</span>  &lt;&lt; <span class="org-string">"invoke(object, "</span>
                          &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>15<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; kv.first &lt;&lt; <span class="org-string">")"</span>
                          &lt;&lt; <span class="org-string">" = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>d.*<span class="org-rainbow-delimiters-depth-3">(</span>kv.second<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)()</span> &lt;&lt; nl;

        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"=== Experiment 7 - Template "</span> &lt;&lt; nl;
        <span class="org-type">DummyB</span> <span class="org-variable-name">b</span>;
        invokeMemberFun3<span class="org-rainbow-delimiters-depth-2">(</span>d, &amp;<span class="org-constant">Dummy</span>::getName<span class="org-rainbow-delimiters-depth-2">)</span>;
        invokeMemberFun3<span class="org-rainbow-delimiters-depth-2">(</span>b, &amp;<span class="org-constant">DummyB</span>::getName<span class="org-rainbow-delimiters-depth-2">)</span>;
        invokeMemberFun3<span class="org-rainbow-delimiters-depth-2">(</span>d, &amp;<span class="org-constant">Dummy</span>::getLocation<span class="org-rainbow-delimiters-depth-2">)</span>;
        invokeMemberFun3<span class="org-rainbow-delimiters-depth-2">(</span>b, &amp;<span class="org-constant">DummyB</span>::getLocation<span class="org-rainbow-delimiters-depth-2">)</span>;

        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"=== Experiment 8 - Template "</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; line;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"d.getName()         = "</span> &lt;&lt; invokeMemfn<span class="org-rainbow-delimiters-depth-2">(</span>&amp;<span class="org-constant">Dummy</span>::getName, d<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"d.compute(3.0, 4.0) = "</span> &lt;&lt; invokeMemfn<span class="org-rainbow-delimiters-depth-2">(</span>&amp;<span class="org-constant">Dummy</span>::compute, d, 3.0, 4.0<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; nl;

        <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ clang++ member-function-pointer.cpp -o <span class="org-keyword">member-function-pointer.bin</span> -std=c++1z -Wall -Wextra  
$ ./member-function-pointer.bin

=== Experiment 1 ===============

--------------------------------------------------
 [INFO] Pointer not initilialized yet.
Name     = I am a dummy class named &lt;DUMMY&gt;

 [INFO] Pointer initilialized OK.
Location = Unknown location

=== Experiment 2 - Using typedef ===============
--------------------------------------------------
<span class="org-function-name">d.getName</span>() == I am a dummy class named &lt;DUMMY&gt;

=== Experiment 3 - Invoking member <span class="org-keyword">function</span> <span class="org-function-name">with</span> free <span class="org-keyword">function</span> =
--------------------------------------------------
 [1] Method invocation returned value: I am a dummy class named &lt;DUMMY&gt;
 [1] Method invocation returned value: Unknown location
 [1] Method invocation returned value: I am a function-object called: &lt;DUMMY&gt;

=== Experiment 4 - Invoking member <span class="org-keyword">function</span> <span class="org-function-name">with</span> free <span class="org-keyword">function</span> <span class="org-function-name">C</span>++11
--------------------------------------------------
 [2] Method invocation returned value: I am a dummy class named &lt;DUMMY&gt;
 [2] Method invocation returned value: Unknown location
 [2] Method invocation returned value: I am a function-object called: &lt;DUMMY&gt;

=== Experiment 5 - Pointer to member functions<span class="org-keyword"> in</span> STL deque collection
 (+) Calll returned = I am a dummy class named &lt;DUMMY&gt;
 (+) Calll returned = Unknown location
 (+) Calll returned = I am a function-object called: &lt;DUMMY&gt;

=== Experiment 6 - Pointer to member functions<span class="org-keyword"> in</span> map collection
     invoke(object,          callme) = I am a function-object called: &lt;DUMMY&gt;
     invoke(object,     getLocation) = Unknown location
     invoke(object,         getName) = I am a dummy class named &lt;DUMMY&gt;

=== Experiment 7 - Template 
 [3] Method invocation returned value: I am a dummy class named &lt;DUMMY&gt;
 [3] Method invocation returned value: My name is DummyB
 [3] Method invocation returned value: Unknown location
 [3] Method invocation returned value: Location of dummyB location

=== Experiment 8 - Template 
--------------------------------------------------
<span class="org-function-name">d.getName</span>()         = I am a dummy class named &lt;DUMMY&gt;
<span class="org-function-name">d.compute</span>(3.0, 4.0) = 32

</pre>
</div>
</div>
</div>
<div id="outline-container-org7e8fce8" class="outline-3">
<h3 id="org7e8fce8"><span class="section-number-3">1.31</span> Pointer to Class Member Variable</h3>
<div class="outline-text-3" id="text-1-31">
</div>
<div id="outline-container-org5822848" class="outline-4">
<h4 id="org5822848"><span class="section-number-4">1.31.1</span> Summary</h4>
<div class="outline-text-4" id="text-1-31-1">
<p>
Pointers to members variables provides an way to access class member
data indirectly. 
</p>

<p>
Among other things, it has the following use cases:
</p>

<ul class="org-ul">
<li>Create setters/getters</li>
<li>Serialization</li>
<li>Reflection</li>
<li>Indirect Access</li>
<li>Security research.</li>
<li>Get the member data pointer offset in bytes.</li>
</ul>

<p>
<b>Syntax for pointer to member data</b>
</p>

<ul class="org-ul">
<li>Declare a pointer to member of a certain class of an specific
type.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">MEMBER_TYPE</span>  <span class="org-constant">CLASS_NAME</span>::* <span class="org-variable-name">PointerVariableName</span>;
</pre>
</div>

<ul class="org-ul">
<li>Declare a pointer to member intialized to null.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">MEMBER_TYPE</span>  <span class="org-constant">CLASS_NAME</span>::* <span class="org-variable-name">PointerVariableName</span> = nulltpr;
</pre>
</div>

<ul class="org-ul">
<li>Declare a pointer to member intialized to the address of some
member variable.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">MEMBER_TYPE</span>  <span class="org-constant">CLASS_NAME</span>::* <span class="org-variable-name">PointerVariableName</span> = &amp;<span class="org-constant">CLASS_NAME</span>::memberVariable;
</pre>
</div>

<p>
<b>Syntax for type alias/synonym of pointer to member data</b>
</p>

<ul class="org-ul">
<li><b>Before C++11</b> - type alias with the typedef keyword.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">typedef</span> <span class="org-type">MEMBER_TYPE</span> <span class="org-constant">CLASS_NAME</span>::* <span class="org-type">TypeAliasName</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Instance declaration: </span>
<span class="org-type">TypeAliasName</span> <span class="org-variable-name">pointerToMember</span>;
<span class="org-type">TypeAliasName</span> <span class="org-variable-name">pointerToMember</span> = <span class="org-constant">nullptr</span>;
<span class="org-type">TypeAliasName</span> <span class="org-variable-name">pointerToMember</span> = &amp;<span class="org-constant">CLASS_NAME</span>::MemeberVariable;
</pre>
</div>

<ul class="org-ul">
<li><b>C++11</b> - type alias with 'using' keyword</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">using</span> <span class="org-type">TypeAliasName</span> = MEMBER_TYPE <span class="org-constant">CLASS_NAME</span>::*;
<span class="org-comment-delimiter">// </span><span class="org-comment">Instance declaration: </span>
<span class="org-type">TypeAliasName</span> <span class="org-variable-name">pointerToMember</span>;
<span class="org-type">TypeAliasName</span> <span class="org-variable-name">pointerToMember</span> = <span class="org-constant">nullptr</span>;
<span class="org-type">TypeAliasName</span> <span class="org-variable-name">pointerToMember</span> = &amp;<span class="org-constant">CLASS_NAME</span>::MemeberVariable;
</pre>
</div>
</div>
</div>
<div id="outline-container-orga0ae294" class="outline-4">
<h4 id="orga0ae294"><span class="section-number-4">1.31.2</span> Example</h4>
<div class="outline-text-4" id="text-1-31-2">
<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">It could also be: struct Dummy{ ... }</span>
<span class="org-keyword">class</span> <span class="org-type">Dummy</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
        <span class="org-type">double</span>      <span class="org-variable-name">x</span>;
        <span class="org-type">double</span>      <span class="org-variable-name">y</span>;
        <span class="org-type">int</span>         <span class="org-variable-name">points</span>;
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span>;
        <span class="org-type">double</span>      <span class="org-variable-name">z</span>;
        <span class="org-type">char</span>        <span class="org-variable-name">ch</span>;
        <span class="org-function-name">Dummy</span><span class="org-rainbow-delimiters-depth-2">(){}</span>
        <span class="org-function-name">Dummy</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span>, <span class="org-type">int</span> <span class="org-variable-name">points</span>, <span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>:
                x<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>, y<span class="org-rainbow-delimiters-depth-2">(</span>y<span class="org-rainbow-delimiters-depth-2">)</span>, points<span class="org-rainbow-delimiters-depth-2">(</span>points<span class="org-rainbow-delimiters-depth-2">)</span>, name<span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">){}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Creating a test object: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt;  <span class="org-keyword">auto</span> obj = Dummy<span class="org-rainbow-delimiters-depth-1">(</span>20.2, 9.0, 10, <span class="org-string">"dummy"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; obj.x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 20.200000
&gt;&gt; obj.y
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 9.0000000
&gt;&gt; obj.points
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 10
&gt;&gt; obj.name
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"dummy"</span>
&gt;&gt; obj.z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.0000000
&gt;&gt; obj.ch
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-warning">'</span>0x00<span class="org-warning">'</span>

&gt;&gt; <span class="org-keyword">auto</span> obj2 = Dummy<span class="org-rainbow-delimiters-depth-1">(</span>100.0, -10.0, 70, <span class="org-string">"objectx"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Dummy</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fda2fd33060
&gt;&gt; 
</pre>
</div>

<p>
Create an initialized to null pointer to double member data: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">double</span> <span class="org-constant">Dummy</span>::* p_to_member_double = <span class="org-constant">nullptr</span>;
&gt;&gt; 
&gt;&gt; p_to_member_double
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-constant">Dummy</span>::*<span class="org-rainbow-delimiters-depth-1">)</span> @0x43cbed0
</pre>
</div>

<p>
Set pointer <code>p_to_member_double</code> to field x.
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; p_to_member_double = &amp;<span class="org-constant">Dummy</span>::x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-constant">Dummy</span>::*<span class="org-rainbow-delimiters-depth-1">)</span> @0x46bc260
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Acess field x of obj </span>
&gt;&gt; obj.* p_to_member_double
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 20.200000
&gt;&gt; 
&gt;&gt; obj.* p_to_member_double = -90.2
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -90.200000
&gt;&gt; obj.* p_to_member_double 
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -90.200000
&gt;&gt; obj.x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -90.200000
&gt;&gt;  

&gt;&gt; obj2.* p_to_member_double
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 100.00000
&gt;&gt; 

&gt;&gt; obj2.* p_to_member_double = 200.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 200.00000
&gt;&gt; obj2.x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 200.00000
&gt;&gt; 
</pre>
</div>

<p>
Set pointer <code>p_to_member_double</code> to field y.
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; p_to_member_double = &amp;<span class="org-constant">Dummy</span>::y;

&gt;&gt; obj.y
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 9.0000000
&gt;&gt; 
&gt;&gt; obj.* p_to_member_double
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 9.0000000
&gt;&gt; obj.* p_to_member_double = -190.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -190.00000
&gt;&gt; obj.* p_to_member_double
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -190.00000
&gt;&gt; obj.y
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -190.00000
&gt;&gt; 
&gt;&gt;

&gt;&gt; obj2.y
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -10.000000
&gt;&gt; obj2.* p_to_member_double
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -10.000000
&gt;&gt; 
&gt;&gt; obj2.* p_to_member_double = -900.223
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -900.22300
&gt;&gt; obj2.* p_to_member_double
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -900.22300
</pre>
</div>

<p>
Create a type alias to pointer to member of type double.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">C++11 =&gt; Better!!</span>
<span class="org-keyword">using</span> <span class="org-type">PointerToMemberDouble</span> = <span class="org-type">double</span> <span class="org-constant">Dummy</span>::*;
<span class="org-comment-delimiter">// </span><span class="org-comment">Old C++ standards =&gt; Cryptic  </span>
<span class="org-keyword">typedef</span> <span class="org-type">double</span> <span class="org-constant">Dummy</span>::* <span class="org-type">PointerToMemberDoubleTypedef</span> ; 

<span class="org-type">PointerToMemberDouble</span> <span class="org-variable-name">ptrdouble</span> = &amp;<span class="org-constant">Dummy</span>::z;

&gt;&gt; obj.* ptrdouble 
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.0000000

&gt;&gt; obj.z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.0000000

&gt;&gt; obj.* ptrdouble 
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.0000000

&gt;&gt; obj.* ptrdouble = 100.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 100.00000

&gt;&gt; obj.* ptrdouble 
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 100.00000

&gt;&gt; obj.z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 100.00000


&gt;&gt; obj2.z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.0000000

&gt;&gt; obj2.z = 600.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 600.00000

&gt;&gt; obj2.* ptrdouble 
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 600.00000

&gt;&gt; obj2.* ptrdouble = -100.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -100.00000

&gt;&gt; obj2.* ptrdouble 
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -100.00000

&gt;&gt; obj2.z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -100.00000
&gt;&gt; 
&gt;&gt; 

</pre>
</div>

<p>
Use pointer to member with object pointer. 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> pobj1 = &amp;obj
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Dummy</span> *<span class="org-rainbow-delimiters-depth-1">)</span> @0x7ffd126ee978

&gt;&gt; pobj1-&gt;y
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -190.00000
&gt;&gt; 

&gt;&gt; PointerToMemberDouble ptom_double = &amp;<span class="org-constant">Dummy</span>::y;
&gt;&gt; 
&gt;&gt; pobj1-&gt;* ptom_double
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -190.00000
&gt;&gt; 
&gt;&gt; pobj1-&gt;* ptom_double = -300.0;
&gt;&gt; 
&gt;&gt; pobj1-&gt;y
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -300.00000
&gt;&gt; 
</pre>
</div>

<p>
Get member offset: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">Class</span>, <span class="org-keyword">class</span> <span class="org-type">Field</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">size_t</span> <span class="org-function-name">getOffset</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Field</span> <span class="org-constant">Class</span>::*<span class="org-variable-name">fieldp</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 
        <span class="org-keyword">return</span> size_t<span class="org-rainbow-delimiters-depth-2">(</span>&amp;<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-4">&lt;</span><span class="org-type">Class</span>*<span class="org-rainbow-delimiters-depth-4">&gt;(</span><span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-4">)</span>-&gt;*fieldp<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; <span class="org-keyword">auto</span> offset_x = getOffset<span class="org-rainbow-delimiters-depth-1">(</span>&amp;<span class="org-constant">Dummy</span>::x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 0

&gt;&gt; <span class="org-keyword">auto</span> offset_y = getOffset<span class="org-rainbow-delimiters-depth-1">(</span>&amp;<span class="org-constant">Dummy</span>::y<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 8

&gt;&gt; <span class="org-keyword">auto</span> offset_z = getOffset<span class="org-rainbow-delimiters-depth-1">(</span>&amp;<span class="org-constant">Dummy</span>::z<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 56
&gt;&gt; 
&gt;&gt; <span class="org-keyword">auto</span> offset_name = getOffset<span class="org-rainbow-delimiters-depth-1">(</span>&amp;<span class="org-constant">Dummy</span>::name<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 24
&gt;&gt; <span class="org-keyword">auto</span> offset_points = getOffset<span class="org-rainbow-delimiters-depth-1">(</span>&amp;<span class="org-constant">Dummy</span>::points<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 16
</pre>
</div>

<p>
Access class member x using x offset.
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> p = &amp;obj
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Dummy</span> *<span class="org-rainbow-delimiters-depth-1">)</span> @0x7ffd126ee978

&gt;&gt; <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-3">)</span> p<span class="org-rainbow-delimiters-depth-2">)</span> + offset_x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7fda2fd33010

&gt;&gt; *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-3">)</span> p<span class="org-rainbow-delimiters-depth-2">)</span> + offset_x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -90.200000

&gt;&gt; *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-3">)</span> p<span class="org-rainbow-delimiters-depth-2">)</span> + offset_x<span class="org-rainbow-delimiters-depth-1">)</span> = -100.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -100.00000

&gt;&gt; p-&gt;x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -100.00000
&gt;&gt; 
&gt;&gt; 
&gt;&gt; <span class="org-type">double</span>&amp; xref1 = *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-3">)</span> p<span class="org-rainbow-delimiters-depth-2">)</span> + offset_x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -100.00000
&gt;&gt; xref1 = 900.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 900.00000
&gt;&gt; p-&gt;x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 900.00000
&gt;&gt; 


</pre>
</div>

<p>
Access class member z using z offset.
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; p-&gt;z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 100.00000
&gt;&gt; 

&gt;&gt; *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-3">)</span> p<span class="org-rainbow-delimiters-depth-2">)</span> + offset_z<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 100.00000
&gt;&gt; 

&gt;&gt; *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-3">)</span> p<span class="org-rainbow-delimiters-depth-2">)</span> + offset_z<span class="org-rainbow-delimiters-depth-1">)</span> = -200.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -200.00000

&gt;&gt; p-&gt;z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -200.00000
&gt;&gt; 

&gt;&gt; *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-3">)</span> &amp;obj2<span class="org-rainbow-delimiters-depth-2">)</span> + offset_z<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -100.00000

&gt;&gt; *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-3">)</span> &amp;obj2<span class="org-rainbow-delimiters-depth-2">)</span> + offset_z<span class="org-rainbow-delimiters-depth-1">)</span> = 300.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 300.00000

&gt;&gt; *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-3">)</span> &amp;obj2<span class="org-rainbow-delimiters-depth-2">)</span> + offset_z<span class="org-rainbow-delimiters-depth-1">)</span> = 300.0;

&gt;&gt; obj2.z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 300.00000
&gt;&gt; 
</pre>
</div>

<p>
Access field 'name' using its offset.
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; obj.name
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"dummy"</span>
&gt;&gt; 
&gt;&gt; *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-3">)</span> &amp;obj<span class="org-rainbow-delimiters-depth-2">)</span> + offset_name<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"dummy"</span>

&gt;&gt; *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-3">)</span> &amp;obj<span class="org-rainbow-delimiters-depth-2">)</span> + offset_name<span class="org-rainbow-delimiters-depth-1">)</span> = <span class="org-string">"P0WN3D"</span>;
&gt;&gt; obj.name
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"P0WN3D"</span>
&gt;&gt; 

&gt;&gt; obj.name
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"P0WN3D"</span>
</pre>
</div>

<p>
Generic solution for dealing with offsets: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">FIELD</span>, <span class="org-keyword">typename</span> <span class="org-type">CLASS</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">FIELD</span>* <span class="org-function-name">getFieldPointer</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">CLASS</span>&amp; <span class="org-variable-name">obj</span>, <span class="org-type">size_t</span> <span class="org-variable-name">offset</span> <span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-keyword">return</span> <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">FIELD</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-4">)</span> &amp;obj<span class="org-rainbow-delimiters-depth-3">)</span> + offset<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">FIELD</span>, <span class="org-keyword">typename</span> <span class="org-type">CLASS</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">FIELD</span> <span class="org-function-name">getFieldValue</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">CLASS</span>&amp; <span class="org-variable-name">obj</span>, <span class="org-type">size_t</span> <span class="org-variable-name">offset</span> <span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-keyword">return</span> *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">FIELD</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-4">)</span> &amp;obj<span class="org-rainbow-delimiters-depth-3">)</span> + offset<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Get object's members values by their offset: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> obj3 = Dummy<span class="org-rainbow-delimiters-depth-1">(</span>120.2, -89.0, 143, <span class="org-string">"blob"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; obj3.x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 120.20000
&gt;&gt; obj3.y
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -89.000000
&gt;&gt; obj3.z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.0000000
&gt;&gt; obj3.z = 45.0;
&gt;&gt; obj3.name;
&gt;&gt; 

&gt;&gt; 
&gt;&gt; getOffset<span class="org-rainbow-delimiters-depth-1">(</span>&amp;<span class="org-constant">Dummy</span>::x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 0
&gt;&gt; getOffset<span class="org-rainbow-delimiters-depth-1">(</span>&amp;<span class="org-constant">Dummy</span>::y<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 8
&gt;&gt; getOffset<span class="org-rainbow-delimiters-depth-1">(</span>&amp;<span class="org-constant">Dummy</span>::z<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 56
&gt;&gt; getOffset<span class="org-rainbow-delimiters-depth-1">(</span>&amp;<span class="org-constant">Dummy</span>::name<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 24
&gt;&gt; getOffset<span class="org-rainbow-delimiters-depth-1">(</span>&amp;<span class="org-constant">Dummy</span>::points<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 16
&gt;&gt; 

&gt;&gt; obj3.x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 120.20000

&gt;&gt; getFieldValue<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>obj3, 0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 120.20000
&gt;&gt; 

&gt;&gt; obj3.y
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -89.000000

&gt;&gt; getFieldValue<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>obj3, 8<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -89.000000
&gt;&gt; 

&gt;&gt; obj3.z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.0000000
&gt;&gt; obj3.z = 45.0;

&gt;&gt; getFieldValue<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>obj3, 56<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 45.000000
&gt;&gt; 

&gt;&gt; obj3.name
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"blob"</span>
&gt;&gt; 
&gt;&gt; getFieldValue<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>obj3, 24<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-string">"blob"</span>
</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2018-11-27 Tue 02:04</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
